@*@model WBBEntity.PanelModels.FBBWebConfigModels.LastmileAndCPEReportModel*@
@using WBBEntity.PanelModels;
@{ string L_PAGE_NAME = "Report Name : FBB Submit FOA Log";
    string L_PAGE_SEARCH_PANEL = "Search Panel";
    string L_PAGE_REPLACE_PANEL = "Replace To";

    string L_SEARCH_ACCESS_NO = "Access No";
    string L_SEARCH_ORDER_NUMBER = "Order Number";
    string L_SEARCH_STATUS = "Status";
    string L_SEARCH_PRODUCT_NAME = "Product Name";
    string L_SEARCH_ORDER_TYPE = "Order Type";
    string L_SEARCH_COMPANY_CODE = "Company Code";
    string L_SEARCH_SERVICE_NAME = "Service Name";
    string L_SEARCH_SUBCONTRACTOR_CODE = "Subcontractor Code";
    string L_SEARCH_PLANT = "Plant";
    string L_SEARCH_MATERIAL_CODE = "Material Code";
    string L_SEARCH_STOR_LOCATION = "Storage Location";
    string L_SEARCH_DATE_FROM = "Order Create From";
    string L_SEARCH_DATE_TO = "Order Create To";
    string L_SEARCH_ASSET_CLASS = "Asset Class";
    string L_SEARCH_ACTION = "Action";
    string L_REPLACE_MATERIAL_CODE = "Material Code";
    string L_REPLACE_SUBCONTRACTOR_CODE = "Subcontractor Code";
    string L_REPLACE_COMPANY_CODE = "Company Code";
    string L_REPLACE_POST_DATE = "Post Date";
    string L_REPLACE_STOR_LOCATION = "Storage Location";
    string L_REPLACE_PLANT = "Plant";
    string L_SEARCH_ERR_MSG = "Error Message";

    string L_GRID_ACCESS_NO = "Access No";
    string L_GRID_ORDER_NUMBER = "Order Number";
    string L_GRID_SUBCONTRACTOR_CODE = "Subcontractor Code";
    string L_GRID_SUBCONTRACTOR_NAME = "Subcontractor Name";
    string L_GRID_PRODUCT_NAME = "Product Name";
    string L_GRID_SERVICE_NAME = "Service Name";
    string L_GRID_ORDER_TYPE = "Order Type";
    string L_GRID_SUBMIT_FLAG = "Submit Flag";
    string L_GRID_REJECT_REASON = "Reject Reason";
    string L_GRID_OLT_NAME = "OLT Name";
    string L_GRID_BUILDING_NAME = "Building Name";
    string L_GRID_MOBILE_CONTACT = "Mobile Contact";
    string L_GRID_SUBMIT_DATE = "Submit Date";
    string L_GRID_STATUS = "Status";
    string L_GRID_SERIAL_NUMBER = "Serial Number";
    string L_GRID_MATERIAL_CODE = "Material Code";
    string L_GRID_COMPANY_CODE = "Company Code";
    string L_GRID_PLANT = "Plant";
    string L_GRID_STORAGE_LOCATION = "Storage Location";
    string L_GRID_SN_PATTERN = "SN Pattern";
    string L_GRID_MOVEMENT_TYPE = "Movement Type";
    string L_GRID_ERROR_CODE = "Error Code";
    string L_GRID_ERROR_MSG = "Error Message";
    string L_GRID_ASSET_CODE = "Asset Code";
    string L_GRID_SUB_NUMBER = "Sub Number";
    string L_GRID_INSTALLATION_COST = "Installation Cost";
    string L_GRID_ORDER_DATE = "Order Date";
    string L_GRID_MODIFY_DATE = "Modify Date";
    //BEGIN R17.11 Not use
    string L_GRID_REMARK = "Remark";
    string L_GRID_ACTION = "Action";
    //END

    ////begin 16.07.2018 main asset
    string L_MA_GRID_INTERNET_NO = "Access No";
    string L_MA_GRID_ORDER_NO = "Order No";
    string L_MA_GRID_ORDER_TYPE = "Order Type";
    string L_MA_GRID_FLAG_TYPE = "Flag Type";
    string L_MA_GRID_SUBCONTACT_CODE = "Subcontract Code";
    string L_MA_GRID_SUBCONTACT_NAME = "Subcontract Name";
    string L_MA_GRID_COMPANY_CODE = "Company Code";
    string L_MA_GRID_ASSET_CODE = "Asset Code";
    string L_MA_GRID_COST_CENTER = "Cost Center";
    string L_MA_GRID_PRODUCT = "Product Name";
    string L_MA_GRID_FOA_SUBMIT_DATE = "Submit Date";
    //end 16.07.2018 main asset


    ////begin 02.11.2018 revalue
    string L_SEARCH_MAINASSET = "Main Asset";
    string L_RV_GRID_INTERNET_NO = "Access No";
    string L_RV_GRID_ORDER_NO = "Order No";
    string L_RV_GRID_ORDER_TYPE = "Order Type";
    string L_RV_RUN_GROUP = "Run Group";
    string L_RV_GRID_ACTION = "Action";
    string L_RV_GRID_MAIN_ASSET = "Main Asset";
    string L_RV_GRID_SUBNUMBER = "Sub Number";
    string L_RV_GRID_COMPANY_CODE = "Company Code";
    string L_RV_GRID_DOC_DATE = "Doc Date";
    string L_RV_GRID_POST_DATE = "Post Date";
    string L_RV_GRID_REF_DOC_N = "Ref Doc No.";
    string L_RV_GRID_ITEM_TEXT = "Item Text";
    string L_RV_GRID_ERROR_CODE = "Error Code";
    string L_RV_GRID_ERROR_MESSAGE = "Error Message";

    //end  02.11.2018 revalue

    string L_POPUP_PRODUCT_LIST = "Submit FOA Resend";
    string B_NEW = "New Rate";
    string B_SEARCH = "Search";
    string B_CANCEL = "Cancel";
    string B_RESEND = "Resend";
    string B_EDIT = "Edit";
    string B_DELETE = "Delete";
    string B_PAGE_CANCEL = "Clear";
    string B_PAGE_SEARCH = "Search";
    string B_PAGE_EXPORT = "Export to Excel";
    string B_RESEND_ALL = "Resend";
    string B_RESEND_TO_SELECT = "Resend Error";
    bool postdate_disable = false;
    bool mainasset_disable = false;


    // begin 21/01/2020 Edit change status
    string L_MATERIAL_DOC = "Material Doc";
    string L_DOC_YEAR = "Doc Year";
    string B_SUBMIT = "Submit";
    string B_CLOSE = "Close";
    //end

    // 3BB Integration Track OSS Multi Company
    string L_PRODUCT_OWNER = "Product Owner";
    // end
    //add trans id
    string L_GRID_TRANS_ID = "trans id";
    // end

    if (ViewBag.configscreen != null)
    {
        var configscreen = (List<LovValueModel>)ViewBag.configscreen;
        List<string> user_id = new List<string>();
        var user_foa = configscreen.Any(x => x.Name == "USER_ID_FOA") ? configscreen.Where(x => x.Name == "USER_ID_FOA").FirstOrDefault().LovValue1 : "";
        user_id = (user_foa != "") ? user_foa.Split(',').ToList() : null;
        string currentuser = ViewBag.User.UserId.ToString();


        if (user_id != null)
        {
            if (user_id.Contains(currentuser))
            {
                postdate_disable = true;
            }
        }

        //List<string> user_id_main = new List<string>();
        //if (ViewBag.UserMainAsset != null)
        //{
        //    var configusermain = (WBBEntity.PanelModels.FBBWebConfigModels.FbssConfigTBL)ViewBag.UserMainAsset;
        //    user_id_main = (configusermain.VAL1 != "") ? configusermain.VAL1.Split(',').ToList() : null;
        //    string currentusermain = ViewBag.User.UserId.ToString();
        //    if (user_id_main.Contains(currentusermain))
        //    {
        //        mainasset_disable = true;
        //    }
        //}
    } }

<html>

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Index</title>
    <style>
        .col-sm-3 {
            width: 23.4%;
        }

        .col-sm-3, .col-xs-6 {
            position: relative;
            min-height: 1px;
            padding-left: 15px;
            padding-right: inherit;
        }

        #product-list thead th {
            text-align: center;
        }

        .calendar-resend.k-textbox .k-icon {
            top: 54%;
            margin: -8px 0 0;
            position: absolute;
            left: 19%;
        }

        .color-red {
            color: red !important;
        }

        .k-grid tr td {
            border-bottom: 1px solid #b8b7b7;
        }

        #gridOverviewStatus.k-widget.k-grid.k-grid-lockedcolumns div.k-grid-header div.k-grid-header-wrap {
            /*width: 1439px;
            min-width: 885px;*/
            max-width: 100% !important;
        }

        #gridOverviewStatus.k-widget.k-grid.k-grid-lockedcolumns div.k-grid-content {
            height: auto;
            /*width: 1456px;
            min-width: 902px;*/
            max-width: 100% !important;
            max-height: 300px;
        }

        #gridOverviewStatus2.k-widget.k-grid div.k-grid-header div.k-grid-header-wrap {
            /*min-width: 885px;*/
            max-width: 100% !important;
        }

        #gridOverviewStatus2.k-widget.k-grid div.k-grid-content {
            /* height: auto;
            min-width: 902px;*/
            max-width: 100% !important;
            max-height: 300px;
        }

        #gridOverviewStatus4.k-widget.k-grid.k-grid-lockedcolumns div.k-grid-header div.k-grid-header-wrap {
            max-width: 100%;
        }

        #gridOverviewStatus4.k-widget.k-grid.k-grid-lockedcolumns div.k-grid-content {
            max-width: 100%;
            max-height: 300px;
        }

        #gridOverviewStatus4.k-widget.k-grid.k-grid-lockedcolumns div.k-grid-header div.k-grid-header-wrap table {
            width: 1475px !important;
            max-width: 1475px;
        }

        #gridOverviewStatus4.k-widget.k-grid.k-grid-lockedcolumns div.k-grid-content table {
            width: 1475px !important;
            max-width: 1475px;
        }
    </style>
</head>
<body>
    <div class="page-header i-header-fit">
        <div class="row">
            <div class="col-sm-12 col-md-12">
                <h3 style="margin-top: 0">@L_PAGE_NAME</h3>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-12">
            <div class="panel panel-success" id="divSearch">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <span>@L_PAGE_SEARCH_PANEL</span>
                        <a data-toggle="collapse" class="pull-right" href="#SearchPanel" onclick="onPanelToggle(this);" id="SearchPanelHeader"><i class="fa fa-chevron-circle-down fa-lg" id="SearchPanelHeaderArrow"></i></a>
                    </h3>
                </div>
                <div id="SearchPanel" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <div id="Row1" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ACCESS_NO</label>
                                <div class="i-fg-data-entry">
                                    @(Html.TextBox("txtSearchAccessNo", null, new { @class = "k-textbox", maxlength = "50", autocomplete = "off", style = "width: 100%;" }))
                                </div>
                                <div class="i-fg-data-entry-validation" id="validatefor-ACCESSNO"></div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ORDER_NUMBER</label>
                                <div class="i-fg-data-entry">
                                    @(Html.TextBox("txtSearchOrderNo", null, new { @class = "k-textbox", maxlength = "50", autocomplete = "off", style = "width: 100%;" }))
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_STATUS</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlStatus")
                                                                                                                                                                                .DataTextField("LOV_NAME")
                                                                                                                                                                                .DataValueField("LOV_VAL1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLStatus", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row1*@
                        <div id="Row2" class="row">
                            @* i-gap-top-1*@
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_PRODUCT_NAME</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlProductName")
                                                                                                                                                                                .DataTextField("LOV_NAME")
                                                                                                                                                                                .DataValueField("LOV_VAL1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLProductName", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ORDER_TYPE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlOrderType")
                                                                                                                                                                                .DataTextField("LOV_NAME")
                                                                                                                                                                                .DataValueField("LOV_VAL1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLOrderType", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_COMPANY_CODE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlCompanyCode")
                                                                                                                                                                                .DataTextField("LOV_NAME")
                                                                                                                                                                                .DataValueField("LOV_VAL1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLCompanyCode", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                })
                                                                                                                                                                                //.Events(e => e.Change("OnCompanyCodeChange"))
                                                                                                                                                                                .SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row2*@
                        <div id="Row3" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_SERVICE_NAME</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlServiceName")
                                                                                                                                                                                .DataTextField("LOV_NAME")
                                                                                                                                                                                .DataValueField("LOV_VAL1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLServiceName", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_SUBCONTRACTOR_CODE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlSubcontractorCode")
                                                                                                                                                                                .DataTextField("LOV_NAME")
                                                                                                                                                                                .DataValueField("LOV_VAL1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .Filter("contains")
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLSubcontractorCode", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_PLANT</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlPlant")
                                                                                                                                                                                .DataTextField("LOV_NAME")
                                                                                                                                                                                .DataValueField("LOV_VAL1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLPlant", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row3*@
                        <div id="Row4" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_MATERIAL_CODE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlMaterialCode")
                                                                                                                                                                                .DataTextField("LOV_NAME")
                                                                                                                                                                                .DataValueField("LOV_VAL1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .Filter("contains")
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLMaterialCode", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_STOR_LOCATION</label>
                                <div class="i-fg-data-entry">
                                    <div class="i-fg-data-entry">
                                        @(Html.TextBox("txtSearchStorLocation", null, new { @class = "k-textbox", maxlength = "5", autocomplete = "off", style = "width: 100%;" }))
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ERR_MSG</label>
                                <div class="i-fg-data-entry">
                                    <div class="i-fg-data-entry">
                                        @(Html.TextBox("txtSearchERRMSG", null, new { @class = "k-textbox", autocomplete = "off", style = "width: 100%;" }))
                                    </div>
                                </div>
                            </div>
                        </div>
                        @*end row5*@
                    <div id="Row5" class="row" style="padding-bottom:15px">
                        <div class="col-sm-4 col-md-4">
                            <label>@L_SEARCH_DATE_FROM</label>
                            <div class="i-fg-data-entry">
                                @(Html.Kendo().DatePicker().Name("dtpDateFrom")
                                                                                                             .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                             .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                                                             .Format("dd/MM/yyyy")
                                                                                                             .Min(new DateTime(1900, 1, 1))
                                                                                                             .Max(new DateTime(2099, 12, 31))
                                                                                                             .Events(e => e.Change("ChangdtpDateFrom"))
                                    )
                            </div>
                            <div class="i-fg-data-entry-validation" id="validatefor-dtpDateFrom"></div>
                            <span class="k-invalid-msg" data-for="PickupDate"></span>
                        </div>
                        <div class="col-sm-4 col-md-4">
                            <label>@L_SEARCH_DATE_TO</label>
                            <div class="i-fg-data-entry">
                                @(Html.Kendo().DatePicker().Name("dtpDateTo")
                                                                                                    .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                    .Format("dd/MM/yyyy")
                                                                                                    .Min(new DateTime(1900, 1, 1))
                                                                                                    .Max(new DateTime(2099, 12, 31))
                                                                                                    .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                                                    .Events(e => e.Change("ChangdtpDateTo"))
                                    )
                            </div>
                            <div class="i-fg-data-entry-validation" id="validatefor-dtpDateTo"></div>
                        </div>
                        <div class="col-sm-4 col-md-4">
                            <label>@L_PRODUCT_OWNER</label>
                            <div class="i-fg-data-entry">
                                @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlProductOwner")
                                                                                                                                                                                .DataTextField("LovValue1")
                                                                                                                                                                                .DataValueField("LovValue1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLProductOwner", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                })
                                                                                                                                                                                .SelectedIndex(0)
                                    )
                            </div>
                        </div>
                    </div>


                        @*<div id="Row5" class="row">
                                <div class="col-sm-4 col-md-4">
                                    <label>@L_SEARCH_DATE_FROM</label>
                                    <div class="i-fg-data-entry">
                                        @(Html.Kendo().DatePicker().Name("dtpCsApproveDateFrom")
                                                                                      .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                      .Format("dd/MM/yyyy")
                                                                                      .Min(new DateTime(1900, 1, 1))
                                                                                      .Max(new DateTime(2099, 12, 31))
                                                                                      .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                                      .Events(e => e.Change("")))
                                    </div>
                                    <div class="i-fg-data-entry-validation" id="validatefor-dtpCsApproveDateFrom"></div>
                                    <span class="k-invalid-msg" data-for="PickupDate"></span>
                                </div>
                                <div class="col-sm-4 col-md-4">
                                    <label>@L_SEARCH_DATE_FROM</label>
                                    <div class="i-fg-data-entry">
                                        @(Html.Kendo().DatePicker().Name("dtpCsApproveDateTo")
                                                                                      .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                      .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                                      .Format("dd/MM/yyyy")
                                                                                      .Min(new DateTime(1900, 1, 1))
                                                                                      .Max(new DateTime(2099, 12, 31))
                                                                                      .Events(e => e.Change(""))
                                        )
                                    </div>
                                    <div class="i-fg-data-entry-validation" id="validatefor-dtpCsApproveDateTo"></div>
                                </div>
                            </div>*@


                        <input type="hidden" id="chksearch" name="chksearch" value="" />  @*//flag for searchpage*@
                        <input type="hidden" id="chkresend" name="chkresend" value="" /> @*//flag for resend*@
                        @*end row5*@
                        <div id="Row6" class="row">
                            <div class="col-sm-6 col-md-6">
                                <div class="i-text-align-right">
                                </div>
                            </div>
                            <div class="col-sm-6 col-md-6 i-text-align-right">
                                <a class="btn btn-default" onclick="_Clear();"><i class="fa fa-ban fa-lg"></i>&nbsp;&nbsp;@B_PAGE_CANCEL</a>
                                <button class="btn btn-info" id="btnchksearch" onclick="_Search();"><i class="fa fa-search fa-lg"></i>&nbsp;&nbsp;@B_PAGE_SEARCH</button>
                            </div>
                        </div>
                        @*end row6*@
                    </div>
                    @*end SearchPanel*@
                </div>
            </div>

            <div class="panel panel-success" style="display:none" id="divRevalueSearch">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <span>@L_PAGE_SEARCH_PANEL</span>
                        <a data-toggle="collapse" class="pull-right" href="#SearchPanel3" onclick="onPanelToggle(this);"><i class="fa fa-chevron-circle-down fa-lg"></i></a>
                    </h3>
                </div>
                <div id="SearchPanel2" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <div id="Row1" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ACCESS_NO</label>
                                <div class="i-fg-data-entry">
                                    @(Html.TextBox("txtRVSearchAccessNo", null, new { @class = "k-textbox", maxlength = "50", autocomplete = "off", style = "width: 100%;" }))
                                </div>
                                <div class="i-fg-data-entry-validation" id="validatefor-RVACCESSNO"></div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ORDER_NUMBER</label>
                                <div class="i-fg-data-entry">
                                    @(Html.TextBox("txtRVSearchOrderNo", null, new { @class = "k-textbox", maxlength = "50", autocomplete = "off", style = "width: 100%;" }))
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_STATUS</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                        .Name("ddlRVStatus")
                                                                                                                                                        .DataTextField("LOV_NAME")
                                                                                                                                                        .DataValueField("LOV_VAL1")
                                                                                                                                                        .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                        .DataSource(source =>
                                                                                                                                                        {
                                                                                                                                                            source.Read(read =>
                                                                                                                                                            {
                                                                                                                                                                read.Action("SetDDLStatus", "SubmitFOAReport");
                                                                                                                                                            });
                                                                                                                                                        }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row1*@
                        <div id="Row2" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_MAINASSET</label>
                                <div class="i-fg-data-entry">
                                    @(Html.TextBox("txtRVMainAsset", null, new { @class = "k-textbox", maxlength = "50", autocomplete = "off", style = "width: 100%;" }))
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_COMPANY_CODE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                        .Name("ddlRVCompanyCode")
                                                                                                                                                        .DataTextField("LOV_NAME")
                                                                                                                                                        .DataValueField("LOV_VAL1")
                                                                                                                                                        .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                        .DataSource(source =>
                                                                                                                                                        {
                                                                                                                                                            source.Read(read =>
                                                                                                                                                            {
                                                                                                                                                                read.Action("SetDDLCompanyCode", "SubmitFOAReport");
                                                                                                                                                            });
                                                                                                                                                        })
                                                                                                                                                        //.Events(e => e.Change("OnCompanyCodeChange"))
                                                                                                                                                        .SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ACTION</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                        .Name("ddlRVAction")
                                                                                                                                                        .DataTextField("LOV_NAME")
                                                                                                                                                        .DataValueField("LOV_VAL1")
                                                                                                                                                        .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                        .DataSource(source =>
                                                                                                                                                        {
                                                                                                                                                            source.Read(read =>
                                                                                                                                                            {
                                                                                                                                                                read.Action("SetDDLAction", "SubmitFOAReport");
                                                                                                                                                            });
                                                                                                                                                        })
                                                                                                                                                        .SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row2*@

                        @*end row5*@
                        <div id="Row5" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_DATE_FROM</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DatePicker().Name("dtpRVDateFrom")
                                                                                                                                                         .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                         .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                                                                                                         .Format("dd/MM/yyyy")
                                                                                                                                                         .Min(new DateTime(1900, 1, 1))
                                                                                                                                                         .Max(new DateTime(2099, 12, 31))
                                                                                                                                                         .Events(e => e.Change("ChangdtpRVDateFrom"))
                                    )
                                </div>
                                <div class="i-fg-data-entry-validation" id="validatefor-dtpRVDateFrom"></div>
                                <span class="k-invalid-msg" data-for="PickupDate"></span>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_DATE_TO</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DatePicker().Name("dtpRVDateTo")
                                                                                                                                                         .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                         .Format("dd/MM/yyyy")
                                                                                                                                                         .Min(new DateTime(1900, 1, 1))
                                                                                                                                                         .Max(new DateTime(2099, 12, 31))
                                                                                                                                                         .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                                                                                                         .Events(e => e.Change("ChangdtpRVDateTo"))
                                    )
                                </div>
                                <div class="i-fg-data-entry-validation" id="validatefor-dtpRVDateTo"></div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ERR_MSG</label>
                                <div class="i-fg-data-entry">
                                    <div class="i-fg-data-entry">
                                        @(Html.TextBox("txtRVSearchERRMSG", null, new { @class = "k-textbox", autocomplete = "off", style = "width: 100%;" }))
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div id="Row7" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_PRODUCT_OWNER</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                .Name("ddlRevalueProductOwner")
                                                                                                                                                                                .DataTextField("LovValue1")
                                                                                                                                                                                .DataValueField("LovValue1")
                                                                                                                                                                                .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                .DataSource(source =>
                                                                                                                                                                                {
                                                                                                                                                                                    source.Read(read =>
                                                                                                                                                                                    {
                                                                                                                                                                                        read.Action("SetDDLProductOwner", "SubmitFOAReport");
                                                                                                                                                                                    });
                                                                                                                                                                                })
                                                                                                                                                                                .SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        <div id="Row6" class="row" style="padding-top:10px">
                            <div class="col-sm-6 col-md-6">
                                <div class="i-text-align-right">
                                </div>
                            </div>
                            <div class="col-sm-6 col-md-6 i-text-align-right">
                                <a class="btn btn-default" onclick="_Clear();"><i class="fa fa-ban fa-lg"></i>&nbsp;&nbsp;@B_PAGE_CANCEL</a>
                                <a class="btn btn-info" onclick="_SearchRevalue();"><i class="fa fa-search fa-lg"></i>&nbsp;&nbsp;@B_PAGE_SEARCH</a>
                            </div>
                        </div>
                        @*end row6*@
                    </div>
                    @*end SearchPanel*@
                </div>
            </div>

            <div class="panel panel-success" style="display:none" id="divMainAssetSearch">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <span>@L_PAGE_SEARCH_PANEL</span>
                        <a data-toggle="collapse" class="pull-right" href="#SearchPanel2" onclick="onPanelToggle(this);"><i class="fa fa-chevron-circle-down fa-lg"></i></a>
                    </h3>
                </div>
                <div id="SearchPanel2" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <div id="Row1" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ACCESS_NO</label>
                                <div class="i-fg-data-entry">
                                    @(Html.TextBox("txtMASearchAccessNo", null, new { @class = "k-textbox", maxlength = "50", autocomplete = "off", style = "width: 100%;" }))
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ORDER_NUMBER</label>
                                <div class="i-fg-data-entry">
                                    @(Html.TextBox("txtMASearchOrderNo", null, new { @class = "k-textbox", maxlength = "50", autocomplete = "off", style = "width: 100%;" }))
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_STATUS</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                        .Name("ddlMAStatus")
                                                                                                                                                        .DataTextField("LOV_NAME")
                                                                                                                                                        .DataValueField("LOV_VAL1")
                                                                                                                                                        .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                        .DataSource(source =>
                                                                                                                                                        {
                                                                                                                                                            source.Read(read =>
                                                                                                                                                            {
                                                                                                                                                                read.Action("SetDDLMainAssetStatus", "SubmitFOAReport");
                                                                                                                                                            });
                                                                                                                                                        }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row1*@
                        <div id="Row2" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_COMPANY_CODE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                        .Name("ddlMACompanyCode")
                                                                                                                                                        .DataTextField("LOV_NAME")
                                                                                                                                                        .DataValueField("LOV_VAL1")
                                                                                                                                                        .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                        .DataSource(source =>
                                                                                                                                                        {
                                                                                                                                                            source.Read(read =>
                                                                                                                                                            {
                                                                                                                                                                read.Action("SetDDLCompanyCode", "SubmitFOAReport");
                                                                                                                                                            });
                                                                                                                                                        })
                                                                                                                                                        //.Events(e => e.Change("OnCompanyCodeChange"))
                                                                                                                                                        .SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_ASSET_CLASS</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                        .Name("ddlMAAssetClass")
                                                                                                                                                        .DataTextField("LOV_NAME")
                                                                                                                                                        .DataValueField("LOV_VAL1")
                                                                                                                                                        .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                        .DataSource(source =>
                                                                                                                                                        {
                                                                                                                                                            source.Read(read =>
                                                                                                                                                            {
                                                                                                                                                                read.Action("SetDDLAssetClass", "SubmitFOAReport");
                                                                                                                                                            });
                                                                                                                                                        })
                                                                                                                                                        .SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row2*@

                        @*end row5*@
                        <div id="Row5" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_DATE_FROM</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DatePicker().Name("dtpMaDateFrom")
                                                                        .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                        .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                        .Format("dd/MM/yyyy")
                                                                        .Min(new DateTime(1900, 1, 1))
                                                                        .Max(new DateTime(2099, 12, 31))
                                                                .Events(e => e.Change("ChangdtpMaDateFrom"))
                                    )
                                </div>
                                <div class="i-fg-data-entry-validation" id="validatefor-dtpMaDateFrom"></div>
                                <span class="k-invalid-msg" data-for="PickupDate"></span>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_SEARCH_DATE_TO</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DatePicker().Name("dtpMaDateTo")
                                                                      .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                       .Format("dd/MM/yyyy")
                                                                        .Min(new DateTime(1900, 1, 1))
                                                                                                                                                         .Max(new DateTime(2099, 12, 31))
                                                                                                                                                         .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                                                                                                         .Events(e => e.Change("ChangdtpMaDateTo"))
                                    )
                                </div>
                                <div class="i-fg-data-entry-validation" id="validatefor-dtpMaDateTo"></div>
                            </div>
                        </div>
                        @*end row5*@
                        <div id="Row6" class="row">
                            <div class="col-sm-6 col-md-6">
                                <div class="i-text-align-right">
                                </div>
                            </div>
                            <div class="col-sm-6 col-md-6 i-text-align-right">
                                <a class="btn btn-default" onclick="_Clear();"><i class="fa fa-ban fa-lg"></i>&nbsp;&nbsp;@B_PAGE_CANCEL</a>
                                <a class="btn btn-info" onclick="_SearchMainAsset();"><i class="fa fa-search fa-lg"></i>&nbsp;&nbsp;@B_PAGE_SEARCH</a>
                            </div>
                        </div>
                        @*end row6*@
                    </div>
                    @*end SearchPanel*@
                </div>
            </div>
        </div>
    </div>
    <div class="row" style="display: none;" id="replace_panel">
        <div class="col-sm-12 col-md-12">
            <div class="panel panel-success">
                <div class="panel-heading">
                    <h3 class="panel-title">
                        <span>@L_PAGE_REPLACE_PANEL</span>
                        <a data-toggle="collapse" class="pull-right" href="#SearchPanel2" onclick="onPanelToggle(this);" id="SearchPanelHeader2"><i class="fa fa-chevron-circle-down fa-lg" id="SearchPanelHeaderArrow2"></i></a>
                    </h3>
                </div>
                <div id="SearchPanel2" class="panel-collapse collapse in">
                    <div class="panel-body">
                        <div id="Row21" class="row">
                            @* i-gap-top-1*@
                            <div class="col-sm-4 col-md-4">
                                <label>@L_REPLACE_MATERIAL_CODE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                            .Name("ddlReMaterialCode")
                                                                                                                                                                    .DataTextField("LOV_VAL1")
                                                                                                                                                                    .DataValueField("LOV_NAME")
                                                                                                                                                            .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                            .Filter("contains")
                                                                                                                                                            .DataSource(source =>
                                                                                                                                                            {
                                                                                                                                                                source.Read(read =>
                                                                                                                                                                {
                                                                                                                                                                    read.Action("SetDDLMaterialCode", "SubmitFOAReport", new { grid = "grid" });
                                                                                                                                                                });
                                                                                                                                                            }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_REPLACE_SUBCONTRACTOR_CODE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                            .Name("ddlReSubcontractorCode")
                                                                                                                                                                    .DataTextField("LOV_VAL1")
                                                                                                                                                                    .DataValueField("LOV_NAME")
                                                                                                                                                            .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                            .Filter("contains")
                                                                                                                                                            .DataSource(source =>
                                                                                                                                                            {
                                                                                                                                                                source.Read(read =>
                                                                                                                                                                {
                                                                                                                                                                    read.Action("SetDDLSubcontractorCode", "SubmitFOAReport", new { grid = "grid" });
                                                                                                                                                                });
                                                                                                                                                            }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_REPLACE_COMPANY_CODE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                            .Name("ddlReCompanyCode")
                                                                                                                                                                    .DataTextField("LOV_VAL1")
                                                                                                                                                                    .DataValueField("LOV_NAME")
                                                                                                                                                            .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                            .DataSource(source =>
                                                                                                                                                            {
                                                                                                                                                                source.Read(read =>
                                                                                                                                                                {
                                                                                                                                                                    read.Action("SetDDLCompanyCode", "SubmitFOAReport", new { grid = "grid" });
                                                                                                                                                                });
                                                                                                                                                            })
                                                                                                                                                            //.Events(e => e.Change("OnReCompanyCodeChange"))
                                                                                                                                                            .SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row21*@
                        <div id="Row22" class="row">
                            <div class="col-sm-4 col-md-4">
                                <label>@L_REPLACE_POST_DATE</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DatePicker().Name("dtpPostDate")
                                                                                                                                                             .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                             .Format("dd/MM/yyyy")
                                                                                                                                                             .Min(new DateTime(1900, 1, 1))
                                                                                                                                                             .Max(new DateTime(2099, 12, 31))
                                                                                                                                                             .ParseFormats(new List<string> { "dd/MM/yyyy" })
                                                                                                                                                             .Enable(postdate_disable)
                                    )
                                </div>
                                <div class="i-fg-data-entry-validation" id="validatefor-dtpPostDate"></div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_REPLACE_STOR_LOCATION</label>
                                <div class="i-fg-data-entry">
                                    <div class="i-fg-data-entry">
                                        @(Html.TextBox("txtReStorLocation", null, new { @class = "k-textbox", maxlength = "5", autocomplete = "off", style = "width: 100%;" }))
                                    </div>
                                </div>
                            </div>
                            <div class="col-sm-4 col-md-4">
                                <label>@L_REPLACE_PLANT</label>
                                <div class="i-fg-data-entry">
                                    @(Html.Kendo().DropDownList()
                                                                                                                                                            .Name("ddlRePlant")
                                                                                                                                                                     .DataTextField("LOV_VAL1")
                                                                                                                                                                            .DataValueField("LOV_NAME")
                                                                                                                                                            .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                            .DataSource(source =>
                                                                                                                                                            {
                                                                                                                                                                source.Read(read =>
                                                                                                                                                                {
                                                                                                                                                                    read.Action("SetDDLPlant", "SubmitFOAReport", new { grid = "grid" });
                                                                                                                                                                });
                                                                                                                                                            }).SelectedIndex(0)
                                    )
                                </div>
                            </div>
                        </div>
                        @*end row22*@
                        <div id="Row23" class="row i-gap-top-1">
                            <div class="col-sm-6 col-md-6">
                                <div class="i-text-align-right">
                                </div>
                            </div>
                            <div class="col-sm-6 col-md-6 i-text-align-right">
                                <a style="display: none;" onclick='modalConfirmShow()' id='btnUpdate' class='btn btn-default'><i class='fa fa-save fa-lg'></i>&nbsp; @B_RESEND_TO_SELECT </a>
                            </div>
                        </div>
                        @*end row23*@
                    </div>
                    @*end SearchPanel2*@
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-12 col-md-12" style="margin-bottom: 10px;">


            <div class='pull-right'>
                <a onclick='modalConfirmShowResendAll()' id='btnResendAll' class='btn btn-success'><i class='fa fa-repeat fa-lg'></i>&nbsp; @B_RESEND_ALL </a>&nbsp;
            </div>
            <div class='pull-right pull-center'>
                <a onclick='_ExportToExcel()' id='btnExport' class='btn btn-default'><i class='fa fa-file-excel-o  fa-lg'></i>&nbsp; @B_PAGE_EXPORT </a>&nbsp;
            </div>
            <div class='pull-right'>
                <a class="btn btn-info" id="btimpfileresend" onclick="importfileresend();"><i class="fa fa-pencil-square-o"></i>&nbsp;&nbsp;ResendByFile</a>&nbsp;

            </div>
        </div>
    </div>

    <div id="gridresult" class="row">
        <div class="col-sm-12 col-md-12 ">
            <div class="demo-section wide grid">
                @(Html.Kendo().TabStrip()
                                                                                                                                    .Name("SoftwareTabStrip")
                                                                                                                                    .Events(events => events
                                                                                                                                            .Select("onSelect")
                                                                                                                                        )
                                                                                                                                    .Animation(animation => animation.Open(effect => effect.Fade(FadeDirection.In)))
                                                                                                                                    .Items(tabstrip =>
                                                                                                                                    {
                                                                                                                                        tabstrip.Add()
                                                                                                                                                .Text("EQUIPMENT")
                                                                                                                                                .Selected(true)
                                                                                                                                                .Content(@<text>
                                                                                                                                                    @(Html.Kendo().Grid<WBBEntity.PanelModels.FBBWebConfigModels.SubmitFOAEquipment>()
                                                                                                                                                                                                                                                                    .Name("gridOverviewStatus")
                                                                                                                                                                                                                                                                    .Columns(columns =>
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ACCESS_NUMBER).HeaderTemplate("<input id='selectall' class='chkbx' type='checkbox' onclick='ToggleChkBox(this.checked);' />")
                                                                                                                                                                                                                                                                                                           .ClientTemplate("" +
                                                                                                                                                                                                                                                                                                            "# if (STATUS == 'ERROR' || STATUS == 'Pending') {#" +
                                                                                                                                                                                                                                                                                                            "<input id='checkbox' onclick='grdChkBoxClick(this); ' class='chkbxq' type='checkbox' />" +
                                                                                                                                                                                                                                                                                                            "#}#"
                                                                                                                                                                                                                                                                                                           )
                                                                                                                                                                                                                                                                                                           .HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Locked(true).Lockable(false).Sortable(false).Filterable(false).Width(30);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ACCESS_NUMBER).Title(@L_GRID_ACCESS_NO)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(ACCESS_NUMBER,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(120).Locked(true);

                                                                                                                                                                                                                                                                        columns.Bound(p => p.PRODUCT_OWNER).Title(@L_PRODUCT_OWNER)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(PRODUCT_OWNER,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(150).Locked(true);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ORDER_NO).Title(@L_GRID_ORDER_NUMBER)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(ORDER_NO,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.SUBCONTRACT_CODE).Title(@L_GRID_SUBCONTRACTOR_CODE)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnDropdownlist('SUBCONTRACT_CODE',SUBCONTRACT_CODE,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(180);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.SUBCONTRACT_NAME).Title(@L_GRID_SUBCONTRACTOR_NAME)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(SUBCONTRACT_NAME,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(300);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.PRODUCT_NAME).Title(@L_GRID_PRODUCT_NAME)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(PRODUCT_NAME,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ORDER_TYPE).Title(@L_GRID_ORDER_TYPE)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(ORDER_TYPE,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(100);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.SUBMIT_DATE).Title(@L_GRID_SUBMIT_DATE)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(SUBMIT_DATE,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.SN).Title(@L_GRID_SERIAL_NUMBER)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(SN,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(180);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.MATERIAL_CODE).Title(@L_GRID_MATERIAL_CODE)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnDropdownlist('MATERIAL_CODE',MATERIAL_CODE,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.COMPANY_CODE).Title(@L_GRID_COMPANY_CODE)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnDropdownlist('COMPANY_CODE',COMPANY_CODE,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.PLANT).Title(@L_GRID_PLANT)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnDropdownlist('PLANT',PLANT,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(100);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.STORAGE_LOCATION).Title(@L_GRID_STORAGE_LOCATION)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnDropdownlist('STORAGE_LOCATION',STORAGE_LOCATION,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(180);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.SN_TYPE).Title(@L_GRID_SN_PATTERN)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnDropdownlist('SNPattern',SN_TYPE,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(120);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.MOVEMENT_TYPE_OUT).Title(@L_GRID_MOVEMENT_TYPE)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(MOVEMENT_TYPE_OUT,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(140);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ERR_CODE).Title(@L_GRID_ERROR_CODE)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(ERR_CODE,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(120);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ERR_MSG).Title(@L_GRID_ERROR_MSG)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(ERR_MSG,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(300);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.TRANS_ID).Title(@L_GRID_TRANS_ID)
                                                                                                                                                                                                                                                                            .ClientTemplate("#=setColumnLable(TRANS_ID,STATUS)#")
                                                                                                                                                                                                                                                                            .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(300);

                                                                                                                                                                                                                                                                        columns.Bound(p => p.ACCESS_NUMBER).ClientTemplate("" +
                                                                                                                                                                                                                                                                            "# if(STATUS != 'PENDING' && STATUS != 'COMPLETE') {#" +
                                                                                                                                                                                                                                                                            "<a class='k-button k-button-icontext k-grid-Edit' onclick='EditEquipmentError(this);'>" +
                                                                                                                                                                                                                                                                            "<i class='fa fa-pencil-square-o fa-lg'></i>" +
                                                                                                                                                                                                                                                                            "</a>" +
                                                                                                                                                                                                                                                                            "#}#"
                                                                                                                                                                                                                                                                            ).Title("ACTION").HtmlAttributes(new { style = "text-align:center;" }).Width(100);

                                                                                                                                                                                                                                                                        columns.Bound(p => p.SERVICE_NAME).Title(@L_GRID_SERVICE_NAME).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                        columns.Bound(p => p.SUBMIT_FLAG).Title(@L_GRID_SUBMIT_FLAG).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                        columns.Bound(p => p.REJECT_REASON).Title(@L_GRID_REJECT_REASON).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                        columns.Bound(p => p.OLT_NAME).Title(@L_GRID_OLT_NAME).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                        columns.Bound(p => p.BUILDING_NAME).Title(@L_GRID_BUILDING_NAME).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                        columns.Bound(p => p.MOBILE_CONTACT).Title(@L_GRID_MOBILE_CONTACT).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                        columns.Bound(p => p.STATUS).Title(@L_GRID_STATUS).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                        columns.Bound(p => p.MOVEMENT_TYPE_IN).Title(@L_GRID_MOVEMENT_TYPE).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                    })
                                                                                                                                                                                                                                                                            .Scrollable(scrollable => scrollable
                                                                                                                                                                                                                                                                            .Height("auto"))
                                                                                                                                                                                                                                                                    //.Sortable()
                                                                                                                                                                                                                                                                    .Resizable(resize => resize.Columns(true))
                                                                                                                                                                                                                                                                    .Pageable(pageable => pageable
                                                                                                                                                                                                                                                                    .Numeric(true)
                                                                                                                                                                                                                                                                    .PageSizes(new int[] { 20, 50, 100 }))
                                                                                                                                                                                                                                                                    .AutoBind(false)
                                                                                                                                                                                                                                                                    .DataSource(dataSource => dataSource
                                                                                                                                                                                                                                                                        .Ajax()
                                                                                                                                                                                                                                                                        .PageSize(20)
                                                                                                                                                                                                                                                                        .Read(read => read.Action("SubmitFOAEquipmentReportAsync", "SubmitFOAReport").Data("bindingValue"))
                                                                                                                                                                                                                                                                        )
                                                                                                                                                                                                                                                                    .Events(e => e.DataBound("onGridDataBound"))
                                                                                                                                                    )
                                                                                                                                                </text>);

                                                                                                                                    tabstrip.Add()
                                                                                                                                        .Text("INSTALLATION")
                                                                                                                                        .Content(@<text>
                                                                                                                                            @(Html.Kendo().Grid<WBBEntity.PanelModels.FBBWebConfigModels.SubmitFOAInstallation>()
                                                                                                                                                                                                                                                                .Name("gridOverviewStatus2")
                                                                                                                                                                                                                                                                .Columns(columns =>
                                                                                                                                                                                                                                                                {

                                                                                                                                                                                                                                                                    columns.Bound(p => p.ACCESS_NUMBER ).Title(@L_GRID_ACCESS_NO).HtmlAttributes(new { style = "text-align:center;" }).Width(120);
                                                                                                                                                                                                                                                                    columns.Bound(p => p.PRODUCT_OWNER).Title(@L_PRODUCT_OWNER).HtmlAttributes(new { style = "text-align:center;" }).Width(150);
                                                                                                                                                                                                                                                                    columns.Bound(p => p.ASSET_CODE).Title(@L_GRID_ASSET_CODE).HtmlAttributes(new { style = "text-align:center;" }).Width(120);
                                                                                                                                                                                                                                                                    columns.Bound(p => p.SUB_NUMBER).Title(@L_GRID_SUB_NUMBER).HtmlAttributes(new { style = "text-align:left;" }).Width(120);
                                                                                                                                                                                                                                                                    columns.Bound(p => p.PRODUCT_NAME).Title(@L_GRID_PRODUCT_NAME).HtmlAttributes(new { style = "text-align:center;" }).Width(120);
                                                                                                                                                                                                                                                                    columns.Bound(p => p.INSTALLATION_COST).Title(@L_GRID_INSTALLATION_COST).HtmlAttributes(new { style = "text-align:right;" }).Width(120);
                                                                                                                                                                                                                                                                    columns.Bound(p => p.ORDER_DATE).Title(@L_GRID_ORDER_DATE).HtmlAttributes(new { style = "text-align:center;" }).Width(120);
                                                                                                                                                                                                                                                                    columns.Bound(p => p.MODIFY_DATE).Title(@L_GRID_MODIFY_DATE).HtmlAttributes(new { style = "text-align:center;" }).Width(120);
                                                                                                                                                                                                                                                                    columns.Bound(p => p.TRANS_ID).Title(@L_GRID_TRANS_ID).HtmlAttributes(new { style = "text-align:center;" }).Width(240);

                                                                                                                                                                                                                                                                    columns.Bound(p => p.TRAN_STATUS).Title(@L_GRID_STATUS).HtmlAttributes(new { style = "text-align:center;" }).Width(120);
                                                                                                                                                                                                                                                                    //columns.Bound(p => p.ListInstallation).Title(""+
                                                                                                                                                                                                                                                                    //    "<table>" +
                                                                                                                                                                                                                                                                    //        "<tr>" +
                                                                                                                                                                                                                                                                    //            "<td>" + @L_GRID_ASSET_CODE + "</td>" +
                                                                                                                                                                                                                                                                    //            "<td>" + @L_GRID_SUB_NUMBER + "</td>" +
                                                                                                                                                                                                                                                                    //            "<td>" + @L_GRID_PRODUCT_NAME + "</td>" +
                                                                                                                                                                                                                                                                    //            "<td>" + @L_GRID_INSTALLATION_COST + "</td>" +
                                                                                                                                                                                                                                                                    //            "<td>" + @L_GRID_ORDER_DATE + "</td>" +
                                                                                                                                                                                                                                                                    //            "<td>" + @L_GRID_MODIFY_DATE + "</td>" +
                                                                                                                                                                                                                                                                    //            "<td>" + @L_GRID_STATUS + "</td>" +
                                                                                                                                                                                                                                                                    //        "</tr>" +
                                                                                                                                                                                                                                                                    //    "</table>").Filterable(false).ClientTemplate("#=getInstallList(ListInstallation)#");

                                                                                                                                                                                                                                                                })
                                                                                                                                                                                                                                                                .Scrollable(scrollable => scrollable.Height("auto"))
                                                                                                                                                                                                                                                                //.Sortable()
                                                                                                                                                                                                                                                                .Resizable(resize => resize.Columns(true))
                                                                                                                                                                                                                                                                .Pageable(pageable => pageable.Numeric(true).PageSizes(new int[] { 20, 50, 100 }))
                                                                                                                                                                                                                                                                .AutoBind(false)
                                                                                                                                                                                                                                                                .DataSource(dataSource => dataSource
                                                                                                                                                                                                                                                                    .Ajax()
                                                                                                                                                                                                                                                                    .PageSize(50)
                                                                                                                                                                                                                                                                    .Read(read => read.Action("SubmitFOAInstallationReportAsync", "SubmitFOAReport").Data("bindingValueInstall"))
                                                                                                                                                                                                                                                                    )
                                                                                                                                                                                                                                                                .Events(e => e.DataBound("onGridDataBoundInstall"))
                                                                                                                                            )
                                                                                                                                        </text>);
                                                                                                                                    //begin 2.11.2018 Revalue
                                                                                                                                    tabstrip.Add()
                                                                                                                                           .Text("REVALUE")
                                                                                                                                           .Content(@<text>
                                                                                                                                            @(Html.Kendo().Grid<WBBEntity.PanelModels.FBBWebConfigModels.SubmitFOARevalue>()
                                                                                                                                                                                                                                                                    .Name("gridOverviewStatus4")
                                                                                                                                                                                                                                                                    .Columns(columns =>
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                        //columns.Bound(p => p.ACCESS_NUMBER)
                                                                                                                                                                                                                                                                        //.HeaderTemplate("<input id='selectRVall' class='chkbx' type='checkbox' onclick='ToggleChkBox(this.checked);' />")
                                                                                                                                                                                                                                                                        //.ClientTemplate("" +
                                                                                                                                                                                                                                                                        // "# if (STATUS == 'ERROR') {#" +
                                                                                                                                                                                                                                                                        // "<input id='checkbox' onclick='grdChkBoxClick(this); ' class='chkbxq' type='checkbox' />" +
                                                                                                                                                                                                                                                                        // "#}#"
                                                                                                                                                                                                                                                                        //)
                                                                                                                                                                                                                                                                        //.HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Sortable(false).Filterable(false).Width(30);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ACCESS_NUMBER).Title(@L_RV_GRID_INTERNET_NO)
                                                                                                                                                                                                                                                                                   .ClientTemplate("#=setColumnLable(ACCESS_NUMBER,STATUS)#")
                                                                                                                                                                                                                                                                                   .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(120).Locked(true).Lockable(false);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.PRODUCT_OWNER).Title(L_PRODUCT_OWNER).ClientTemplate("#=setColumnLable(PRODUCT_OWNER,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(150).Locked(true);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ORDER_NO).Title(@L_RV_GRID_ORDER_NO).ClientTemplate("#=setColumnLable(ORDER_NO,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(150).Locked(false);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.RUN_GROUP).Title(@L_RV_RUN_GROUP).ClientTemplate("#=setColumnLable(RUN_GROUP,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(100);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ACTION).Title(@L_RV_GRID_ACTION).ClientTemplate("#=setColumnLable(ACTION,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(100);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.MAIN_ASSET).Title(@L_RV_GRID_MAIN_ASSET).ClientTemplate("#=setColumnLable(MAIN_ASSET,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(120);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.SUB_NUMBER).Title(@L_RV_GRID_SUBNUMBER).ClientTemplate("#=setColumnLable(SUB_NUMBER,STATUS)#")
                                                                                                                                                                                                                   .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(120);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.COM_CODE).Title(@L_RV_GRID_COMPANY_CODE).ClientTemplate("#=setColumnLable(COM_CODE,STATUS)#")
                                                                                                                                                                                                                    .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.DOC_DATE).Title(@L_RV_GRID_DOC_DATE).ClientTemplate("#=setColumnLable(DOC_DATE,STATUS)#")
                                                                                                                                                                                                                    .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ERR_CODE).Title(@L_RV_GRID_ERROR_CODE).ClientTemplate("#=setColumnLable(ERR_CODE,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top" }).Width(120);
                                                                                                                                                                                                                                                                        columns.Bound(p => p.ERR_MSG).Title(@L_RV_GRID_ERROR_MESSAGE).ClientTemplate("#=setColumnLable(ERR_MSG,STATUS)#").HtmlAttributes(new { style = "text-align:left;vertical-align: top" }).Width(170);
                                                                                                                                                                                                                                                                    })
                                                                                                                                                                                                                                                                    .Scrollable(scrollable => scrollable.Height("auto"))
                                                                                                                                                                                                                                                                    //.Sortable()
                                                                                                                                                                                                                                                                    .Resizable(resize => resize.Columns(true))
                                                                                                                                                                                                                                                                    .Pageable(pageable => pageable.Numeric(true).PageSizes(new int[] { 20, 50, 100 }))
                                                                                                                                                                                                                                                                    .AutoBind(false)
                                                                                                                                                                                                                                                                    .DataSource(dataSource => dataSource
                                                                                                                                                                                                                                                                        .Ajax()
                                                                                                                                                                                                                                                                        .PageSize(20)
                                                                                                                                                                                                                                                                                .Read(read => read.Action("SubmitFOARevalueAsync", "SubmitFOAReport").Data("bindingValueRevalue"))
                                                                                                                                                                                                                                                                        )
                                                                                                                                                                                                                                                                    .Events(e => e.DataBound("onGridDataBoundRevalue"))
                                                                                                                                            )
                                                                                                                                        </text>);
                                                                                                                                 //end 2.11.2018 Revalue
                                                                                                                                 //begin 16.07.2018 main asset
                                                                                                                                 tabstrip.Add()
                                                                                                                                        .Visible(mainasset_disable)
                                                                                                                                        .Text("MAINASSET")
                                                                                                                                        .Content(@<text>
                                                                                                                                            @(Html.Kendo().Grid<WBBEntity.PanelModels.FBBWebConfigModels.SubmitFOAMainAsset>()
                                                                                                                                                                                                                                                                    .Name("gridOverviewStatus3")
                                                                                                                                                                                                                                                                    .Columns(columns =>
                                                                                                                                                                                                                                                                    {
                                                                                                                                                                                                                                                                           columns.Bound(p => p.ACCESS_NUMBER).HeaderTemplate("<input id='selectMAall' class='chkbx' type='checkbox' onclick='ToggleChkBox(this.checked);' />")
                                                                                                                                                                                                                              .ClientTemplate("" +
                                                                                                                                                                                                                               "# if (STATUS == 'ERROR') {#" +
                                                                                                                                                                                                                               "<input id='checkbox' onclick='grdChkBoxClick(this); ' class='chkbxq' type='checkbox' />" +
                                                                                                                                                                                                                               "#}#"
                                                                                                                                                                                                                              )
                                                                                                                                                                                                                              .HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Sortable(false).Filterable(false).Width(30);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.ACCESS_NUMBER).Title(@L_GRID_ACCESS_NO)
                                                                                                                                                                                                  .ClientTemplate("#=setColumnLable(ACCESS_NUMBER,STATUS)#")
                                                                                                                                                                                                  .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(120);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.ORDER_NO).Title(@L_MA_GRID_ORDER_NO).ClientTemplate("#=setColumnLable(ORDER_NO,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.ORDER_TYPE).Title(@L_MA_GRID_ORDER_TYPE).ClientTemplate("#=setColumnLable(ORDER_TYPE,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(100);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.FLAG_TYPE).Title(@L_MA_GRID_FLAG_TYPE).ClientTemplate("#=setColumnLable(FLAG_TYPE,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(100);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.SUBCONTRACT_CODE).Title(@L_MA_GRID_SUBCONTACT_CODE).ClientTemplate("#=setColumnLable(SUBCONTRACT_CODE,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(170);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.SUBCONTRACT_NAME).Title(@L_MA_GRID_SUBCONTACT_NAME).ClientTemplate("#=setColumnLable(SUBCONTRACT_NAME,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top;" }).Width(170);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.PRODUCT_NAME).Title(@L_MA_GRID_PRODUCT).ClientTemplate("#=setColumnDropdownlist('PRODUCT',PRODUCT_NAME,STATUS)#")
                                                                                                                                                                                             .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.COM_CODE_NEW).Title(@L_MA_GRID_COMPANY_CODE).ClientTemplate("#=setColumnDropdownlist('COMPANY_CODE',COM_CODE_NEW,STATUS)#")
                                                                                                                                                                                              .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.ASSET_CLASS_GI).Title(@L_MA_GRID_ASSET_CODE).ClientTemplate("#=setColumnDropdownlist('ASSET_CLASS',ASSET_CLASS_GI,STATUS)#")
                                                                                                                                                                                              .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.COST_CENTER).Title(@L_MA_GRID_COST_CENTER).ClientTemplate("#=setColumnDropdownlist('COST_CENTER',COST_CENTER,STATUS)#")
                                                                                                                                                                                              .HtmlAttributes(new { style = "text-align:left;vertical-align: top;" }).Width(150);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.FOA_SUBMIT_DATE).Title(@L_MA_GRID_FOA_SUBMIT_DATE).ClientTemplate("#=setColumnLable(FOA_SUBMIT_DATE,STATUS)#").HtmlAttributes(new { style = "text-align:center;vertical-align: top" }).Width(170);
                                                                                                                                                                                                                                                                           columns.Bound(p => p.COM_CODE_OLD).Title(@L_MA_GRID_COMPANY_CODE).HtmlAttributes(new { style = "text-align:center;" }).Width(120).Hidden();
                                                                                                                                                                                                                                                                       })
                                                                                                                                                                                                                                                                    .Scrollable(scrollable => scrollable.Height("auto"))
                                                                                                                                                                                                                                                                    //.Sortable()
                                                                                                                                                                                                                                                                    .Resizable(resize => resize.Columns(true))
                                                                                                                                                                                                                                                                    .Pageable(pageable => pageable.Numeric(true).PageSizes(new int[] { 20, 50, 100 }))
                                                                                                                                                                                                                                                                    .AutoBind(false)
                                                                                                                                                                                                                                                                    .DataSource(dataSource => dataSource
                                                                                                                                                                                                                                                                        .Ajax()
                                                                                                                                                                                                                                                                        .PageSize(20)
                                                                                                                                                                                                                                                                                .Read(read => read.Action("SubmitFOAMainAssetAsync", "SubmitFOAReport").Data("bindingValueMainAsset"))
                                                                                                                                                                                                                                                                        )
                                                                                                                                                                                                                                                                    .Events(e => e.DataBound("onGridDataBoundMainAsset"))
                                                                                                                                            )
                                                                                                                                        </text>);
                                                                                                                                    //end 16.07.2018 main asset
                                                                                                                                })
                )
            </div>
        </div>
    </div>
    @(Html.Kendo().Window()
                                              .Name("importfileresendConfig")
                                              .HtmlAttributes(new { @class = "i-gap-popup" })
                                              .Title(false)
                                              .Width(520)
                                            .Draggable()
                                            .Visible(false)
                                            .Modal(true)
                                            .Content(@<text>

                                                <div style="padding: 15px;">
                                                    <div class="form-group">
                                                        <div class="row">
                                                            <label>Import File</label>
                                                            @(Html.Kendo().Upload()
                                                                                                        .Name("SubmitFOAresedbyfile")
                                                                                                        .HtmlAttributes(new
                                                                                                                            {
                                                                                                                                accept = ".xlsx,.xls,.csv, text/csv,text/xls,text/xlsx, application/csv,application/xls,application/xlsx",

                                                                                                                            })
                                                                                                            .Async(a => a
                                                                                                            .Save("resendbyfile_Save", "SubmitFOAReport")
                                                                                                            .Remove("resendbyfile_Remove", "SubmitFOAReport")
                                                                                                            .AutoUpload(true))
                                                                                                            .Multiple(false)
                                                                                                            .Events(e => e.Success("onSubmitFOAReportResendbyfileSuccess"))
                                                                                                            .Events(e => e.Error("onSubmitFOAReportResendbyfileError"))
                                                            )
                                                            <div class="i-fg-data-entry-validation" id="validatefor-SubmitFOAresedbyfile"></div>
                                                        </div>
                                                    </div>
                                                    <div class="row i-gap-top-1">
                                                        <div class="i-text-align-center">
                                                            <a id="btnresendclose" onclick="resetResendUpload();" class="btn btn-danger"><i class="fa fa-ban fa-lg"></i>&nbsp;&nbsp;Close</a>

                                                            <a id="btnconfirmresend" onclick="openemailPopUp();" class="btn btn-success"><i class="fa fa-check-square-o fa-lg"></i>&nbsp;&nbsp;Upload</a>

                                                        </div>
                                                    </div>
                                                </div>
                                            </text>))
    @(Html.Kendo().Window()
                                                                            .Name("emailInputConfig")
                                                                        .HtmlAttributes(new { @class = "i-gap-popup" })

                                                                            .Title("Input Email")
                                                                        .Width(500)
                                                                        .Draggable()
                                                                        .Visible(false)
                                                                        .Modal(true)
                                                                       .Content(@<text>

                                                                        <div class="row">
                                                                            <div class=" col-sm-3" style="text-align:right">

                                                                                <label> <span id="requiredfor-SectorInfo"></span>&nbsp;<label style="color:red;font-size:15px">*&nbsp;</label>Email</label>

                                                                            </div>
                                                                            <div class=" col-sm-6">
                                                                                @*<input type="text" id="_emailinput" class="k-textbox form-control" />*@
                                                                                <input type="email" id="_emailinput" class="k-textbox form-control" placeholder="Enter your email">
                                                                                <div class="i-fg-data-entry-validation" id="validatefor-_emailinput"> </div>
                                                                            </div>

                                                                        </div>
                                                                        <br />
                                                                        <div class="row" style="text-align:center">

                                                                            <a id="btcloseexportemail" onclick="CloseEmailUpload();" class="btn btn-danger"><i class="fa fa-ban fa-lg"></i>&nbsp;&nbsp;CLOSE</a>
                                                                            <a class="btn btn-info" id="btnemailconfrim" onclick="SubmitUpload();"><i class="fa fa-envelope"></i>&nbsp;&nbsp;Confirm</a>
                                                                        </div>

                                                                    </text>)
    )
    @(Html.Kendo().Window()
                                                                                                                                .Name("ProductListPopup")
                                                                                                                                .HtmlAttributes(new { @class = "i-gap-popup" })
                                                                                                                                .Title(L_POPUP_PRODUCT_LIST)
                                                                                                                                .Width(1200)
                                                                                                                                .Draggable()
                                                                                                                                .Visible(false)
                                                                                                                                .Modal(true)
                                                                                                                                .Content(@<text>
                                                                                                                                    <div class="row i-no-over" id="AddPopupPanel">
                                                                                                                                        <div class="panel-body">
                                                                                                                                            <div class="row">
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Access No</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtAccessNo" class="k-textbox form-control input-datalist  validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Order Number</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtOrderNo" class="k-textbox form-control input-datalist validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Subcontractor Code</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtSubCode" class="k-textbox form-control input-datalist validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Subcontractor Name</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtSubName" class="k-textbox form-control input-datalist validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <div class="row">
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Product Name</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtProductName" class="k-textbox form-control input-datalist  validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Service Name (Ex. : Playbox , VoIP)</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtServiceName" class="k-textbox form-control input-datalist validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Order Type</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtOrderType" class="k-textbox form-control input-datalist validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Submit Flag</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtSubmitFlag" class="k-textbox form-control input-datalist validate-all-item" value="Resend" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                            </div>

                                                                                                                                            <div class="row">
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Reject Reason</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtRejectReason" class="k-textbox form-control input-datalist  validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Submit date</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        @(Html.Kendo().DatePicker().Name("txtSubmitdate")
                                                                                                                                                                                                                                                                                            .HtmlAttributes(new { @class = "k-textbox form-control input-datalist validate-all-item i-form-control-extend calendar-resend", disabled = "true" })
                                                                                                                                                                                                                                                                                            .ParseFormats(new List<string> { "dd-MM-yyyy" })
                                                                                                                                                                                                                                                                                            .Format("dd-MM-yyyy")
                                                                                                                                                                                                                                                                                            .Min(new DateTime(1900, 1, 1))
                                                                                                                                                                                                                                                                                            .Max(new DateTime(2099, 12, 31))

                                                                                                                                                        )
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">OLT NAME</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtOLTNAME" class="k-textbox form-control input-datalist validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Building Name</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtBuildingName" class="k-textbox form-control input-datalist validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                                <input type="hidden" name="txtSubmitdatefull">
                                                                                                                                            </div>
                                                                                                                                            <div class="row">
                                                                                                                                                <div class="col-xs-6 col-sm-3">
                                                                                                                                                    <label class="required">Mobile Contact</label>
                                                                                                                                                    <div class="i-fg-data-entry validate-all">
                                                                                                                                                        <input name="txtMobileContact" class="k-textbox form-control input-datalist  validate-all-item" disabled>
                                                                                                                                                    </div>
                                                                                                                                                    <div class="i-fg-data-entry-validation"></div>
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <br>
                                                                                                                                            <div class="col-sm-12 col-md-12">
                                                                                                                                                <label>Product List : </label>
                                                                                                                                                <div>
                                                                                                                                                    <table class="table table-bordered" id="product-list">
                                                                                                                                                        <thead>
                                                                                                                                                            <tr>
                                                                                                                                                                <th>@L_GRID_SERIAL_NUMBER</th>
                                                                                                                                                                <th>@L_GRID_MATERIAL_CODE</th>
                                                                                                                                                                <th>@L_GRID_COMPANY_CODE</th>
                                                                                                                                                                <th>@L_GRID_PLANT</th>
                                                                                                                                                                <th>@L_GRID_STORAGE_LOCATION</th>
                                                                                                                                                                <th>@L_GRID_SN_PATTERN</th>
                                                                                                                                                                <th>@L_GRID_MOVEMENT_TYPE</th>
                                                                                                                                                                <th>Error Code</th>
                                                                                                                                                                <th>Error Massage</th>
                                                                                                                                                            </tr>
                                                                                                                                                        </thead>
                                                                                                                                                        <tbody></tbody>
                                                                                                                                                    </table>
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <div class="col-sm-12 col-md-12">
                                                                                                                                                <label>Install List : </label>
                                                                                                                                                <div>
                                                                                                                                                    <table class="table table-bordered" id="install-list">
                                                                                                                                                        <thead>
                                                                                                                                                            <tr>
                                                                                                                                                                <th>Main Asset</th>
                                                                                                                                                                <th>Sub Asset</th>
                                                                                                                                                                <th>Sub Contract Code</th>
                                                                                                                                                                <th>Sub Contract Name</th>
                                                                                                                                                                <th>@L_GRID_COMPANY_CODE</th>
                                                                                                                                                                <th>Install Cost</th>
                                                                                                                                                                <th>Error Massage</th>
                                                                                                                                                            </tr>
                                                                                                                                                        </thead>
                                                                                                                                                        <tbody></tbody>
                                                                                                                                                    </table>
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                            <div class="col-md-12">
                                                                                                                                                <div class="pull-right">
                                                                                                                                                    <a onclick="CancelPopup()" id="SavePage1" class="btn btn-default"><i class="fa fa-ban fa-lg"></i>&nbsp;@B_CANCEL</a>
                                                                                                                                                    <a onclick="_Resend()" id="SavePage1ToPage2" class="btn btn-default"><i class="fa fa-floppy-o fa-lg"></i>&nbsp;@B_RESEND</a>
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                    </div>
                                                                                                                                </text>)
    )
    @(Html.Kendo().Window()
                                                                                                                                .Name("MyPopupLoading")
                                                                                                                                .HtmlAttributes(new { @class = "i-gap-popup" })
                                                                                                                                .Title(false)
                                                                                                                                .Modal(true)
                                                                                                                                .Visible(false)
                                                                                                                                .Content(@<text>
                                                                                                                                    <div style="margin: 0 80px;"><font size="4">Loading &nbsp;<i class="fa fa-refresh fa-spin"></i></font></div>
                                                                                                                                </text>)
    )
    @(Html.Kendo().Window()
                                                                                                                              .Name("PopupEditEquipment")
                                                                                                                               .Width(600)
                                                                                                                               .Title("Change Status")
                                                                                                            .Draggable()
                                                                                                            .Visible(false)
                                                                                                            .Modal(true)
                                                                                                            .Content(
                                                                                                                            @<text>
                                                                                                                                <div class="i-no-over" id="EditPopupPanel">
                                                                                                                                    <div class="panel-body">
                                                                                                                                        <input type="hidden" id="_TRAN_ID" />
                                                                                                                                        <input type="hidden" id="_ORDER_NO" />
                                                                                                                                        <input type="hidden" id="_Serial_No" />
                                                                                                                                        <input type="hidden" id="_INTERNET_NO" />
                                                                                                                                        <input type="hidden" id="_COM_CODE" />
                                                                                                                                        <input type="hidden" id="_ERR_CODE" />
                                                                                                                                        <input type="hidden" id="_ERR_MSG" />

                                                                                                                                        <div class="row">
                                                                                                                                            <div class="col-sm-3 col-md-3" style="text-align:right">
                                                                                                                                                <label>@L_SEARCH_STATUS</label>
                                                                                                                                            </div>
                                                                                                                                            <div class="col-sm-4 col-md-4">
                                                                                                                                                <div class="i-fg-data-entry">
                                                                                                                                                    @(Html.Kendo().DropDownList()
                                                                                                                                                                                                                                                                                                                                                 .Name("ddlEStatus")
                                                                                                                                                                                                                                                                                                                                                 .DataTextField("LOV_NAME")
                                                                                                                                                                                                                                                                                                                                                 .DataValueField("LOV_VAL1")
                                                                                                                                                                                                                                                                                                                                                 .HtmlAttributes(new { @class = "form-control i-form-control-extend" })
                                                                                                                                                                                                                                                                                                                                                 .DataSource(source =>
                                                                                                                                                                                                                                                                                                                                                 {

                                                                                                                                                                                                                                                                                                                                                                                 source.Read(read =>
                                                                                                         {
                                                                                                                                                     read.Action("SetDDLEditStatus", "SubmitFOAReport");
                                                                                                                                                 });
                                                                                                                                                                                                                                                                                                                                                                             }).SelectedIndex(0)
                                                                                                                                                    )
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                        <p class="clearfix"></p>
                                                                                                                                        <div class="row">
                                                                                                                                            <div class="col-sm-3 col-md-3" style="text-align:right">
                                                                                                                                                <label>@L_SEARCH_MAINASSET</label>
                                                                                                                                            </div>
                                                                                                                                            <div class="col-sm-5 col-md-5">

                                                                                                                                                <div class="i-fg-data-entry">
                                                                                                                                                    <input type="text" id="txt_mainasset" class="k-textbox form-control" maxlength="50" />
                                                                                                                                                </div>
                                                                                                                                                <div class="i-fg-data-entry-validation" id="validatefor-MAINASSET"></div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                        <p class="clearfix"></p>
                                                                                                                                        <div class="row">
                                                                                                                                            <div class="col-sm-3 col-md-3" style="text-align:right">
                                                                                                                                                <label>@L_MATERIAL_DOC</label>
                                                                                                                                            </div>
                                                                                                                                            <div class="col-sm-5 col-md-5">
                                                                                                                                                <div class="i-fg-data-entry">
                                                                                                                                                    <input type="text" id="txt_materialdoc" class="k-textbox form-control" maxlength="50" />
                                                                                                                                                </div>
                                                                                                                                                <div class="i-fg-data-entry-validation" id="validatefor-MATERIALDOC"></div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                        <p class="clearfix"></p>
                                                                                                                                        <div class="row">
                                                                                                                                            <div class="col-sm-3 col-md-3" style="text-align:right">
                                                                                                                                                <label>@L_DOC_YEAR</label>
                                                                                                                                            </div>
                                                                                                                                            <div class="col-sm-5 col-md-5">
                                                                                                                                                <div class="i-fg-data-entry">
                                                                                                                                                    <input type="text" id="txt_docyear" class="k-textbox form-control" maxlength="10" />
                                                                                                                                                </div>
                                                                                                                                                <div class="i-fg-data-entry-validation" id="validatefor-DOCYEAR"></div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                        <p class="clearfix"></p>
                                                                                                                                        <div class="row">
                                                                                                                                            <div class="col-sm-3 col-md-3" style="text-align:right">
                                                                                                                                                <label>@L_GRID_REMARK</label>
                                                                                                                                            </div>
                                                                                                                                            <div class="col-sm-6 col-md-6">
                                                                                                                                                <div class="i-fg-data-entry">
                                                                                                                                                    <textarea id="txt_remark" class="k-textbox form-control" rows="4" maxlength="1000"></textarea>

                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                        <p class="clearfix"></p>
                                                                                                                                        <div class="row">
                                                                                                                                            <div class="col-sm-8 col-md-8">
                                                                                                                                                <div class="pull-right">
                                                                                                                                                    <button onclick="cancelPopup()" id="btnpopedit_cancel" class="btn btn-default"><i class="fa fa-power-off fa-lg"></i>&nbsp;@B_CLOSE</button>
                                                                                                                                                    <button onclick="ConfirmUpdate()" id="btnpopedit_submit" class="btn btn-success"><i class="fa fa-check-circle fa-lg"></i>&nbsp;@B_SUBMIT</button>
                                                                                                                                                </div>
                                                                                                                                            </div>
                                                                                                                                        </div>
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </text>)
    )

    <div class="modal fade cancel-sm-box" tabindex="-1" id="modal003_perorder" data-order-id="" role="dialog" aria-labelledby="modal003_perorder_label">
        <div class="modal-dialog modal-sm">
            <div class="modal-content text-center">
                <div class="modal-header" style="padding-bottom: 25px;">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times-circle"></i></button>
                </div>
                <p class="clearfix"></p>
                <h4 class="text-center">Confirm Update</h4>
                <button type="button" class="btn btn-xs btn-default" onclick="UpdateLoginterface();">&nbsp; Ok &nbsp;</button>
                <button type="button" class="btn btn-xs btn-default" data-dismiss="modal">&nbsp; Cancel &nbsp; </button>
                <p class="clearfix"></p>
            </div>
        </div>
    </div>

    <div class="modal fade cancel-sm-box" tabindex="-1" id="modal004_perorder" data-order-id="" role="dialog" aria-labelledby="modal004_perorder_label">
        <div class="modal-dialog modal-sm">
            <div class="modal-content text-center">
                <div class="modal-header" style="padding-bottom: 25px;">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times-circle"></i></button>
                </div>
                <p class="clearfix"></p>
                <h4 class="text-center">Confirm Resend All</h4>
                <button type="button" class="btn btn-xs btn-default" onclick="actionResendAll();">&nbsp; Ok &nbsp;</button>
                <button type="button" class="btn btn-xs btn-default" data-dismiss="modal">&nbsp; Cancel &nbsp; </button>
                <p class="clearfix"></p>
            </div>
        </div>
    </div>

    <div class="modal fade cancel-sm-box" tabindex="-1" id="modal005_perorder" data-order-id="" role="dialog" aria-labelledby="modal005_perorder_label">
        <div class="modal-dialog modal-sm">
            <div class="modal-content text-center">
                <div class="modal-header" style="padding-bottom: 25px;">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><i class="fa fa-times-circle"></i></button>
                </div>
                <p class="clearfix"></p>
                <h4 class="text-center">Confirm Update</h4>
                <button type="button" class="btn btn-xs btn-default" onclick="UpdateMALoginterface();">&nbsp; Ok &nbsp;</button>
                <button type="button" class="btn btn-xs btn-default" data-dismiss="modal">&nbsp; Cancel &nbsp; </button>
                <p class="clearfix"></p>
            </div>
        </div>
    </div>

</body>
</html>
@*<script src="~/Scripts/view/submitFOAReport.js" type="text/javascript"></script>*@

<script>


    //#region Declear

    var SubcontractorCode = '';
    var Materialcode = '';
    var Company = '';
    var Plant = '';
    var SNPattern = '';
    var Product = '';
    var CostCenter = '';
    var AssetClass = '';
    var Action = '';

    //#endregion Declear


    $(document).ready(function () {
        SubcontractorCode = getSetDDLSubcontractorCode();
        Materialcode = getMaterialcode();
        Company = getCompany();
        Plant = getPlant();
        SNPattern = getSNPattern();
        Product = getProduct();
        CostCenter = getCostCenter();
        AssetClass = getAssetClass();
        Action = getAction();
        //Search Panel
        $("#txtSearchAccessNo").val("");
        $("#txtSearchOrderNo").val("");
        $("#ddlStatus").data('kendoDropDownList').text("-- Select All --");
        $("#ddlProductName").data('kendoDropDownList').text("-- Select All --");
        $("#ddlOrderType").data('kendoDropDownList').text("-- Select All --");
        $("#ddlCompanyCode").data('kendoDropDownList').text("-- Select All --");
        $("#ddlServiceName").data('kendoDropDownList').text("-- Select All --");
        $("#ddlSubcontractorCode").data('kendoDropDownList').text("-- Select All --");
        $("#ddlPlant").data('kendoDropDownList').text("-- Select All --");
        $("#ddlMaterialCode").data('kendoDropDownList').text("-- Select All --");
        $("#txtSearchStorLocation").val("");
        $("#txtSearchERRMSG").val("");

        //Replace To
        $("#ddlReMaterialCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#ddlReSubcontractorCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#ddlReCompanyCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#txtReStorLocation").val("");
        $("#ddlRePlant").data('kendoDropDownList').text("-- Please Select One --");

        //DatePicker
        $("#dtpDateFrom").data("kendoDatePicker").value("");
        $("#dtpDateTo").data("kendoDatePicker").value("");
        $("#dtpMaDateFrom").data("kendoDatePicker").value("");
        $("#dtpMaDateTo").data("kendoDatePicker").value("");
        $("#dtpPostDate").data("kendoDatePicker").value("");

        $("#dtpRVDateFrom").data("kendoDatePicker").value("");
        $("#dtpRVDateTo").data("kendoDatePicker").value("");
        //reset min, max.
        $("#dtpDateFrom").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#dtpDateTo").data("kendoDatePicker").min(new Date(1900, 0, 1, 0, 0, 0, 0));
        $("#dtpMaDateFrom").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#dtpMaDateTo").data("kendoDatePicker").min(new Date(1900, 0, 1, 0, 0, 0, 0));
        $("#dtpRVDateFrom").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#dtpRVDateTo").data("kendoDatePicker").min(new Date(1900, 0, 1, 0, 0, 0, 0));
        $("#dtpPostDate").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#validatefor-dtpDateTo").html("");
        $("#validatefor-dtpDateFrom").html("");
        $("#validatefor-dtpPostDate").html("");

        $("#validatefor-dtpRVDateFrom").html("");
        $("#validatefor-dtpRVDateTo").html("");
        //Button , Table
        $('#btnUpdate').attr("disabled", true);
        $('#btnResendAll').attr("disabled", true);
        //$('#btnExport').attr("disabled", true);

        // Checkbox
        $('#selectall').prop('checked', false);
        $('#selectall').attr("disabled", "disabled");

        //flag for searchpage
        $('#btnchksearch').focusout(function () {
            $('#chksearch').val("");
        })
        //
    });
    /*SCRIPT RESEND BY FILE 20200803*/

    function importfileresend(e) {
        resetResendUpload();
        $("#importfileresendConfig").data("kendoWindow").open();
        $("#importfileresendConfig").data("kendoWindow").center();
    }
    function resetResendUpload() {
        $('#_emailinput').val("");
        $(".k-upload-files").remove();
        $(".k-upload-status").remove();
        $("#validatefor-SubmitFOAresedbyfile").html("");

        $("#importfileresendConfig").data("kendoWindow").close();
    }

    function ValidationUpdateScmStatusbyFileValue() {
        var error = true;


        if ($("#validatefor-SubmitFOAresedbyfile").html()) {
            error = false;
        }

        if (!$(".k-filename").text()) {
            $("#validatefor-SubmitFOAresedbyfile").html(ValidationIcon() + "Please upload file.");
            error = false;
        }

        return error;
    }
    function openemailPopUp() {
        $("#emailInputConfig").data("kendoWindow").open();
        $("#emailInputConfig").data("kendoWindow").center();


    }
    function CloseEmailUpload() {
        resetResendUpload();
        $("#emailInputConfig").data("kendoWindow").close();
    }
    function SubmitUpload(emailuser) {
        $("#emailInputConfig").data("kendoWindow").close();
        $("#importfileresendConfig").data("kendoWindow").close();
        var emailuser = $('#_emailinput').val();


        if (!ValidationUpdateScmStatusbyFileValue()) { return; }
        var model = new defaultData();
        if (emailuser != null || emailuser != "") {
            var emailvalid = document.getElementById("_emailinput").validity.valid;
            if (emailvalid == false) {
                $("#validatefor-_emailinput").html(ValidationIcon() + "Email is not valid");
            }
            else {

                var SoftwareTabStrip = $("#SoftwareTabStrip").find(".k-tab-on-top").find("a").prop("text");
                if (SoftwareTabStrip == 'INSTALLATION') {
                    var dd = JSON.stringify({ request: model });
                    var data = JSON.stringify({
                        "EmailUser": emailuser,
                        "fileName": $(".k-filename").text()

                    });
                    Loading();
                    $.ajax({
                        type: "POST",
                        contentType: 'application/json',
                        url: "/SubmitFOAReport/SubmitFOAReportResendByFileIN",
                        data: data,
                        async: true,
                        dataType: "json",
                        success: function (response) {
                            CheckRollback();
                            if (response) {
                                resetResendUpload();
                                if (response === "Update file success." || response.responseText === "Success" || response.responseText === "Update file success.") {
                                    resetResendUpload();
                                    showFeedback("success", response, "System Information");
                                } else {
                                    showFeedback("error", response, "System Information");
                                }
                            }
                        },
                        error: function (msg) {
                            CheckRollback();
                            Loading(0);
                            resetResendUpload();
                            var text = msg.responseText.split('|');
                            console.log(text);
                            if (text[0].toString() === "Success" || text[0].toString() == "") {
                                resetResendUpload();
                                showFeedback("success", "Update " + text[1].toString() + ", " + text[2].toString() + ", " + text[3].toString(), "System Information");
                            } else {
                                msg.responseText = "Not success."
                                showFeedback("error", text[0], "System Information");
                            }
                            $("#validatefor-scmLastMilefile").html(ValidationIcon() + msg);
                        }

                    });
                } else {
                    var dd = JSON.stringify({ request: model });
                    var data = JSON.stringify({
                        "EmailUser": emailuser,
                        "fileName": $(".k-filename").text()

                    });
                    Loading();
                    $.ajax({
                        type: "POST",
                        contentType: 'application/json',                     
                        url: "/SubmitFOAReport/SubmitFOAReportResendByFile",
                        data: data,
                        async: true,
                        dataType: "json",
                        success: function (response) {
                            CheckRollback();
                            if (response) {
                                resetResendUpload();
                                if (response === "Update file success." || response.responseText === "Success" || response.responseText === "Update file success.") {
                                    resetResendUpload();
                                    showFeedback("success", response, "System Information");
                                } else {
                                    showFeedback("error", response, "System Information");
                                }
                            }
                        },
                        error: function (msg) {
                            CheckRollback();
                            Loading(0);
                            resetResendUpload();
                            var text = msg.responseText.split('|');
                            console.log(text);
                            if (text[0].toString() === "Success" || text[0].toString() == "") {
                                resetResendUpload();
                                showFeedback("success", "Update " + text[1].toString() + ", " + text[2].toString() + ", " + text[3].toString(), "System Information");
                            } else {
                                msg.responseText = "Not success."
                                showFeedback("error", text[0], "System Information");
                            }
                            $("#validatefor-scmLastMilefile").html(ValidationIcon() + msg);
                        }

                    });
                }





               
            }
        }
    }


    /*   -- End SECTION SCRIPT  */
    //#region GetDatafromComtroller

    function getSetDDLSubcontractorCode() {
        var sub = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLSubcontractorCode",
            data: { grid: 'grid' },
            dataType: "json",
            async: false,
            success: function (data) {
                sub = data;
            }
        });
        return sub;
    }
    function getMaterialcode() {
        var mat = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLMaterialCode",
            dataType: "json",
            data: { grid: 'grid' },
            async: false,
            success: function (data) {
                mat = data;
            }
        });
        return mat;
    }
    function getCompany() {
        var com = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLCompanyCode",
            data: { grid: 'grid' },
            dataType: "json",
            async: false,
            success: function (data) {
                com = data;
            }
        });
        return com;
    }
    function getAction() {
        var ac = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLAction",
            data: { grid: 'grid' },
            dataType: "json",
            async: false,
            success: function (data) {
                ac = data;
            }
        });
        return ac;
    }
    function getPlant() {
        var pl = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLPlant",
            data: { CompanyCode: '', grid: 'grid' },
            dataType: "json",
            async: false,
            success: function (data) {
                pl = data;
            }
        });
        return pl;
    }
    function getSNPattern() {
        var spp = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLSNPattern",
            data: { grid: 'grid' },
            dataType: "json",
            async: false,
            success: function (data) {
                spp = data;
            }
        });
        return spp;
    }
    //Main Asset
    function getAssetClass() {
        var ac = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLAssetClass",
            data: { grid: 'grid' },
            dataType: "json",
            async: false,
            success: function (data) {
                ac = data;
            }
        });
        return ac;
    }
    function getCostCenter() {
        var cc = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLCostCenter",
            data: { grid: 'grid' },
            dataType: "json",
            async: false,
            success: function (data) {
                cc = data;
            }
        });
        return cc;
    }
    function getProduct() {
        var pd = '';
        $.ajax({
            type: "GET",
            url: "/SubmitFOAReport/SetDDLProductName",
            data: { grid: 'grid' },
            dataType: "json",
            async: false,
            success: function (data) {
                pd = data;
            }
        });
        return pd;
    }

    //#endregion GetDatafromComtroller

    //
    function grdChkBoxClick(flag) {
        var flagcheck = true;
        $('.chkbxq').each(function () {
            var ch = $(this).prop('checked');
            if (!ch && flagcheck) {
                $('.chkbx').prop('checked', false);
                flagcheck = false;
            }
            if (ch) {
                $('#btnUpdate').attr("disabled", false);
                return false;
            } else {

                $('#btnUpdate').attr("disabled", true);
            }
        });
    }

    function ToggleChkBox(flag) {
        var state = flag;
        if (state == true) {
            $('.chkbxq').prop('checked', true);
            $('#btnUpdate').attr("disabled", false);
        }
        else {
            $('.chkbxq').prop('checked', false);
            $('#btnUpdate').attr("disabled", true);
        }
    }

    //#region ClassModel JS


    var SubmitFOAModel = function () {
        accessNo: "";
        orderNo: "";
        status: "";
        productName: "";
        orderType: "";
        companyCode: "";
        serviceName: "";
        subcontractorCode: "";
        plant: "";
        errormessage: "";
        materialCode: "";
        storLocation: "";
        dateFrom: "";
        dateTo: "";
        productOwner: "";

        //31032020 เพิ่ม page index กับ page size
        PAGE_INDEX: 1;
        PAGE_SIZE: 20;

    }
    var SubmitFOAMainAssetModel = function () {
        internetNo: "";
        orderNo: "";
        status: "";
        companyCode: "";
        assetClass: "";
        dateFrom: "";
        dateTo: "";
    }
    var SubmitFOARevalueModel = function () {
        internetNo: "";
        orderNo: "";
        status: "";
        companyCode: "";
        mainasset: "";
        action: "";
        dateFrom: "";
        dateTo: "";
        productOwner: "";
    }
    var SubmitFOAInstallModel = function () {
        orderNo: "";
        internetNo: "";
        productName: "";
        serviceName: "";
        status: "";
        dateFrom: "";
        dateTo: "";
        productOwner: "";
    }
    var ResendSubmitFOAModel = function () {
        Access_No: "";
        OrderNumber: "";
        SubcontractorCode: "";
        SubcontractorName: "";
        ProductName: "";
        OrderType: "";
        SubmitFlag: "";
        RejectReason: "";
        FOA_Submit_date: "";
        OLT_NAME: "";
        BUILDING_NAME: "";
        Mobile_Contact: "";
    }
    var ProductModel = function () {
        SerialNumber: "";
        MaterialCode: "";
        CompanyCode: "";
        Plant: "";
        StorageLocation: "";
        SNPattern: "";
        MovementType: "";
    }
    var ListEquipmentModel = function () {
        ACCESS_NUMBER: "";
        ORDER_NO: "";
        ORDER_TYPE: "";
        SUBCONTRACT_CODE: "";
        SUBCONTRACT_NAME: "";
        PRODUCT_NAME: "";
        SERVICE_NAME: "";
        SUBMIT_FLAG: "";
        REJECT_REASON: "";
        SUBMIT_DATE: "";
        OLT_NAME: "";
        BUILDING_NAME: "";
        MOBILE_CONTACT: "";
        SN: "";
        MATERIAL_CODE: "";
        COMPANY_CODE: "";
        PLANT: "";
        STORAGE_LOCATION: "";
        SN_TYPE: "";
        MOVEMENT_TYPE: "";
        STATUS: "";
        ERR_CODE: "";
        ERR_MSG: "";
        
        // 3BB Integration Track OSS Multi Company
        PRODUCT_OWNER: "";
        MAIN_PROMO_CODE: "";
        TRANS_ID: "";
        TEAM_ID: ""
    }
    var ListMainAssetModel = function () {
        ACCESS_NUMBER: "";
        ORDER_NO: "";
        ORDER_TYPE: "";
        FLAG_TYPE: "";
        SUBCONTRACT_CODE: "";
        SUBCONTRACT_NAME: "";
        PRODUCT_NAME: "";
        COM_CODE_OLD: "";
        COM_CODE_NEW: "";
        ASSET_CLASS_GI: "";
        COST_CENTER: "";
        FOA_SUBMIT_DATE: "";
        ASSET_CODE: "";
        ASSET_TYPE: "";
        ASSET_STATUS: "";
        STATUS: "";
    }
    var ListRevalueModel = function () {
        ACCESS_NUMBER: "";
        ORDER_NO: "";
        ORDER_TYPE: "";
        STATUS: "";
    }
    var ResendToSelectSubmitFOAModel = function () {
        AccessNumber: "";
        OrderNo: "";
        ListEquipment: new ListEquipmentModel();
    }

    var ReplaceFOAModel = function () {
        materialCode: "";
        subcontractorCode: "";
        companyCode: "";
        postDate: "";
        storLocation: "";
        plant: "";
    }

    //Start Change Status Equipment 09/03/2020
    var ChangeStatusEquipmentDataModel = function () {
        TRANS_ID: '';
        ORDER_NO: '';
        SERIAL_NO: '';
        INTERNET_NO: '';
        SUBNUMBER: '';
        ASSET_CODE: '';
        MATERIAL_DOC: '';
        DOC_YEAR: '';
        COM_CODE: '';
        ERR_CODE: '';
        ERR_MSG: '';
        REMARK: '';
    }
    //#endregion ClassModel JS

    // Button modal Confirm Resend to select
    function modalMAConfirmShow() {
        idsMAToSend = [];
        var grid = $("#gridOverviewStatus3").data("kendoGrid")
        var ds = grid.dataSource.view();
        for (var i = 0; i < ds.length; i++) {
            var propId = grid.tbody.find("tr[data-uid='" + ds[i].uid + "'] td:eq(0)").text();
            var row = grid.table.find("tr[data-uid='" + ds[i].uid + "']");
            var checkbox = $(row).find(".chkbxq");
            if (checkbox.is(":checked")) {
                var ROW_SUBCONTRACT_CODE = row.find("td").find(".txt_SUBCONTRACT_CODE").val();
                var sn = EmptyString(ds[i].SN).replace("&nbsp;", "").split("<br/>");
                var mt = EmptyString(ds[i].MOVEMENT_TYPE_IN).replace("&nbsp;", "").split("<br/>")

                var index = 0;
                for (var x = 0; x < sn.length; x++) {
                    var resendModel = new ListMainAssetModel();
                    resendModel.ACCESS_NUMBER = ds[i].ACCESS_NUMBER;
                    resendModel.ORDER_NO = ds[i].ORDER_NO;
                    resendModel.ORDER_TYPE = ds[i].ORDER_TYPE;
                    resendModel.FLAG_TYPE = ds[i].FLAG_TYPE;
                    resendModel.SUBCONTRACT_CODE = ds[i].SUBCONTRACT_CODE;
                    resendModel.SUBCONTRACT_NAME = ds[i].SUBCONTRACT_NAME;
                    resendModel.COM_CODE_OLD = ds[i].COM_CODE_OLD;
                    resendModel.PRODUCT_NAME = row.find("td").find(".txt_PRODUCT").eq(index).find(".k-input")[0] != undefined ? row.find("td").find(".txt_PRODUCT").eq(index).find(".k-input")[0].innerText : row.find("td").find("input.txt_PRODUCT").eq(index).val().replace("&nbsp;", "");
                    resendModel.COM_CODE_NEW = row.find("td").find(".txt_COMPANY_CODE").eq(index).find(".k-input")[0] != undefined ? row.find("td").find(".txt_COMPANY_CODE").eq(index).find(".k-input")[0].innerText : row.find("td").find("input.txt_COMPANY_CODE").eq(index).val().replace("&nbsp;", "");
                    resendModel.ASSET_CLASS_GI = row.find("td").find(".txt_ASSET_CLASS").eq(index).find(".k-input")[0] != undefined ? row.find("td").find(".txt_ASSET_CLASS").eq(index).find(".k-input")[0].innerText : row.find("td").find("input.txt_ASSET_CLASS").eq(index).val().replace("&nbsp;", "");
                    resendModel.COST_CENTER = row.find("td").find(".txt_COST_CENTER").eq(index).find(".k-input")[0] != undefined ? row.find("td").find(".txt_COST_CENTER").eq(index).find(".k-input")[0].innerText : row.find("td").find("input.txt_COST_CENTER").eq(index).val().replace("&nbsp;", "");
                    resendModel.STATUS = EmptyString(ds[i].STATUS);
                    resendModel.FOA_SUBMIT_DATE = ds[i].FOA_SUBMIT_DATE;
                    //---------------------------------------------------------------------------
                    idsMAToSend.push(resendModel);
                    index++;
                }
            }
        }
        console.log(idsMAToSend);
        $("#modal005_perorder").modal();
    }
    function modalRevalueConfirmShow() {
        idsRevalueToSend = [];
        var grid = $("#gridOverviewStatus4").data("kendoGrid")
        var ds = grid.dataSource.view();
        for (var i = 0; i < ds.length; i++) {
            var propId = grid.tbody.find("tr[data-uid='" + ds[i].uid + "'] td:eq(0)").text();
            var row = grid.table.find("tr[data-uid='" + ds[i].uid + "']");
            var checkbox = $(row).find(".chkbxq");

            var chk = $("#gridOverviewStatus4 .k-grid-content-locked table tbody").find("tr[data-uid='" + ds[i].uid + "'] .chkbxq").is(":checked")
            if (chk) {
                var index = 0;
                for (var x = 0; x < sn.length; x++) {
                    var resendModel = new ListRevalueModel();
                    resendModel.ACCESS_NUMBER = ds[i].ACCESS_NUMBER;
                    resendModel.ORDER_NO = ds[i].ORDER_NO;
                    resendModel.ORDER_TYPE = ds[i].ORDER_TYPE;
                    resendModel.STATUS = EmptyString(ds[i].STATUS);
                    //---------------------------------------------------------------------------
                    idsRevalueToSend.push(resendModel);
                    index++;
                }
            }
        }
        console.log(idsRevalueToSend);
        $("#modal005_perorder").modal();
    }
    // Button modal Confirm Resend to select
    function modalConfirmShow() {
        idsToSend = [];
        var chk = ValidationPostDateValue();
        if (chk) {
            var grid = $("#gridOverviewStatus").data("kendoGrid")
            var ds = grid.dataSource.view();
            for (var i = 0; i < ds.length; i++) {
                //var resendModel = new ResendToSelectSubmitFOAModel();
                var propId = grid.tbody.find("tr[data-uid='" + ds[i].uid + "'] td:eq(0)").text();


                var row = grid.table.find("tr[data-uid='" + ds[i].uid + "']");


                //var ROW_MATERIAL_CODE = row.find("td").find(".txt_MATERIAL_CODE").val();
                //var ROW_COMPANY_CODE = row.find("td").find(".txt_COMPANY_CODE").val();
                //var ROW_PLANT = row.find("td").find(".txt_PLANT").val();
                //var ROW_STORAGE_LOCATION = row.find("td").find(".txt_STORAGE_LOCATION").val();
                var checkbox = $(row).find(".chkbxq");

                var chk = $("#gridOverviewStatus .k-grid-content-locked table tbody").find("tr[data-uid='" + ds[i].uid + "'] .chkbxq").is(":checked")
                if (chk) {
                    var ROW_SUBCONTRACT_CODE = row.find("td").find(".txt_SUBCONTRACT_CODE").val();
                    var sn = EmptyString(ds[i].SN).replace("&nbsp;", "").split("<br/>");
                    var mt = EmptyString(ds[i].MOVEMENT_TYPE_IN).replace("&nbsp;", "").split("<br/>");
                    var tids = EmptyString(ds[i].TRANS_ID).replace("&nbsp;", "").split("<br/>")

                    var index = 0;
                    for (var x = 0; x < sn.length; x++) {
                        var resendModel = new ListEquipmentModel();
                        // เนื่องจากข้อมูลเมื่อแปลงแล้ว string จะยาวเกินไป ใส่แค่ฟิลที่จำเป็น ฟิลด์อื่นๆ เมื่อเรียก Controller จะเป็นดึงข้อมูลอีกครั้งที่ GetProductListQuery
                        resendModel.ACCESS_NUMBER = ds[i].ACCESS_NUMBER;
                        resendModel.ORDER_NO = ds[i].ORDER_NO;
                        resendModel.ORDER_TYPE = ds[i].ORDER_TYPE;
                        //resendModel.SUBCONTRACT_CODE = ds[i].SUBCONTRACT_CODE;
                        resendModel.SUBCONTRACT_CODE = ROW_SUBCONTRACT_CODE;
                        resendModel.PRODUCT_OWNER = ds[i].PRODUCT_OWNER != undefined ? ds[i].PRODUCT_OWNER : "";
                        resendModel.MAIN_PROMO_CODE = ds[i].MAIN_PROMO_CODE != undefined ? ds[i].MAIN_PROMO_CODE : "";
                        resendModel.TEAM_ID = ds[i].TEAM_ID != undefined ? ds[i].TEAM_ID : "";
                        //resendModel.SUBCONTRACT_NAME = "";//ds[i].SUBCONTRACT_NAME;
                        //resendModel.PRODUCT_NAME = "";//ds[i].PRODUCT_NAME;
                        //resendModel.SERVICE_NAME = "";//ds[i].SERVICE_NAME;
                        //resendModel.SUBMIT_FLAG = "";//EmptyString(ds[i].SUBMIT_FLAG);
                        //resendModel.REJECT_REASON = "";//EmptyString(ds[i].REJECT_REASON);
                        //resendModel.SUBMIT_DATE = "";//EmptyString(ds[i].SUBMIT_DATE);
                        //resendModel.OLT_NAME = "";//EmptyString(ds[i].OLT_NAME);
                        //resendModel.BUILDING_NAME = "";//EmptyString(ds[i].BUILDING_NAME);
                        //resendModel.MOBILE_CONTACT = "";//EmptyString(ds[i].MOBILE_CONTACT);

                        resendModel.SN = sn.length > 0 ? sn[index] != undefined ? sn[index] : "" : "";
                        //resendModel.MATERIAL_CODE = ds[i].MATERIAL_CODE;
                        //resendModel.COMPANY_CODE = ds[i].COMPANY_CODE;
                        //resendModel.PLANT = ds[i].PLANT;
                        //resendModel.STORAGE_LOCATION = ds[i].STORAGE_LOCATION;
                        resendModel.MATERIAL_CODE = row.find("td").find(".txt_MATERIAL_CODE").eq(index).find(".k-input")[0] != undefined ? row.find("td").find(".txt_MATERIAL_CODE").eq(index).find(".k-input")[0].innerText : row.find("td").find("input.txt_MATERIAL_CODE").eq(index).val().replace("&nbsp;", "");//row.find("td").find(".txt_MATERIAL_CODE").eq(index).val().replace("&nbsp;", "");//ROW_MATERIAL_CODE;
                        resendModel.COMPANY_CODE = row.find("td").find(".txt_COMPANY_CODE").eq(index).find(".k-input")[0] != undefined ? row.find("td").find(".txt_COMPANY_CODE").eq(index).find(".k-input")[0].innerText : row.find("td").find("input.txt_COMPANY_CODE").eq(index).val().replace("&nbsp;", "");// row.find("td").find(".txt_COMPANY_CODE").eq(index).val().replace("&nbsp;", "");// ROW_COMPANY_CODE;
                        resendModel.PLANT = row.find("td").find(".txt_PLANT").eq(index).find(".k-input")[0] != undefined ? row.find("td").find(".txt_PLANT").eq(index).find(".k-input")[0].innerText : row.find("td").find("input.txt_PLANT").eq(index).val().replace("&nbsp;", "");//row.find("td").find(".txt_PLANT").eq(index).val().replace("&nbsp;", ""); //ROW_PLANT;
                        resendModel.STORAGE_LOCATION = EmptyString(row.find("td").find(".txt_STORAGE_LOCATION").eq(index).val()); //ROW_STORAGE_LOCATION;
                        resendModel.SN_TYPE = row.find("td").find(".txt_SNPattern").eq(index).find(".k-input")[0] != undefined ? row.find("td").find(".txt_SNPattern").eq(index).find(".k-input")[0].innerText : row.find("td").find("input.txt_SNPattern").eq(index).val().replace("&nbsp;", "");// EmptyString(ds[i].SN_TYPE); //EmptyString(row.find("td").find(".txt_SN_TYPE").eq(index).val());
                        resendModel.MOVEMENT_TYPE = mt.length > 0 ? mt[index] != undefined ? mt[index] : "" : "";//EmptyString(ds[i].MOVEMENT_TYPE_IN);
                        resendModel.STATUS = EmptyString(ds[i].STATUS);
                        //resendModel.ERR_CODE = "";//EmptyString(ds[i].ERR_CODE);
                        //resendModel.ERR_MSG = "";//EmptyString(ds[i].ERR_MSG);
                        resendModel.TRANS_ID = tids.length > 0 ? tids[index] != undefined ? tids[index] : "" : "";
                        //---------------------------------------------------------------------------
                        idsToSend.push(resendModel);
                        index++;
                    }
                }
            }
            var aa = idsToSend;
            console.log(idsToSend);
            $("#modal003_perorder").modal();
        }
    }

    // Button modal Confirm All
    function modalConfirmShowResendAll() {
        var SoftwareTabStrip = $("#SoftwareTabStrip").find(".k-tab-on-top").find("a").prop("text");
        //  var SoftwareTabStrip_split = SoftwareTabStrip.split("/");
        if (SoftwareTabStrip == 'MAINASSET') {//((SoftwareTabStrip_split[SoftwareTabStrip_split.length - 1]).indexOf("1") > 1) {
            if ($("#ddlMAStatus").val() == "ERROR") {
                modalMAConfirmShow();
            }
        }
        else if (SoftwareTabStrip == 'REVALUE') {
            if ($("#ddlRVStatus").val() == "Pending" || $("#ddlRVStatus").val() == "PENDING") {

                $("#modal004_perorder").modal();

            }
            //if ($("#ddlRVStatus").val() == "ERROR") {
            //modalRevalueConfirmShow();
            //     }
        }
        else {
            if ($("#ddlStatus").val() == "Pending" || $("#ddlStatus").val() == "PENDING") {
                var chk = ValidationPostDateValue();
                if (chk) {
                    //$("#modal004_perorder").modal();
                    modalConfirmShow();

                    console.log("PENDING");
                }
            } else if ($("#ddlStatus").val() == "ERROR") {
                modalConfirmShow();
                console.log("ERROR");
            }
        }
    }

    // Button action Resend to select
    function UpdateLoginterface() {
        $("#modal003_perorder").modal('hide');
        Loading();
        var interface_id = idsToSend;

        SendRequest(interface_id, "Resend");

    }
    function UpdateMALoginterface() {
        $("#modal005_perorder").modal('hide');
        Loading();
        var interface_id = idsMAToSend;

        SendRequestMA(interface_id);

    }
    function UpdateRevalueLoginterface() {
        $("#modal005_perorder").modal('hide');
        Loading();
        var interface_id = idsRevalueToSend;

        SendRequestRevalue(interface_id);

    }
    // Button action Resend to select ajax call Controller
    function SendRequest(viewmodel, resend) {
        var grid = $("#gridOverviewStatus").data("kendoGrid");
        var grid2 = $("#gridOverviewStatus2").data("kendoGrid");
        var replacemodel = new replaceData();
        var SoftwareTabStrip = $("#SoftwareTabStrip").find(".k-tab-on-top").find("a").prop("text");
       
        var msg = ""
        var indexSuccess = 0;
        var indexError = 0;

        if (SoftwareTabStrip == 'EQUIPMENT') {
            if (viewmodel.length > 0) {
                console.log($("#gridOverviewStatus"))

                var data = JSON.stringify({ 'dataS': viewmodel, 'dataRe': replacemodel, 'Resend': resend });

                $.ajax({
                    type: "POST",
                    contentType: 'application/json',
                    url: "/SubmitFOAReport/ResendToSelectSubmitFOA",
                    data: data,
                    async: true,
                    dataType: "json",
                    success: function (response) {
                        Loading(0);
                        if (response != "") {
                            alert(response);
                            $("#chkresend").val("Resend"); //fix value resend
                        }
                        else {
                            alert("This action is not available.");
                            $("#chkresend").val("");
                        }

                        _ClearReplacePanel();

                        //grid.dataSource.bindingValue();
                        grid.dataSource.page(1);
                        grid2.dataSource.page(1);
                    },
                    error: function (response) {
                        Loading(0);

                        alert("Error Session Expire!");
                    }
                });
            }
            else {
                Loading(0);
                alert("This action is not available.");
            }

        } else if (SoftwareTabStrip == 'INSTALLATION') {
            var data = grid2.dataSource.view();
            var viewmodel = data;

            if (viewmodel.length > 0) {
                console.log($("#gridOverviewStatus"))

                var data = JSON.stringify({ 'dataS': viewmodel, 'dataRe': replacemodel, 'Resend': resend });

                $.ajax({
                    type: "POST",
                    contentType: 'application/json',
                    url: "/SubmitFOAReport/ResendToSelectSubmitFOAIN",
                    data: data,
                    async: true,
                    dataType: "json",
                    success: function (response) {
                        Loading(0);
                        if (response != "") {
                            alert(response);
                            $("#chkresend").val("Resend"); //fix value resend
                        }
                        else {
                            alert("This action is not available.");
                            $("#chkresend").val("");
                        }

                        _ClearReplacePanel();

                        //grid.dataSource.bindingValue();
                        grid.dataSource.page(1);
                        grid2.dataSource.page(1);
                    },
                    error: function (response) {
                        Loading(0);

                        alert("Error Session Expire!");
                    }
                });
            }
            else {
                Loading(0);
                alert("This action is not available.");
            }

        } else {
            Loading(0);
            alert("This action is not available.");
        }



       
    }
    function SendRequestMA(viewmodel) {
        var grid3 = $("#gridOverviewStatus3").data("kendoGrid");

        var msg = "";
        var indexSuccess = 0;
        var indexError = 0;
        if (viewmodel.length > 0) {

            var data = JSON.stringify({ 'model': viewmodel });

            $.ajax({
                type: "POST",
                contentType: 'application/json',
                url: "/SubmitFOAReport/ResendToSelectSubmitFOAMA",
                data: data,
                async: false,
                dataType: "json",
                success: function (response) {
                    Loading(0);
                    if (response != "") alert(response);
                    else alert("This action is not available.");
                    grid3.dataSource.page(1);

                },
                error: function (response) {
                    console.log(response)
                    Loading(0);
                    alert("This action is not available.");
                }
            });
        }
        else {
            Loading(0);
            alert("This action is not available.");
        }
    }

    // Button action Resend All
    function actionResendAll() {
        var SoftwareTabStrip = $("#SoftwareTabStrip").find(".k-tab-on-top").find("a").prop("text");
        if (SoftwareTabStrip == 'EQUIPMENT' || SoftwareTabStrip == 'INSTALLATION') {//((SoftwareTabStrip_split[SoftwareTabStrip_split.length - 1]).indexOf("1") > 1) {
            var grid = $("#gridOverviewStatus").data("kendoGrid");
            var grid2 = $("#gridOverviewStatus2").data("kendoGrid");
   
            var replacemodel = new replaceData();
            if (SoftwareTabStrip == 'INSTALLATION') {
                if ($("#status").val() != "COMPLETE" ) {
                    $("#modal004_perorder").modal('hide');
                    Loading();
                    var model = new defaultData();

                    $.ajax({
                        type: "GET",
                        url: "/SubmitFOAReport/ResendPendingAllSubmitFOA",
                        data: {
                            dataS: JSON.stringify(model),
                            dataRe: JSON.stringify(replacemodel)
                        },
                        async: false,
                        dataType: "json",
                        success: function (response) {
                            Loading(0);
                            if (response != "") alert(response);
                            else alert("This action is not available.");

                            //_resetDialog();
                            _ClearReplacePanel();
                            grid.dataSource.page(1);
                            grid2.dataSource.page(1);
                        },
                        error: function (response) {
                            Loading(0);
                            alert("This action is not available.");
                        }
                    });
                }
                else {
                    Loading(0);
                    alert("This action is not available. Status as Pending Only.");
                }
            }
            if ($("#status").val() != "COMPLETE" && $("#status").val() != "ERROR") {
                $("#modal004_perorder").modal('hide');
                Loading();
                var model = new defaultData();

                $.ajax({
                    type: "GET",
                    url: "/SubmitFOAReport/ResendPendingAllSubmitFOA",
                    data: {
                        dataS: JSON.stringify(model),
                        dataRe: JSON.stringify(replacemodel)
                    },
                    async: false,
                    dataType: "json",
                    success: function (response) {
                        Loading(0);
                        if (response != "") alert(response);
                        else alert("This action is not available.");

                        //_resetDialog();
                        _ClearReplacePanel();
                        grid.dataSource.page(1);
                        grid2.dataSource.page(1);
                    },
                    error: function (response) {
                        Loading(0);
                        alert("This action is not available.");
                    }
                });
            }
            else {
                Loading(0);
                alert("This action is not available. Status as Pending Only.");
            }
        } else if (SoftwareTabStrip == 'REVALUE') {
            var grid4 = $("#gridOverviewStatus4").data("kendoGrid");

            if ($("#ddlRVStatus").val() != "COMPLETE" && $("#ddlRVStatus").val() != "ERROR") {
                $("#modal004_perorder").modal('hide');
                Loading();
                var model = new defaultDataRevalue();

                $.ajax({
                    type: "GET",
                    url: "/SubmitFOAReport/ResendPendingAllSubmitFOARevalue",
                    data: {
                        dataS: JSON.stringify(model),
                        dataRe: JSON.stringify(replacemodel)
                    },
                    async: false,
                    dataType: "json",
                    success: function (response) {
                        Loading(0);
                        if (response != "") alert(response);
                        else alert("This action is not available.");

                        grid4.dataSource.page(1);
                    },
                    error: function (response) {
                        Loading(0);
                        alert("This action is not available.");
                    }
                });
            }
            else {
                Loading(0);
                alert("This action is not available. Status as Pending Only.");
            }
        }

    }
    function SendRequestRevalue(viewmodel) {
        var grid4 = $("#gridOverviewStatus4").data("kendoGrid");

        var msg = "";
        var indexSuccess = 0;
        var indexError = 0;
        if (viewmodel.length > 0) {

            var data = JSON.stringify({ 'model': viewmodel });

            $.ajax({
                type: "POST",
                contentType: 'application/json',
                url: "/SubmitFOAReport/ResendToSelectSubmitFOA",
                data: data,
                async: false,
                dataType: "json",
                success: function (response) {
                    Loading(0);
                    if (response != "") alert(response);
                    else alert("This action is not available.");
                    grid4.dataSource.page(1);

                },
                error: function (response) {
                    //console.log(response)
                    Loading(0);
                    alert("This action is not available.");
                }
            });
        }
        else {
            Loading(0);
            alert("This action is not available.");
        }
    }
    // Not Use
    function actionResend($orderNumber, $accessNo, $status, $remark) {
        $html = '';

        if ($status != "COMPLETE") {
            $html = "<a class='k-button k-button-icontext k-grid-Resend' href='javascript:ProductListPopup(&#34;" + $orderNumber + "&#34;,&#34;" + $accessNo + "&#34;,&#34;Resend&#34;,&#34;" + $remark + "&#34;)'>" +
                "<span class=''></span><i class='fa fa-reply fa-lg'></i>&nbsp; Resend</a>";

            return $html
        }

        return $html;
    }

    // Not Use
    function actionDetials($orderNumber, $accessNo, $status, $remark) {
        $html = '';

        if ($status != "COMPLETE") {
            $html = "<a href='javascript:ProductListPopup(&#34;" + $orderNumber + "&#34;,&#34;" + $accessNo + "&#34;,&#34;Show&#34;,&#34;" + $remark + "&#34;)'>" + $accessNo + "</a>";

            return $html
        }

        return "<span class=''>" + $accessNo + "</span>";
    }

    // Not Use
    function getEquipmentList($ProductList) {
        $html = '';
        $class = "k-textbox form-control input-datalist validate-all-item";
        $html = '<table>';
        $.each($ProductList, function (ProductKey, ProductValue) {
            var classRed = '';
            var flagError = 'N';
            if (ProductValue.ERR_CODE != '000') {
                classRed = 'color-red';
                flagError = 'Y';
            }

            var SubcontractCode = '';
            var MaterialCode = '';
            var CompanyCode = '';
            var Plant = '';
            var StorageLocation = '';
            var SNPattern = '';

            if (flagError == 'Y') {
                SubcontractCode = '<input class=" ' + $class + ' txt_SubcontractCode ' + classRed + '" value="' + EmptyString(ProductValue.SUBCONTRACT_CODE) + '">';
                MaterialCode = '<input class=" ' + $class + ' txt_MaterialCode ' + classRed + '" value="' + EmptyString(ProductValue.MATERIAL_CODE) + '">';
                CompanyCode = '<input class=" ' + $class + ' txt_CompanyCode ' + classRed + ' " value="' + EmptyString(ProductValue.COMPANY_CODE) + '">';
                Plant = '<input class=" ' + $class + ' txt_Plant ' + classRed + ' " value="' + EmptyString(ProductValue.PLANT) + '">';
                StorageLocation = '<input class=" ' + $class + ' txt_StorageLocation ' + classRed + ' " value="' + EmptyString(ProductValue.STORAGE_LOCATION) + '">';
                SNPattern = '<input class=" ' + $class + ' txt_SNPattern ' + classRed + ' " value="' + EmptyString(ProductValue.SN_TYPE) + '">';

            } else if (flagError == 'N') {
                SubcontractCode = '<span class=" txt_SubcontractCode ' + classRed + ' " value="' + EmptyString(ProductValue.SUBCONTRACT_CODE) + '">' + EmptyString(ProductValue.SUBCONTRACT_CODE) + '</span>';
                MaterialCode = '<span class=" txt_MaterialCode ' + classRed + ' " value="' + EmptyString(ProductValue.MATERIAL_CODE) + '">' + EmptyString(ProductValue.MATERIAL_CODE) + '</span>';
                CompanyCode = '<span class=" txt_CompanyCode ' + classRed + ' " value="' + EmptyString(ProductValue.COMPANY_CODE) + '">' + EmptyString(ProductValue.COMPANY_CODE) + '</span>';
                Plant = '<span class=" txt_Plant ' + classRed + ' " value="' + EmptyString(ProductValue.PLANT) + '">' + EmptyString(ProductValue.PLANT) + '</span>';
                StorageLocation = '<span class=" txt_StorageLocation ' + classRed + ' " value="' + EmptyString(ProductValue.STORAGE_LOCATION) + '">' + EmptyString(ProductValue.STORAGE_LOCATION) + '</span>';
                SNPattern = '<span class=" txt_SNPattern ' + classRed + ' " value="' + EmptyString(ProductValue.SN_TYPE) + '">' + EmptyString(ProductValue.SN_TYPE) + '</span>';
            }

            $html += '<tr> ' +
                '<td style="width:150px">' +
                '<span class=" txt_OrderNo ' + classRed + ' " value="' + EmptyString(ProductValue.ORDER_NO) + '">' + EmptyString(ProductValue.ORDER_NO) + '</span>' +
                '</td>' +
                '<td style="width:180px">';
            $html += SubcontractCode;
            $html += '</td>' +
                '<td style="width:180px">' +
                '<span class=" txt_SubcontractName ' + classRed + ' " value="' + EmptyString(ProductValue.SUBCONTRACT_NAME) + '">' + EmptyString(ProductValue.SUBCONTRACT_NAME) + '</span>' +
                '</td>' +
                '<td>' +
                '<span class=" txt_ProductName ' + classRed + ' " value="' + EmptyString(ProductValue.PRODUCT_NAME) + '">' + EmptyString(ProductValue.PRODUCT_NAME) + '</span>' +
                '</td>' +
                '<td>' +
                '<span class=" txt_OrderType ' + classRed + ' " value="' + EmptyString(ProductValue.ORDER_TYPE) + '">' + EmptyString(ProductValue.ORDER_TYPE) + '</span>' +
                '</td>' +
                '<td style="width:180px">' +
                '<span class=" txt_SubmitDate ' + classRed + ' " value="' + EmptyString(ProductValue.SUBMIT_DATE) + '">' + EmptyString(ProductValue.SUBMIT_DATE) + '</span>' +
                '</td>' +
                '<td style="width:180px">' +
                '<span class=" txt_SerialNumber ' + classRed + ' " value="' + EmptyString(ProductValue.SN) + '">' + EmptyString(ProductValue.SN) + '</span>' +
                '</td>' +
                '<td>';
            $html += MaterialCode;
            $html += '</td>' +
                '<td>';
            $html += CompanyCode;
            $html += '</td>' +
                '<td>';
            $html += Plant;
            $html += '</td>' +
                '<td style="width:150px">';
            $html += StorageLocation;
            $html += '</td>' +
                '<td>';
            $html += SNPattern;
            $html += '</td>' +
                '<td>' +
                '<span class=" txt_MovementType ' + classRed + ' " value="' + EmptyString(ProductValue.MOVEMENT_TYPE) + '">' + EmptyString(ProductValue.MOVEMENT_TYPE) + '</span>' +
                '</td>' +
                '<td>' +
                '<span class="txt_ErrorCode ' + classRed + ' " value="' + EmptyString(ProductValue.ERR_CODE) + '">' + EmptyString(ProductValue.ERR_CODE) + '</span>' +
                '</td>' +
                '<td>' +
                '<span class="txt_ErrorMassage ' + classRed + ' " value="' + EmptyString(ProductValue.ERR_MSG) + '">' + EmptyString(ProductValue.ERR_MSG) + '</span>' +
                '</td>' +
                '</tr>';

        });
        //$temp.append($html);
        $html += '</table>';

        return $html;
    }

    // Not Use
    function getInstallList($InstallList) {
        $html = '';

        $class = "k-textbox form-control input-datalist validate-all-item";
        $html = '<table>';
        $.each($InstallList, function (InstallKey, InstallValue) {
            var classRed = '';

            if (InstallValue.ERR_CODE != '000') {
                classRed = 'color-red';
            }

            $html += '<tr>' +
                '<td>' +
                '<span class=" txt_PRODUCT_NAME " value= "' + EmptyString(InstallValue.PRODUCT_NAME) + '">' + EmptyString(InstallValue.PRODUCT_NAME) + '</span>' +
                '</td>' +
                '<td>' +
                '<span class=" txt_INSTALLATION_COST " value="' + EmptyString(InstallValue.INSTALLATION_COST) + '">' + EmptyString(InstallValue.INSTALLATION_COST) + '</span>' +
                '</td>' +
                '<td>' +
                '<span class=" txt_ORDER_DATE " value="' + EmptyString(InstallValue.ORDER_DATE) + '">' + EmptyString(InstallValue.ORDER_DATE) + '</span>' +
                '</td>' +
                '<td>' +
                '<span class=" txt_MODIFY_DATE " value="' + EmptyString(InstallValue.MODIFY_DATE) + '">' + EmptyString(InstallValue.MODIFY_DATE) + '</span>' +
                '</td>' +
                '<td>' +
                '<span class=" txt_TRAN_STATUS " value="' + EmptyString(InstallValue.TRAN_STATUS) + '">' + EmptyString(InstallValue.TRAN_STATUS) + '</span>' +
                '</td>' +
                '</tr>';

            //$html += '<tr>' +
            //            '<td>' +
            //                '<span class=" txt_MAIN_ASSET " value="' + EmptyString(InstallValue.MAIN_ASSET) + '">' + EmptyString(InstallValue.MAIN_ASSET) + '</span>' +
            //            '</td>' +
            //            '<td>' +
            //                '<span class=" txt_SUB_NUMBER " value="' + EmptyString(InstallValue.SUB_NUMBER) + '">' + EmptyString(InstallValue.SUB_NUMBER) + '</span>' +
            //            '</td>' +
            //            '<td>' +
            //                '<span class="txt_SUBCONTRACT_CODE " value="' + EmptyString(InstallValue.SUBCONTRACT_CODE) + '">' + EmptyString(InstallValue.SUBCONTRACT_CODE) + '</span>' +
            //            '</td>' +
            //            '<td>' +
            //                '<span class=" txt_SUBCONTRACT_NAME " value="' + EmptyString(InstallValue.SUBCONTRACT_NAME) + '">' + EmptyString(InstallValue.SUBCONTRACT_NAME) + '</span>' +
            //            '</td>' +
            //            '<td>' +
            //                '<span class=" txt_COM_CODE" value= "' + EmptyString(InstallValue.COM_CODE) + '">' + EmptyString(InstallValue.COM_CODE) + '</span>' +
            //            '</td>' +
            //            '<td>' +
            //                '<span class=" txt_INSTALLATION_COST " value="' + EmptyString(InstallValue.INSTALLATION_COST) + '">' + EmptyString(InstallValue.INSTALLATION_COST) + '</span>' +
            //            '</td>' +
            //            '<td>' +
            //                '<span class=" txt_ERR_MSG " value="' + EmptyString(InstallValue.ERR_MSG) + '">' + EmptyString(InstallValue.ERR_MSG) + '</span>' +
            //            '</td>' +
            //        '</tr>';

        });
        $html += '</table>';
        //$temp.append($html);



        return $html;
    }

    // Set Column Lable
    function setColumnLable($Temp, $Status) {
        $html = '';
        if ($Status == "ERROR") {
            $html = "<span class='color-red'>" + EmptyString($Temp) + "</span>";
        }
        else {
            $html = "<span class=''>" + EmptyString($Temp) + "</span>";
        }
        return $html;
    }
    // set Column Input Textbox

    function GetDdlGrid(control, val, code) {
        var datasource = '';
        if (code == 'SUBCONTRACT_CODE') {
            datasource = SubcontractorCode;
        } else if (code == 'MATERIAL_CODE') {
            datasource = Materialcode;
        } else if (code == 'COMPANY_CODE') {
            datasource = Company;
        }
        else if (code == 'PLANT') {
            datasource = Plant;
        }
        else if (code == 'SN_TYPE') {
            datasource = SNPattern;
        }
        else if (code == 'ASSET_CLASS') {
            datasource = AssetClass;
        }
        else if (code == 'COST_CENTER') {
            datasource = CostCenter;
        }
        else if (code == 'PRODUCT') {
            datasource = Product;
        }
        else if (code == 'ACTION') {
            datasource = Action;
        }
        $(control).kendoDropDownList({
            dataSource: datasource,
            dataTextField: "LOV_VAL1",
            dataValueField: "LOV_NAME",
            filter: "startswith",
            open: function (e) {
                e.sender.popup.element.addClass('color-red');
            },
        })

        $(control).data('kendoDropDownList').value(val);
        $(control).data('kendoDropDownList').wrapper.find("span").css("color", "red");
    }
    function setColumnDropdownlist($str, $Value, $Status) {
        $html = '';
        if ($Status == "ERROR") {
            if ($str == 'SUBCONTRACT_CODE') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' readonly='readonly'/>";//onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"SUBCONTRACT_CODE\")'
                    });
                }
            } else if ($str == 'MATERIAL_CODE') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"MATERIAL_CODE\")'/>";
                    });
                }
            }
            else if ($str == 'COMPANY_CODE') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"COMPANY_CODE\")'/>";
                    });
                }
            }
            else if ($str == 'PLANT') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"PLANT\")'/>";
                    });
                }
            }
            else if ($str == 'SNPattern') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' readonly='readonly'/>";//  onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"SN_TYPE\")'
                    });
                }
            }
            // Main Asset
            else if ($str == 'ASSET_CLASS') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"ASSET_CLASS\")'/>";
                    });
                }
            }
            else if ($str == 'COST_CENTER') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"COST_CENTER\")'/>";
                    });
                }
            }
            else if ($str == 'PRODUCT') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"PRODUCT\")'/>";
                    });
                }
            }
            else if ($str == 'ACTION') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend color-red' value='" + EmptyString(obj) + "' onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"ACTION\")'/>";
                    });
                }
            }
            //end
            else {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " k-textbox form-control input-datalist validate-all-item color-red' value='" + EmptyString(obj) + "' />";
                    });
                }

            }
            //$.ajax({
            //    type: "GET",
            //    url: "/SubmitFOAReport/SetDDLSubcontractorCode",
            //    dataType: "json",
            //    success: function (data) {
            //        $html = '<select id="gridddlSubcontractorCode"></select>';
            //        console.log(data);
            //        $.each(data, function (i, obj)
            //        {
            //            console.log(obj.LOV_NAME + ":" + obj.LOV_VAL1);
            //            var div_data = "<option value=" + obj.LOV_NAME + ">" + obj.LOV_VAL1 + "</option>";
            //            console.log(div_data);
            //            $(div_data).appendTo('#gridddlSubcontractorCode');
            //        });
            //    }
            //});

        }
        else if ($Status == "Pending" || $Status == "PENDING") {
            if ($str == 'SUBCONTRACT_CODE') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";//onclick='GetDdlGrid(this,\"" + EmptyString(obj) + "\",\"SUBCONTRACT_CODE\")'
                    });
                }
            } else if ($str == 'MATERIAL_CODE') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            else if ($str == 'COMPANY_CODE') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            else if ($str == 'PLANT') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            else if ($str == 'SNPattern') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            // Main Asset
            else if ($str == 'ASSET_CLASS') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            else if ($str == 'COST_CENTER') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            else if ($str == 'PRODUCT') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            else if ($str == 'ACTION') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            else if ($str == 'STORAGE_LOCATION') {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " form-control i-form-control-extend' value='" + EmptyString(obj) + "' readonly='readonly'/>";
                    });
                }
            }
            else {
                if ($Value != '' && $Value != null && $Value != undefined) {
                    var res = $Value.split("<br/>");
                    $.each(res, function (i, obj) {
                        $html += "<input class='txt_" + $str + " k-textbox form-control input-datalist validate-all-item' value='" + EmptyString(obj) + "' />";
                    });
                }

            }
        }
        else {
            $html = "<span class=''>" + EmptyString($Value) + "</span>";
        }

        return $html;
    }



    // Not Use
    function _inputName($name) {
        return $("input[name='" + $name + "']").val();;
    }

    // Not Use
    function resendMainData() {
        var resendModel = new ResendSubmitFOAModel();
        resendModel.Access_No = _inputName('txtAccessNo');
        resendModel.OrderNumber = _inputName('txtOrderNo');
        resendModel.SubcontractorCode = _inputName('txtSubCode');
        resendModel.SubcontractorName = _inputName('txtSubName');
        resendModel.ProductName = _inputName('txtProductName');
        resendModel.ServiceName = _inputName('txtServiceName');
        resendModel.OrderType = _inputName('txtOrderType');
        resendModel.SubmitFlag = _inputName('txtSubmitFlag');
        resendModel.RejectReason = _inputName('txtRejectReason');
        resendModel.FOA_Submit_date = _inputName('txtSubmitdatefull');
        resendModel.OLT_NAME = _inputName('txtOLTNAME');
        resendModel.BUILDING_NAME = _inputName('txtBuildingName');
        resendModel.Mobile_Contact = _inputName('txtMobileContact');
        //console.log(resendModel);

        return resendModel;
    }

    // Not Use
    function resendProductData() {
        var productArr = [];
        $('#product-list tbody tr').each(function () {
            var $this = $(this);

            var _productModel = new ProductModel();
            _productModel.SerialNumber = $this.find('span.txt_SerialNumber').text();
            _productModel.MaterialCode = $this.find('input.txt_MaterialCode').val();
            _productModel.CompanyCode = $this.find('input.txt_CompanyCode').val();
            _productModel.Plant = $this.find('input.txt_Plant').val();
            _productModel.StorageLocation = $this.find('input.txt_StorageLocation').val();
            _productModel.SNPattern = $this.find('input.txt_SNPattern').val();
            _productModel.MovementType = $this.find('span.txt_MovementType').text();
            productArr.push(_productModel);
        });
        return productArr;
    }

    // defaultData Serach Equipment
    function defaultData() {
        var FOAModel = new SubmitFOAModel();
        FOAModel.orderNo = $("#txtSearchOrderNo").val() == '' ? 'ALL' : $("#txtSearchOrderNo").val();
        FOAModel.internetNo = $("#txtSearchAccessNo").val() == '' ? 'ALL' : $("#txtSearchAccessNo").val();
        FOAModel.status = $("#ddlStatus").val();
        FOAModel.productName = $("#ddlProductName").val();
        FOAModel.orderType = $("#ddlOrderType").val();
        FOAModel.companyCode = $("#ddlCompanyCode").val();
        FOAModel.serviceName = $("#ddlServiceName").val();
        FOAModel.subcontractorCode = $("#ddlSubcontractorCode").val();
        FOAModel.errormessage = $("#txtSearchERRMSG").val() == '' ? 'ALL' : $("#txtSearchERRMSG").val();
        FOAModel.plant = $("#ddlPlant").val();
        FOAModel.materialCode = $("#ddlMaterialCode").val();
        FOAModel.storLocation = $.trim($("#txtSearchStorLocation").val()) == '' ? 'ALL' : $.trim($("#txtSearchStorLocation").val());
        FOAModel.dateFrom = formatDate(kendo.parseDate($("#dtpDateFrom").val(), "dd/MM/yyyy"));
        FOAModel.dateTo = formatDate(kendo.parseDate($("#dtpDateTo").val(), "dd/MM/yyyy"));
        FOAModel.productOwner = $("#ddlProductOwner").val();

        //31032020 เพิ่ม page index กับ page size
        var grid = $("#gridOverviewStatus").data("kendoGrid");
        FOAModel.PAGE_INDEX = grid.dataSource.page();
        FOAModel.PAGE_SIZE = grid.dataSource.pageSize();

        return FOAModel;
    }
    //defaultData Search MainAsset
    function defaultDataMainAsset() {
        var FOAModel = new SubmitFOAMainAssetModel();
        FOAModel.orderNo = $("#txtMASearchOrderNo").val() == '' ? 'ALL' : $("#txtMASearchOrderNo").val();
        FOAModel.internetNo = $("#txtMASearchAccessNo").val() == '' ? 'ALL' : $("#txtMASearchAccessNo").val();
        FOAModel.companyCode = $("#ddlMACompanyCode").val();
        FOAModel.assetClass = $("#ddlMAAssetClass").val();
        FOAModel.status = $("#ddlMAStatus").val();
        FOAModel.dateFrom = formatDate(kendo.parseDate($("#dtpMaDateFrom").val(), "dd/MM/yyyy"));
        FOAModel.dateTo = formatDate(kendo.parseDate($("#dtpMaDateTo").val(), "dd/MM/yyyy"));
        return FOAModel;
    }
    function defaultDataRevalue() {
        var FOAModel = new SubmitFOARevalueModel();
        FOAModel.orderNo = $("#txtRVSearchOrderNo").val() == '' ? 'ALL' : $("#txtRVSearchOrderNo").val();
        FOAModel.internetNo = $("#txtRVSearchAccessNo").val() == '' ? 'ALL' : $("#txtRVSearchAccessNo").val();
        FOAModel.companyCode = $("#ddlRVCompanyCode").val();
        FOAModel.mainasset = $("#txtRVMainAsset").val();
        FOAModel.action = $('#ddlRVAction').val();
        FOAModel.status = $("#ddlRVStatus").val();
        FOAModel.errormessage = $("#txtRVSearchERRMSG").val() == '' ? 'ALL' : $("#txtRVSearchERRMSG").val();
        FOAModel.dateFrom = formatDate(kendo.parseDate($("#dtpRVDateFrom").val(), "dd/MM/yyyy"));
        FOAModel.dateTo = formatDate(kendo.parseDate($("#dtpRVDateTo").val(), "dd/MM/yyyy"));
        FOAModel.productOwner = $("#ddlRevalueProductOwner").val();

        return FOAModel;
    }
    // defaultData Serach Installation
    function defaultDataInstall() {
        var FOAModel = new SubmitFOAInstallModel();
        FOAModel.orderNo = $("#txtSearchOrderNo").val() == '' ? 'ALL' : $("#txtSearchOrderNo").val();
        FOAModel.internetNo = $("#txtSearchAccessNo").val() == '' ? 'ALL' : $("#txtSearchAccessNo").val();
        FOAModel.productName = $("#ddlProductName").val();
        FOAModel.serviceName = $("#ddlServiceName").val();
        FOAModel.status = $("#ddlStatus").val();
        FOAModel.dateFrom = formatDate(kendo.parseDate($("#dtpDateFrom").val(), "dd/MM/yyyy"));
        FOAModel.dateTo = formatDate(kendo.parseDate($("#dtpDateTo").val(), "dd/MM/yyyy"));
        FOAModel.productOwner = $("#ddlProductOwner").val();

        return FOAModel;
    }

    //defaultData Search MainAsset

    var ReplaceModel = new ReplaceFOAModel();
    // defaultData Replace
    function replaceData() {
        ReplaceModel.materialCode = $("#ddlReMaterialCode").val();
        ReplaceModel.subcontractorCode = $("#ddlReSubcontractorCode").val();
        ReplaceModel.companyCode = $("#ddlReCompanyCode").val();
        ReplaceModel.postDate = formatDate(kendo.parseDate($("#dtpPostDate").val(), "dd/MM/yyyy"));
        ReplaceModel.storLocation = $.trim($("#txtReStorLocation").val());
        ReplaceModel.plant = $("#ddlRePlant").val();

        return ReplaceModel;
    }

    // Not Use
    function _ClearPopupData() {
        $("#access_no").val("");
        $("#order_no").val("");

        $("#dtpDateFrom").data("kendoDatePicker").value("");
        $("#dtpDateTo").data("kendoDatePicker").value("");
        //reset min, max.
        $("#dtpDateFrom").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#dtpDateTo").data("kendoDatePicker").min(new Date(1900, 0, 1, 0, 0, 0, 0));
        $("#validatefor-dtpDateTo").html("");
        $("#validatefor-dtpDateFrom").html("");
    }

    // Not Use
    $(document).on('click', '.btn-product-add', function () {
        var $this = $(this),
            $tbody = $this.parents('table').find('tbody'),
            $html = '';

        $html = '<tr>' +
            '<td><span class="txt_SerialNumber"></span></td>' +
            '<td><input class="k-textbox form-control input-datalist validate-all-item txt_MaterialCode"></td>' +
            '<td><input class="k-textbox form-control input-datalist validate-all-item txt_CompanyCode"></td>' +
            '<td><input class="k-textbox form-control input-datalist validate-all-item txt_Plant"></td>' +
            '<td><input class="k-textbox form-control input-datalist validate-all-item txt_StorageLocation"></td>' +
            '<td><input class="k-textbox form-control input-datalist validate-all-item txt_SNPattern"></td>' +
            '<td><input class="k-textbox form-control input-datalist validate-all-item txt_MovementType"></td>' +
            '<td><input class="k-textbox form-control input-datalist validate-all-item txt_MovementType"></td>' +
            '</tr>';

        $tbody.append($html);
    });

    // Not Use
    $(document).on('click', '.btn-product-remove', function () {
        $(this).parents('tr').remove();
    });

    // Not Use
    function _Resend() {

        Loading();
        //var model = resendData();
        //model.DateFrom = formatDate(model.DateFrom);
        //model.DateTo = formatDate(model.DateTo);

        var grid = $("#gridOverviewStatus").data("kendoGrid");
        $.ajax({
            type: 'POST',
            url: '/SubmitFOAReport/ResendSubmitFOA',
            data: {
                main: JSON.stringify(resendMainData()),
                product: JSON.stringify(resendProductData())
            },
            dataType: "json",
            success: function (response) {
                if (response) {
                    if (response.result == "0" || response.result == "000" || response.result == "") alert("Success");
                    else alert(response.errorReason);
                }
                _resetDialog();
                grid.dataSource.page(1);
            },
            failure: function (msg) {
                alert(msg);
                _resetDialog();
                grid.dataSource.page(1);
            }
        });
        //var grid = $("#gridOverviewStatus2").data("kendoGrid");
        //$.ajax({
        //    type: 'POST',
        //    url: '/SubmitFOAReport/ResendSubmitFOA',
        //    data: {
        //        main: JSON.stringify(resendMainData()),
        //        product: JSON.stringify(resendProductData())
        //    },
        //    dataType: "json",
        //    success: function (response) {
        //        if (response) {
        //            if (response.result == "0" || response.result == "000" || response.result == "") alert("Success");
        //            else alert(response.errorReason);
        //        }
        //        _resetDialog();
        //        grid.dataSource.page(1);
        //    },
        //    failure: function (msg) {
        //        alert(msg);
        //        _resetDialog();
        //        grid.dataSource.page(1);
        //    }
        //});
    }

    // Not Use
    function _resetDialog() {
        CancelPopup();
        Loading(0);
    }

    // Button Search
    function _Search() {
        var chk = ValidationDateValue();
        if (chk) {
            var SoftwareTabStrip = $("#SoftwareTabStrip").find(".k-tab-on-top").find("a").prop("text");
            $("#chksearch").val(SoftwareTabStrip);
            //if ($("#ddlStatus").val() == "PENDING") $('#btnResendAll').attr("disabled", false);
            //else $('#btnResendAll').attr("disabled", true);
            //$('#btnResendAll').attr("disabled", true);

            //// Set Button btnResendAll
            //if ($("#ddlStatus").val() != "COMPLETE" && $("#ddlStatus").val() != "ALL") {
            //    $('#btnResendAll').attr("disabled", false);
            //}
            //else {
            //    $('#btnResendAll').attr("disabled", "disabled");
            //}

            // Set Checkbox selectall , DropdownList
            if ($("#ddlStatus").val() == "ERROR") {
                // disable
                $('#selectall').removeAttr("disabled");

                // enable
                $("#ddlReMaterialCode").data('kendoDropDownList').enable(true);
                $("#ddlReSubcontractorCode").data('kendoDropDownList').enable(true);
                $("#ddlReCompanyCode").data('kendoDropDownList').enable(true);
                $("#txtReStorLocation").attr("disabled", false);
                $("#ddlRePlant").data('kendoDropDownList').enable(true);

            }
            else if ($("#ddlStatus").val() == "Pending") {
                // disable
                $('#selectall').prop('checked', false);
                //$('#selectall').attr("disabled", "disabled");

                $('#selectall').removeAttr("disabled");

                // disable
                $("#ddlReMaterialCode").data('kendoDropDownList').enable(false);
                $("#ddlReSubcontractorCode").data('kendoDropDownList').enable(false);
                $("#ddlReCompanyCode").data('kendoDropDownList').enable(false);
                $("#txtReStorLocation").attr("disabled", "disabled");
                $("#ddlRePlant").data('kendoDropDownList').enable(false);
            }
            else if ($("#ddlStatus").val() == "COMPLETE") {
                // disable
                $('#selectall').prop('checked', false);
                $('#selectall').attr("disabled", "disabled");

                // disable
                $("#ddlReMaterialCode").data('kendoDropDownList').enable(false);
                $("#ddlReSubcontractorCode").data('kendoDropDownList').enable(false);
                $("#ddlReCompanyCode").data('kendoDropDownList').enable(false);
                $("#txtReStorLocation").attr("disabled", "disabled");
                $("#ddlRePlant").data('kendoDropDownList').enable(false);
            }
            else {
                // enable
                $('#selectall').removeAttr("disabled");

                // enable
                $("#ddlReMaterialCode").data('kendoDropDownList').enable(true);
                $("#ddlReSubcontractorCode").data('kendoDropDownList').enable(true);
                $("#ddlReCompanyCode").data('kendoDropDownList').enable(true);
                $("#txtReStorLocation").attr("disabled", false);
                $("#ddlRePlant").data('kendoDropDownList').enable(true);
            }
            if ($("#ddlStatus").val() == "ERROR") {
                $('#replace_panel').show();
            } else {
                $('#replace_panel').hide();
            }
            var model = defaultData();
            var grid = $("#gridOverviewStatus").data("kendoGrid");
            grid.dataSource.page(1);

            var model = defaultDataInstall();
            var grid2 = $("#gridOverviewStatus2").data("kendoGrid");
            grid2.dataSource.page(1);

            _temp_defaultData = defaultData();
            _temp_defaultDataInstall = defaultDataInstall();

            //setTimeout(function () {
            //	var grid = $("#gridOverviewStatus").data("kendoGrid");
            //	var dataSource = grid.dataSource;

            //	//records on current view / page
            //	var recordsOnCurrentView = dataSource.view().length;
            //	//total records
            //	var totalRecords = dataSource.total();

            //if (totalRecords > 0 && $("#ddlStatus").val() != "COMPLETE" && $("#ddlStatus").val() != "ALL") {
            //    $('#btnResendAll').attr("disabled", false);
            //} else {
            //    $('#btnResendAll').attr("disabled", "disabled");
            //}
            //}, 1000)
        }
    }
    //search main asset
    // Button Search
    function _SearchMainAsset() {
        var chk = ValidationMADateValue();
        if (chk) {

            // Set Button btnResendAll
            if ($("#ddlMAStatus").val() != "ERROR") {
                $('#selectMAall').prop('checked', false);
                $('#selectMAall').attr("disabled", "disabled");
            }
            else {
                $('#btnResendAll').attr("disabled", false);
                $('#selectMAall').removeAttr("disabled");
            }
            //var model = defaultData();
            //var grid = $("#gridOverviewStatus").data("kendoGrid");
            //grid.dataSource.page(1);

            //var model = defaultDataInstall();
            //var grid2 = $("#gridOverviewStatus2").data("kendoGrid");
            //grid2.dataSource.page(1);

            var model3 = defaultDataMainAsset();
            var grid3 = $("#gridOverviewStatus3").data("kendoGrid");
            grid3.dataSource.page(1);

            //_temp_defaultData = defaultData();
            //_temp_defaultDataInstall = defaultDataInstall();
            _temp_defaultDataMainAsset = defaultDataMainAsset();
        }

    }
    function _SearchRevalue() {
        var chk = ValidationRVDateValue();
        if (chk) {

            /*   // Set Button btnResendAll
               if ($("#ddlRVStatus").val() != "Pending" && $("#ddlRVStatus").val() != "PENDING") {
                   $('#btnResendAll').attr("disabled", "disabled");
                   $('#selectRVall').prop('checked', false);
                   $('#selectRVall').attr("disabled", "disabled");
               }
               else {
                   $('#btnResendAll').attr("disabled", false);
                   $('#selectRVall').removeAttr("disabled");
               }
            */

            var model4 = defaultDataRevalue();
            var grid4 = $("#gridOverviewStatus4").data("kendoGrid");
            grid4.dataSource.page(1);


            _temp_defaultDataRevalue = defaultDataRevalue();
            setTimeout(function () {
                var grid = $("#gridOverviewStatus4").data("kendoGrid");
                var dataSource = grid.dataSource;

                //records on current view / page
                var recordsOnCurrentView = dataSource.view().length;
                //total records
                var totalRecords = dataSource.total();

                if (totalRecords > 0 && $("#ddlRVStatus").val() == "Pending" || $("#ddlRVStatus").val() == "PENDING") {
                    $('#btnResendAll').attr("disabled", false);

                } else {
                    $('#btnResendAll').attr("disabled", "disabled");
                }
            }, 1500);
        }
    }
    function _ClearReplacePanel() {
        //Button
        $('#btnUpdate').attr("disabled", true);

        //Replace To
        $("#ddlReMaterialCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#ddlReSubcontractorCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#ddlReCompanyCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#txtReStorLocation").val("");
        $("#ddlRePlant").data('kendoDropDownList').text("-- Please Select One --");

        //DatePicker
        $("#dtpPostDate").data("kendoDatePicker").value("");
        //reset min, max.
        $("#dtpPostDate").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#validatefor-dtpPostDate").html("");
    }

    // Button Clear
    function _Clear() {
        //Search Panel
        $("#txtSearchAccessNo").val("");
        $("#txtSearchOrderNo").val("");
        $("#txtSearchERRMSG").val("");
        $("#ddlStatus").data('kendoDropDownList').text("-- Select All --");
        $("#ddlProductName").data('kendoDropDownList').text("-- Select All --");
        $("#ddlOrderType").data('kendoDropDownList').text("-- Select All --");
        $("#ddlCompanyCode").data('kendoDropDownList').text("-- Select All --");
        $("#ddlServiceName").data('kendoDropDownList').text("-- Select All --");
        $("#ddlSubcontractorCode").data('kendoDropDownList').text("-- Select All --");
        $("#ddlPlant").data('kendoDropDownList').text("-- Select All --");
        $("#ddlMaterialCode").data('kendoDropDownList').text("-- Select All --");
        $("#txtSearchStorLocation").val("");

        //Replace To
        $("#ddlReMaterialCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#ddlReSubcontractorCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#ddlReCompanyCode").data('kendoDropDownList').text("-- Please Select One --");
        $("#txtReStorLocation").val("");
        $("#ddlRePlant").data('kendoDropDownList').text("-- Please Select One --");

        //DatePicker
        $("#dtpDateFrom").data("kendoDatePicker").value("");
        $("#dtpDateTo").data("kendoDatePicker").value("");
        $("#dtpPostDate").data("kendoDatePicker").value("");

        //reset min, max.
        $("#dtpDateFrom").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#dtpDateTo").data("kendoDatePicker").min(new Date(1900, 0, 1, 0, 0, 0, 0));
        $("#dtpPostDate").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#validatefor-dtpDateTo").html("");
        $("#validatefor-dtpDateFrom").html("");
        $("#validatefor-dtpPostDate").html("");

        // Button , Table
        $('#btnUpdate').attr("disabled", true);
        $('#btnResendAll').attr("disabled", true);
        //$('#btnExport').attr("disabled", true);

        // Checkbox
        $('#selectall').prop('checked', false);
        $('#selectall').attr("disabled", "disabled");


        // Checkbox
        $('#selectMAall').prop('checked', false);
        $('#selectMAall').attr("disabled", "disabled");
        $("#gridOverviewStatus").data("kendoGrid").dataSource.data([]);
        $("#gridOverviewStatus2").data("kendoGrid").dataSource.data([]);

        $('#replace_panel').hide();
        //ma
        //Search Panel
        $("#txtMASearchAccessNo").val("");
        $("#txtMASearchOrderNo").val("");
        $("#ddlMACompanyCode").data('kendoDropDownList').text("-- Select All --");
        $("#ddlMAAssetClass").data('kendoDropDownList').text("-- Select All --");
        $("#ddlMAStatus").data('kendoDropDownList').text("-- Select All --");
        $("#dtpMaDateFrom").data("kendoDatePicker").value("");
        $("#dtpMaDateTo").data("kendoDatePicker").value("");
        $("#dtpMaDateFrom").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#dtpMaDateTo").data("kendoDatePicker").min(new Date(1900, 0, 1, 0, 0, 0, 0));
        $("#validatefor-dtpMaDateTo").html("");
        $("#validatefor-dtpMaDateFrom").html("");
        //$("#gridOverviewStatus3").data("kendoGrid").dataSource.data([]);
        //
        //Revalue
        //Search Panel
        $("#txtRVSearchAccessNo").val("");
        $("#txtRVSearchOrderNo").val("");
        $("#ddlRVCompanyCode").data('kendoDropDownList').text("-- Select All --");
        $("#ddlRVAction").data('kendoDropDownList').text("-- Select All --");
        $("#ddlRVStatus").data('kendoDropDownList').text("-- Select All --");
        $("#dtpRVDateFrom").data("kendoDatePicker").value("");
        $("#dtpRVDateTo").data("kendoDatePicker").value("");
        $("#dtpRVDateFrom").data("kendoDatePicker").max(new Date(2099, 11, 31, 0, 0, 0, 0));
        $("#dtpRVDateTo").data("kendoDatePicker").min(new Date(1900, 0, 1, 0, 0, 0, 0));
        $("#validatefor-dtpRVDateTo").html("");
        $("#validatefor-dtpRVDateFrom").html("");
        $("#gridOverviewStatus4").data("kendoGrid").dataSource.data([]);
        //

        //flag for searchpage
        $("#chksearch").val("");
        //

        // 3BB Integration Track OSS Multi Company
        $("#ddlProductOwner").data('kendoDropDownList').value("ALL");
        $("#ddlRevalueProductOwner").data('kendoDropDownList').value("ALL");
        _temp_defaultData = null;
        _temp_defaultDataInstall = null;
        _temp_defaultDataMainAsset = null;
        _temp_defaultDataRevalue = null;


        $.ajax({
            url: '/SubmitFOAReport/ClearListEquip',
            type: 'PUT',
            success: function (response) {
                console.log(response);
            }
        });
    }

    // Button ExportToExcel
    var _temp_defaultData;
    var _temp_defaultDataInstall;
    var _temp_defaultDataMainAsset;
    var _temp_defaultDataRevalue;
    function _ExportToExcel() {
        var SoftwareTabStrip = $("#SoftwareTabStrip").find(".k-tab-on-top").find("a").prop("text");
        //  var SoftwareTabStrip_split = SoftwareTabStrip.split("/");
        if (SoftwareTabStrip == 'EQUIPMENT') {//((SoftwareTabStrip_split[SoftwareTabStrip_split.length - 1]).indexOf("1") > 1) {
            //EQUIPMENT
            console.log("EQUIPMENT");
            if (_temp_defaultData) {
                window.open("/SubmitFOAReport/Export_equip_Report?dataS=" + JSON.stringify(_temp_defaultData));
            }
        }
        else if (SoftwareTabStrip == 'INSTALLATION') {
            // INSTALLATION
            console.log("INSTALLATION");
            if (_temp_defaultDataInstall) {
                // _temp_defaultData for display in excel in filter zone
                window.open("/SubmitFOAReport/Export_Installation_Report?dataS=" + JSON.stringify(_temp_defaultData));
            }
        }
        else if (SoftwareTabStrip == 'REVALUE') {
            // INSTALLATION
            console.log("REVALUE");
            if (_temp_defaultDataRevalue) {
                // _temp_defaultData for display in excel in filter zone
                window.open("/SubmitFOAReport/Export_Revalue_Report?dataS=" + JSON.stringify(_temp_defaultDataRevalue));
            }
        }
        else {
            // MAINASSET
            console.log("MAINASSET");
            if (_temp_defaultDataMainAsset) {
                // _temp_defaultData for display in excel in filter zone
                window.open("/SubmitFOAReport/Export_MainAsset_Report?dataS=" + JSON.stringify(_temp_defaultDataMainAsset));
            }
        }
    }


    function ValidationDateValue() {
        var chk = ValidationProcessing("dateselect");
        $("#validatefor-" + "ACCESSNO").html("");
        if (chk) //check blank value
        {


            //{
            //    if ($.trim($("#dtpDateFrom").val()) == '') {
            //        $("#validatefor-" + "dtpDateFrom").html(ValidationIcon() + "This field is required.");
            //        chk = false;
            //    }
            //    else {
            //        $("#validatefor-" + "dtpDateFrom").html("");
            //    }

            //    if ($.trim($("#dtpDateTo").val()) == '') {
            //        $("#validatefor-" + "dtpDateTo").html(ValidationIcon() + "This field is required.");
            //        chk = false;
            //    }
            //    else {
            //        $("#validatefor-" + "dtpDateTo").html("");
            //    }
            //}

            //29-01-2020 remove validate datefrom and dateto. Change validate Access no.
            if ($.trim($("#txtSearchAccessNo").val()) == '') {
                if ($.trim($("#txtSearchOrderNo").val()) == '' && $("#ddlStatus").val() == "ALL" && $("#ddlProductName").val() == "ALL"
                    && $("#ddlOrderType").val() == "ALL" && $("#ddlCompanyCode").val() == "ALL" && $("#ddlServiceName").val() == ""
                    && $("#ddlSubcontractorCode").val() == "ALL" && $("#ddlPlant").val() == "ALL" && $("#ddlMaterialCode").val() == "ALL"
                    && $.trim($("#txtSearchStorLocation").val()) == "" && $.trim($("#txtSearchERRMSG").val()) == ""
                    && $.trim($("#dtpDateFrom").val()) == '' && $.trim($("#dtpDateTo").val()) == '' && $("#ddlProductOwner").val() == "ALL") {

                    $("#validatefor-" + "ACCESSNO").html(ValidationIcon() + "This field is required.");

                    chk = false;
                }

            }
        }

        //check format
        if ($.trim($("#dtpDateFrom").val()) != '') {
            if (!kendo.parseDate($("#dtpDateFrom").val(), "dd/MM/yyyy")) {
                if ($("#dtpDateFrom").val() != "") {
                    $("#validatefor-" + "dtpDateFrom").html(ValidationIcon() + "This field is not correct format.");
                    chk = false;
                }
            }
            else {
                $("#validatefor-" + "dtpDateFrom").html("");
            }
        }
        if ($.trim($("#dtpDateTo").val()) != '') {
            if (!kendo.parseDate($("#dtpDateTo").val(), "dd/MM/yyyy")) {
                if ($("#dtpDateTo").val() != "") {
                    $("#validatefor-" + "dtpDateTo").html(ValidationIcon() + "This field is not correct format.");
                    chk = false;
                }
            }
            else {
                $("#validatefor-" + "dtpDateTo").html("");
            }
        }

        //check Date From must be earlier than Date To
        if ($.trim($("#dtpDateFrom").val()) != '' && $.trim($("#dtpDateTo").val()) != '') {
            var startPicker = new Date(kendo.parseDate($("#dtpDateFrom").val(), "mm/dd/yyyy"));
            var endPicker = new Date(kendo.parseDate($("#dtpDateTo").val(), "mm/dd/yyyy"));

            if (startPicker > endPicker) {
                if ($("#dtpDateFrom").val() != "") {
                    $("#validatefor-" + "dtpDateFrom").html(ValidationIcon() + "Date From must be earlier than Date To.");
                    chk = false;
                }
                else {
                    $("#validatefor-" + "dtpDateFrom").html("");
                }
            }
        }

        //if (chk) //check format
        //{
        //    if (!kendo.parseDate($("#dtpDateFrom").val(), "dd/MM/yyyy")) {
        //        if ($("#dtpDateFrom").val() != "") {
        //            $("#validatefor-" + "dtpDateFrom").html(ValidationIcon() + "This field is not correct format.");
        //            chk = false;
        //        }
        //    }
        //    else {
        //        $("#validatefor-" + "dtpDateFrom").html("");
        //    }

        //    if (!kendo.parseDate($("#dtpDateTo").val(), "dd/MM/yyyy")) {
        //        if ($("#dtpDateTo").val() != "") {
        //            $("#validatefor-" + "dtpDateTo").html(ValidationIcon() + "This field is not correct format.");
        //            chk = false;
        //        }
        //    }
        //    else {
        //        $("#validatefor-" + "dtpDateTo").html("");
        //    }
        //}

        //if (chk) //check Date From must be earlier than Date To
        //{
        //    var startPicker = new Date(kendo.parseDate($("#dtpDateFrom").val(), "mm/dd/yyyy"));
        //    var endPicker = new Date(kendo.parseDate($("#dtpDateTo").val(), "mm/dd/yyyy"));

        //    if (startPicker > endPicker) {
        //        if ($("#dtpDateFrom").val() != "") {
        //            $("#validatefor-" + "dtpDateFrom").html(ValidationIcon() + "Date From must be earlier than Date To.");
        //            chk = false;
        //        }
        //        else {
        //            $("#validatefor-" + "dtpDateFrom").html("");
        //        }
        //    }
        //}
        return chk;
    }
    function ValidationRVDateValue() {
        var chk = ValidationProcessing("dateselect");
        $("#validatefor-" + "RVACCESSNO").html("");

        //29-01-2020 remove validate datefrom and dateto. Change validate Access no.
        if ($.trim($('#txtRVSearchAccessNo').val()) == '') {
            if ($.trim($('#txtRVSearchOrderNo').val()) == '' && $("#ddlRVStatus").val() == "ALL"
                && $.trim($('#txtRVMainAsset').val()) == '' && $("#ddlRVCompanyCode").val() == "ALL"
                && $("#ddlRVAction").val() == "ALL" && $.trim($("#dtpRVDateFrom").val()) == ''
                && $.trim($("#dtpRVDateTo").val()) == '' && $.trim($('#txtRVSearchERRMSG').val()) == ''
                && $("#ddlRevalueProductOwner").val() == "ALL"
            ) {
                $("#validatefor-" + "RVACCESSNO").html(ValidationIcon() + "This field is required.");
                chk = false;
            }
        }

        //check format
        if ($.trim($("#dtpRVDateFrom").val()) != '') {
            if (!kendo.parseDate($("#dtpRVDateFrom").val(), "dd/MM/yyyy")) {
                if ($("#dtpRVDateFrom").val() != "") {
                    $("#validatefor-" + "dtpRVDateFrom").html(ValidationIcon() + "This field is not correct format.");
                    chk = false;
                }
            }
            else {
                $("#validatefor-" + "dtpRVDateFrom").html("");
            }
        }
        if ($.trim($("#dtpRVDateTo").val()) != '') {

            if (!kendo.parseDate($("#dtpRVDateTo").val(), "dd/MM/yyyy")) {
                if ($("#dtpRVDateTo").val() != "") {
                    $("#validatefor-" + "dtpRVDateTo").html(ValidationIcon() + "This field is not correct format.");
                    chk = false;
                }
            }
            else {
                $("#validatefor-" + "dtpRVDateTo").html("");
            }
        }

        //check Date From must be earlier than Date To
        if ($.trim($("#dtpRVDateFrom").val()) != '' && $.trim($("#dtpRVDateTo").val()) != '') {
            var startPicker = new Date(kendo.parseDate($("#dtpRVDateFrom").val(), "mm/dd/yyyy"));
            var endPicker = new Date(kendo.parseDate($("#dtpRVDateTo").val(), "mm/dd/yyyy"));

            if (startPicker > endPicker) {
                if ($("#dtpRVDateFrom").val() != "") {
                    $("#validatefor-" + "dtpRVDateFrom").html(ValidationIcon() + "Date From must be earlier than Date To.");
                    chk = false;
                }
                else {
                    $("#validatefor-" + "dtpRVDateFrom").html("");
                }
            }
        }

        //if (chk) //check blank value
        //{
        //    if ($.trim($("#dtpRVDateFrom").val()) == '') {
        //        $("#validatefor-" + "dtpRVDateFrom").html(ValidationIcon() + "This field is required.");
        //        chk = false;
        //    }
        //    else {
        //        $("#validatefor-" + "dtpRVDateFrom").html("");
        //    }

        //    if ($.trim($("#dtpRVDateTo").val()) == '') {
        //        $("#validatefor-" + "dtpRVDateTo").html(ValidationIcon() + "This field is required.");
        //        chk = false;
        //    }
        //    else {
        //        $("#validatefor-" + "dtpRVDateTo").html("");
        //    }
        //}

        //if (chk) //check format
        //{
        //    if (!kendo.parseDate($("#dtpRVDateFrom").val(), "dd/MM/yyyy")) {
        //        if ($("#dtpRVDateFrom").val() != "") {
        //            $("#validatefor-" + "dtpRVDateFrom").html(ValidationIcon() + "This field is not correct format.");
        //            chk = false;
        //        }
        //    }
        //    else {
        //        $("#validatefor-" + "dtpRVDateFrom").html("");
        //    }

        //    if (!kendo.parseDate($("#dtpRVDateTo").val(), "dd/MM/yyyy")) {
        //        if ($("#dtpRVDateTo").val() != "") {
        //            $("#validatefor-" + "dtpRVDateTo").html(ValidationIcon() + "This field is not correct format.");
        //            chk = false;
        //        }
        //    }
        //    else {
        //        $("#validatefor-" + "dtpRVDateTo").html("");
        //    }
        //}

        //if (chk) //check Date From must be earlier than Date To
        //{
        //    var startPicker = new Date(kendo.parseDate($("#dtpRVDateFrom").val(), "mm/dd/yyyy"));
        //    var endPicker = new Date(kendo.parseDate($("#dtpRVDateTo").val(), "mm/dd/yyyy"));

        //    if (startPicker > endPicker) {
        //        if ($("#dtpRVDateFrom").val() != "") {
        //            $("#validatefor-" + "dtpRVDateFrom").html(ValidationIcon() + "Date From must be earlier than Date To.");
        //            chk = false;
        //        }
        //        else {
        //            $("#validatefor-" + "dtpRVDateFrom").html("");
        //        }
        //    }
        //}
        return chk;
    }
    function ValidationMADateValue() {
        var chk = ValidationProcessing("dateselect");
        if (chk) //check blank value
        {
            if ($.trim($("#dtpMaDateFrom").val()) == '') {
                $("#validatefor-" + "dtpMaDateFrom").html(ValidationIcon() + "This field is required.");
                chk = false;
            }
            else {
                $("#validatefor-" + "dtpMaDateFrom").html("");
            }

            if ($.trim($("#dtpMaDateTo").val()) == '') {
                $("#validatefor-" + "dtpMaDateTo").html(ValidationIcon() + "This field is required.");
                chk = false;
            }
            else {
                $("#validatefor-" + "dtpMaDateTo").html("");
            }
        }

        if (chk) //check format
        {

            if (!kendo.parseDate($("#dtpMaDateFrom").val(), "dd/MM/yyyy")) {
                if ($("#dtpMaDateFrom").val() != "") {
                    $("#validatefor-" + "dtpMaDateFrom").html(ValidationIcon() + "This field is not correct format.");
                    chk = false;
                }
            }
            else {
                $("#validatefor-" + "dtpMaDateFrom").html("");
            }

            if (!kendo.parseDate($("#dtpMaDateTo").val(), "dd/MM/yyyy")) {
                if ($("#dtpMaDateTo").val() != "") {
                    $("#validatefor-" + "dtpMaDateTo").html(ValidationIcon() + "This field is not correct format.");
                    chk = false;
                }
            }
            else {
                $("#validatefor-" + "dtpMaDateTo").html("");
            }
        }

        if (chk) //check Date From must be earlier than Date To
        {
            var startPicker = new Date(kendo.parseDate($("#dtpMaDateFrom").val(), "mm/dd/yyyy"));
            var endPicker = new Date(kendo.parseDate($("#dtpMaDateTo").val(), "mm/dd/yyyy"));

            if (startPicker > endPicker) {
                if ($("#dtpMaDateFrom").val() != "") {
                    $("#validatefor-" + "dtpMaDateFrom").html(ValidationIcon() + "Date From must be earlier than Date To.");
                    chk = false;
                }
                else {
                    $("#validatefor-" + "dtpMaDateFrom").html("");
                }
            }
        }
        return chk;
    }
    function ValidationPostDateValue() {
        var chk = ValidationProcessing("dateselect");
        //if (chk) //check blank value
        //{
        //    if ($.trim($("#dtpPostDate").val()) == '') {
        //        $("#validatefor-" + "dtpPostDate").html(ValidationIcon() + "This field is required.");
        //        chk = false;
        //    }
        //    else {
        //        $("#validatefor-" + "dtpPostDate").html("");
        //    }
        //}
        if ($.trim($("#dtpPostDate").val()) != '') {
            if (chk) //check format
            {
                if (!kendo.parseDate($("#dtpPostDate").val(), "dd/MM/yyyy")) {
                    if ($("#dtpPostDate").val() != "") {
                        $("#validatefor-" + "dtpPostDate").html(ValidationIcon() + "This field is not correct format.");
                        chk = false;
                    }
                }
                else {
                    $("#validatefor-" + "dtpPostDate").html("");
                }
            }

            if (chk) //Post Date greater than or equal To Date From
            {
                var startPicker = new Date(kendo.parseDate($("#dtpDateFrom").val(), "mm/dd/yyyy"));
                var postPicker = new Date(kendo.parseDate($("#dtpPostDate").val(), "mm/dd/yyyy"));

                if (postPicker < startPicker) {
                    if ($("#dtpPostDate").val() != "") {
                        $("#validatefor-" + "dtpPostDate").html(ValidationIcon() + "Post Date greater than or equal To Date From.");
                        chk = false;
                    }
                    else {
                        $("#validatefor-" + "dtpPostDate").html("");
                    }
                }
            }

        }
        return chk;
    }

    function formatDate(OrderDate) {
        if (OrderDate != null) {
            var d = new Date(OrderDate);
            //d.setUTCHours(17);
            //var b = new Date(OrderDate + '+07:00');
            var formatedOrderDate = kendo.format("{0:dd/MM/yyyy}", d);
            //return String.format("{0}{1}{2}", d.getDay(), d.getMonth(), d.getYear());
            return formatedOrderDate;
        } else return "";

    }

    function formatDateTable(OrderDate) {
        if (OrderDate != null) {
            var d = new Date(OrderDate);
            d.setUTCHours(8);
            return kendo.format("{0:dd/MM/yyyy HH:mm}", d);
        } else return "";
    }

    function formatDateToServer(OrderDate) {
        if (OrderDate != null) {
            var d = new Date(OrderDate);
            var formatedOrderDate = kendo.format("{0:yyyy/MM/dd}", d);
            return formatedOrderDate;
        } else return "";
    }

    String.format = function () {
        var s = arguments[0];
        for (var i = 0; i < arguments.length - 1; i++) {
            var reg = new RegExp("\\{" + i + "\\}", "gm");
            s = s.replace(reg, arguments[i + 1]);
        }
        return s;
    }

    $(document).on("click", ".k-grid-Resend", function (e) {
        var row = $(this).closest("tr");
        var column = $("tr", "#gridOverviewStatus").index(row);
        var colIdx = $("td", row).index(this);

        //console.log("Selected cell on row: " + column + " and column name: " + asda);
        //$('input[name="txtAccessNo"]').val(_getColomnText(column, 0));
        //$('input[name="txtOrderNo"]').val(_getColomnText(column, 1));
        //$('input[name="txtSubCode"]').val(_getColomnText(column, 2));
        //$('input[name="txtSubName"]').val(_getColomnText(column, 3));
        //$('input[name="txtProductName"]').val(_getColomnText(column, 4));
        //$('input[name="txtServiceName"]').val(_getColomnText(column, 5));
        //$('input[name="txtOrderType"]').val(_getColomnText(column, 6));
        //$('input[name="txtSubmitFlag"]').val(_getColomnText(column, 7));

    });

    function _getColomnText($column, $row) {
        return $('#gridOverviewStatus').find('tr').eq($column).find('td').eq($row).text();
    }

    var $resend_btn = $('#SavePage1ToPage2');

    // Not Use
    function ProductListPopup($orderNo, $accessNo, $action, $remark) {
        //_ClearPopupData();
        if ($action != "Resend") $resend_btn.hide();
        else $resend_btn.show();

        var $temp = $("#product-list").find('tbody');
        $temp.html("");

        var $temp2 = $("#install-list").find('tbody');
        $temp2.html("");

        $.ajax({
            type: 'POST',
            url: '/SubmitFOAReport/GetProductList',
            data: {
                OrderNo: $orderNo,
                AccessNo: $accessNo,
            },
            dataType: "json",
            success: function (response) {
                //console.log(response);
                var $html = "",
                    $class = "k-textbox form-control input-datalist validate-all-item";

                $('input[name="txtAccessNo"]').val(response.Access_No);
                $('input[name="txtOrderNo"]').val(response.INT);
                $('input[name="txtSubCode"]').val(response.SubcontractorCode);
                $('input[name="txtSubName"]').val(response.SubcontractorName);
                $('input[name="txtProductName"]').val(response.ProductName);
                $('input[name="txtServiceName"]').val(response.ServiceName);
                $('input[name="txtOrderType"]').val(response.OrderType);
                $('input[name="txtRejectReason"]').val(response.RejectReason);
                $('input[name="txtSubmitdate"]').val(formatDate(response.FOA_Submit_date));
                $('input[name="txtSubmitdatefull"]').val(response.FOA_Submit_date);
                $('input[name="txtOLTNAME"]').val(response.OLT_NAME);
                $('input[name="txtBuildingName"]').val(response.BUILDING_NAME);
                $('input[name="txtMobileContact"]').val(response.Mobile_Contact);

                $.each(response.ProductList, function (ProductKey, ProductValue) {
                    var classRed = '';

                    if (ProductValue.ErrorCode != '000') {
                        classRed = 'color-red';
                    }

                    $html += '<tr> ' +
                        '<td>' +
                        '<span class=" txt_SerialNumber ' + classRed + ' " value="' + EmptyString(ProductValue.SerialNumber) + '">' + EmptyString(ProductValue.SerialNumber) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<input class=" ' + $class + ' txt_MaterialCode ' + classRed + '" value="' + EmptyString(ProductValue.MaterialCode) + '">' +
                        '</td>' +
                        '<td>' +
                        '<input class=" ' + $class + ' txt_CompanyCode ' + classRed + ' " value="' + EmptyString(ProductValue.CompanyCode) + '">' +
                        '</td>' +
                        '<td>' +
                        '<input class=" ' + $class + ' txt_Plant ' + classRed + ' " value="' + EmptyString(ProductValue.Plant) + '">' +
                        '</td>' +
                        '<td>' +
                        '<input class=" ' + $class + ' txt_StorageLocation ' + classRed + ' " value="' + EmptyString(ProductValue.StorageLocation) + '">' +
                        '</td>' +
                        '<td>' +
                        '<input class=" ' + $class + ' txt_SNPattern ' + classRed + ' " value="' + EmptyString(ProductValue.SNPattern) + '">' +
                        '</td>' +
                        '<td>' +
                        '<span class=" txt_MovementType ' + classRed + ' " value="' + EmptyString(ProductValue.MovementType) + '">' + EmptyString(ProductValue.MovementType) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<span class="txt_ErrorCode ' + classRed + ' " value="' + EmptyString(ProductValue.ErrorCode) + '">' + EmptyString(ProductValue.ErrorCode) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<span class="txt_ErrorMassage ' + classRed + ' " value="' + EmptyString(ProductValue.ErrorMassage) + '">' + EmptyString(ProductValue.ErrorMassage) + '</span>' +
                        '</td>' +
                        '</tr>';
                });
                $temp.append($html);

                var $html2 = "",
                    $class = "k-textbox form-control input-datalist validate-all-item ";
                $.each(response.InstallList, function (InstallKey, InstallValue) {
                    $html2 += '<tr>' +
                        '<td>' +
                        '<span class=" txt_MAIN_ASSET " value="' + EmptyString(InstallValue.MAIN_ASSET) + '">' + EmptyString(InstallValue.MAIN_ASSET) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<span class=" txt_SUB_NUMBER " value="' + EmptyString(InstallValue.SUB_NUMBER) + '">' + EmptyString(InstallValue.SUB_NUMBER) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<span class="txt_SUBCONTRACT_CODE " value="' + EmptyString(InstallValue.SUBCONTRACT_CODE) + '">' + EmptyString(InstallValue.SUBCONTRACT_CODE) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<span class=" txt_SUBCONTRACT_NAME " value="' + EmptyString(InstallValue.SUBCONTRACT_NAME) + '">' + EmptyString(InstallValue.SUBCONTRACT_NAME) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<span class=" txt_COM_CODE" value= "' + EmptyString(InstallValue.COM_CODE) + '">' + EmptyString(InstallValue.COM_CODE) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<span class=" txt_INSTALLATION_COST " value="' + EmptyString(InstallValue.INSTALLATION_COST) + '">' + EmptyString(InstallValue.INSTALLATION_COST) + '</span>' +
                        '</td>' +
                        '<td>' +
                        '<span class=" txt_ERR_MSG " value="' + EmptyString(InstallValue.ERR_MSG) + '">' + EmptyString(InstallValue.ERR_MSG) + '</span>' +
                        '</td>' +
                        '</tr>';
                });
                $temp2.append($html2);
            },
            failure: function (msg) {
            }
        });

        ActionType = "Insert";

        $("#ProductListPopup").data("kendoWindow").center();
        $("#ProductListPopup").data("kendoWindow").open();
    }

    // Not Use
    function CancelPopup() {
        $("#ProductListPopup").data("kendoWindow").close();
    }

    // Check EmptyString Set ""
    function EmptyString($val) {
        if (typeof $val != 'undefined') return $val;
        return "";
    }

    function OnCompanyCodeChange() {
        var chkCompanyCode = $("#ddlCompanyCode").val();
        console.log(chkCompanyCode);
        $("#ddlPlant").data('kendoDropDownList').dataSource.data([]);
        $("#ddlPlant").data('kendoDropDownList').dataSource.read({ CompanyCode: chkCompanyCode });
        if (chkCompanyCode == '') $("#ddlPlant").data('kendoDropDownList').text("-- Select All --");
        else $("#ddlPlant").data('kendoDropDownList').select(1);

    }

    function OnReCompanyCodeChange() {
        var chkReCompanyCode = $("#ddlReCompanyCode").val();
        console.log(chkReCompanyCode);
        $("#ddlRePlant").data('kendoDropDownList').dataSource.read({ CompanyCode: chkReCompanyCode });
        if (chkReCompanyCode == '') $("#ddlRePlant").data('kendoDropDownList').text("-- Select All --");
        else $("#ddlRePlant").data('kendoDropDownList').select(1);
    }

    function defaultChangeStatusEquipment() {

        var DataResult = new ChangeStatusEquipmentDataModel();
        DataResult.TRANS_ID = $('#_TRAN_ID').val();
        DataResult.ORDER_NO = $('#_ORDER_NO').val();
        DataResult.SERIAL_NO = $('#_Serial_No').val().replace(/<br ?\/?>/g, ",");
        DataResult.INTERNET_NO = $('#_INTERNET_NO').val();
        DataResult.SUBNUMBER = $("#ddlEStatus").val();
        DataResult.ASSET_CODE = $('#txt_mainasset').val();
        DataResult.MATERIAL_DOC = $('#txt_materialdoc').val();
        DataResult.DOC_YEAR = $('#txt_docyear').val();
        DataResult.COM_CODE = $('#_COM_CODE').val().replace(/<br ?\/?>/g, ",");
        DataResult.REMARK = $('#txt_remark').val();

        return DataResult;
    }

    function EditEquipmentError() {
        var grid = $('#gridOverviewStatus').data("kendoGrid");
        $(grid.tbody).on("click", "td", function (e) {
            var row = $(this).closest("tr");
            var curRowIdx = $("tr", grid.tbody).index(row);
            var colIdx = $("td", row).index(this);
            var item = grid.dataItem(row);

            $('#_TRAN_ID').val('');
            $('#_ORDER_NO').val(item.ORDER_NO);
            $('#_Serial_No').val(item.SN);
            $('#_INTERNET_NO').val(item.ACCESS_NUMBER);
            $('#_COM_CODE').val(item.COMPANY_CODE);
            $('#_ERR_CODE').val(item.ERR_CODE);
            $('#_ERR_MSG').val(item.ERR_MSG);
        });
        $("#PopupEditEquipment").data("kendoWindow").center().open();

        $("#ddlEStatus").data('kendoDropDownList').value("COMPLETE");
        $("#ddlEStatus").data("kendoDropDownList").enable(false);

        $("#txt_mainasset").keyup(function () {
            CheckKeyUps("txt_mainasset", "[0-9]");
        });
        $("#txt_materialdoc").keyup(function () {
            CheckKeyUps("txt_materialdoc", "[0-9]");

        });
        $("#txt_docyear").keyup(function () {
            CheckKeyUps("txt_docyear", "[0-9]");

        });
    }

    function cancelPopup() {

        clearForEdit();
        $("#PopupEditEquipment").data("kendoWindow").close();
    }

    function clearForEdit() {
        $("#ddlEStatus").data('kendoDropDownList').value("COMPLETE");
        $('#txt_mainasset').val('');
        $('#txt_materialdoc').val('');
        $('#txt_docyear').val('');
        $('#txt_remark').val('');

        //hidden
        $('#_TRAN_ID').val('');
        $('#_ORDER_NO').val('');
        $('#_Serial_No').val('');
        $('#_INTERNET_NO').val('');
        $('#_COM_CODE').val('');
        $('#_ERR_CODE').val('');
        $('#_ERR_MSG').val('');

        //validate
        $("#validatefor-MAINASSET").html("");
        $("#validatefor-MATERIALDOC").html("");
        $("#validatefor-DOCYEAR").html("");
    }

    function ValidationEditStatusValue() {
        var chk = true;

        if ($.trim($("#txt_mainasset").val()) == '') {
            $("#validatefor-" + "MAINASSET").html(ValidationIcon() + "This field is required.");
            chk = false;
        }
        if ($.trim($("#txt_materialdoc").val()) == '') {
            $("#validatefor-" + "MATERIALDOC").html(ValidationIcon() + "This field is required.");
            chk = false;
        }
        if ($.trim($("#txt_docyear").val()) == '') {
            $("#validatefor-" + "DOCYEAR").html(ValidationIcon() + "This field is required.");
            chk = false;
        }
        return chk;
    }

    function ConfirmUpdate() {
        var chk = ValidationEditStatusValue();
        if (chk) {
            var grid = $("#gridOverviewStatus").data("kendoGrid");
            $("#PopupEditEquipment").data("kendoWindow").close();
            Loading();

            var model = defaultChangeStatusEquipment();

            $.ajax({
                type: "POST",
                url: "/SubmitFOAReport/UpdateStatusSubmitFOAEquipment",
                data: {
                    dataS: JSON.stringify(model)
                },
                dataType: "json",
                async: false,
                success: function (response) {
                    $("#PopupEditEquipment").data("kendoWindow").close();
                    Loading(0);
                    if (response.code == 0) {
                        showFeedback("success", response.msg, "System Information");
                    }
                    else if (response.code != 0) {
                        showFeedback("error", response.msg, "System Information");
                    }
                    else {
                        showFeedback("error", "This action is not available.", "System Information");
                    }

                    clearForEdit();
                    grid.dataSource.page(1);

                },
                error: function (response) {
                    Loading(0);
                    clearForEdit();
                    showFeedback("error", "This action is not available.", "System Information");
                }
            });

        }

    }

    function CheckKeyUps(id, RexStr) {
        var strKey = $("#" + id).val();
        var strBuilder = "";
        var filter = new RegExp(RexStr);
        for (var i = 0; i < strKey.length; i++) {
            if (filter.test(strKey.substr(i, 1))) {
                strBuilder += strKey.substr(i, 1);
            }
        }
        $("#" + id).val(strBuilder);
    }

    function showFeedback(type, msg, title) {
        //
        // $('#MessageFeedbackPopUp').addClass("popups");
        $("#headerMessageFeedback").removeClass();
        $("#headerMessageFeedback").addClass("modal-header");
        if (type === "primary") { $("#headerMessageFeedback").addClass("btn-primary"); }
        else if (type === "success") { $("#headerMessageFeedback").addClass("btn-success"); }
        else if (type === "info") { $("#headerMessageFeedback").addClass("btn-info"); }
        else if (type === "warning") { $("#headerMessageFeedback").addClass("btn-warning"); }
        else if (type === "error") { $("#headerMessageFeedback").addClass("btn-danger"); }
        else { $("#headerMessageFeedback").addClass("btn-default"); }

        if (title !== undefined) $("#MessageFeedbackPopUpLabel").text(title); else $("#MessageFeedbackPopUpLabel").text("Notification");

        $("#lbMessageFeedback").html(msg);

        $("#MessageFeedbackPopUp").modal('show');
        $('.popups').css('z-index', 9999);
    }

    function ChangdtpDateFrom() {
        var endPicker = $("#dtpDateTo").data("kendoDatePicker"),
            startDate = this.value();

        if (startDate) {
            startDate = new Date(startDate);
            startDate.setDate(startDate.getDate());

            endPicker.min(startDate);
        }
    }

    function ChangdtpDateTo() {
        var startPicker = $("#dtpDateFrom").data("kendoDatePicker"),
            endDate = this.value();

        if (endDate) {
            endDate = new Date(endDate);
            endDate.setDate(endDate.getDate());
            startPicker.max(endDate);
        }
    }
    function ChangdtpMaDateFrom() {
        var endPicker = $("#dtpMaDateTo").data("kendoDatePicker"),
            startDate = this.value();

        if (startDate) {
            startDate = new Date(startDate);
            startDate.setDate(startDate.getDate());
            endPicker.min(startDate);
        }
    }

    function ChangdtpMaDateTo() {
        var startPicker = $("#dtpMaDateFrom").data("kendoDatePicker"),
            endDate = this.value();

        if (endDate) {
            endDate = new Date(endDate);
            endDate.setDate(endDate.getDate());
            startPicker.max(endDate);
        }
    }
    function ChangdtpRVDateFrom() {
        var endPicker = $("#dtpRVDateTo").data("kendoDatePicker"),
            startDate = this.value();

        if (startDate) {
            startDate = new Date(startDate);
            startDate.setDate(startDate.getDate());
            endPicker.min(startDate);
        }
    }

    function ChangdtpRVDateTo() {
        var startPicker = $("#dtpRVDateFrom").data("kendoDatePicker"),
            endDate = this.value();

        if (endDate) {
            endDate = new Date(endDate);
            endDate.setDate(endDate.getDate());
            startPicker.max(endDate);
        }
    }

    // onGridDataBound Equipment
    function onGridDataBound() {
        Loading(0);
        $("#chkresend").val("");
        //itemCount = this.dataSource.view().length;
        //$('#gridOverviewStatus div.k-grid-header-wrap').css({
        //    "min-width": "885px",
        //    "max-width": "902px",
        //});
        //$('#gridOverviewStatus div.k-grid-header-locked').css({
        //    "min-width": "300px",
        //});
        //$('#gridOverviewStatus div.k-grid-content-locked').css({
        //    "min-width": "300px",
        //});
        //$('#gridOverviewStatus div.k-grid-content').css({
        //    "min-width": "902px",
        //    "max-width": "902px",
        //});
        // console.log(this.dataSource.view().length);
        if (this.dataSource.view().length == 0) {
            //insert empty row

            var colspan = this.thead.find("th").length;
            var emptyRow = "<tr><td colspan='" + colspan + "'>&nbsp;&nbsp;&nbsp;&nbsp;ไม่พบข้อมูล</td></tr>";
            this.tbody.html(emptyRow);

            //workarounds for IE lt 9
            //this.table.width(800);
            //$(".k-grid-content").width(2 * kendo.support.scrollbar());
            //$("#gridOverviewStatus div.k-grid-content").height(3 * kendo.support.scrollbar());

            //workarounds for IE lt 9
            this.table.width(800);
            $("#gridOverviewStatus div.k-grid-content").height(3 * kendo.support.scrollbar());
        }
        else {
            // $("#gridOverviewStatus div.k-grid-content").height("auto");
            $('#gridOverviewStatus div.k-grid-content').height("auto");
            $('#gridOverviewStatus div.k-grid-content').css("max-height", "300px");
            $('#gridOverviewStatus div.k-grid-content-locked').height("auto");
            $('#gridOverviewStatus div.k-grid-content-locked').css("max-height", "300px");
        }

        if (!(this.dataSource.view().length != 0)) {
            $('#selectall').prop('checked', false);
            $('#selectall').attr("disabled", "disabled");
        }
        if ($("#ddlStatus").val() == "ERROR"  || $("#ddlStatus").val() == "Pending" || $("#ddlRVStatus").val() == "PENDING") {

       // if ($("#ddlStatus").val() == "ERROR" && this.dataSource.view().length > 0 || $("#ddlStatus").val() == "Pending" || $("#ddlRVStatus").val() == "PENDING") {
            $('#btnResendAll').attr("disabled", false);
        }
        else {
            $('#btnResendAll').attr("disabled", "disabled");
        }

        //Status = ERROR => btnResendAll hide
        //$('#btnResendAll').attr("disabled", !(this.dataSource.view().length != 0));
        //$('#btnExport').attr("disabled", !(this.dataSource.view().length != 0));

    }

    // onGridDataBound Installation
    function onGridDataBoundInstall() {
        Loading(0);
        //itemCount = this.dataSource.view().length;
        //insert empty row

        //$('#gridOverviewStatus2 div.k-grid-header-wrap').css({
        //    "min-width": "885px",
        //    "max-width": "902px",
        //});
        //$('#gridOverviewStatus2 div.k-grid-header-locked').css({
        //    "min-width": "300px",
        //});
        //$('#gridOverviewStatus2 div.k-grid-content-locked').css({
        //    "min-width": "300px",
        //});
        //$('#gridOverviewStatus2 div.k-grid-content').css({
        //    "min-width": "902px",
        //    "max-width": "902px",
        //});
        if (this.dataSource.view().length == 0) {

            var colspan = this.thead.find("th").length;
            var emptyRow = "<tr><td colspan='" + colspan + "'>&nbsp;&nbsp;&nbsp;&nbsp;ไม่พบข้อมูล</td></tr>";
            this.tbody.html(emptyRow);

            // $("#gridOverviewStatus2 div.k-grid-content").height(3 * kendo.support.scrollbar());

            //workarounds for IE lt 9
            //this.table.width(1750);
            $("#gridOverviewStatus2 div.k-grid-content").height(3 * kendo.support.scrollbar());
        }
        else {
            // $("#gridOverviewStatus2 div.k-grid-content").height("auto");
            $('#gridOverviewStatus2 div.k-grid-content').height("auto");
            $('#gridOverviewStatus2 div.k-grid-content').css("max-height", "300px");
            $('#gridOverviewStatus2 div.k-grid-content-locked').height("auto");
            $('#gridOverviewStatus2 div.k-grid-content-locked').css("max-height", "300px");
        }

        //Status = ERROR => btnResendAll hide
        //$('#btnResendAll').attr("disabled", !(this.dataSource.view().length != 0));
        //$('#btnExport').attr("disabled", !(this.dataSource.view().length != 0));
    }
    function onGridDataBoundMainAsset() {
        Loading(0);
        //insert empty row
        if (this.dataSource.view().length == 0) {

            var colspan = this.thead.find("th").length;
            var emptyRow = "<tr><td colspan='" + colspan + "'>&nbsp;&nbsp;&nbsp;&nbsp;ไม่พบข้อมูล</td></tr>";
            this.tbody.html(emptyRow);

            // $("#gridOverviewStatus3 div.k-grid-content").height(3 * kendo.support.scrollbar());
            //workarounds for IE lt 9
            this.table.width(800);
            $("#gridOverviewStatus3 div.k-grid-content").height(3 * kendo.support.scrollbar());
        }
        else {
            //$("#gridOverviewStatus3 div.k-grid-content").height("auto");
            $('#gridOverviewStatus3 div.k-grid-content').height("auto");
            $('#gridOverviewStatus3 div.k-grid-content').css("max-height", "300px");
        }

        if (!(this.dataSource.view().length != 0)) {
            $('#selectMAall').prop('checked', false);
            $('#selectMAall').attr("disabled", "disabled");
        }

    }
    function onGridDataBoundRevalue() {
        Loading(0);

        //$('#gridOverviewStatus4 div.k-grid-header-wrap').css({
        //    "min-width": "885px",
        //    "max-width": "902px",
        //});
        //$('#gridOverviewStatus4 div.k-grid-header-locked').css({
        //    "min-width": "300px",
        //});
        //$('#gridOverviewStatus4 div.k-grid-content-locked').css({
        //    "min-width": "300px",
        //});
        //$('#gridOverviewStatus4 div.k-grid-content').css({
        //    "min-width": "902px",
        //    "max-width": "902px",
        //});
        //insert empty row
        if (this.dataSource.view().length == 0) {

            var colspan = this.thead.find("th").length;
            var emptyRow = "<tr><td colspan='" + colspan + "'>&nbsp;&nbsp;&nbsp;&nbsp;ไม่พบข้อมูล</td></tr>";
            this.tbody.html(emptyRow);

            // $("#gridOverviewStatus3 div.k-grid-content").height(3 * kendo.support.scrollbar());
            //workarounds for IE lt 9
            this.table.width(800);
            $("#gridOverviewStatus4 div.k-grid-content").height(3 * kendo.support.scrollbar());
        }
        else {
            //$("#gridOverviewStatus3 div.k-grid-content").height("auto");
            $('#gridOverviewStatus4 div.k-grid-content').height("auto");
            $('#gridOverviewStatus4 div.k-grid-content').css("max-height", "300px");
            $('#gridOverviewStatus4 div.k-grid-content-locked').height("auto");
            $('#gridOverviewStatus4 div.k-grid-content-locked').css("max-height", "300px");
        }

        if (!(this.dataSource.view().length != 0)) {
            $('#selectRVall').prop('checked', false);
            $('#selectRVall').attr("disabled", "disabled");
        }
    }
    // Not Use
    function onGridDataBoundProductList() {
        Loading(0);
        itemCount = this.dataSource.view().length;
        if (this.dataSource.view().length == 0) {
            //insert empty row

            var colspan = this.thead.find("th").length;
            //alert(colspan)
            var emptyRow = "<tr><td colspan='" + colspan + "'></td></tr>";
            this.tbody.html(emptyRow);

            //workarounds for IE lt 9
            //this.table.width(800);
            //$(".k-grid-content").width(2 * kendo.support.scrollbar());
            $(".k-grid-content").height(3 * kendo.support.scrollbar());
        }
        else {
            var grid = $("#gridDetailProductList").data("kendoGrid");
            var gridData = grid.dataSource.view();
            for (var i = 0; i < gridData.length; i++) {
                var currentUid = gridData[i].uid;
                var currenRow = grid.table.find("tr[data-uid='" + currentUid + "']");
                if (gridData[i].STATUS == 'ERROR' || gridData[i].STATUS == 'Pending') {
                    currenRow.addClass("color-red")
                } else {
                    currenRow.removeClass("color-red")
                }
            }
            $(".k-grid-content").height("auto");
        }

        //$('#btnExport').attr("disabled", !(this.dataSource.view().length != 0));
        //Status = ERROR => btnResendAll hide
        //$('#btnResendAll').attr("disabled", !(this.dataSource.view().length != 0));
    }

    function defaultData() {
        var FOAModel = new SubmitFOAModel();
        FOAModel.orderNo = $("#txtSearchOrderNo").val() == '' ? 'ALL' : $("#txtSearchOrderNo").val();
        FOAModel.internetNo = $("#txtSearchAccessNo").val() == '' ? 'ALL' : $("#txtSearchAccessNo").val();
        FOAModel.status = $("#ddlStatus").val();
        FOAModel.productName = $("#ddlProductName").val();
        FOAModel.orderType = $("#ddlOrderType").val();
        FOAModel.companyCode = $("#ddlCompanyCode").val();
        FOAModel.serviceName = $("#ddlServiceName").val();
        FOAModel.subcontractorCode = $("#ddlSubcontractorCode").val();
        FOAModel.errormessage = $("#txtSearchERRMSG").val() == '' ? 'ALL' : $("#txtSearchERRMSG").val();
        FOAModel.plant = $("#ddlPlant").val();
        FOAModel.materialCode = $("#ddlMaterialCode").val();
        FOAModel.storLocation = $.trim($("#txtSearchStorLocation").val()) == '' ? 'ALL' : $.trim($("#txtSearchStorLocation").val());
        FOAModel.dateFrom = formatDate(kendo.parseDate($("#dtpDateFrom").val(), "dd/MM/yyyy"));
        FOAModel.dateTo = formatDate(kendo.parseDate($("#dtpDateTo").val(), "dd/MM/yyyy"));
        FOAModel.productOwner = $("#ddlProductOwner").val();

        //31032020 เพิ่ม page index กับ page size
        var grid = $("#gridOverviewStatus").data("kendoGrid");
        FOAModel.PAGE_INDEX = grid.dataSource.page();
        FOAModel.PAGE_SIZE = grid.dataSource.pageSize();
        //console.log(grid);
        return FOAModel;
    }

    // bindingValue Equipment
    function bindingValue() {
        Loading();
        var model = defaultData();
        /* console.log($("#chksearch").val());*/
        return {
            firstCheck: $("#chksearch").val(),
            Resend: $("#chkresend").val(), //เพื่ม parameters
            dataS: JSON.stringify(model)
        };
    }

    // bindingValue Installation
    function bindingValueInstall() {
        Loading();
        var model = defaultDataInstall();
        return {
            dataS: JSON.stringify(model)
        };
    }
    //bindingValue MainAsset
    function bindingValueMainAsset() {
        Loading();
        var model = defaultDataMainAsset();
        return {
            dataS: JSON.stringify(model)
        };
    }
    function bindingValueRevalue() {
        Loading();
        var model = defaultDataRevalue();
        return {
            dataS: JSON.stringify(model)
        };
    }
    function onSelect(e) {
        _Clear();
        var select = $(e.item).find("> .k-link").text();
        if (select == "MAINASSET") {
            $('#divMainAssetSearch').show();
            $('#divSearch').hide();
            $('#divRevalueSearch').hide();
        }
        else if (select == "REVALUE") {
            $('#divMainAssetSearch').hide();
            $('#divSearch').hide();
            $('#divRevalueSearch').show();
        }

        else {
            $('#divRevalueSearch').hide();
            $('#divMainAssetSearch').hide();
            $('#divSearch').show();
        }

    }


    function onSubmitFOAReportResendbyfileSuccess(e) {
        $(".k-filename").text(e.response.fileName);
        if (!e.response.status) {
            $("#validatefor-SubmitFOAresedbyfile").html(ValidationIcon() + e.response.message);
        } else {
            $("#validatefor-SubmitFOAresedbyfile").html("");
        }
    };

    function onSubmitFOAReportResendbyfileError(e) {
        if (!e.response.status) {
            $("#validatefor-SubmitFOAresedbyfile").html(ValidationIcon() + e.response.message);
        }
    };

    //R31.05.2021
    function CheckRollback() {
        $.ajax({
            type: "POST",
            contentType: 'application/json',
            url: "/SubmitFOAReport/CheckRollBack",
            dataType: "json",
            success: function (response) {
                console.log("Rollback ? : " + response);
                if (response == "N") {
                    _Search();
                }
                return response;
            }
        });
    };

</script>

