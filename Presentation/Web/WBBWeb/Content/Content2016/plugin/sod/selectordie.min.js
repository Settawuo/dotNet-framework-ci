(function(n){"use strict";n.fn.selectOrDie=function(t){var s={customID:null,customClass:"",placeholder:null,placeholderOption:!1,prefix:null,cycle:!1,stripEmpty:!1,links:!1,linksExternal:!1,size:0,tabIndex:0,onChange:n.noop},r={},u=!1,e,f,i={initSoD:function(t){return r=n.extend({},s,t),this.each(function(){if(n(this).parent().hasClass("sod_select"))console.log("Select or Die: It looks like the SoD already exists");else{var t=n(this),y=t.data("custom-id")?t.data("custom-id"):r.customID,p=t.data("custom-class")?t.data("custom-class"):r.customClass,e=t.data("prefix")?t.data("prefix"):r.prefix,s=t.data("placeholder")?t.data("placeholder"):r.placeholder,c=t.data("placeholder-option")?t.data("placeholder-option"):r.placeholderOption,w=t.data("cycle")?t.data("cycle"):r.cycle,b=t.data("links")?t.data("links"):r.links,k=t.data("links-external")?t.data("links-external"):r.linksExternal,l=parseInt(t.data("size"))?t.data("size"):r.size,d=parseInt(t.data("tabindex"))?t.data("tabindex"):r.tabIndex?r.tabIndex:t.attr("tabindex")?t.attr("tabindex"):r.tabIndex,g=t.data("strip-empty")?t.data("strip-empty"):r.stripEmpty,nt=t.prop("title")?t.prop("title"):null,tt=t.is(":disabled")?" disabled":"",h="",a="",v=0,u,o,f;e&&(h='<span class="sod_prefix">'+e+"<\/span> ");a+=s&&!e?'<span class="sod_label sod_placeholder">'+s+"<\/span>":'<span class="sod_label">'+h+"<\/span>";u=n("<span/>",{id:y,"class":"sod_select "+p+tt,title:nt,tabindex:d,html:a,"data-cycle":w,"data-links":b,"data-links-external":k,"data-placeholder":s,"data-placeholder-option":c,"data-prefix":e,"data-filter":""}).insertAfter(this);o=n("<span/>",{"class":"sod_list_wrapper"}).appendTo(u);f=n("<span/>",{"class":"sod_list"}).appendTo(o);n("option, optgroup",t).each(function(t){var r=n(this);g&&!n.trim(r.text())?r.remove():t===0&&c&&!h?i.populateSoD(r,f,u,!0):i.populateSoD(r,f,u,!1)});l&&(o.show(),n(".sod_option:lt("+l+")",f).each(function(){v+=n(this).outerHeight()}),o.removeAttr("style"),f.css({"max-height":v}));t.appendTo(u);u.on("focusin",i.focusSod).on("click",i.triggerSod).on("click",".sod_option",i.optionClick).on("mousemove",".sod_option",i.optionHover).on("keydown",i.keyboardUse);t.on("change",i.selectChange);n(document).on("click","label[for='"+t.attr("id")+"']",function(n){n.preventDefault();u.focus()})}})},populateSoD:function(t,i,r,u){var o=r.data("placeholder"),c=r.data("placeholder-option"),s=r.data("prefix"),l=r.find(".sod_label"),a=t.parent(),e=t.text(),y=t.val(),p=t.data("custom-id")?t.data("custom-id"):null,w=t.data("custom-class")?t.data("custom-class"):"",v=t.is(":disabled")?" disabled ":"",f=t.is(":selected")?" selected active ":"",b=t.data("link")?" link ":"",k=t.data("link-external")?" linkexternal":"",h=t.prop("label");t.is("option")?(n("<span/>",{"class":"sod_option "+w+v+f+b+k,id:p,title:e,html:e,"data-value":y}).appendTo(i),u&&!s?(r.data("label",e),r.data("placeholder",e),t.prop("disabled",!0),i.find(".sod_option:last").addClass("is-placeholder disabled"),f&&l.addClass("sod_placeholder")):f&&o&&!c&&!s?r.data("label",o):f&&r.data("label",e),(f&&!o||f&&c||f&&s)&&l.append(e),a.is("optgroup")&&(i.find(".sod_option:last").addClass("groupchild"),a.is(":disabled")&&i.find(".sod_option:last").addClass("disabled"))):n("<span/>",{"class":"sod_option optgroup "+v,title:h,html:h,"data-label":h}).appendTo(i)},focusSod:function(){var t=n(this);if(t.hasClass("disabled"))i.blurSod(t);else{i.blurSod(n(".sod_select.focus").not(t));t.addClass("focus");n("html").on("click.sodBlur",function(){i.blurSod(t)})}},triggerSod:function(t){t.stopPropagation();var r=n(this),e=r.find(".sod_list"),u=r.data("placeholder"),o=r.find(".active"),s=r.find(".selected");r.hasClass("disabled")||r.hasClass("open")||r.hasClass("touch")?(clearTimeout(f),r.removeClass("open"),u&&(r.find(".sod_label").get(0).lastChild.nodeValue=o.text())):(r.addClass("open"),u&&!r.data("prefix")&&r.find(".sod_label").addClass("sod_placeholder").html(u),i.listScroll(e,s),i.checkViewport(r,e))},keyboardUse:function(t){var r=n(this),l=r.find(".sod_list"),h=r.find(".sod_option"),a=r.find(".sod_label"),v=r.data("cycle"),o=h.filter(".active"),s,f,c;if(t.which>36&&t.which<41)return t.which===37||t.which===38?(f=o.prevAll(":not('.disabled, .optgroup')").first(),c=h.not(".disabled, .optgroup").last()):(t.which===39||t.which===40)&&(f=o.nextAll(":not('.disabled, .optgroup')").first(),c=h.not(".disabled, .optgroup").first()),!f.hasClass("sod_option")&&v&&(f=c),(f.hasClass("sod_option")||v)&&(o.removeClass("active"),f.addClass("active"),a.get(0).lastChild.nodeValue=f.text(),i.listScroll(l,f),r.hasClass("open")||(u=!0)),!1;t.which===13||t.which===32&&r.hasClass("open")&&(r.data("filter")[0]===" "||r.data("filter")==="")?(t.preventDefault(),o.click()):t.which!==32||r.hasClass("open")||r.data("filter")[0]!==" "&&r.data("filter")!==""?t.which===27&&i.blurSod(r):(t.preventDefault(),u=!1,r.click());t.which!==0&&(clearTimeout(e),r.data("filter",r.data("filter")+String.fromCharCode(t.which)),s=h.filter(function(){return n(this).text().toLowerCase().indexOf(r.data("filter").toLowerCase())===0}).not(".disabled, .optgroup").first(),s.length&&(o.removeClass("active"),s.addClass("active"),i.listScroll(l,s),a.get(0).lastChild.nodeValue=s.text(),r.hasClass("open")||(u=!0)),e=setTimeout(function(){r.data("filter","")},500))},optionHover:function(){var t=n(this);t.hasClass("disabled")||t.hasClass("optgroup")||t.siblings().removeClass("active").end().addClass("active")},optionClick:function(t){t.stopPropagation();var r=n(this),i=r.closest(".sod_select"),u=r.hasClass("disabled"),e=r.hasClass("optgroup"),o=i.find(".sod_option:not('.optgroup')").index(this);i.hasClass("touch")||(u||e||(i.find(".selected, .sod_placeholder").removeClass("selected sod_placeholder"),r.addClass("selected"),i.find("select option")[o].selected=!0,i.find("select").change()),clearTimeout(f),i.removeClass("open"))},selectChange:function(){var u=n(this),t=u.find(":selected"),f=t.text(),i=u.closest(".sod_select");i.find(".sod_label").get(0).lastChild.nodeValue=f;i.data("label",f);r.onChange.call(this);(i.data("links")||t.data("link"))&&!t.data("link-external")?window.location.href=t.val():(i.data("links-external")||t.data("link-external"))&&window.open(t.val(),"_blank")},blurSod:function(t){if(n("body").find(t).length){var o=t.data("label"),s=t.data("placeholder"),i=t.find(".active"),e=t.find(".selected"),r=!1;clearTimeout(f);u&&!i.hasClass("selected")?(i.click(),r=!0):i.hasClass("selected")||(i.removeClass("active"),e.addClass("active"));!r&&s?t.find(".sod_label").get(0).lastChild.nodeValue=e.text():r||(t.find(".sod_label").get(0).lastChild.nodeValue=o);u=!1;t.removeClass("open focus");t.blur();n("html").off(".sodBlur")}},checkViewport:function(t,r){var u=t[0].getBoundingClientRect(),e=r.outerHeight();u.bottom+e+10>n(window).height()&&u.top-e>10?t.addClass("above"):t.removeClass("above");f=setTimeout(function(){i.checkViewport(t,r)},200)},listScroll:function(n,t){var i=n[0].getBoundingClientRect(),r=t[0].getBoundingClientRect();i.top>r.top?n.scrollTop(n.scrollTop()-i.top+r.top):i.bottom<r.bottom&&n.scrollTop(n.scrollTop()-i.bottom+r.bottom)},isTouch:function(){return"ontouchstart"in window||navigator.MaxTouchPoints>0||navigator.msMaxTouchPoints>0}},o={destroy:function(){return this.each(function(){var t=n(this),i=t.parent();i.hasClass("sod_select")?(t.off("change"),i.find("span").remove(),t.unwrap()):console.log("Select or Die: There's no SoD to destroy")})},update:function(){return this.each(function(){var r=n(this),t=r.parent(),u=t.find(".sod_list:first");t.hasClass("sod_select")?(u.empty(),t.find(".sod_label").get(0).lastChild.nodeValue="",r.is(":disabled")&&t.addClass("disabled"),n("option, optgroup",r).each(function(){i.populateSoD(n(this),u,t)})):console.log("Select or Die: There's no SoD to update")})},disable:function(t){return this.each(function(){var r=n(this),i=r.parent();i.hasClass("sod_select")?typeof t!="undefined"?(i.find(".sod_list:first .sod_option[data-value='"+t+"']").addClass("disabled"),i.find(".sod_list:first .sod_option[data-label='"+t+"']").nextUntil(":not(.groupchild)").addClass("disabled"),n("option[value='"+t+"'], optgroup[label='"+t+"']",this).prop("disabled",!0)):i.hasClass("sod_select")&&(i.addClass("disabled"),r.prop("disabled",!0)):console.log("Select or Die: There's no SoD to disable")})},enable:function(t){return this.each(function(){var r=n(this),i=r.parent();i.hasClass("sod_select")?typeof t!="undefined"?(i.find(".sod_list:first .sod_option[data-value='"+t+"']").removeClass("disabled"),i.find(".sod_list:first .sod_option[data-label='"+t+"']").nextUntil(":not(.groupchild)").removeClass("disabled"),n("option[value='"+t+"'], optgroup[label='"+t+"']",this).prop("disabled",!1)):i.hasClass("sod_select")&&(i.removeClass("disabled"),r.prop("disabled",!1)):console.log("Select or Die: There's no SoD to enable")})}};if(o[t])return o[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error('Select or Die: Oh no! No such method "'+t+'" for the SoD instance');else return i.initSoD.apply(this,arguments)}})(jQuery);
/*
//# sourceMappingURL=selectordie.min.js.map
*/