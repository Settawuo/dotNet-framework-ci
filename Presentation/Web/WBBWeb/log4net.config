<?xml version="1.0" encoding="utf-8"?>

<configuration>
  <!-- Register a section handler for the log4net section -->
  <configSections>
    <section name="log4net"
             type="System.Configuration.IgnoreSectionHandler" />
  </configSections>

  <log4net debug="true">
    <appender name="DebugAppender"
              type="log4net.Appender.DebugAppender">
      <immediateFlush value="true" />
      <layout type="log4net.Layout.SimpleLayout" />
    </appender>

    <appender name="AdoNetAppender_Oracle"
              type="log4net.Appender.AdoNetAppender">
      <!--<connectionType value="System.Data.OracleClient.OracleConnection, System.Data.OracleClient, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />-->
      <connectionType value="Oracle.DataAccess.Client.OracleConnection, Oracle.DataAccess, Version=4.112.3.0, Culture=neutral, PublicKeyToken=89b483f429c47342" />
      <connectionStringName value="Context" />

      <!--<commandText value="INSERT INTO Log (Datetime,Thread,Log_Level,Logger,Message,RequestId) VALUES (:log_date, :thread, :log_level, :logger, :message, :RequestId)" />-->
      <!--<commandText value="INSERT INTO Log (GUID,Thread,Log_Level,Logger,Message,USER_ID,REQUEST_ID,STAGE_ID,SERVICE_ID,ORDER_ID,STATUS,STATUS_REASON,IP_ADDRESS,URL) VALUES (:GUID, :thread, :log_level, :logger, :message, :USER_ID, :REQUEST_ID, :STAGE_ID, :SERVICE_ID,:ORDER_ID,:STATUS,:STATUS_REASON,:IP_ADDRESS,:URL)" />-->
      <commandText value="INSERT INTO Log (GUID,Thread,Log_Level,Logger,Message,USER_ID,REQUEST_ID,STAGE_ID,SERVICE_ID,ORDER_ID,STATUS,STATUS_REASON,IP_ADDRESS,URL,LOG_SOURCE,LOG_TYPE,DATETIME_START,DATETIME_END,ELASPED_TIME) VALUES (:GUID, :thread, :log_level, :logger, :message, :USER_ID, :REQUEST_ID, :STAGE_ID, :SERVICE_ID,:ORDER_ID,:STATUS,:STATUS_REASON,:IP_ADDRESS,:URL,:LOG_SOURCE,:LOG_TYPE,:DATETIME_START,:DATETIME_END,:ELASPED_TIME)" />

      <bufferSize value="0" />
      <!--<parameter>
        <parameterName value=":log_date" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.RawTimeStampLayout" />
      </parameter>-->
      <parameter>
        <parameterName value=":GUID" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{GUID}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":thread" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%thread" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":log_level" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%level" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":logger" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%logger" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":message" />
        <dbType value="String" />
        <size value="4000" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%message" />
        </layout>
      </parameter>
      <!--<parameter>
        <parameterName value=":RequestId" />
        <dbType value="Long" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{RequestId}" />
        </layout>
      </parameter>-->
      <parameter>
        <parameterName value=":USER_ID" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{USER_ID}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":REQUEST_ID" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{REQUEST_ID}" />
        </layout>
      </parameter>

      <parameter>
        <parameterName value=":STAGE_ID" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{STAGE_ID}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":SERVICE_ID" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{SERVICE_ID}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":ORDER_ID" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{ORDER_ID}" />
        </layout>
      </parameter>


      <parameter>
        <parameterName value=":STATUS" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{STATUS}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":STATUS_REASON" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{STATUS_REASON}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":IP_ADDRESS" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{IP_ADDRESS}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":URL" />
        <dbType value="String" />
        <size value="255" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{URL}" />
        </layout>
      </parameter>

      <parameter>
        <parameterName value=":LOG_SOURCE" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{LOG_SOURCE}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":LOG_TYPE" />
        <dbType value="String" />
        <size value="50" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%property{LOG_TYPE}" />
        </layout>
      </parameter>

      <parameter>
        <parameterName value=":DATETIME_START" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.RawTimeStampLayout" >
          <conversionPattern value="%property{DATETIME_START}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":DATETIME_END" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.RawTimeStampLayout" >
          <conversionPattern value="%property{DATETIME_END}" />
        </layout>
      </parameter>
      <!--<parameter>
        <parameterName value=":DATETIME_START" />
        <dbType value="Date" />
        <layout type="log4net.Layout.PatternLayout" >
          <conversionPattern value="%property{DATETIME_START}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":DATETIME_END" />
        <dbType value="Date" />
        <layout type="log4net.Layout.PatternLayout" >
          <conversionPattern value="%property{DATETIME_END {dd-MMM-yyyy HH:mm:ss}}" />
        </layout>
      </parameter>-->

      <!--<parameter>
        <parameterName value=":DATETIME_START" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%d{dd-MMM-yyyy HH:mm:ss}" />
        </layout>
      </parameter>
      <parameter>
        <parameterName value=":DATETIME_END" />
        <dbType value="DateTime" />
        <layout type="log4net.Layout.PatternLayout">
          <conversionPattern value="%d{dd-MMM-yyyy HH:mm:ss}" />
        </layout>
      </parameter>-->
      <parameter>
        <parameterName value=":ELASPED_TIME" />
        <dbType value="Decimal" />
        <!--<size value="255" />-->
        <layout type="log4net.Layout.PatternLayout">          
          <conversionPattern value="%property{ELASPED_TIME}" />
        </layout>
      </parameter>
    </appender>

    <appender name="RollingLogFileAppender"
              type="log4net.Appender.RollingFileAppender">
      <!--<file value="Log\test.log"/>-->

      <!--<datePattern value="yyyyMMdd"/>
      <rollingStyle value="Date"/>
      <MaxSizeRollBackups value="180" />-->

      <!--<file value="~/Log/logfile.txt" />-->
      <file value="D:\Logs\fixedbb.ais.co.th.log\logfile.log" />
      <encoding value="utf-8" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <datePattern value="yyyyMMdd" />
      <maxSizeRollBackups value="20" />
      <maximumFileSize value="2MB" />

      <filter type="log4net.Filter.LevelRangeFilter">
        <acceptOnMatch value="true"/>
        <levelMin value="DEBUG"/>
        <levelMax value="FATAL"/>
      </filter>
      <filter type="log4net.Filter.LevelMatchFilter">
        <acceptOnMatch value="true" />
        <levelToMatch  value="DEBUG" />
      </filter>
      <filter type="log4net.Filter.DenyAllFilter" />
      <layout type="log4net.Layout.PatternLayout">
        <!--<conversionPattern value="%property{REQUESTID},%stacktrace, %stacktracedetail, %-5p %-25d thr:%-5t %9rms %c{1},%M: %m%n"/>-->
        <!--<conversionPattern value="%property,%stacktrace, %stacktracedetail, %-5p %-25d thr:%-5t %9rms %c{1},%M: %m%n"/>-->
        <!--<conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline"/>-->
        <conversionPattern value=" %property{IP_ADDRESS} %date [%thread] %-5level %logger [%property{NDC}] - %message%newlineUSER_ID:%property{USER_ID}, REQUEST_ID:%property{REQUEST_ID}, STAGE_ID:%property{STAGE_ID}, SERVICE_ID:%property{SERVICE_ID}, ORDER_ID:%property{ORDER_ID}, STATUS:%property{STATUS}, STATUS_REASON:%property{STATUS_REASON}, URL:%property{URL}, LOG_SOURCE:%property{LOG_SOURCE}, LOG_TYPE:%property{LOG_TYPE}, ELASPED_TIME:%property{ELASPED_TIME}%newline%newline"/>
      </layout>
    </appender>

    <appender name="RollingPayment" type="log4net.Appender.RollingFileAppender">
      <file value="D:\Logs\fixedbb.ais.co.th.log\logPaymentfile.log" />
      <encoding value="utf-8" />
      <appendToFile value="true" />
      <rollingStyle value="Composite" />
      <datePattern value="yyyyMMdd" />
      <maxSizeRollBackups value="20" />
      <maximumFileSize value="2MB" />

      <filter type="log4net.Filter.LevelRangeFilter">
        <acceptOnMatch value="true"/>
        <levelMin value="DEBUG"/>
        <levelMax value="FATAL"/>
      </filter>
      <filter type="log4net.Filter.LevelMatchFilter">
        <acceptOnMatch value="true" />
        <levelToMatch  value="DEBUG" />
      </filter>
      <filter type="log4net.Filter.DenyAllFilter" />
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{yyyyMMdd HH:mm:ss.fff}|%message%newline"/>
      </layout>
      
    </appender>
    
    <root>
      <level value="Info" />
      <appender-ref ref="RollingLogFileAppender" />
      <!--<appender-ref ref="AdoNetAppender_Oracle" />-->
      <!--<appender-ref ref="DebugAppender" />-->
    </root>

    <logger additivity="false" name="RollingPayment">
      <level value="INFO"/>
      <appender-ref ref="RollingPayment" />
    </logger>
    
  </log4net>
</configuration>
