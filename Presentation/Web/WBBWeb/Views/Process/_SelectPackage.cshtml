@model WBBEntity.PanelModels.QuickWinPanelModel
@using System.Collections.Generic;
@using WBBEntity.PanelModels
@using WBBWeb.Extension;
@{
    string language = Session[WebConstants.SessionKeys.CurrentUICulture] != null ? Session[WebConstants.SessionKeys.CurrentUICulture].ToString() : "";

    string VAS = "";

    if (ViewBag.Vas != null)
    {
        VAS = ViewBag.Vas;
    }

    string H_FBBTR002 = "";
    string L_INTERNET_WIRE = "";
    string L_INTERNET_WIRELESS = "";
    string L_HOME_PACKAGE = "";
    string L_PROFESSIONAL_PACKAGE = "";
    string L_SUMMARY = "";
    string L_TECHNOLOGY = "";
    string L_DOWNLOAD = "";
    string L_UPLOAD = "";
    string L_MONTHLY_FEE = "";
    string L_SUMM_DETAIL1 = "";
    string L_SUMM_DETAIL2 = "";
    string L_SUMM_DETAIL3 = "";
    string L_SUMM_DETAIL4 = "";
    string L_SUMM_DETAIL5 = "";
    string L_SUMM_DETAIL6 = "";
    string L_SUMM_DETAIL7 = "";
    string L_SUMM_DETAIL8 = "";
    string L_SUMM_DETAIL9 = "";
    string L_SUMM_DETAIL10 = "";
    string L_SUMM_DETAIL11 = "";
    string L_SUMM_DETAIL12 = "";
    string L_SUMM_DETAIL13 = "";
    string L_SUMM_DETAIL14 = "";
    string L_SUMM_DETAIL15 = "";
    string L_BAHT = "";
    string L_DISCOUNT = "";
    string L_DISC_DETAIL_FREE = "";
    string L_WIFI_ROUTER = "";
    string L_WIFI_DETAIL1 = "";
    string L_DISC_DETAIL_SOME = "";

    string L_LAN_WIRING = "";
    string L_LAN_WIRING_1 = "";
    string L_LAN_WIRING_2 = "";
    string L_LAN_WIRING_3 = "";

    string L_ROUTER = "";
    string L_PRIVILAGE1 = "";
    string L_PRIVILAGE2 = "";
    string L_NOT_REQUIRE = "";
    string L_REQUEST = "";
    string L_MORE_DETAIL = "";
    string L_ROUTER_DETAIL = "";
    string L_ROUTER_DETAIL1 = "";
    string L_ROUTER_DETAIL2 = "";
    string L_ROUTER_DETAIL3 = "";
    string L_ROUTER_DETAIL4 = "";
    string L_ROUTER_DETAIL5 = "";
    string L_ROUTER_DETAIL6 = "";
    string L_HTTP_SERVICE = "";
    string L_PROMOTION = "";
    string L_PROMOTION1 = "";
    string L_PROMOTION2 = "";
    string B_NEXT = "";
    string B_BACK = "";
    string L_WIFI_DETAIL2 = "";
    string L_WIFI_ROUTER_ONU = "";
    string L_ROUTER_ONU = "";
    string L_SUMM_DETAIL_WireBB = "";
    string L_SUMM_DETAIL_FTTx = "";
    string L_SUMM_DETAIL_SWiFi = "";
    string PRO_INSTALL_ROUTER = "";
    string HOME_INSTALL_ROUTER = "";
    string SWIFI_ROUTER_VALUE = "";
    string SWIFI_ROUTER_PRE_VALUE = "";

    string L_VAS_CONFIRM = "";
    string B_VAS_CONFIRM_OK = "";
    string B_VAS_CONFIRM_SKIP = "";

    string C_DOUBLE_SPEED1 = "";
    string C_DOUBLE_SPEED2 = "";
    string C_DOUBLE_SPEED3 = "";
    string C_DOUBLE_SPEED4 = "";
    string C_DOUBLE_SPEED5 = "";
    string C_DOUBLE_SPEED6 = "";
    string M_DOUBLE_SPEED1 = "";
    string M_DOUBLE_SPEED2 = "";
    string M_DOUBLE_SPEED3 = "";
    string M_DOUBLE_SPEED4 = "";
    string M_DOUBLE_SPEED5 = "";
    string M_DOUBLE_SPEED6 = "";

    string L_POPUP_PLAYBOX_DETAIL = "";
    string L_POPUP_PLAYBOX_REMARK = "";
    string B_SUBSCRIBE = "";
    string B_SKIP = "";

    string L_TRIPLE_PLAY_PACKAGE = "";
    string L_COL_AIS_FIBRE = "";
    string L_COL_AIS_FIXEDLINE = "";
    string L_COL_AIS_PLAYBOX = "";
    string L_TRIPPLE_FIXEDLINE_PACKAGE = "";
    string L_TRIPLE_PLAYBOX_PACKAGE_1 = "";
    string L_TRIPLE_PLAYBOX_PACKAGE_6 = "";
    string L_SUM_DETAIL_16 = "";
    string L_SUM_DETAIL_17 = "";

    string L_HOME_WIREBB_DES = "";
    string L_PRO_WIREBB_DES = "";
    string L_HOME_FTTX_DES = "";
    string L_PRO_FTTX_DES = "";
    string L_HOME_SWIFI_DES = "";
    string L_PRO_SWIFI_DES = "";
    string L_INC_SWIFI_DES = "";
    string L_BAAN_WIREBB_DES = "";
    string L_CONDO_WIREBB_DES = "";
    string L_TRIPLE_WIREBB_DES = "";
    string L_TRIPLE_FTTX_DES = "";

    string CHK_TRIPLE_WIREBB = "";
    string CHK_TRIPLE_FTTX = "";
    string CHK_CONDO_WIREBB = "";
    string CHK_BAAN_WIREBB = "";
    string CHK_HOME_WIREBB = "";
    string CHK_PRO_WIREBB = "";
    string CHK_HOME_FTTX = "";
    string CHK_PRO_FTTX = "";
    string CHK_HOME_SWIFI = "";
    string CHK_PRO_SWIFI = "";
    string CHK_INC_SWIFI = "";


    string L_SELECT_SPECIAL_DISCOUNT = "";

    string L_MSG_PROMO_CORRECT = "";
    string L_MSG_PROMO_INVALID = "";
    string L_MSG_PROMO_ACTIVATED = "";

    string L_PROMOTION_CODE = "";

    string SELECT_BY_PAY_INSTALLATION = "";
    string SELECT_FREE_INSTALL_VALUE = "";
    string SELECT_PAY_INSTALL_VALUE = "";
    string DESCRIPTION_PAY_INSTALL = "";

    string L_BUNDLING_DISCOUNT_DTL = "";
    string L_DISCOUNT_DTL = "";

    string L_CHARGE_ON_INSTALL_DATE = "";
    string L_ENTRANCE_FEE = "";
    string L_ENTRANCE_FEE_DETAIL = "";

    string L_POPUP_NO_ROUTER = "";
    string L_POPUP_NO_ROUTER_VERSION = "";
    string L_POPUP_NO_ROUTER_ACCEPT = "";
    string POPUP_FMC_CHECK_PRICE = "";
    List<LovScreenValueModel> PACKAGE_GROUP_NO_ROUTER = null;


    List<string> VAS_CODE_CONFIG = null;

    List<LovScreenValueModel> LOV_ENTRANCE_FEES = null;

    var L_CLOSE001 = "";
    if (null != ViewBag.LCLOSE)
    {
        L_CLOSE001 = ViewBag.LCLOSE;
    }

    string L_FMC_CHOOSE = "";
    string L_FMC_EXISTING_MOBILE = "";
    string L_FMC_NEW_SIM = "";

    string L_ENTRY_FEE = "";

    //20.2 : WTTx
    string L_RESULT_NOPACKAGE_WTTX = "";
    string L_DISCOUNT_WTTX = "";
    string L_CHARGE_ON_REGISTER_DATE = "";
    string L_SUMM_DETAIL6_WTTX = "";
    string L_SUMM_DETAIL7_WTTX = "";
    string SELECT_BY_PAY_WTTX = "";
    string L_ROUTER_WTTX = "";
    string L_RETURN_ROUTER_WTTX = "";
    string WTTX_WORDING_SCREEN_LISTPACKAGE = "";
    //20.3 Service Level
    string SERVICE_LEVEL_L = "";
    string SERVICE_LEVEL_M = "";
    string SERVICE_LEVEL_H = "";
    string SERVICE_LEVEL_FLAG_EXISTING = "";
    string SERVICE_LEVEL_FLAG_PA = "";
    string SERVICE_LEVEL_FLAG_MEMO = "";
    string SERVICE_LEVEL_FLAG_PACK = "";
    string SERVICE_LEVEL_FLAG_OTHER = "";
    string SERVICE_LEVEL_FLAG_TOTAL = "";
    string SERVICE_LEVEL_MINIMUM_NETPRICE = "";
    string DISPLAY_SERVICE_LEVEL_H = "";
    string DISPLAY_SERVICE_LEVEL_M = "";
    string DISPLAY_SERVICE_LEVEL_L = "";
    //20.5
    string NON_RESIDENTIAL_CARDTYPE = "";
    string NON_RESIDENTIAL_NONRESFLAG_YES = "";

    string MAX_MESH_NEW = "";
    string L_MESH_WIFI = "";
    //R21.11 ATV
    string L_PIC_CONTENT = "";

    //mesh arpu
    string package_display_mesh_001 = "";
    string package_display_mesh_002 = "";
    string package_displayDiscount_mesh_002 = "";
    string package_display_mesh_003 = "";
    string package_displayDiscount_mesh_003 = "";
    string package_displayDate_mesh_004 = "";
    string meshArpu_Month_Flag = "";


    string price_charge_mesh_001 = "";
    string price_charge_mesh_002 = "";
    string price_chargeDiscount_mesh_002 = "";
    string price_charge_mesh_003 = "";
    string price_chargeDiscount_mesh_003 = "";

    //R23.04 Merge Bill Address
    string L_SUMM_PRORATE_DETAIL = "";

    //25.09 Entry Fee Vat
    string SHOW_ENTRY_FEE_VAT_FLAG = "";

    //mesh arpu

    if (ViewBag.MeshArpuFBBTR001 != null)
    {
        var MeshArpuFBBTR001 = (List<LovScreenValueModel>)ViewBag.MeshArpuFBBTR001;
        package_display_mesh_001 = MeshArpuFBBTR001.Any(c => c.Name == "SCREEN_PRICE_MONTH") ? MeshArpuFBBTR001.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH").DisplayValue : "";
        //price_charge_mesh_001 = MeshArpuFBBTR001.Any(c => c.Name == "SCREEN_PRICE_MONTH") ? MeshArpuFBBTR001.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH").LovValue3 : "";
        // Fix ผักชีโรยหน้า PRD : THOTST49
        price_charge_mesh_001 = "100";
    }
    if (ViewBag.MeshArpuFBBTR002 != null)
    {
        var MeshArpuFBBTR002 = (List<LovScreenValueModel>)ViewBag.MeshArpuFBBTR002;
        package_display_mesh_002 = MeshArpuFBBTR002.Any(c => c.Name == "SCREEN_PRICE_MONTH") ? MeshArpuFBBTR002.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH").DisplayValue : "";
        package_displayDiscount_mesh_002 = MeshArpuFBBTR002.Any(c => c.Name == "SCREEN_PRICE_MONTH" && c.OrderByPDF == 2) ? MeshArpuFBBTR002.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH" && c.OrderByPDF == 2).DisplayValue : "";
        //price_charge_mesh_002 = MeshArpuFBBTR002.Any(c => c.Name == "SCREEN_PRICE_MONTH") ? MeshArpuFBBTR002.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH").LovValue3 : "";
        //price_chargeDiscount_mesh_002 = MeshArpuFBBTR002.Any(c => c.Name == "SCREEN_PRICE_MONTH" && c.OrderByPDF == 2) ? MeshArpuFBBTR002.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH" && c.OrderByPDF == 2).LovValue3 : "";
        // THOTST49
        price_charge_mesh_002 = "100";
        price_chargeDiscount_mesh_002 = "100";
    }
    if (ViewBag.MeshArpuFBBTR003 != null)
    {
        var MeshArpuFBBTR003 = (List<LovScreenValueModel>)ViewBag.MeshArpuFBBTR003;
        package_display_mesh_003 = MeshArpuFBBTR003.Any(c => c.Name == "SCREEN_PRICE_MONTH") ? MeshArpuFBBTR003.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH").DisplayValue : "";
        package_displayDiscount_mesh_003 = MeshArpuFBBTR003.Any(c => c.Name == "SCREEN_PRICE_MONTH" && c.OrderByPDF == 2) ? MeshArpuFBBTR003.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH" && c.OrderByPDF == 2).DisplayValue : "";
        //price_charge_mesh_003 = MeshArpuFBBTR003.Any(c => c.Name == "SCREEN_PRICE_MONTH") ? MeshArpuFBBTR003.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH").LovValue3 : "";
        //price_chargeDiscount_mesh_003 = MeshArpuFBBTR003.Any(c => c.Name == "SCREEN_PRICE_MONTH" && c.OrderByPDF == 2) ? MeshArpuFBBTR003.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH" && c.OrderByPDF == 2).LovValue3 : "";
        // THOTST49
        price_charge_mesh_003 = "100";
        price_chargeDiscount_mesh_003 = "100";
    }

    if (ViewBag.MeshArpuFBBTR004 != null)
    {
        var MeshArpuFBBTR004 = (List<LovScreenValueModel>)ViewBag.MeshArpuFBBTR004;
        package_displayDate_mesh_004 = MeshArpuFBBTR004.Any(c => c.Name == "SCREEN_PRICE_MONTH") ? MeshArpuFBBTR004.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH").DisplayValue : "";

    }
    if (ViewBag.MeshArpuFlag != null)
    {
        var MeshArpuFlag = (List<LovScreenValueModel>)ViewBag.MeshArpuFlag;
        meshArpu_Month_Flag = MeshArpuFlag.Any(c => c.Name == "SCREEN_PRICE_MONTH_FLAG") ? MeshArpuFlag.FirstOrDefault(c => c.Name == "SCREEN_PRICE_MONTH_FLAG").DisplayValue : "";
    }


    if (ViewBag.LabelFBBTR002 != null)
    {
        var labelFBBTR002 = (List<LovScreenValueModel>)ViewBag.LabelFBBTR002;
        SELECT_BY_PAY_INSTALLATION = labelFBBTR002.Any(c => c.Name == "SELECT_BY_PAY_INSTALLATION") ? labelFBBTR002.FirstOrDefault(c => c.Name == "SELECT_BY_PAY_INSTALLATION").DisplayValue : "";
        SELECT_FREE_INSTALL_VALUE = labelFBBTR002.Any(c => c.Name == "SELECT_FREE_INSTALL_VALUE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "SELECT_FREE_INSTALL_VALUE").DisplayValue : "";
        SELECT_PAY_INSTALL_VALUE = labelFBBTR002.Any(c => c.Name == "SELECT_PAY_INSTALL_VALUE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "SELECT_PAY_INSTALL_VALUE").DisplayValue : "";
        DESCRIPTION_PAY_INSTALL = labelFBBTR002.Any(c => c.Name == "DESCRIPTION_PAY_INSTALL") ? labelFBBTR002.FirstOrDefault(c => c.Name == "DESCRIPTION_PAY_INSTALL").DisplayValue : "";
        C_DOUBLE_SPEED1 = labelFBBTR002.Any(c => c.Name == "C_DOUBLE_SPEED1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "C_DOUBLE_SPEED1").DisplayValue : "";
        C_DOUBLE_SPEED2 = labelFBBTR002.Any(c => c.Name == "C_DOUBLE_SPEED2") ? labelFBBTR002.FirstOrDefault(c => c.Name == "C_DOUBLE_SPEED2").DisplayValue : "";
        C_DOUBLE_SPEED3 = labelFBBTR002.Any(c => c.Name == "C_DOUBLE_SPEED3") ? labelFBBTR002.FirstOrDefault(c => c.Name == "C_DOUBLE_SPEED3").DisplayValue : "";
        C_DOUBLE_SPEED4 = labelFBBTR002.Any(c => c.Name == "C_DOUBLE_SPEED4") ? labelFBBTR002.FirstOrDefault(c => c.Name == "C_DOUBLE_SPEED4").DisplayValue : "";
        C_DOUBLE_SPEED5 = labelFBBTR002.Any(c => c.Name == "C_DOUBLE_SPEED5") ? labelFBBTR002.FirstOrDefault(c => c.Name == "C_DOUBLE_SPEED5").DisplayValue : "";
        C_DOUBLE_SPEED6 = labelFBBTR002.Any(c => c.Name == "C_DOUBLE_SPEED6") ? labelFBBTR002.FirstOrDefault(c => c.Name == "C_DOUBLE_SPEED6").DisplayValue : "";
        M_DOUBLE_SPEED1 = labelFBBTR002.Any(c => c.Name == "M_DOUBLE_SPEED1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "M_DOUBLE_SPEED1").DisplayValue : "";
        M_DOUBLE_SPEED2 = labelFBBTR002.Any(c => c.Name == "M_DOUBLE_SPEED2") ? labelFBBTR002.FirstOrDefault(c => c.Name == "M_DOUBLE_SPEED2").DisplayValue : "";
        M_DOUBLE_SPEED3 = labelFBBTR002.Any(c => c.Name == "M_DOUBLE_SPEED3") ? labelFBBTR002.FirstOrDefault(c => c.Name == "M_DOUBLE_SPEED3").DisplayValue : "";
        M_DOUBLE_SPEED4 = labelFBBTR002.Any(c => c.Name == "M_DOUBLE_SPEED4") ? labelFBBTR002.FirstOrDefault(c => c.Name == "M_DOUBLE_SPEED4").DisplayValue : "";
        M_DOUBLE_SPEED5 = labelFBBTR002.Any(c => c.Name == "M_DOUBLE_SPEED5") ? labelFBBTR002.FirstOrDefault(c => c.Name == "M_DOUBLE_SPEED5").DisplayValue : "";
        M_DOUBLE_SPEED6 = labelFBBTR002.Any(c => c.Name == "M_DOUBLE_SPEED6") ? labelFBBTR002.FirstOrDefault(c => c.Name == "M_DOUBLE_SPEED6").DisplayValue : "";
        L_HOME_WIREBB_DES = labelFBBTR002.Any(c => c.Name == "L_HOME_WIREBB_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_HOME_WIREBB_DES").DisplayValue : "";
        L_PRO_WIREBB_DES = labelFBBTR002.Any(c => c.Name == "L_PRO_WIREBB_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PRO_WIREBB_DES").DisplayValue : "";
        L_HOME_FTTX_DES = labelFBBTR002.Any(c => c.Name == "L_HOME_FTTX_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_HOME_FTTX_DES").DisplayValue : "";
        L_PRO_FTTX_DES = labelFBBTR002.Any(c => c.Name == "L_PRO_FTTX_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PRO_FTTX_DES").DisplayValue : "";
        L_HOME_SWIFI_DES = labelFBBTR002.Any(c => c.Name == "L_HOME_SWIFI_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_HOME_SWIFI_DES").DisplayValue : "";
        L_PRO_SWIFI_DES = labelFBBTR002.Any(c => c.Name == "L_PRO_SWIFI_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PRO_SWIFI_DES").DisplayValue : "";
        L_INC_SWIFI_DES = labelFBBTR002.Any(c => c.Name == "L_INC_SWIFI_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_INC_SWIFI_DES").DisplayValue : "";
        L_BAAN_WIREBB_DES = labelFBBTR002.Any(c => c.Name == "L_BAAN_WIREBB_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_BAAN_WIREBB_DES").DisplayValue : "";
        L_CONDO_WIREBB_DES = labelFBBTR002.Any(c => c.Name == "L_CONDO_WIREBB_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_CONDO_WIREBB_DES").DisplayValue : "";
        L_TRIPLE_WIREBB_DES = labelFBBTR002.Any(c => c.Name == "L_TRIPLE_WIREBB_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_TRIPLE_WIREBB_DES").DisplayValue : "";
        L_TRIPLE_FTTX_DES = labelFBBTR002.Any(c => c.Name == "L_TRIPLE_FTTX_DES") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_TRIPLE_FTTX_DES").DisplayValue : "";
        CHK_TRIPLE_WIREBB = labelFBBTR002.Any(c => c.Name == "CHK_TRIPLE_WIREBB") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_TRIPLE_WIREBB").DisplayValue : "";
        CHK_TRIPLE_FTTX = labelFBBTR002.Any(c => c.Name == "CHK_TRIPLE_FTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_TRIPLE_FTTX").DisplayValue : "";
        CHK_BAAN_WIREBB = labelFBBTR002.Any(c => c.Name == "CHK_BAAN_WIREBB") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_BAAN_WIREBB").DisplayValue : "";
        CHK_CONDO_WIREBB = labelFBBTR002.Any(c => c.Name == "CHK_CONDO_WIREBB") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_CONDO_WIREBB").DisplayValue : "";
        CHK_HOME_WIREBB = labelFBBTR002.Any(c => c.Name == "CHK_HOME_WIREBB") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_HOME_WIREBB").DisplayValue : "";
        CHK_PRO_WIREBB = labelFBBTR002.Any(c => c.Name == "CHK_PRO_WIREBB") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_PRO_WIREBB").DisplayValue : "";
        CHK_HOME_FTTX = labelFBBTR002.Any(c => c.Name == "CHK_HOME_FTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_HOME_FTTX").DisplayValue : "";
        CHK_PRO_FTTX = labelFBBTR002.Any(c => c.Name == "CHK_PRO_FTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_PRO_FTTX").DisplayValue : "";
        CHK_HOME_SWIFI = labelFBBTR002.Any(c => c.Name == "CHK_HOME_SWIFI") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_HOME_SWIFI").DisplayValue : "";
        CHK_PRO_SWIFI = labelFBBTR002.Any(c => c.Name == "CHK_PRO_SWIFI") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_PRO_SWIFI").DisplayValue : "";
        CHK_INC_SWIFI = labelFBBTR002.Any(c => c.Name == "CHK_INC_SWIFI") ? labelFBBTR002.FirstOrDefault(c => c.Name == "CHK_INC_SWIFI").DisplayValue : "";

        VAS_CODE_CONFIG = labelFBBTR002.Where(w => w.Type == "VAS_CODE_CONFIG").Select(s => s.DisplayValue).ToList();
        H_FBBTR002 = labelFBBTR002.Any(c => c.Name == "H_FBBOR002") ? labelFBBTR002.FirstOrDefault(c => c.Name == "H_FBBOR002").DisplayValue : "";
        L_INTERNET_WIRE = labelFBBTR002.Any(c => c.Name == "L_INTERNET_WIRE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_INTERNET_WIRE").DisplayValue : "";
        L_INTERNET_WIRELESS = labelFBBTR002.Any(c => c.Name == "L_INTERNET_WIRELESS") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_INTERNET_WIRELESS").DisplayValue : "";
        L_HOME_PACKAGE = labelFBBTR002.Any(c => c.Name == "L_HOME_PACKAGE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_HOME_PACKAGE").DisplayValue : "";
        L_PROFESSIONAL_PACKAGE = labelFBBTR002.Any(c => c.Name == "L_PROFESSIONAL_PACKAGE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PROFESSIONAL_PACKAGE").DisplayValue : "";
        L_SUMMARY = labelFBBTR002.Any(c => c.Name == "L_SUMMARY") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMMARY").DisplayValue : "";
        L_TECHNOLOGY = labelFBBTR002.Any(c => c.Name == "L_TECHNOLOGY") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_TECHNOLOGY").DisplayValue : "";
        L_DOWNLOAD = labelFBBTR002.Any(c => c.Name == "L_DOWNLOAD") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_DOWNLOAD").DisplayValue : "";
        L_UPLOAD = labelFBBTR002.Any(c => c.Name == "L_UPLOAD") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_UPLOAD").DisplayValue : "";
        L_MONTHLY_FEE = labelFBBTR002.Any(c => c.Name == "L_MONTHLY_FEE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_MONTHLY_FEE").DisplayValue : "";
        L_SUMM_DETAIL1 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL1").DisplayValue : "";
        L_SUMM_DETAIL2 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL2") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL2").DisplayValue : "";
        L_SUMM_DETAIL3 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL3") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL3").DisplayValue : "";
        L_SUMM_DETAIL4 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL4") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL4").DisplayValue : "";
        L_SUMM_DETAIL5 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL5") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL5").DisplayValue : "";
        L_SUMM_DETAIL6 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL6") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL6").DisplayValue : "";
        L_SUMM_DETAIL7 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL7") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL7").DisplayValue : "";
        L_SUMM_DETAIL8 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL8") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL8").DisplayValue : "";
        L_SUMM_DETAIL9 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL9") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL9").DisplayValue : "";
        L_SUMM_DETAIL10 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL10") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL10").DisplayValue : "";
        L_SUMM_DETAIL11 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL11") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL11").DisplayValue : "";
        L_SUMM_DETAIL12 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL12") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL12").DisplayValue : "";
        L_SUMM_DETAIL13 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL13") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL13").DisplayValue : "";
        L_SUMM_DETAIL14 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL14") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL14").DisplayValue : "";
        L_SUMM_DETAIL15 = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL15") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL15").DisplayValue : "";
        L_BAHT = labelFBBTR002.Any(c => c.Name == "L_BAHT") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_BAHT").DisplayValue : "";
        L_DISCOUNT = labelFBBTR002.Any(c => c.Name == "L_DISCOUNT") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_DISCOUNT").DisplayValue : "";
        L_DISC_DETAIL_FREE = labelFBBTR002.Any(c => c.Name == "L_DISC_DETAIL_FREE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_DISC_DETAIL_FREE").DisplayValue : "";

        L_LAN_WIRING = labelFBBTR002.Any(c => c.Name == "L_LAN_WIRING") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_LAN_WIRING").DisplayValue : "";
        L_LAN_WIRING_1 = labelFBBTR002.Any(c => c.Name == "L_LAN_WIRING_1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_LAN_WIRING_1").DisplayValue : "";
        L_LAN_WIRING_2 = labelFBBTR002.Any(c => c.Name == "L_LAN_WIRING_2") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_LAN_WIRING_2").DisplayValue : "";
        L_LAN_WIRING_3 = labelFBBTR002.Any(c => c.Name == "L_LAN_WIRING_3") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_LAN_WIRING_3").DisplayValue : "";

        L_WIFI_ROUTER = labelFBBTR002.Any(c => c.Name == "L_WIFI_ROUTER") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_WIFI_ROUTER").DisplayValue : "";
        L_WIFI_DETAIL1 = labelFBBTR002.Any(c => c.Name == "L_WIFI_DETAIL1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_WIFI_DETAIL1").DisplayValue : "";
        L_DISC_DETAIL_SOME = labelFBBTR002.Any(c => c.Name == "L_DISC_DETAIL_SOME") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_DISC_DETAIL_SOME").DisplayValue : "";
        L_ROUTER = labelFBBTR002.Any(c => c.Name == "L_ROUTER") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER").DisplayValue : "";
        L_PRIVILAGE1 = labelFBBTR002.Any(c => c.Name == "L_PRIVILAGE1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PRIVILAGE1").DisplayValue : "";
        L_PRIVILAGE2 = labelFBBTR002.Any(c => c.Name == "L_PRIVILAGE2") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PRIVILAGE2").DisplayValue : "";
        L_NOT_REQUIRE = labelFBBTR002.Any(c => c.Name == "L_NOT_REQUIRE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_NOT_REQUIRE").DisplayValue : "";
        L_REQUEST = labelFBBTR002.Any(c => c.Name == "L_REQUEST") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_REQUEST").DisplayValue : "";
        L_MORE_DETAIL = labelFBBTR002.Any(c => c.Name == "L_MORE_DETAIL") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_MORE_DETAIL").DisplayValue : "";
        L_ROUTER_DETAIL = labelFBBTR002.Any(c => c.Name == "L_ROUTER_DETAIL") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_DETAIL").DisplayValue : "";
        L_ROUTER_DETAIL1 = labelFBBTR002.Any(c => c.Name == "L_ROUTER_DETAIL1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_DETAIL1").DisplayValue : "";
        L_ROUTER_DETAIL2 = labelFBBTR002.Any(c => c.Name == "L_ROUTER_DETAIL2") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_DETAIL2").DisplayValue : "";
        L_ROUTER_DETAIL3 = labelFBBTR002.Any(c => c.Name == "L_ROUTER_DETAIL3") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_DETAIL3").DisplayValue : "";
        L_ROUTER_DETAIL4 = labelFBBTR002.Any(c => c.Name == "L_ROUTER_DETAIL4") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_DETAIL4").DisplayValue : "";
        L_ROUTER_DETAIL5 = labelFBBTR002.Any(c => c.Name == "L_ROUTER_DETAIL5") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_DETAIL5").DisplayValue : "";
        L_ROUTER_DETAIL6 = labelFBBTR002.Any(c => c.Name == "L_ROUTER_DETAIL6") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_DETAIL6").DisplayValue : "";
        L_HTTP_SERVICE = labelFBBTR002.Any(c => c.Name == "L_HTTP_SERVICE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_HTTP_SERVICE").DisplayValue : "";
        L_PROMOTION = labelFBBTR002.Any(c => c.Name == "L_PROMOTION") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PROMOTION").DisplayValue : "";
        L_WIFI_DETAIL2 = labelFBBTR002.Any(c => c.Name == "L_WIFI_DETAIL2") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_WIFI_DETAIL2").DisplayValue : "";
        L_PROMOTION1 = labelFBBTR002.Any(c => c.Name == "L_PROMOTION1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PROMOTION1").DisplayValue : "";
        L_PROMOTION2 = labelFBBTR002.Any(c => c.Name == "L_PROMOTION2") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PROMOTION2").DisplayValue : "";
        L_WIFI_ROUTER_ONU = labelFBBTR002.Any(c => c.Name == "L_WIFI_ROUTER_ONU") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_WIFI_ROUTER_ONU").DisplayValue : "";
        L_ROUTER_ONU = labelFBBTR002.Any(c => c.Name == "L_ROUTER_ONU") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_ONU").DisplayValue : "";
        L_SUMM_DETAIL_WireBB = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL_WireBB") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL_WireBB").DisplayValue : "";
        L_SUMM_DETAIL_FTTx = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL_FTTx") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL_FTTx").DisplayValue : "";
        L_SUMM_DETAIL_SWiFi = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL_SWiFi") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL_SWiFi").DisplayValue : "";
        PRO_INSTALL_ROUTER = labelFBBTR002.Any(c => c.Name == "PRO_INSTALL_ROUTER") ? labelFBBTR002.FirstOrDefault(c => c.Name == "PRO_INSTALL_ROUTER").DisplayValue : "";
        HOME_INSTALL_ROUTER = labelFBBTR002.Any(c => c.Name == "HOME_INSTALL_ROUTER") ? labelFBBTR002.FirstOrDefault(c => c.Name == "HOME_INSTALL_ROUTER").DisplayValue : "";
        SWIFI_ROUTER_VALUE = labelFBBTR002.Any(c => c.Name == "SWIFI_ROUTER_VALUE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "SWIFI_ROUTER_VALUE").DisplayValue : "";
        SWIFI_ROUTER_PRE_VALUE = labelFBBTR002.Any(c => c.Name == "SWIFI_ROUTER_PRE_VALUE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "SWIFI_ROUTER_PRE_VALUE").DisplayValue : "";

        L_POPUP_PLAYBOX_DETAIL = labelFBBTR002.Any(c => c.Name == "L_POPUP_PLAYBOX_DETAIL") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_POPUP_PLAYBOX_DETAIL").DisplayValue : "";
        L_POPUP_PLAYBOX_REMARK = labelFBBTR002.Any(c => c.Name == "L_POPUP_PLAYBOX_REMARK") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_POPUP_PLAYBOX_REMARK").DisplayValue : "";
        B_SUBSCRIBE = labelFBBTR002.Any(c => c.Name == "B_SUBSCRIBE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "B_SUBSCRIBE").DisplayValue : "";
        B_SKIP = labelFBBTR002.Any(c => c.Name == "B_SKIP") ? labelFBBTR002.FirstOrDefault(c => c.Name == "B_SKIP").DisplayValue : "";

        L_TRIPLE_PLAY_PACKAGE = labelFBBTR002.Any(c => c.Name == "L_TRIPLE_PLAY_PACKAGE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_TRIPLE_PLAY_PACKAGE").DisplayValue : "";
        L_COL_AIS_FIBRE = labelFBBTR002.Any(c => c.Name == "L_COL_AIS_FIBRE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_COL_AIS_FIBRE").DisplayValue : "";
        L_COL_AIS_FIXEDLINE = labelFBBTR002.Any(c => c.Name == "L_COL_AIS_FIXEDLINE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_COL_AIS_FIXEDLINE").DisplayValue : "";
        L_COL_AIS_PLAYBOX = labelFBBTR002.Any(c => c.Name == "L_COL_AIS_PLAYBOX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_COL_AIS_PLAYBOX").DisplayValue : "";
        L_TRIPPLE_FIXEDLINE_PACKAGE = labelFBBTR002.Any(c => c.Name == "L_TRIPPLE_FIXEDLINE_PACKAGE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_TRIPPLE_FIXEDLINE_PACKAGE").DisplayValue : "";
        L_TRIPLE_PLAYBOX_PACKAGE_1 = labelFBBTR002.Any(c => c.Name == "L_TRIPLE_PLAYBOX_PACKAGE_1") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_TRIPLE_PLAYBOX_PACKAGE_1").DisplayValue : "";
        L_TRIPLE_PLAYBOX_PACKAGE_6 = labelFBBTR002.Any(c => c.Name == "L_TRIPLE_PLAYBOX_PACKAGE_6") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_TRIPLE_PLAYBOX_PACKAGE_6").DisplayValue : "";
        L_SUM_DETAIL_16 = labelFBBTR002.Any(c => c.Name == "L_SUM_DETAIL_16") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUM_DETAIL_16").DisplayValue : "";
        L_SUM_DETAIL_17 = labelFBBTR002.Any(c => c.Name == "L_SUM_DETAIL_17") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUM_DETAIL_17").DisplayValue : "";

        L_SELECT_SPECIAL_DISCOUNT = labelFBBTR002.Any(c => c.Name == "L_SELECT_SPECIAL_DISCOUNT") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SELECT_SPECIAL_DISCOUNT").DisplayValue : "";

        L_PROMOTION_CODE = labelFBBTR002.Any(c => c.Name == "L_PROMOTION_CODE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_PROMOTION_CODE").DisplayValue : "";
        L_MSG_PROMO_CORRECT = labelFBBTR002.Any(c => c.Name == "L_MSG_PROMO_CORRECT") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_MSG_PROMO_CORRECT").DisplayValue : "";
        L_MSG_PROMO_INVALID = labelFBBTR002.Any(c => c.Name == "L_MSG_PROMO_INVALID") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_MSG_PROMO_INVALID").DisplayValue : "";
        L_MSG_PROMO_ACTIVATED = labelFBBTR002.Any(c => c.Name == "L_MSG_PROMO_ACTIVATED") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_MSG_PROMO_ACTIVATED").DisplayValue : "";

        L_BUNDLING_DISCOUNT_DTL = labelFBBTR002.Any(c => c.Name == "L_BUNDLING_DISCOUNT_DTL") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_BUNDLING_DISCOUNT_DTL").DisplayValue : "";
        L_DISCOUNT_DTL = labelFBBTR002.Any(c => c.Name == "L_DISCOUNT_DTL") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_DISCOUNT_DTL").DisplayValue : "";

        L_CHARGE_ON_INSTALL_DATE = labelFBBTR002.Any(c => c.Name == "L_CHARGE_ON_INSTALL_DATE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_CHARGE_ON_INSTALL_DATE").DisplayValue : "";
        L_ENTRANCE_FEE = labelFBBTR002.Any(c => c.Name == "L_ENTRANCE_FEE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ENTRANCE_FEE").DisplayValue : "";
        L_ENTRANCE_FEE_DETAIL = labelFBBTR002.Any(c => c.Name == "L_ENTRANCE_FEE_DETAIL") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ENTRANCE_FEE_DETAIL").DisplayValue : "";

        LOV_ENTRANCE_FEES = labelFBBTR002.Where(c => c.Name == "L_ENTRANCE_FEE").OrderBy(c => c.OrderByPDF).ToList();

        var labelFBBTR000 = (List<LovScreenValueModel>)ViewBag.LabelFBBTR000;
        B_NEXT = labelFBBTR000.Any(c => c.Name == "B_NEXT") ? labelFBBTR000.FirstOrDefault(c => c.Name == "B_NEXT").DisplayValue : "";
        B_BACK = labelFBBTR000.Any(c => c.Name == "B_BACK") ? labelFBBTR000.FirstOrDefault(c => c.Name == "B_BACK").DisplayValue : "";

        SELECT_FREE_INSTALL_VALUE = SELECT_FREE_INSTALL_VALUE.Replace("\n", " ").Replace("\t", " ").Replace("\r", " ");

        L_POPUP_NO_ROUTER = labelFBBTR002.Any(c => c.Name == "L_POPUP_NO_ROUTER") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_POPUP_NO_ROUTER").DisplayValue : "";
        L_POPUP_NO_ROUTER_VERSION = labelFBBTR002.Any(c => c.Name == "L_POPUP_NO_ROUTER_VERSION") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_POPUP_NO_ROUTER_VERSION").DisplayValue : "";
        L_POPUP_NO_ROUTER_ACCEPT = labelFBBTR002.Any(c => c.Name == "L_POPUP_NO_ROUTER_ACCEPT") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_POPUP_NO_ROUTER_ACCEPT").DisplayValue : "";
        POPUP_FMC_CHECK_PRICE = labelFBBTR002.Any(c => c.Name == "POPUP_FMC_CHECK_PRICE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "POPUP_FMC_CHECK_PRICE").DisplayValue : "";
        PACKAGE_GROUP_NO_ROUTER = labelFBBTR002.Where(c => c.Name == "PACKAGE_GROUP_NO_ROUTER").ToList();

        L_FMC_CHOOSE = labelFBBTR002.Any(c => c.Name == "L_FMC_CHOOSE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_FMC_CHOOSE").DisplayValue : "";
        L_FMC_EXISTING_MOBILE = labelFBBTR002.Any(c => c.Name == "L_FMC_EXISTING_MOBILE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_FMC_EXISTING_MOBILE").DisplayValue : "";
        L_FMC_NEW_SIM = labelFBBTR002.Any(c => c.Name == "L_FMC_NEW_SIM") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_FMC_NEW_SIM").DisplayValue != null ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_FMC_NEW_SIM").DisplayValue : "" : "";

        L_ENTRY_FEE = labelFBBTR002.Any(c => c.Name == "L_ENTRY_FEE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ENTRY_FEE").DisplayValue : "";

        L_RESULT_NOPACKAGE_WTTX = labelFBBTR002.Any(c => c.Name == "L_RESULT_NOPACKAGE_WTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_RESULT_NOPACKAGE_WTTX").DisplayValue : "";
        L_DISCOUNT_WTTX = labelFBBTR002.Any(c => c.Name == "L_DISCOUNT_WTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_DISCOUNT_WTTX").DisplayValue : "";
        L_CHARGE_ON_REGISTER_DATE = labelFBBTR002.Any(c => c.Name == "L_CHARGE_ON_REGISTER_DATE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_CHARGE_ON_REGISTER_DATE").DisplayValue : "";
        L_SUMM_DETAIL6_WTTX = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL6_WTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL6_WTTX").DisplayValue : "";
        L_SUMM_DETAIL7_WTTX = labelFBBTR002.Any(c => c.Name == "L_SUMM_DETAIL7_WTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_DETAIL7_WTTX").DisplayValue : "";
        SELECT_BY_PAY_WTTX = labelFBBTR002.Any(c => c.Name == "SELECT_BY_PAY_WTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "SELECT_BY_PAY_WTTX").DisplayValue : "";
        L_ROUTER_WTTX = labelFBBTR002.Any(c => c.Name == "L_ROUTER_WTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_ROUTER_WTTX").DisplayValue : "";
        L_RETURN_ROUTER_WTTX = labelFBBTR002.Any(c => c.Name == "L_RETURN_ROUTER_WTTX") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_RETURN_ROUTER_WTTX").DisplayValue : "";
        WTTX_WORDING_SCREEN_LISTPACKAGE = labelFBBTR002.Any(c => c.Name == "WTTX_WORDING_SCREEN_LISTPACKAGE") ? labelFBBTR002.FirstOrDefault(c => c.Name == "WTTX_WORDING_SCREEN_LISTPACKAGE").DisplayValue : "";

        //R23.04 Merge Bill Address       
        L_SUMM_PRORATE_DETAIL = labelFBBTR002.Any(c => c.Name == "L_SUMM_PRORATE_DETAIL") ? labelFBBTR002.FirstOrDefault(c => c.Name == "L_SUMM_PRORATE_DETAIL").DisplayValue : "";
    }

    string SHOW_POPUP_DOUBLE_SPEED_CUST = "";
    string SHOW_POPUP_PLAYBOX_CUST = "";
    string SHOW_POPUP_SELECT_VAS_CUST = "";
    string SHOW_POPUP_DOUBLE_SPEED_SSO = "";
    string SHOW_POPUP_PLAYBOX_SSO = "";
    string SHOW_POPUP_SELECT_VAS_SSO = "";

    string SHOW_POPUP_SELECT_VAS_CUST_HOME = "";
    string SHOW_POPUP_SELECT_VAS_SSO_HOME = "";
    string SHOW_POPUP_SELECT_VAS_SSO_PRO = "";
    string SHOW_POPUP_SELECT_VAS_CUST_PRO = "";

    string Input_Voucher_PIN = "";
    string Length_Voucher_PIN = "";

    string SHOW_POPUP_SPECIAL_DISCOUNT_CUST_NEW = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_SSO_NEW = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_SALE_NEW = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_NEW = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_ENG_NEW = "";

    string SHOW_POPUP_SPECIAL_DISCOUNT_CUST_EXISTING = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_SSO_EXISTING = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_SALE_EXISTING = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_EXISTING = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_ENG_EXISTING = "";
    string SHOW_POPUP_SPECIAL_DISCOUNT_TRIPLE_EXISTING = "";
    //18.8
    string FBB_Con_SUB_ACCESS_MODE = "";
    string FBB_Con_REF_UR_NO = "";
    string FBB_Con_PREMIUM_FLAG = "";
    string FBB_Con_REQUEST_SUB_FLAG = "";
    string FBB_Con_REFER_UR_NO_LENGTH = "";
    string FBB_Con_REFER_UR_NO_INPUT = "";
    string FBB_Con_L_RECURING_CHECK = "";
    List<string> LIST_PREMIUM_BY_LOCATON = null;
    List<string> LIST_PREMIUM_BY_REGION = null;
    List<string> LIST_PREMIUM_BY_TECHNOLOGY = null;

    if (ViewBag.FbbConstant != null)
    {
        var FbbConstant = (List<FbbConstantModel>)ViewBag.FbbConstant;
        SHOW_POPUP_DOUBLE_SPEED_CUST = FbbConstant.Any(f => f.Field == "SHOW_POPUP_DOUBLE_SPEED_CUST") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_DOUBLE_SPEED_CUST").Validation : "";
        SHOW_POPUP_PLAYBOX_CUST = FbbConstant.Any(f => f.Field == "SHOW_POPUP_PLAYBOX_CUST") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_PLAYBOX_CUST").Validation : "";
        SHOW_POPUP_SELECT_VAS_CUST = FbbConstant.Any(f => f.Field == "SHOW_POPUP_SELECT_VAS_CUST") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_SELECT_VAS_CUST").Validation : "";
        SHOW_POPUP_DOUBLE_SPEED_SSO = FbbConstant.Any(f => f.Field == "SHOW_POPUP_DOUBLE_SPEED_SSO") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_DOUBLE_SPEED_SSO").Validation : "";
        SHOW_POPUP_PLAYBOX_SSO = FbbConstant.Any(f => f.Field == "SHOW_POPUP_PLAYBOX_SSO") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_PLAYBOX_SSO").Validation : "";
        SHOW_POPUP_SELECT_VAS_SSO = FbbConstant.Any(f => f.Field == "SHOW_POPUP_SELECT_VAS_SSO") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_SELECT_VAS_SSO").Validation : "";

        SHOW_POPUP_SELECT_VAS_CUST_HOME = FbbConstant.Any(f => f.Field == "SHOW_POPUP_SELECT_VAS_CUST_HOME") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_SELECT_VAS_CUST_HOME").Validation : "";
        SHOW_POPUP_SELECT_VAS_SSO_HOME = FbbConstant.Any(f => f.Field == "SHOW_POPUP_SELECT_VAS_SSO_HOME") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_SELECT_VAS_SSO_HOME").Validation : "";
        SHOW_POPUP_SELECT_VAS_SSO_PRO = FbbConstant.Any(f => f.Field == "SHOW_POPUP_SELECT_VAS_SSO_PRO") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_SELECT_VAS_SSO_PRO").Validation : "";
        SHOW_POPUP_SELECT_VAS_CUST_PRO = FbbConstant.Any(f => f.Field == "SHOW_POPUP_SELECT_VAS_CUST_PRO") ? FbbConstant.First(f => f.Field == "SHOW_POPUP_SELECT_VAS_CUST_PRO").Validation : "";

        SHOW_POPUP_SPECIAL_DISCOUNT_SSO_NEW = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_SSO_NEW") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_SSO_NEW").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_CUST_NEW = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_CUST_NEW") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_CUST_NEW").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_SALE_NEW = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_SALE_NEW") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_SALE_NEW").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_NEW = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_NEW") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_NEW").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_ENG_NEW = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_ENG_NEW") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_ENG_NEW").Validation : "";

        SHOW_POPUP_SPECIAL_DISCOUNT_SSO_EXISTING = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_SSO_EXISTING") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_SSO_EXISTING").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_CUST_EXISTING = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_CUST_EXISTING") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_CUST_EXISTING").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_SALE_EXISTING = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_SALE_EXISTING") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_SALE_EXISTING").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_EXISTING = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_EXISTING") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_EXISTING").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_ENG_EXISTING = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_ENG_EXISTING") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_ENG_EXISTING").Validation : "";
        SHOW_POPUP_SPECIAL_DISCOUNT_TRIPLE_EXISTING = FbbConstant.Any(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_TRIPLE_EXISTING") ? FbbConstant.FirstOrDefault(c => c.Field == "SHOW_POPUP_SPECIAL_DISCOUNT_TRIPLE_EXISTING").Validation : "";

        Input_Voucher_PIN = FbbConstant.Any(c => c.Field == "Input_Voucher_PIN") ? FbbConstant.FirstOrDefault(c => c.Field == "Input_Voucher_PIN").Validation : "";
        Length_Voucher_PIN = FbbConstant.Any(c => c.Field == "Length_Voucher_PIN") ? FbbConstant.FirstOrDefault(c => c.Field == "Length_Voucher_PIN").Validation : "";

        //18.8
        FBB_Con_SUB_ACCESS_MODE = FbbConstant.Any(c => c.Field == "SUB_ACCESS_MODE") ? FbbConstant.FirstOrDefault(c => c.Field == "SUB_ACCESS_MODE").Validation : "";
        FBB_Con_REF_UR_NO = FbbConstant.Any(c => c.Field == "REF_UR_NO") ? FbbConstant.FirstOrDefault(c => c.Field == "REF_UR_NO").Validation : "";
        FBB_Con_PREMIUM_FLAG = FbbConstant.Any(c => c.Field == "PREMIUM_FLAG") ? FbbConstant.FirstOrDefault(c => c.Field == "PREMIUM_FLAG").Validation : "";
        FBB_Con_REQUEST_SUB_FLAG = FbbConstant.Any(c => c.Field == "REQUEST_SUB_FLAG") ? FbbConstant.FirstOrDefault(c => c.Field == "REQUEST_SUB_FLAG").Validation : "";
        FBB_Con_REFER_UR_NO_LENGTH = FbbConstant.Any(c => c.Field == "REFER_UR_NO_LENGTH") ? FbbConstant.FirstOrDefault(c => c.Field == "REFER_UR_NO_LENGTH").Validation : "";
        FBB_Con_REFER_UR_NO_INPUT = FbbConstant.Any(c => c.Field == "REFER_UR_NO_INPUT") ? FbbConstant.FirstOrDefault(c => c.Field == "REFER_UR_NO_INPUT").Validation : "";
        FBB_Con_L_RECURING_CHECK = FbbConstant.Any(c => c.Field == "L_RECURING_CHECK") ? FbbConstant.FirstOrDefault(c => c.Field == "L_RECURING_CHECK").Validation : "";
        LIST_PREMIUM_BY_LOCATON = FbbConstant.Where(c => c.Field == "PREMIUM_BY_LOCATON").Select(c => c.Validation).ToList();
        LIST_PREMIUM_BY_REGION = FbbConstant.Where(c => c.Field == "PREMIUM_BY_REGION").Select(c => c.Validation).ToList();
        LIST_PREMIUM_BY_TECHNOLOGY = FbbConstant.Where(c => c.Field == "PREMIUM_BY_TECHNOLOGY").Select(c => c.Validation).ToList();
        //20.3 Service Level
        SERVICE_LEVEL_L = FbbConstant.Any(c => c.Field == "SERVICE_LEVEL_L") ? FbbConstant.FirstOrDefault(c => c.Field == "SERVICE_LEVEL_L").Validation : "";
        SERVICE_LEVEL_M = FbbConstant.Any(c => c.Field == "SERVICE_LEVEL_M") ? FbbConstant.FirstOrDefault(c => c.Field == "SERVICE_LEVEL_M").Validation : "";
        SERVICE_LEVEL_H = FbbConstant.Any(c => c.Field == "SERVICE_LEVEL_H") ? FbbConstant.FirstOrDefault(c => c.Field == "SERVICE_LEVEL_H").Validation : "";
        SERVICE_LEVEL_FLAG_EXISTING = FbbConstant.Any(f => f.Field == "SERVICE_LEVEL_FLAG_EXISTING") ? FbbConstant.First(f => f.Field == "SERVICE_LEVEL_FLAG_EXISTING").Validation : "";
        SERVICE_LEVEL_FLAG_PA = FbbConstant.Any(f => f.Field == "SERVICE_LEVEL_FLAG_PA") ? FbbConstant.First(f => f.Field == "SERVICE_LEVEL_FLAG_PA").Validation : "";
        SERVICE_LEVEL_FLAG_MEMO = FbbConstant.Any(c => c.Field == "SERVICE_LEVEL_FLAG_MEMO") ? FbbConstant.FirstOrDefault(c => c.Field == "SERVICE_LEVEL_FLAG_MEMO").Validation : "";
        SERVICE_LEVEL_FLAG_PACK = FbbConstant.Any(c => c.Field == "SERVICE_LEVEL_FLAG_PACK") ? FbbConstant.FirstOrDefault(c => c.Field == "SERVICE_LEVEL_FLAG_PACK").Validation : "";
        SERVICE_LEVEL_FLAG_OTHER = FbbConstant.Any(c => c.Field == "SERVICE_LEVEL_FLAG_OTHER") ? FbbConstant.FirstOrDefault(c => c.Field == "SERVICE_LEVEL_FLAG_OTHER").Validation : "";
        SERVICE_LEVEL_FLAG_TOTAL = FbbConstant.Any(c => c.Field == "SERVICE_LEVEL_FLAG_TOTAL") ? FbbConstant.FirstOrDefault(c => c.Field == "SERVICE_LEVEL_FLAG_TOTAL").Validation : "";
        SERVICE_LEVEL_MINIMUM_NETPRICE = FbbConstant.Any(c => c.Field == "SERVICE_LEVEL_MINIMUM_NETPRICE") ? FbbConstant.FirstOrDefault(c => c.Field == "SERVICE_LEVEL_MINIMUM_NETPRICE").Validation : "";
        DISPLAY_SERVICE_LEVEL_H = FbbConstant.Any(f => f.Field == "SERVICE_LEVEL_H") ? FbbConstant.First(f => f.Field == "SERVICE_LEVEL_H").SubValidation : "";
        DISPLAY_SERVICE_LEVEL_M = FbbConstant.Any(f => f.Field == "SERVICE_LEVEL_M") ? FbbConstant.First(f => f.Field == "SERVICE_LEVEL_M").SubValidation : "";
        DISPLAY_SERVICE_LEVEL_L = FbbConstant.Any(f => f.Field == "SERVICE_LEVEL_L") ? FbbConstant.First(f => f.Field == "SERVICE_LEVEL_L").SubValidation : "";
        //20.5
        NON_RESIDENTIAL_CARDTYPE = FbbConstant.Any(f => f.Field == "NON_RESIDENTIAL_CARDTYPE") ? FbbConstant.First(f => f.Field == "NON_RESIDENTIAL_CARDTYPE").Validation : "";
        NON_RESIDENTIAL_NONRESFLAG_YES = FbbConstant.Any(f => f.Field == "NON_RESIDENTIAL_NONRESFLAG_YES") ? FbbConstant.First(f => f.Field == "NON_RESIDENTIAL_NONRESFLAG_YES").Validation : "";
        //25.09 Entry Fee Vat
        SHOW_ENTRY_FEE_VAT_FLAG = FbbConstant.Any(f => f.Field == "SHOW_ENTRY_FEE_VAT_FLAG") ? FbbConstant.First(f => f.Field == "SHOW_ENTRY_FEE_VAT_FLAG").Validation : "";
    }

    string L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTH = "";
    string L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTHS = "";
    string L_ONTOP_PLAYBOX_PRE_INITIATION = "";
    string L_ONTOP_PLAYBOX_DISCOUNT_INITIATION = "";
    //18.8
    string L_PREMIUM_INSTALL = "";
    string L_REFER_UR_NO = "";
    //R21.12PP ATV
    string WORDIND_MESH = "";

    if (ViewBag.LabelFBBTR003 != null)
    {
        var labelFBBTR003 = (List<LovScreenValueModel>)ViewBag.LabelFBBTR003;
        L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTH = labelFBBTR003.Any(c => c.Name == "L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTH") ? labelFBBTR003.FirstOrDefault(c => c.Name == "L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTH").DisplayValue : "";
        L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTHS = labelFBBTR003.Any(c => c.Name == "L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTHS") ? labelFBBTR003.FirstOrDefault(c => c.Name == "L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTHS").DisplayValue : ""; ;
        L_ONTOP_PLAYBOX_PRE_INITIATION = labelFBBTR003.Any(c => c.Name == "L_ONTOP_PLAYBOX_PRE_INITIATION") ? labelFBBTR003.FirstOrDefault(c => c.Name == "L_ONTOP_PLAYBOX_PRE_INITIATION").DisplayValue : "";
        L_ONTOP_PLAYBOX_DISCOUNT_INITIATION = labelFBBTR003.Any(c => c.Name == "L_ONTOP_PLAYBOX_DISCOUNT_INITIATION") ? labelFBBTR003.FirstOrDefault(c => c.Name == "L_ONTOP_PLAYBOX_DISCOUNT_INITIATION").DisplayValue : "";
        //18.8
        L_PREMIUM_INSTALL = labelFBBTR003.Any(c => c.Name == "PREMIUM_INSTALL") ? labelFBBTR003.FirstOrDefault(c => c.Name == "PREMIUM_INSTALL").DisplayValue : "";
        L_REFER_UR_NO = labelFBBTR003.Any(c => c.Name == "REFER_UR_NO") ? labelFBBTR003.FirstOrDefault(c => c.Name == "REFER_UR_NO").DisplayValue : "";
        //R21.12PP ATV
        WORDIND_MESH = labelFBBTR003.Any(c => c.Name == "WORDIND_MESH") ? labelFBBTR003.FirstOrDefault(c => c.Name == "WORDIND_MESH").DisplayValue : "";
    }

    if (ViewBag.LabelFBBORV11 != null)
    {
        var LabelFBBORV11 = (List<LovScreenValueModel>)ViewBag.LabelFBBORV11;
        L_VAS_CONFIRM = LabelFBBORV11.Any(c => c.Name == "L_VAS_CONFIRM") ? LabelFBBORV11.FirstOrDefault(c => c.Name == "L_VAS_CONFIRM").DisplayValue : "";
        B_VAS_CONFIRM_OK = LabelFBBORV11.Any(c => c.Name == "B_VAS_CONFIRM_OK") ? LabelFBBORV11.FirstOrDefault(c => c.Name == "B_VAS_CONFIRM_OK").DisplayValue : "";
        B_VAS_CONFIRM_SKIP = LabelFBBORV11.Any(c => c.Name == "B_VAS_CONFIRM_SKIP") ? LabelFBBORV11.FirstOrDefault(c => c.Name == "B_VAS_CONFIRM_SKIP").DisplayValue : "";
    }

    string L_AIS_PLAYBOX = "";
    string L_INTERNET_TV = "";
    string L_FIXEDLINE_VOIP = "";
    string L_FIXEDLINE_DES = "";

    string SHOW_ICON_FIXEDLINE_CUST_REGISTER = "";
    string SHOW_ICON_FIXEDLINE_SSO_REGISTER = "";
    string SHOW_ICON_FIXEDLINE_CUST_VAS = "";
    string SHOW_ICON_FIXEDLINE_SSO_VAS = "";

    string SHOW_ICON_PLAYBOX_CUST_REGISTER = "";
    string SHOW_ICON_PLAYBOX_SSO_REGISTER = "";
    string SHOW_ICON_PLAYBOX_CUST_VAS = "";
    string SHOW_ICON_PLAYBOX_SSO_VAS = "";

    string L_SUM_INSTALL_RATE = "";
    string L_SUM_MAINTEN_RATE = "";
    string L_SUM_DISCOUNT_INSTALL_RATE = "";

    string L_CLICK_CHECKBOX = "";
    string L_MAINTEN_FEE2 = "";

    //R23.10 Mesh Special
    List<string> CHK_PACKMESHWifi = new List<string>();

    if (ViewBag.LabelFBBTR010 != null)
    {
        var LabelFBBTR010 = (List<LovScreenValueModel>)ViewBag.LabelFBBTR010;

        L_AIS_PLAYBOX = LabelFBBTR010.Any(c => c.Name == "L_AIS_PLAYBOX") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_AIS_PLAYBOX").DisplayValue : "";
        L_INTERNET_TV = LabelFBBTR010.Any(c => c.Name == "L_INTERNET_TV") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_INTERNET_TV").DisplayValue : "";
        L_FIXEDLINE_VOIP = LabelFBBTR010.Any(c => c.Name == "L_FIXEDLINE_VOIP") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_FIXEDLINE_VOIP").DisplayValue : "";
        L_FIXEDLINE_DES = LabelFBBTR010.Any(c => c.Name == "L_FIXEDLINE_DES") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_FIXEDLINE_DES").DisplayValue : "";

        SHOW_ICON_FIXEDLINE_CUST_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_FIXEDLINE_CUST_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_FIXEDLINE_CUST_REGISTER").DisplayValue : "";
        SHOW_ICON_FIXEDLINE_SSO_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_FIXEDLINE_SSO_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_FIXEDLINE_SSO_REGISTER").DisplayValue : "";
        SHOW_ICON_FIXEDLINE_CUST_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_FIXEDLINE_CUST_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_FIXEDLINE_CUST_VAS").DisplayValue : "";
        SHOW_ICON_FIXEDLINE_SSO_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_FIXEDLINE_SSO_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_FIXEDLINE_SSO_VAS").DisplayValue : "";

        SHOW_ICON_PLAYBOX_CUST_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_REGISTER").DisplayValue : "";
        SHOW_ICON_PLAYBOX_SSO_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_REGISTER").DisplayValue : "";
        SHOW_ICON_PLAYBOX_CUST_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_VAS").DisplayValue : "";
        SHOW_ICON_PLAYBOX_SSO_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_VAS").DisplayValue : "";

        L_SUM_INSTALL_RATE = LabelFBBTR010.Any(c => c.Name == "L_SUM_INSTALL_RATE") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_SUM_INSTALL_RATE").DisplayValue : "";
        L_SUM_MAINTEN_RATE = LabelFBBTR010.Any(c => c.Name == "L_SUM_MAINTEN_RATE") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_SUM_MAINTEN_RATE").DisplayValue : "";
        L_SUM_DISCOUNT_INSTALL_RATE = LabelFBBTR010.Any(c => c.Name == "L_SUM_DISCOUNT_INSTALL_RATE") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_SUM_DISCOUNT_INSTALL_RATE").DisplayValue : "";

        L_CLICK_CHECKBOX = LabelFBBTR010.Any(c => c.Name == "L_CLICK_CHECKBOX") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_CLICK_CHECKBOX").DisplayValue : "";
        L_MAINTEN_FEE2 = LabelFBBTR010.Any(c => c.Name == "L_MAINTEN_FEE2") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_MAINTEN_FEE2").DisplayValue : "";

        //MAX_MESH_NEW = LabelFBBTR010.Any(c => c.Name == "MAX_MESH_NEW") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "MAX_MESH_NEW").DisplayValue : "";
        L_MESH_WIFI = LabelFBBTR010.Any(c => c.Name == "L_MESH_WIFI") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_MESH_WIFI").DisplayValue : "";
        L_PIC_CONTENT = LabelFBBTR010.Any(c => c.Name == "L_PIC_CONTENT") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "L_PIC_CONTENT").Blob : "";

        //R23.10 Mesh Special
        CHK_PACKMESHWifi = LabelFBBTR010.Any(c => c.Name == "CheckList_PackageMESHWifi") ? LabelFBBTR010.Where(c => c.Name == "CheckList_PackageMESHWifi").OrderBy(c => c.OrderByPDF).Select(c => c.DisplayValue).ToList() : null;
    }

    //R23.06 IP Camera
    string CHK_IPCAMERA_ACTIVESTATUS = "";
    string SHOW_IPCAMERA_PICTURE = "";
    List<string> SHOW_IPCAMERA_PROMOTIONNAME = new List<string>();
    string MAX_IPCAMERA_LIST7DAYS = "";
    string SHOW_DISCOUNT_COLOR = "";
    string SHOW_DISCOUNT_COLOR_NAME = "";
    string SHOW_DISCOUNT_COLOR_BATH = "";
    //string MAX_IPCAMERA_LIST14DAYS = "";
    //string MAX_IPCAMERA_LIST30DAYS = "";

    if (ViewBag.IpCameraConfig != null)
    {
        var IpCameraConfig = (List<LovScreenValueModel>)ViewBag.IpCameraConfig;

        CHK_IPCAMERA_ACTIVESTATUS = IpCameraConfig.Any(c => c.Name == "IPCamera_ActiveStatus") ? IpCameraConfig.FirstOrDefault(c => c.Name == "IPCamera_ActiveStatus").DisplayValue : "";
        SHOW_IPCAMERA_PICTURE = IpCameraConfig.Any(c => c.Name == "IPCamera_Picture") ? IpCameraConfig.FirstOrDefault(c => c.Name == "IPCamera_Picture").Blob : "";
        SHOW_IPCAMERA_PROMOTIONNAME = IpCameraConfig.Any(c => c.Name == "IPCamera_PromotionName") ? IpCameraConfig.Where(c => c.Name == "IPCamera_PromotionName").OrderBy(c => c.OrderByPDF).Select(c => c.DisplayValue).ToList() : null;
        MAX_IPCAMERA_LIST7DAYS = IpCameraConfig.Any(c => c.Name == "IPCamera_List7Days_MAX") ? IpCameraConfig.First(c => c.Name == "IPCamera_List7Days_MAX").DisplayValue : "";
        SHOW_DISCOUNT_COLOR = IpCameraConfig.Any(c => c.Name == "IPCamera_Discount_Color") ? IpCameraConfig.First(c => c.Name == "IPCamera_Discount_Color").DisplayValue : "";
        SHOW_DISCOUNT_COLOR_NAME = IpCameraConfig.Any(c => c.Name == "IPCamera_Discount_Color_Name") ? IpCameraConfig.First(c => c.Name == "IPCamera_Discount_Color_Name").DisplayValue : "";
        SHOW_DISCOUNT_COLOR_BATH = IpCameraConfig.Any(c => c.Name == "IPCamera_Discount_Color_Bath") ? IpCameraConfig.First(c => c.Name == "IPCamera_Discount_Color_Bath").DisplayValue : "";
        //MAX_IPCAMERA_LIST14DAYS = IpCameraConfig.Any(c => c.Name == "IPCamera_List14Days_MAX") ? IpCameraConfig.First(c => c.Name == "IPCamera_List14Days_MAX").DisplayValue : "";
        //MAX_IPCAMERA_LIST30DAYS = IpCameraConfig.Any(c => c.Name == "IPCamera_List30Days_MAX") ? IpCameraConfig.First(c => c.Name == "IPCamera_List30Days_MAX").DisplayValue : "";
    }

    string[] CheckOntopContentArray;

    if (ViewBag.ContentPlaybox != null)
    {
        var ContentPlaybox = (List<LovScreenValueModel>)ViewBag.ContentPlaybox;
        CheckOntopContentArray = ContentPlaybox.Where(p => p.Type == "NEW_CONTENT_PLAYBOX" && p.DisplayValueJing == "ICON_DES").Select(p => p.Name).ToArray();
    }
    else
    {
        CheckOntopContentArray = null;
    }

    string lACCEPTED = "";
    if (ViewBag.LabelFBBTR004 != null)
    {
        var labelFBBTR004 = (List<LovScreenValueModel>)ViewBag.labelFBBTR004;
        lACCEPTED = labelFBBTR004.Any(c => c.Name == "L_ACCEPTED") ? labelFBBTR004.First(c => c.Name == "L_ACCEPTED").DisplayValue : "";
    }


    if (ViewBag.MeshConfig != null)
    {
        var meshConfig = (List<LovScreenValueModel>)ViewBag.MeshConfig;
        MAX_MESH_NEW = meshConfig.Any(c => c.Name == "MAX_MESH_NEW") ? meshConfig.First(c => c.Name == "MAX_MESH_NEW").DisplayValue : "";
    }

    string BypassESRIflag = "false";
    if (null != ViewBag.BypassESRIflag)
    {
        BypassESRIflag = ViewBag.BypassESRIflag;
    }

    string ESRIflag = "false";
    if (null != ViewBag.ESRIflag)
    {
        ESRIflag = ViewBag.ESRIflag;
    }

    var stlyeDisplay = "style=\"display: none;\"";
    if (ESRIflag == "true")
    {
        if (Model.CallfeascheckFlag == "N")
        {
            stlyeDisplay = "";
        }
    }

    //R18.1 FTTB Sell Router
    string L_ROUTER_EQUIPMENT_FEE = "";
    if (ViewBag.LabelFBBORV25 != null)
    {
        var labelFbborv25 = (List<LovScreenValueModel>)ViewBag.LabelFBBORV25;

        L_ROUTER_EQUIPMENT_FEE = labelFbborv25.Any(c => c.Name == "L_ROUTER_EQUIPMENT_FEE") ? labelFbborv25.First(c => c.Name == "L_ROUTER_EQUIPMENT_FEE").DisplayValue : "";
    }

    string FromFBBxEOS = "";
    if (ViewBag.FromFBBxEOS != null)
    {
        FromFBBxEOS = ViewBag.FromFBBxEOS;
    }

    string PromotionCodeFBBxEOS = "";
    if (ViewBag.PromotionCodeFBBxEOS != null)
    {
        PromotionCodeFBBxEOS = ViewBag.PromotionCodeFBBxEOS;
    }

    string FromCoverageFBBxEOS = "";
    if (ViewBag.FromCoverageFBBxEOS != null)
    {
        FromCoverageFBBxEOS = ViewBag.FromCoverageFBBxEOS;
    }

}

<div id="page2" class="container" @Html.Raw(stlyeDisplay)>
    <div class="form-summary col-md-8-5 col-xs-12 addrounded">

        <p class="clearfix"></p>

        <div id="optionInstallationBody"></div>
        <p class="clearfix"></p>

        <div id="optionEntryFeeBody"></div>
        <p class="clearfix"></p>

        <div id="optionPremiumInstall" style="display:none;">
            <div class="col-sm-4 col-xs-4">
                <label for="chkPremiumInstall" style="font-weight: normal !important" class="checkbox-inline">
                    <input id="chkPremiumInstall" type="checkbox" onclick="displayRefURNo()">
                    @L_PREMIUM_INSTALL
                </label>
            </div>
            <div class="col-sm-8 col-xs-8">
                <label class="col-sm-4" style="font-weight: normal !important">@L_REFER_UR_NO</label>
                <div class="col-sm-7">
                    @Html.TextBoxFor(Model => Model.CustomerRegisterPanelModel.REF_UR_NO,
                        new
                        {
                            @id = "txtReferURNo",
                            @class = "form-control",
                            @maxlength = "@FBB_Con_REFER_UR_NO_LENGTH"
                        })
                </div>
            </div>
        </div>
        <p class="clearfix"></p>

        <h4 class="title- page-header tgreen">@H_FBBTR002</h4>

        <p class="clearfix"></p>

        <i class="fa fa-chevron-right tgreen"></i>
        <label id="lb002-1"></label>
        <p class="clearfix"></p>

        <div id="dynamicBody002"></div>

        <p class="clearfix"></p>
        <div class="col-sm-4 col-xs-12 col-md-offset-4">
            <input type="text" name="GiftVoucher" id="GiftVoucher" class="form-control" placeholder="@L_PROMOTION_CODE" maxlength="@Length_Voucher_PIN" />
        </div>
        <div class="col-sm-6 col-xs-12 col-md-offset-3">
            <div id="checkGiftVoucher" style="text-align: center;"></div>
        </div>
        <p class="clearfix"></p>


        <p class="clearfix page-header"></p>
        <div class="col-md-12 text-center wrapButton-total">
            @if (BypassESRIflag != "true")
            {
                <button type="button" class="btn btn-default btn-for-xs" onclick="backPage002()">&nbsp; @B_BACK &nbsp; </button>
            }
            <button id="btnNextPage002" type="button" class="btn btn-success btn-for-xs" onclick="nextPageSelectContents(this)">&nbsp; @B_NEXT &nbsp; <i class=" fa fa-arrow-circle-o-right "></i></button>
        </div>
        <p class="clearfix"></p>
    </div>

    <div class="form-summary2 col-md-4 col-xs-12 addrounded pull-right hidden-sm hidden-xs" id="divSideTab">
        <p class="clearfix"></p>
        <h4 class="greenheader page-header twhite">@L_SUMMARY</h4>
        <div id="divFormSummarySelectPackage">

            <div class="page-dot" id="pageDotEntranceFee" style="display:none">
                <i class="fa fa-chevron-right tgreen"></i><span class="tgreen">@L_CHARGE_ON_INSTALL_DATE</span>
                <p class="clearfix"></p>
                <div id="divEntranceFee"></div>
                <p class="clearfix"></p>
                <div id="divSellRouter"></div>

            </div>

            <div class="page-dot" id="trLindSetupDetail">
                <i class="fa fa-chevron-right tgreen"></i><span class="tgreen" id="o1">@L_SUMM_DETAIL1</span>
                <p class="clearfix"></p>
                <span id="summDetail"></span>
                <p class="clearfix"></p>
            </div>

            <div class="page-dot" id="sideTabInstallation">
                <i class="fa fa-chevron-right tgreen"></i><span class="tgreen" id="o2">@L_SUMM_DETAIL5</span>
                <p class="clearfix"></p>
                <div id="sideTabRouterInstallationFee">
                    <div class="col-xs-8"><span id="summLb1"></span><span id="summLb1Router"></span></div>
                    <div class="col-xs-4 text-right"><span id="summVal1"></span><span id="obaht"> @L_BAHT</span></div>
                    <p class="clearfix"></p>
                    <div class="col-xs-8"><span id="o3">@L_SUMM_DETAIL7</span></div>
                    <div class="col-xs-4 text-right"><span id="summVal2"></span> @L_BAHT</div>
                    <p class="clearfix"></p>
                </div>
                <div id="trInstallPlayBoxAutoMap" style="display: none;">
                    <span class="col-xs-8" id="lblInstallPlayBoxAutoMap">@L_ONTOP_PLAYBOX_PRE_INITIATION</span>
                    <span class="col-xs-4 text-right"><span id="lblInstallPricePlayBoxAutoMap"></span> @L_BAHT</span>
                    <p class="clearfix"></p>
                </div>
                <div id="trDiscountPlayBoxAutoMap" style="display: none;">
                    <span class="col-xs-8" id="lblDiscountPlayBoxAutoMap">@L_ONTOP_PLAYBOX_DISCOUNT_INITIATION</span>
                    <span class="col-xs-4 text-right"><span id="lblDiscountPricePlayBoxAutoMap"></span> @L_BAHT</span>
                    <p class="clearfix"></p>
                </div>
                <div id="trInstallFixedLineAutoMap" style="display: none;">
                    <span class="col-xs-8" id="lblInstallFixedLineAutoMap">@L_SUM_INSTALL_RATE</span>
                    <span class="col-xs-4 text-right"><span id="lblInstallPriceFixedLineAutoMap"></span> @L_BAHT</span>
                    <p class="clearfix"></p>
                </div>
                <div id="trDiscountFixedLineAutoMap" style="display: none;">
                    <span class="col-xs-8" id="lblDiscountFixedLineAutoMap">@L_SUM_DISCOUNT_INSTALL_RATE</span>
                    <span class="col-xs-4 text-right"><span id="lblDiscountPriceFixedLineAutoMap"></span> @L_BAHT</span>
                    <p class="clearfix"></p>
                </div>
                <div class="col-xs-8" id="o4"><strong>@L_SUMM_DETAIL8</strong></div>
                <div class="col-xs-4 text-right"><strong><span id="summTotal1"></span><input type='hidden' id='tmpSummTotal1'> @L_BAHT</strong></div>
                <p class="clearfix"></p>
            </div>

            <div class="page-dot" id="sideTabMonthly">
                <i class="fa fa-chevron-right tgreen"></i><span class="tgreen" id="oProrate">@L_SUMM_DETAIL9</span>
                <p class="clearfix"></p>
                <div class="col-xs-8"><span id="o6">@L_SUMM_DETAIL10</span></div>
                <div class="col-xs-4 text-right"><span id="summVal3"></span> @L_BAHT</div>
                <div id="trFullHDAutoMap" style="display: none;">
                    <span class="col-xs-8" id="lblFullHDAutoMap"></span>
                    <span class="col-xs-4 text-right"><span id="lblSumFullHDAutoMap"></span> @L_BAHT</span>
                    <p class="clearfix"></p>
                </div>
                <div id="trFullHD2AutoMap" style="display: none;">
                    <span class="col-xs-8" id="lblFullHD2AutoMap"></span>
                    <span class="col-xs-4 text-right"><span id="lblSumFullHD2AutoMap"></span> @L_BAHT</span>
                    <p class="clearfix"></p>
                </div>
                <div id="trSpeedBoostAutoMap" style="display: none;">
                    <span class="col-xs-8" id="lblSpeedBoostAutoMap"></span>
                    <span class="col-xs-4 text-right"><span id="lblSumSpeedBoostAutoMap"></span>@L_BAHT</span>
                    <p class="clearfix"></p>
                </div>
                <div id="trBundlingAutoMap" style="display: none;">
                    <p class="clearfix"></p>
                    <span class="col-xs-8"><span id="Bunding_Discount_Select_package"></span><span id="BundingVasAutoMap">@L_BUNDLING_DISCOUNT_DTL</span></span>
                    <span class="col-xs-4 text-right"><span id="summBundingVasAutoMap"></span>@L_BAHT</span>
                </div>
                <div id="trDiscountAutoMap" style="display: none;">
                    <p class="clearfix"></p>
                    <span class="col-xs-8"><span id="Discount_dtl_Select_package"></span><span id="DiscountVasAutoMap">@L_DISCOUNT_DTL</span></span>
                    <span class="col-xs-4 text-right"><span id="summDiscountVasAutoMap"></span>@L_BAHT</span>
                </div>
                <p class="clearfix"></p>
                <div id="trInstallMonthVasAutoMap" style="display: none;">
                    <span class="col-xs-8" id="lblInstallMonthVasAutoMap">@L_SUM_MAINTEN_RATE</span>
                    <span class="col-xs-4 text-right"><span id="lblInstallMonthPriceVasAutoMap"></span>@L_BAHT</span>
                    <p class="clearfix"></p>
                </div>
                <div class="col-xs-8"><strong><span id="o7">@L_SUMM_DETAIL11</span></strong></div>
                <div class="col-xs-4 text-right"><strong><span id="summTotal2"></span> @L_BAHT</strong></div>
                <p class="clearfix"></p>
            </div>

            <div class="page-dot">
                <i class="fa fa-chevron-right tgreen"></i><span class="tgreen" id="o5">@L_SUMM_DETAIL13</span>
                <p class="clearfix"></p>
                <div class="col-xs-8"><span id="o62">@L_SUMM_DETAIL14</span></div>
                <div class="col-xs-4 text-right"><span id="sumProrate"></span> @L_BAHT</div>
                <p class="clearfix"></p>

                <div class="col-xs-8"><strong><span id="o42">@L_SUMM_DETAIL15</span></strong></div>
                <div class="col-xs-4 text-right"><strong><span id="sumTotalProrate"></span> @L_BAHT</strong></div>
                <p class="clearfix"></p>

                <div class="col-xs-8"><strong><span id="vat">@L_SUMM_DETAIL12</span></strong></div>
                <p class="clearfix"></p>
            </div>
            @*Display service level here*@

        </div>
    </div>
</div>

<div id="divSelectVas" style="display: none">
    <fieldset>
        <div id="divPlayBoxPopUp" style="display: none">
            <div style="margin: 20px 0 0 0; text-align: center;">
                <label id="lblPlayBoxDetailPopup">@L_POPUP_PLAYBOX_DETAIL</label>
                <br />
                <br />
                <img src="~/Content/images/play_box.png" />
                <br />
                <label style="font-size: 12px;">@L_POPUP_PLAYBOX_REMARK</label>
            </div>

            <div style="margin: 25px 0 15px 0; text-align: center;">
                <a onclick="onSelectPlayBox_Click(1);" class="greenButton" style="color: #FFFFFF;">@B_SUBSCRIBE</a>
                <a onclick="onSelectPlayBox_Click(2);" class="greyButton" style="color: #74A433;">@B_SKIP</a>
            </div>

            <div style="clear: both;"></div>
        </div>

        <div id="divDoubleSpeedPopUp" style="display: none">
            <div style="margin: 20px 0 0 0; text-align: center;">
                <label>Double Speed</label>
            </div>

            <div style="margin: 25px 0 15px 0; text-align: center;">
                <a onclick="onSelectDoubleSpeed_Click();" class="greenButton" style="color: #FFFFFF;">@B_VAS_CONFIRM_OK</a>
            </div>

            <div style="clear: both;"></div>
        </div>

        <div id="divVasPopUp" style="display: none">
            <div style="padding: 20px 0 20px 0; text-align: center;">
                <label>@Html.Raw(L_VAS_CONFIRM)</label>
            </div>

            <div id="divVasBoth" style="width: 500px; font-size: 14px;" style="display: none">
                <div style="float: left; width: 250px; text-align: center;">
                    <img src="~/Content/images/playbox_icon.jpg" /><br />
                    <b>
                        <label>@Html.Raw(L_AIS_PLAYBOX)</label>
                    </b>
                    <br />
                    <label>@Html.Raw(L_INTERNET_TV)</label><br />
                </div>
                <div style="float: left; width: 250px; text-align: center;">
                    <img src="~/Content/images/voip_icon.JPG" /><br />
                    <b>
                        <label>@Html.Raw(L_FIXEDLINE_VOIP)</label>
                    </b>
                    <br />
                    <label>@Html.Raw(L_FIXEDLINE_DES)</label><br />
                </div>
                <div style="clear: both;"></div>
            </div>

            <div id="divVasVoip" style="width: 500px; font-size: 14px; text-align: center; display: none">
                <img src="~/Content/images/voip_icon.JPG" /><br />
                <b>
                    <label>@Html.Raw(L_FIXEDLINE_VOIP)</label>
                </b>
                <br />
                <label>@Html.Raw(L_FIXEDLINE_DES)</label><br />
            </div>

            <div id="divVasPlayBox" style="width: 500px; font-size: 14px; text-align: center; display: none">
                <img src="~/Content/images/playbox_icon.jpg" /><br />
                <b>
                    <label>@Html.Raw(L_AIS_PLAYBOX)</label>
                </b>
                <br />
                <label>@Html.Raw(L_INTERNET_TV)</label><br />
            </div>

            <div style="margin: 25px 0 15px 0; text-align: center;">
                <a onclick="onSelectVas_Click(1);$.modal.close();" class="greenButton" style="color: #FFFFFF;">@B_VAS_CONFIRM_OK</a>
                <a onclick="onSelectVas_Click(2);$.modal.close();" class="greyButton" style="color: #74A433;">@B_VAS_CONFIRM_SKIP</a>
            </div>

            <div style="clear: both;"></div>
        </div>
    </fieldset>
</div>

<div class="modal fade" id="divSelectSPOntip" tabindex="-1" role="dialog" aria-labelledby="divSelectSPOntipLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: none;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="add-border-rounded-green" id="discount">
                    <p class="clearfix"></p>
                    <h3 class="text-center">
                        @L_SELECT_SPECIAL_DISCOUNT
                    </h3>
                    <p class="clearfix"></p>
                    <div class="col-md-8 col-md-offset-2">
                        <div id="tableOntopSEP" class="col-md-12 radio">
                        </div>
                        <div id="tableBunding" class="col-md-12 radio">
                        </div>
                    </div>
                    <p class="clearfix"></p>
                    <p class="clearfix"></p>
                </div>
                <p class="clearfix"></p>
                <p class="clearfix"></p>
                <div class="add-border-rounded-green" id="router" style="display: none;">
                    <p class="clearfix"></p>
                    <div class="col-md-12">
                        @Html.Raw(L_POPUP_NO_ROUTER)
                        <p class="clearfix"></p>
                        <h3>
                            @Html.Raw(L_POPUP_NO_ROUTER_VERSION)
                        </h3>
                        <p class="clearfix"></p>
                        <p class="clearfix"></p>
                        <div class="col-xs-6"> D-Link  DSL-224 </div><div class="col-xs-6"> <div style="float: left; width: 100%; max-width: 130px; text-align: center;"> <img src="~/Content/images/DSL224.jpeg" /> </div> </div>
                        <div class="col-xs-6"> D-Link DSL-2870A </div><div class="col-xs-6"> <div style="float: left; width: 100%; max-width: 130px; text-align: center;"> <img src="~/Content/images/DSL2870A.jpg" /> </div> </div>
                        <div class="col-xs-6"> Huawei  HG630 </div><div class="col-xs-6"> <div style="float: left; width: 100%; max-width: 130px; text-align: center;"> <img src="~/Content/images/HG630.jpg" /> </div> </div>
                        <div class="col-xs-6"> HUMAX HV100-02 </div><div class="col-xs-6"> <div style="float: left; width: 100%; max-width: 130px; text-align: center;"> <img src="~/Content/images/HV100-02.png" /> </div> </div>
                        <div class="col-xs-6"> KASDA AC 1200M KW62293 </div><div class="col-xs-6"> <div style="float: left; width: 100%; max-width: 130px; text-align: center;"> <img src="~/Content/images/kw62293.jpg" /> </div> </div>
                        <div class="col-xs-6"> NETGEAR  D6220 </div><div class="col-xs-6"> <div style="float: left; width: 100%; max-width: 130px; text-align: center;"> <img src="~/Content/images/D6220.png" /> </div> </div>
                    </div>
                    <p class="clearfix"></p>
                    <p class="clearfix"></p>
                </div>
                <div class="col-md-12 text-center">
                    <p class="clearfix"></p>
                    <div id="ChkConRouterDiv" class="checkbox" style="display: none;">
                        <label>
                            <input id="ChkConRouter" type="checkbox" value="" />
                            @L_POPUP_NO_ROUTER_ACCEPT
                        </label>
                        <p class="clearfix"></p>
                    </div>
                    <button type="button" class="btn btn-success" disabled id="SPontopbottonHide" data-dismiss="modal" style="display: none;">
                        @B_NEXT <i class="fa fa-arrow-circle-o-right "></i>
                    </button>
                    <button type="button" class="btn btn-success" id="SPontopbotton" data-dismiss="modal"
                            onclick='checkHavePackageContentsToNaxtPage(true);'>
                        @B_NEXT <i class="fa fa-arrow-circle-o-right "></i>
                    </button>
                    &nbsp;&nbsp;
                    <p class="clearfix"></p>
                    <p class="clearfix"></p>
                </div>
            </div>
            <div class="modal-footer" style="border-top: none;">
            </div>
        </div>
    </div>
</div>


<div id="divHiddenField" style="display: none">
    <input id="SelectPackageModel_" type="hidden" />
    <input id="hdSelectVas" value="1" type="hidden" />
    <input id="hdSelectPlayBox" value="0" type="hidden" />
    <input id="hdSelectSPONTOP" value="0" type="hidden" />
    <input id="hdSelectSubRadioSP" value="" type="hidden" />
    <input id="hdPackageCode" value="" type="hidden" />
    <input id="hdShowSPOntopPopup" value="" type="hidden" />


    @Html.HiddenFor(model => model.CoveragePanelModel.Serenade_Flag, new { @id = "CoveragePanelModel_Serenade_Flag" })
    @Html.HiddenFor(model => model.DisplayPackagePanelModel.WIFIAccessPoint)
    @Html.HiddenFor(model => model.SummaryPanelModel.PackageModel.LABEL_SUMM_ROW1)
    @Html.HiddenFor(model => model.SummaryPanelModel.PackageModel.LABEL_PACKAGE_ONTOP)

    @Html.HiddenFor(model => model.DisplayPackagePanelModel.Prorate)
    @Html.HiddenFor(model => model.DisplayPackagePanelModel.TotalProrate)

    @Html.HiddenFor(model => model.SummaryPanelModel.PackageModel.PACKAGE_TYPE, new { @id = "SummaryPanelModel_PackageModel_PACKAGE_TYPE" })

    @Html.HiddenFor(model => model.DisplayPackagePanelModel.L_SPECIAL_BUNDLING_DISCOUNT, new { @id = "DisplayPackagePanelModel_L_SPECIAL_BUNDLING_DISCOUNT" })
    @Html.HiddenFor(model => model.DisplayPackagePanelModel.L_SPECIAL_DISCOUNT, new { @id = "DisplayPackagePanelModel_L_SPECIAL_DISCOUNT" })
    @Html.HiddenFor(model => model.CoveragePanelModel.BundlingMainFlag, new { @id = "CoveragePanelModel_BUNDLINGMAINFLAG" })
    @Html.HiddenFor(model => model.CustomerRegisterPanelModel.Project_name, new { @id = "CustomerRegisterPanelModel_Project_name" })
    @Html.HiddenFor(model => model.CoveragePanelModel.ChargeType, new { @id = "CoveragePanelModel_ChargeType" })

    <input id="hdGiftVoucher" type="hidden" />
    <input id="HdchkSerenade_Flag" type="hidden" />
    <input id="HdchkAC_Category" type="hidden" />
    <input id="HdPackage_Group_Name" type="hidden" />
    <input id="TechnologyDisplay" type="hidden" />
    <input id="ContendPBDisplay" type="hidden" />
    <input id="ContendPB2Display" type="hidden" />
    <input id="showEntrancefee" type="hidden" />
    <div id="DIV_WTTx_INFO"></div>


</div>

<table style="display: none" id="tempOntopSEP" border="1"></table>

<table style="display: none" id="tempOntop" border="1"></table>

<table style="display: none" id="tempV" border="1" bordercolor="red"></table>

<table style="display: none" id="tempPlayBox" border="1"></table>

<table style="display: none" id="tempAutoMap" border="1"></table>

<table style="display: none" id="tempOrderFee" border="1"></table>

<input type="hidden" id="IsDbSp" />



@foreach (var a in VAS_CODE_CONFIG)
{
    <input type="hidden" id="VAS_CODE_@a" value="@a" />
}

<div class="modal fade" id="modal002" tabindex="-1" role="dialog" aria-labelledby="basic-modal-content_label">
    <div class="modal-dialog" role="document" id="detail002" style="display: none">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: none;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="add-border-rounded-green">
                    <p class="clearfix"></p>
                    <div id="LastPopupMessage">
                        <h3 class="text-center"></h3>
                    </div>
                    <h3 class="text-center">
                        <img src='~/Content/images/Router.jpg' height="174" width="140" />
                    </h3>
                    <p class="clearfix"></p>
                    <p class="clearfix"></p>
                    <div class="col-md-12 text-center">
                        <p class="clearfix"></p>
                        <div class="col-xs-12">
                            <div class="panel panel-gray">
                                <div class="panel-heading">@L_ROUTER_DETAIL</div>
                                <div class="panel-body">
                                    <ul>
                                        <li>
                                            <label id="popDetail"></label>
                                        </li>
                                        <li>@L_ROUTER_DETAIL3</li>
                                        <li>@L_ROUTER_DETAIL4</li>
                                        <li>@L_ROUTER_DETAIL5</li>
                                        <li>@L_ROUTER_DETAIL6 <a href="@L_HTTP_SERVICE" target="_blank">@L_HTTP_SERVICE</a></li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-top: none;">
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="myModalFMC" tabindex="-1" role="dialog" aria-labelledby="basic-modal-content_label" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: none;">
            </div>
            <div class="modal-body">
                <div class="add-border-rounded-green">
                    <p class="clearfix"></p>
                    <p class="clearfix"></p>
                    <p class="clearfix"></p>
                    <h3 class="text-center">
                        @L_FMC_CHOOSE
                    </h3>
                    <p class="clearfix"></p>
                    <div class="col-md-8 col-md-offset-2">
                        <div id="rdiFMC" class="col-md-12 radio">
                            <label class='radio-inline' style='font-weight: normal !important;'><input type='radio' name='SelectOntopRadioFMC' value='Y'><label id="myModalFMCmsg"></label></label>
                            <p class='clearfix'></p>
                        </div>
                        @if (L_FMC_NEW_SIM != "")
                        {
                            <div class="col-md-12 radio">
                                <label class='radio-inline' style='font-weight: normal !important;'><input type='radio' name='SelectOntopRadioFMC' value='N'><label> @L_FMC_NEW_SIM </label></label>
                                <p class='clearfix'></p>
                            </div>
                        }
                    </div>
                    <p class="clearfix"></p>
                    <p class="clearfix"></p>
                    <div class="col-md-12 text-center">
                        <p class="clearfix"></p>
                        <button type="button" class="btn btn-success" onclick='selectFMC();'> @B_NEXT <i class="fa fa-arrow-circle-o-right "></i></button>
                    </div>
                    <p class="clearfix"></p>
                    <p class="clearfix"></p>
                </div>
            </div>
            <div class="modal-footer" style="border-top: none;">
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="modal-nopackage-wttx" tabindex="-1" role="dialog" aria-labelledby="modal-nopackage-wttx_label">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: none;">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="add-border-rounded-green">
                    <p class="clearfix"></p>
                    <h3 class="text-center">
                        <label style="font-size: 20px;" id="lbPackagePopup-WTTX"></label>
                    </h3>
                </div>
                <div class="col-md-12 text-center">
                    <p class="clearfix"></p>
                    <button type="button" class="btn btn-default" data-dismiss="modal">&nbsp; @L_CLOSE001 &nbsp; </button>
                </div>
            </div>
            <div class="modal-footer" style="border-top: none;">
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
    @Html.JsMinify(

    @<text>
    //20.2
    //var isWTTx = $("#WTTX_COVERAGE_RESULT").val() == "YES" ? true : false;
    //console.log("isWTTx SelectPackage :", isWTTx)

    var listPremiumByLocation = @Html.Raw(Json.Encode(LIST_PREMIUM_BY_LOCATON))
    var listPremiumByRegion = @Html.Raw(Json.Encode(LIST_PREMIUM_BY_REGION))
    var listPremiumByTechnology = @Html.Raw(Json.Encode(LIST_PREMIUM_BY_TECHNOLOGY))

    $(function () {
        //18.8
        $("#chkPremiumInstall").removeAttr('checked');
        $("#txtReferURNo").val("");
        $("#txtReferURNo").attr("readonly", true);
        $("#optionPremiumInstall").hide();

        if ("@Model.TopUp" == "5")
        {   //Officer
            $('#DEVELOPER').select2().select2('val', $('.select2 option:eq(0)').val());
        }

        ////20.2
        //$("#iconBarcode_WTTx").hide();
        //if ($("#WTTX_COVERAGE_RESULT").val() == "YES") {
        //    $("#divBarcodeWTTx").show()
        //    if (isOnMobileDevice()) {
        //        $("#iconBarcode_WTTx").show();
        //    }
        //}

    });

    $('#txtReferURNo').keyup(function () {
        CheckKeyUps("txtReferURNo", "@FBB_Con_REFER_UR_NO_INPUT");
    });

    $("#GiftVoucher").hide();
    $('#GiftVoucher').keyup(function () {
        CheckKeyUp("GiftVoucher", "@Input_Voucher_PIN");
    });
    var noRouter = @Html.Raw(Json.Encode(PACKAGE_GROUP_NO_ROUTER));
    //console.log("noRouter: ", noRouter);
    var isNoRouter = false;

    var ChkConRouter = $('#ChkConRouter');

    ChkConRouter.change(function () {
        if (ChkConRouter.prop('checked')) {
            $("#SPontopbotton").show();
            $("#SPontopbottonHide").hide();
        }
        else {
            $("#SPontopbotton").hide();
            $("#SPontopbottonHide").show();
        }
    });

    $('#GiftVoucher').focusout(function (event) {
        if ($("#GiftVoucher").val() != "") {
            ValidateGiftVoucherPIN();
        }
        else {
            $("#checkGiftVoucher").val("");
            $("#hdGiftVoucher").val("");
            $("#GiftVoucher").hide();
            $("#checkGiftVoucher").hide();
            $("#hdShowSPOntopPopup").val("");
            document.getElementById("GiftVoucher").style.borderColor = '';
            onBinding();
        }
    });

    function ValidateGiftVoucherPIN() {
        $.ajax({
            url: '/SelectPackage/ValidateGiftVoucherPIN',
            data: { PINCode: $("#GiftVoucher").val() },
            dataType: "json",
            async: false,
            type: 'POST',
            success: function (data) {
                if (data) {
                    CheckDateGiftVoucherPIN();
                }
                else {
                    $("#checkGiftVoucher").show();
                    $("#checkGiftVoucher").text("@L_MSG_PROMO_INVALID");
                    $("#hdShowSPOntopPopup").val("");
                    document.getElementById("checkGiftVoucher").style.color = 'red';
                    document.getElementById("GiftVoucher").style.borderColor = 'red';
                    $("#hdGiftVoucher").val("");
                    onBinding();
                }
            }
        });
    }

    function CheckDateGiftVoucherPIN() {

        $.ajax({
            url: '/SelectPackage/CheckDateGiftVoucherPIN',
            data: { VoucherPIN: $("#GiftVoucher").val() },
            dataType: "json",
            async: false,
            type: 'POST',
            success: function (data) {

                if (data != "") {

                    CheckStatusGiftVoucherPIN();
                }
                else {

                    $("#checkGiftVoucher").show();
                    $("#checkGiftVoucher").text("@L_MSG_PROMO_INVALID");
                    $("#hdShowSPOntopPopup").val("");
                    document.getElementById("checkGiftVoucher").style.color = 'red';
                    document.getElementById("GiftVoucher").style.borderColor = 'red';
                    $("#hdGiftVoucher").val("");
                    onBinding();
                }
            }
        });
    }


    function onBinding(e) {
        var i = $("input[name=SelectPackage]:checked").val();
        var mc = $("#MAPPING_CODE" + i).val();
        var packageGroup = $("#PACKAGE_GROUP" + i).val();
        var owner = $("#OWNER_PRODUCT" + i).val();
        var productCode = $("#PACKAGE_CODE" + i).val();
        var technology = $("#TECHNOLOGY" + i).val();
        var productSubType = $("#PRODUCT_SUBTYPE_" + i).val();
        var packagetype = $("#PACKAGE_TYPE" + i).val();
        var PRODUCT_SUBTYPE3 = $("#PRODUCT_SUBTYPE3_" + i).val();
        var AUTO_MAPPING = $("#AUTO_MAPPING" + i).val();
        var DISPLAY_FLAG = $("#DISPLAY_FLAG" + i).val();
        $("#HdPackage_Group_Name").val(packageGroup);

        var packageGroupNotShowOptionInstall = GetConfigShowOptionInstall();
        if ($.inArray(packageGroup, packageGroupNotShowOptionInstall) != -1) {
            $("#optionInstallationBody").hide();
        }
        else {
            var SFF_PROMOTION_CODE = $("#SFF_PROMOTION_CODE" + i).val();
            GetConfigDetailFreeInstall(SFF_PROMOTION_CODE);
            $("#optionInstallationBody").show();
        }

        if (PRODUCT_SUBTYPE3 == "BUNDLE") {
            $("#GiftVoucher").val("");
            $("#checkGiftVoucher").text("");
            $("#hdGiftVoucher").val("");
            $("#GiftVoucher").hide();
            $("#checkGiftVoucher").hide();
        }
        else {
            $.ajax({
                url: '/SelectPackage/GetpackageGroup',
                data: { Package: packageGroup },
                dataType: "json",
                //async: false,
                type: 'POST',
                success: function (data) {

                    if (data != null || data != undefined) {
                        var onCus_type = sessionStorage.getItem("type");

                        $("#GiftVoucher").show();

                        document.getElementById("GiftVoucher").style.borderColor = '';
                    }
                    else {

                        $("#GiftVoucher").val("");
                        $("#checkGiftVoucher").text("");
                        $("#hdShowSPOntopPopup").val("");
                        $("#hdGiftVoucher").val("");
                        $("#GiftVoucher").hide();
                        $("#checkGiftVoucher").hide();
                    }
                }
            });
        }
        isNoRouter = false;
        $.each(noRouter, function (i, j) {
            if (j.DisplayValue == packageGroup) {
                isNoRouter = true;
            }
        });

        if (isNoRouter) {
            //ChkConRouter.prop('checked', false);
            ChkConRouter.prop('checked', true);
            $("#SPontopbotton").hide();
            $("#SPontopbottonHide").show();
            $("#discount").hide();
            $("#router").show();
            $("#disDetail").hide();
            $('#ChkConRouterDiv').show();

            if ($("#trInstallPlayBoxAutoMap").is(":visible") || $("#trInstallFixedLineAutoMap").is(":visible")) {
                $("#sideTabRouterInstallationFee").hide();
            }
            else
                $("#sideTabInstallation").hide();
        }
        else {
            ChkConRouter.prop('checked', true);
            $("#SPontopbottonHide").hide();
            $("#SPontopbotton").show();
            $('#ChkConRouterDiv').hide();
            $("#discount").show();
            $("#router").hide();
            $("#disDetail").show();

            $("#sideTabInstallation").show();
            $("#sideTabRouterInstallationFee").show();

        }

        //18.1 FTTB Sell Router (ซื้อ และ ใช้ของตนเอง)
        //if ($("#ActiveSellRouterFlag").val() == "Y" && $('#TopUp').val() == "5" && ($('#CustomerRegisterPanelModel_RouterFlag').val() == "S" || $('#CustomerRegisterPanelModel_RouterFlag').val() == "M")) {
        //    $("#sideTabInstallation").hide();
        //}

        $("#SummaryPanelModel_PackageModel_PACKAGE_TYPE").val($("#PACKAGE_TYPE" + i).val())
        if (productSubType != undefined && productSubType != "undefined") {
            $("#HdFunctionSubProduct").val(productSubType);
            $('#CoveragePanelModel_PRODUCT_SUBTYPE').val(productSubType);
        }
        var objEntranceFee = [];
        var key = "";
        var preInit = 0;
        var init = 0;
        var showEntranceFee = false;
        $("#showEntrancefee").val(false);
        if (owner == "SWiFi") {
            var yn = "Y";
            key = mc + yn;

            preInit = parseFloat($("#PRE_INITIATION_CHARGE" + key).val());
            init = parseFloat($("#INITIATION_CHARGE" + key).val());
        }
        else {
            key = mc;
            var findOntop = $("[name=SelectOntop" + mc + owner + "]");

            $.each(findOntop, function (i, e) {
                if ($("#PRODUCT_SUBTYPE_" + key + e.value).val() !== "PBOX" && $("#PACKAGE_TYPE" + key + e.value).val() != "Order Fee") {
                    if (parseFloat($("#PRE_INITIATION_CHARGE" + key + e.value).val()) > 0) {
                        preInit += parseFloat($("#PRE_INITIATION_CHARGE" + key + e.value).val());
                        init += parseFloat($("#INITIATION_CHARGE" + key + e.value).val());
                    }
                }
                else if ($("#PACKAGE_TYPE" + key + e.value).val() == "Order Fee") {
                    var itemSffPromotionCode = $("#SFF_PROMOTION_CODE" + key + e.value).val();
                    var model = @Html.Raw(Json.Encode(LOV_ENTRANCE_FEES))
                    $.each(model, function (j, k) {

                        if (k.DisplayValueJing == itemSffPromotionCode) {
                            var preInitEntranceFee = 0;
                            var initEntranceFee = 0;
                            showEntranceFee = true;
                            $("#showEntrancefee").val(true);

                            //TODO: 18.1 FTTB Sell Router
                            //if ($("#ActiveSellRouterFlag").val() == "Y" && $('#TopUp').val() == "5" && $('#CustomerRegisterPanelModel_RouterFlag').val() == "S") {
                            //    if (k.DisplayValueJing == $("#hdRouterCode").val()) {
                            //        $("#INITIATION_CHARGE" + key + e.value).val($("#hdRouterPrice").val());
                            //    }
                            //}

                            tmpEntranceFee = {
                                'displayValue': k.DisplayValue,
                                'preInitEntranceFee': $("#PRE_INITIATION_CHARGE" + key + e.value).val(),
                                'initEntranceFee': $("#INITIATION_CHARGE" + key + e.value).val(),
                                'oderby': k.OrderByPDF,
                                'EntranceType': k.LovValue3
                            };

                            objEntranceFee.push(tmpEntranceFee);
                        }
                    });
                }
            });
        }
        var summVal1 = preInit;
        var summVal2 = preInit - init;

        var summLb3 = $("#PACKAGE_NAME" + i).val();
        var summVal3 = $("#RECURRING_CHARGE" + i).val();
        var tempSummTotal2 = parseFloat(summVal3);
        var technologyDisplay = $("#TECHNOLOGY" + i).val();


        if (showEntranceFee) {
            sortJson(objEntranceFee, 'oderby', 'int', true);

            var strEntrancefee = "";
            var strEntrancefeeVas = "";
            var allEntrancefee = 0;
            $.each(objEntranceFee, function (j, k) {
                var preInitEntranceFee = 0;
                var initEntranceFee = 0;
                preInitEntranceFee = parseFloat(k.preInitEntranceFee);
                initEntranceFee = parseFloat(k.initEntranceFee);
                var summEntranceFee = toNumber(Math.abs(preInitEntranceFee - initEntranceFee));
                strEntrancefee = strEntrancefee + "<div class='col-xs-8'><span id='lblEntranceFee" + j + "'>" + k.displayValue + "</span></div>";
                strEntrancefee = strEntrancefee + "<div class='col-xs-4 text-right'><span class='lblEntranceFee' name='" + k.EntranceType + "' id='entranceFeeDetail" + j + "'>" + summEntranceFee + "</span> @L_BAHT</div>";
                strEntrancefee = strEntrancefee + "<p class='clearfix'></p>";

                strEntrancefeeVas = strEntrancefeeVas + "<div class='col-xs-8'><span class='lblEntranceFeeVas' id='lblEntranceFeeVas" + j + "'>" + k.displayValue + "</span></div>";
                strEntrancefeeVas = strEntrancefeeVas + "<div class='col-xs-4 text-right'><span id='entranceFeeDetailVas" + j + "'>" + summEntranceFee + "</span> @L_BAHT</div>";
                strEntrancefeeVas = strEntrancefeeVas + "<p class='clearfix'></p>";

                allEntrancefee = parseFloat(allEntrancefee) + (Math.abs(preInitEntranceFee - initEntranceFee));
            });

            $("#pageDotEntranceFee").show();
            $("#divEntranceFee").html(strEntrancefee);
            $("#divEntranceFeeVas").html(strEntrancefeeVas);
            $("#disDetail").html(getDisDetail());
            $("#Entrancefee").val(allEntrancefee);


        }
        else {
            $("#pageDotEntranceFee").hide();
            $("#disDetail").html(getDisDetail());
        }


        $("#trFullHDAutoMap").hide();
        $("#trFullHD2AutoMap").hide();
        $("#trSpeedBoostAutoMap").hide();
        $("#trBundlingAutoMap").hide();
        $("#trDiscountAutoMap").hide();
        $("#trInstallMonthVasAutoMap").hide();
        $("#trInstallPlayBoxAutoMap").hide();
        $("#trDiscountPlayBoxAutoMap").hide();
        $("#trInstallFixedLineAutoMap").hide();
        $("#trDiscountFixedLineAutoMap").hide();

        $("#trInstallPlayBox").hide();
        $("#trDiscountPlayBox").hide();
        $("#trFullHD").hide();
        $("#trFullHD2").hide();
        $("#trSpeedBoost").hide();
        $("#trInstallMonthVas").hide();
        $("#trInstallFixedLine").hide();
        $("#trDiscountFixedLine").hide();
        $("#trBundling").hide();
        $("#trDiscount").hide();

        var recurringFullhd = 0;
        var recurringVoip = 0;
        $("#IsAutoMapping").val("N");
        $("#haveInstallPlayBoxAutoMapping").val("N");
        $("#haveDiscountPlayBoxAutoMapping").val("N");
        $("#haveInstallMonthVasAutoMapping").val("N");
        $("#haveInstallFixedLineAutoMapping").val("N");
        $("#haveDiscountFixedLineAutoMapping").val("N");
        $("#haveBundlingAutoMapping").val("N");
        $("#haveDiscountAutoMapping").val("N");
        $("#CoveragePanelModel_BUNDLINGSPECIALFLAG").val("");

        $('#lblFullHD').text("");
        $('#lblSumFullHD').text("");

        $("#haveFullHDAutoMapping").val("N");
        $("#fullHDAutoMappingMsg").val("");
        $('#lblFullHDAutoMap').text("");
        $('#lblSumFullHDAutoMap').text("");

        $('#lblFullHD2').text("");
        $('#lblSumFullHD2').text("");

        $("#haveFullHD2AutoMapping").val("N");
        $("#fullHD2AutoMappingMsg").val("");
        $('#lblFullHD2AutoMap').text("");
        $('#lblSumFullHD2AutoMap').text("");

        $('#lblSpeedBoost').text("");
        $('#lblSumSpeedBoost').text("");

        $("#haveSpeedBoostAutoMapping").val("N");
        $("#SpeedBoostAutoMappingMsg").val("");
        $('#lblSpeedBoostAutoMap').text("");
        $('#lblSumSpeedBoostAutoMap').text("");

        if (AUTO_MAPPING == "A") {
            $("#IsAutoMapping").val("Y");
            var bundlingDiscount = GetPackageCodeAutoMapping();
            key = mc;
            var have
            var findAutoMapping = $("[name=SelectAutoMap" + mc + owner + "]");
            $.each(findAutoMapping, function (i, e) {
                var PACKAGE_TYPE = $("#PACKAGE_TYPE" + key + e.value).val();
                var PRODUCT_SUBTYPE = $("#PRODUCT_SUBTYPE_" + key + e.value).val();
                var PRODUCT_SUBTYPE3 = $("#PRODUCT_SUBTYPE3_" + key + e.value).val();
                var SHOW_AUTOMAP = $("#DISPLAY_FLAG" + key + e.value).val();
                if (SHOW_AUTOMAP == 'Y') {
                    if (PACKAGE_TYPE == "Ontop" && PRODUCT_SUBTYPE == "PBOX" && PRODUCT_SUBTYPE3 == "PBOX") {
                        // Ontop PlayBox
                        var PreInitiationCharge = parseFloat($("#PRE_INITIATION_CHARGE" + key + e.value).val());
                        var InitiationCharge = parseFloat($("#INITIATION_CHARGE" + key + e.value).val());
                        var Discount = PreInitiationCharge - InitiationCharge;
                        init = init + PreInitiationCharge;
                        $('#lblInstallPricePlayBoxAutoMap').text(toNumber(PreInitiationCharge));
                        $("#trInstallPlayBoxAutoMap").show();

                        $('#lblInstallPricePlayBox').text(toNumber(PreInitiationCharge));
                        $("#trInstallPlayBox").show();
                        $("#haveInstallPlayBoxAutoMapping").val("Y");
                        if (Discount > 0) {
                            init = init - Discount;
                            $('#lblDiscountPricePlayBoxAutoMap').text(toNumber(Discount));
                            $("#trDiscountPlayBoxAutoMap").show();

                            $('#lblDiscountPricePlayBox').text(toNumber(Discount));
                            $("#trDiscountPlayBox").show();

                            $("#haveDiscountPlayBoxAutoMapping").val("Y");
                        }
                    }
                    if (PACKAGE_TYPE == "Ontop" && PRODUCT_SUBTYPE == "PBOX" && PRODUCT_SUBTYPE3 == "FREETV") {
                        $("#haveFreeTVAutoMapping").val("Y");
                    }
                    if (PACKAGE_TYPE == "Ontop" && PRODUCT_SUBTYPE == "PBOXT" && (PRODUCT_SUBTYPE3 == "TOPUPGOLD" || PRODUCT_SUBTYPE3 == "TOPUPPLATINUM" || PRODUCT_SUBTYPE3 == "TOPUPPLATINUMSTAFF" || PRODUCT_SUBTYPE3 == "TOPUPGOLDTRIAL" || PRODUCT_SUBTYPE3 == "TOPUPPLATINUMTRIAL")) {
                        // Ontop PlayBox FullHD

                        if ("@language" == "1") {
                            $('#lblFullHDAutoMap').text($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                            $('#lblFullHD').text($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                            $("#fullHDAutoMappingMsg").val($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                        }
                        else {
                            $('#lblFullHDAutoMap').text($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                            $('#lblFullHD').text($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                            $("#fullHDAutoMappingMsg").val($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                        }

                        $('#ContendPBDisplay').val($("#TECHNOLOGY" + key + e.value).val());
                        recurringFullhd = parseFloat($("#RECURRING_CHARGE" + key + e.value).val());
                        $('#lblSumFullHDAutoMap').text($("#RECURRING_CHARGE" + key + e.value).val());
                        $("#trFullHDAutoMap").show();

                        $('#lblSumFullHD').text($("#RECURRING_CHARGE" + key + e.value).val());
                        $("#trFullHD").show();

                        $("#haveFullHDAutoMapping").val("Y");
                    }
                    if (PACKAGE_TYPE == "Ontop" && PRODUCT_SUBTYPE == "PBOXT" && (PRODUCT_SUBTYPE3 == "TOPUPPLATINUMTRIAL3" || PRODUCT_SUBTYPE3 == "TOPUPPLATINUMTRIAL12")) {
                        // Ontop PlayBox TOPUPPLATINUMTRIAL

                        if ("@language" == "1") {
                            $('#lblFullHD2AutoMap').text($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                            $('#lblFullHD2').text($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                            $("#fullHD2AutoMappingMsg").val($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                        }
                        else {
                            $('#lblFullHD2AutoMap').text($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                            $('#lblFullHD2').text($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                            $("#fullHD2AutoMappingMsg").val($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                        }

                        $('#ContendPB2Display').val($("#TECHNOLOGY" + key + e.value).val());
                        recurringFullhd = parseFloat($("#RECURRING_CHARGE" + key + e.value).val());
                        $('#lblSumFullHD2AutoMap').text($("#RECURRING_CHARGE" + key + e.value).val());
                        $("#trFullHD2AutoMap").show();

                        $('#lblSumFullHD2').text($("#RECURRING_CHARGE" + key + e.value).val());
                        $("#trFullHD2").show();

                        $("#haveFullHD2AutoMapping").val("Y");
                    }
                    if (PACKAGE_TYPE == "Ontop" && (PRODUCT_SUBTYPE == "FTTxT" || PRODUCT_SUBTYPE == "WireBBT") && (PRODUCT_SUBTYPE3 == "TOPUPSPEED100" || PRODUCT_SUBTYPE3 == "TOPUPSPEED200" || PRODUCT_SUBTYPE3 == "TOPUPSPEED300" || PRODUCT_SUBTYPE3 == "TOPUPSPEED1000")) {
                        // Ontop Fibre BootSpeed

                        if ("@language" == "1") {
                            $('#lblSpeedBoostAutoMap').text($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                            $('#lblSpeedBoost').text($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                            $("#SpeedBoostAutoMappingMsg").val($("#SFF_PROMOTION_BILL_THA" + key + e.value).val());
                        }
                        else {
                            $('#lblSpeedBoostAutoMap').text($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                            $('#lblSpeedBoost').text($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                            $("#SpeedBoostAutoMappingMsg").val($("#SFF_PROMOTION_BILL_ENG" + key + e.value).val());
                        }

                        $('#ContendPBDisplay').val($("#TECHNOLOGY" + key + e.value).val());
                        recurringFullhd = parseFloat($("#RECURRING_CHARGE" + key + e.value).val());
                        $('#lblSumSpeedBoostAutoMap').text($("#RECURRING_CHARGE" + key + e.value).val());
                        $("#trSpeedBoostAutoMap").show();

                        $('#lblSumSpeedBoost').text($("#RECURRING_CHARGE" + key + e.value).val());
                        $("#trSpeedBoost").show();

                        $("#haveSpeedBoostAutoMapping").val("Y");
                    }
                    if (PRODUCT_SUBTYPE == "VOIP") {
                        // VOIP
                        if (PACKAGE_TYPE == "Main") {
                            // Show รายเดือน
                            recurringVoip = parseFloat($("#RECURRING_CHARGE" + key + e.value).val());
                            $('#lblInstallMonthPriceVasAutoMap').text($("#RECURRING_CHARGE" + key + e.value).val());
                            $("#trInstallMonthVasAutoMap").show();

                            $('#lblInstallMonthPriceVas').text($("#RECURRING_CHARGE" + key + e.value).val());
                            $("#trInstallMonthVas").show();

                            $("#haveInstallMonthVasAutoMapping").val("Y");
                        }

                        if (PACKAGE_TYPE == "Ontop") {
                            // Show ค่าติดตั้ง
                            var PreInitiationCharge = parseFloat($("#PRE_INITIATION_CHARGE" + key + e.value).val());
                            var InitiationCharge = parseFloat($("#INITIATION_CHARGE" + key + e.value).val());
                            var Discount = PreInitiationCharge - InitiationCharge;
                            init = init + PreInitiationCharge;
                            $('#lblInstallPriceFixedLineAutoMap').text(toNumber(PreInitiationCharge));
                            $("#trInstallFixedLineAutoMap").show();

                            $('#lblInstallPriceFixedLine').text(toNumber(PreInitiationCharge));
                            $("#trInstallFixedLine").show();

                            $("#haveInstallFixedLineAutoMapping").val("Y");
                            if (Discount > 0) {
                                init = init - Discount;
                                $('#lblDiscountPriceFixedLineAutoMap').text(toNumber(Discount));
                                $("#trDiscountFixedLineAutoMap").show();

                                $('#lblDiscountPriceFixedLine').text(toNumber(Discount));
                                $("#trDiscountFixedLine").show();

                                $("#haveDiscountFixedLineAutoMapping").val("Y");
                            }
                        }
                    }
                }

                var discount_type = $('#DISCOUNT_TYPE' + key + e.value).val();
                var discount_value = $('#DISCOUNT_VALUE' + key + e.value).val();
                var dis = 0;
                if (discount_type == "PCT") {

                    dis = (tempSummTotal2 * parseFloat(discount_value)) / 100;
                    tempSummTotal2 = tempSummTotal2 - dis;
                }
                else if (discount_type == "MNY") {
                    dis = parseFloat(discount_value);
                    tempSummTotal2 = tempSummTotal2 - dis;
                }
                else if (discount_type == "PAID") {
                    dis = tempSummTotal2 - parseFloat(discount_value);
                    tempSummTotal2 = parseFloat(discount_value);
                }

                var Code = bundlingDiscount.indexOf($("#SFF_PROMOTION_CODE" + key + e.value).val());
                if (Code >= 0) {
                    // Bundling Discount
                    $("#DisplayPackagePanelModel_L_SPECIAL_BUNDLING_DISCOUNT").val(dis);
                    $('#summBundingVasAutoMap').text(accounting.formatNumber(dis, 2));
                    $("#trBundlingAutoMap").show();

                    $('#summBundingVas').text(accounting.formatNumber(dis, 2));
                    $("#trBundling").show();

                    $("#haveBundlingAutoMapping").val("Y");
                    $("#CoveragePanelModel_BUNDLINGSPECIALFLAG").val("Y");
                }
                else {
                    if (PACKAGE_TYPE == "Ontop Special") {
                        // Ontop Special
                        $("#DisplayPackagePanelModel_L_SPECIAL_DISCOUNT").val(dis);
                        $('#summDiscountVasAutoMap').text(accounting.formatNumber(dis, 2));
                        $("#trDiscountAutoMap").show();

                        $('#summDiscountVas').text(accounting.formatNumber(dis, 2));
                        $("#trDiscount").show();

                        $("#haveDiscountAutoMapping").val("Y");
                        $("#CoveragePanelModel_BUNDLINGSPECIALFLAG").val("N");
                    }
                }
            });
        }
        tempSummTotal2 += parseFloat(recurringFullhd) + parseFloat(recurringVoip);

        var summTotal1 = init;
        var summTotal2 = tempSummTotal2;

        var cdt = "";
        if ($("#HdFunctionSubProduct").val() == "WireBB") {
            cdt = "@L_SUMM_DETAIL_WireBB";
        }
        else if ($("#HdFunctionSubProduct").val() == "SWiFi") {
            cdt = "@L_SUMM_DETAIL_SWiFi";
        }
        else if ($("#HdFunctionSubProduct").val() == "FTTx" || $("#HdFunctionSubProduct").val() == "SYMPHONY") {
            cdt = "@L_SUMM_DETAIL_FTTx";
        }

        $("#summDetail").text(cdt);

        if ((summVal1 - summVal2) == 0) {
            var a = "<ul><li>" + "@L_DISC_DETAIL_FREE";
            a = a.replace("{%1}", accounting.formatNumber(summVal1,2));
            a = a.replace("{%2}", accounting.formatNumber(summVal2,2));
            a = a.replace("{%3}", "@L_SUMM_DETAIL6");
            if ($("#HdFunctionSubProduct").val() != "FTTx" && $("#HdFunctionSubProduct").val() != "SYMPHONY") {
                a += "</li>" + "<li>" + cdt + "</li></ul>";
            }
            $("#disCondition1").html(a);
        }
        else {
            if (packageGroup == "Professional Package" || packageGroup == "Incredible Package") {
                if ($("input[name=WiFiCondition]:checked").val() == "Y") {
                    var a = "<ul><li>" + "@L_DISC_DETAIL_FREE";
                    a = a.replace("{%1}", accounting.formatNumber(summVal1 - parseFloat("@SWIFI_ROUTER_VALUE",2)));
                    a = a.replace("{%2}", accounting.formatNumber(summVal2,2));
                    a = a.replace("{%3}", "@L_SUMM_DETAIL6");
                    //a += "<br>" + cdt;
                    if ($("#HdFunctionSubProduct").val() != "FTTx" && $("#HdFunctionSubProduct").val() != "SYMPHONY") {
                        a += "</li>" + "<li>" + cdt + "</li></ul>";
                    }
                    $("#disCondition1").html(a);
                }
            }
            else {
                var a = "@L_DISC_DETAIL_SOME";
                a = a.replace("{%1}", accounting.formatNumber(summTotal1,2));
                a = a.replace("{%2}", accounting.formatNumber(summVal1,2));
                a = a.replace("{%3}", accounting.formatNumber(summVal2,2));
                a = a.replace("{%4}", accounting.formatNumber(summVal2,2));
                var b = "<ul><li>" + a + "</li>";
                if ($("#HdFunctionSubProduct").val() != "FTTx" && $("#HdFunctionSubProduct").val() != "SYMPHONY") {
                    b += "<li>" + cdt + "</li></ul>";
                }
                $("#disCondition1").html(b);
            }
        }

        //$("#disConditionPmt").html();
        var pmt = "@L_PROMOTION1".split(',');
        var cc = false;

        $.each(pmt, function (i, e) {
            if ((parseFloat(e) == parseFloat(productCode)) && !cc) {
                $("#disConditionPmt").html("<br>@Html.Raw(L_PROMOTION)");
                cc = true;

            }
            else
                $("#disConditionPmt").html("");
        });

        // begin prorate calculting.
        var sumProrate = 0;
        var sumTotalProrate = 0;
        var thisDate = new Date();
        var thisYear = thisDate.getFullYear();
        var thisMonth = thisDate.getMonth();
        //var daysInMonth = getDaysInMonth(thisMonth, thisYear);
        var daysInMonth = thisDate.getDaysInMonth();
        sumProrate = (summTotal2 / daysInMonth) * 1;
        sumTotalProrate = summTotal2 + sumProrate;
        var selectedTechnology = $("#SummaryPanelModel_PackageModel_TECHNOLOGY").val();

        //แสดงผลคำนวณฝั่งขวา
        if (cc) {
            summTotal1 -= parseFloat(@L_PROMOTION2);
            summVal2 += parseFloat(@L_PROMOTION2);
        }

        var preIniPrice = 0;
        var iniDiscount = 0;

        if (packagetype == "TRIPLE") {
            var tpPreIni = parseFloat($("#TP_PRE_INITIATION_PB" + i).val());
            var tpIni = parseFloat($("#TP_INITIATION_PB" + i).val());

            preIniPrice = tpPreIni;
            iniDiscount = tpPreIni - tpIni;

            $("#trTriplePlaboxPreIni").show();
            $("#trTriplePlayBoxDisCountIni").show();
        }
        else {
            $("#trTriplePlaboxPreIni").hide();
            $("#trTriplePlayBoxDisCountIni").hide();
        }

        summTotal1 = summTotal1 + preIniPrice - iniDiscount;
        sumTotalProrate += summTotal1;

        $("#summVal1").text(accounting.formatNumber(summVal1,2));
        $("#summVal2").text(accounting.formatNumber(summVal2,2));
        $("#lblPreIniPrice").text(accounting.formatNumber(preIniPrice,2));
        $("#lblIniDiscount").text(accounting.formatNumber(iniDiscount,2));
        $("#summTotal1").text(accounting.formatNumber(summTotal1,2));

        $("#summLb3").val(summLb3);
        $("#summLb3show").html(summLb3.replace(/\|/g, '<br>'));
        $("#TechnologyDisplay").val(technologyDisplay);

        $("#summVal3").text(accounting.formatNumber(summVal3, 2));
        $("#summTotal2").text(accounting.formatNumber(summTotal2, 2));

        $("#sumProrate").text(accounting.formatNumber(sumProrate, 2));
        $("#sumTotalProrate").text(accounting.formatNumber(sumTotalProrate, 2));



        if ($("#GiftVoucher").val() != "" && $("#checkGiftVoucher").text() == "@L_MSG_PROMO_CORRECT") {

            var num = $("#summVal3").text();
            var number = num.replace(',', '');
            var result = (50 / 100) * parseFloat(number);
            $("#summVal3").text(accounting.formatNumber(result, 2));
            $("#summTotal2").text(accounting.formatNumber(result, 2));
            $("#hdGiftVoucher").val($("#summTotal2").text());

            var summTotal2 = 0;
            var sumProrate = 0;
            var sumTotalProrate = 0;

            summTotal2 = ($("#summTotal2").text()).replace(',', '');
            var summTotal1 = ($("#summTotal1").text()).replace(',', '');

            var thisDate = new Date();
            var thisYear = thisDate.getFullYear();
            var thisMonth = thisDate.getMonth();

            var daysInMonth = thisDate.getDaysInMonth();
            sumProrate = (summTotal2 / daysInMonth) * 1;
            $('#sumProrate').text(accounting.formatNumber(sumProrate, 2));

            sumTotalProrate = parseFloat(summTotal2) + parseFloat(sumProrate);
            $('#sumTotalProrate').text(accounting.formatNumber(sumTotalProrate, 2));
        }


        //สรุป wording กรอบเทาด้านล่าง
        if ($("#HdFunctionSubProduct").val() == "WireBB") {
            $("#summLb1").text("@L_SUMM_DETAIL6");

            $("#disCondition21").html("<br>" + "@L_WIFI_ROUTER_ONU");
            $("#disCondition22").html("@L_WIFI_DETAIL1");
        }
        else if ($("#HdFunctionSubProduct").val() == "SWiFi" || $("#HdFunctionSubProduct").val() == "FTTx" || $("#HdFunctionSubProduct").val() == "SYMPHONY") {

            if ($("#HdFunctionSubProduct").val() == "FTTx" || $("#HdFunctionSubProduct").val() == "SYMPHONY") {
                //$(".conditionCheck").hide();
                $("#summLb1").text("@L_SUMM_DETAIL6");

                $("#disCondition21").html("<br>@L_WIFI_ROUTER_ONU");
                $("#disCondition22").html("@L_WIFI_DETAIL1");

                $("input[name=WiFiCondition]").prop("checked", false);
            }
            else {
                //$(".conditionCheck").show();
                $("#summLb1").text("@L_SUMM_DETAIL6");

                if (($("input[name=WiFiCondition]:checked").val() == undefined || $("input[name=WiFiCondition]:checked").val() == "N") && productSubType != "SWiFi") {
                    $("#disCondition21").html("");
                    $("#disCondition22").html("");
                } else {
                    $("#disCondition21").html("@L_WIFI_ROUTER");
                    $("#disCondition22").html("@L_WIFI_DETAIL2<br><br>");
                    //$("#summLb1Router").html("@L_ROUTER");
                }

                var pri1 = "@Html.Raw(L_PRIVILAGE1)".replace("{%1}", toNumber(@SWIFI_ROUTER_VALUE));
                pri1 = pri1.replace("{%2}", toNumber(@SWIFI_ROUTER_PRE_VALUE));

                var pri2 = "@Html.Raw(L_PRIVILAGE2)".replace("{%1}", toNumber(@SWIFI_ROUTER_VALUE));
                pri2 = pri2.replace("{%2}", toNumber(@SWIFI_ROUTER_PRE_VALUE));

                var pri3 = "@Html.Raw(L_ROUTER_DETAIL2)".replace("{%1}", toNumber(@SWIFI_ROUTER_VALUE));
                pri3 = pri3.replace("{%2}", toNumber(@SWIFI_ROUTER_PRE_VALUE));

                $("#pri1").html(pri1);
                $("#pri2").html(pri2 + " <a href='#' class='basic' onclick='openMoreDetail()'>@L_MORE_DETAIL</a>");
                $("#popDetail").html(pri3);
            }


        }
        else {
            $("#summLb1").text("@L_SUMM_DETAIL6");
        }

        $("#DisplayPackagePanelModel_Prorate").val($("#sumProrate").text());
        $("#DisplayPackagePanelModel_TotalProrate").val($("#sumTotalProrate").text());

        $("#SummaryPanelModel_PackageModel_LABEL_SUMM_ROW1").val($("#summLb1").text() + $("#summLb1Router").text());

        $("#SummaryPanelModel_PackageModel_DISCOUNT_INITIATION_CHARGE").val(summVal2);

        if (productSubType == "SWiFi" || owner == "SWiFi")
            $("input[name=WiFiCondition][value=Y]").prop("checked", true);

        //$(".conditionCheck").hide();
    }

    function onBindingSelectOptionInstallation(e) {
        LockScreen(true, "");
        var i = $("input[name=SelectOptionInstallation]:checked").val();
        if (i == "0") {
            $("#dynamicBody002").empty();
            getPackage(0);
            onBinding();
            $("#InstallationDetail").hide();
        }
        else {
            $("#dynamicBody002").empty();
            getPackage(1);
            onBinding();
            $("#InstallationDetail").show();
        }
        LockScreen(false);
    }


    function CheckStatusGiftVoucherPIN() {

        $.ajax({
            url: '/SelectPackage/CheckDateGiftVoucherPIN',
            data: { VoucherPIN: $("#GiftVoucher").val() },
            dataType: "json",
            async: false,
            type: 'POST',
            success: function (data) {
                if (data == "New") {


                    if ($("#hdGiftVoucher").val() != $("#summVal3").text()) {

                        $("#checkGiftVoucher").show();
                        $("#checkGiftVoucher").text("@L_MSG_PROMO_CORRECT");
                        document.getElementById("checkGiftVoucher").style.color = 'green';
                        document.getElementById("GiftVoucher").style.borderColor = '';
                        $("#hdShowSPOntopPopup").val("ShowVoucher");
                        var num = $("#summVal3").text();

                        // begin prorate calculting.

                        var number = num.replace(',', '');
                        var result = (50 / 100) * Number(number);
                        $("#summVal3").text(toNumber(result));
                        $("#summTotal2").text(toNumber(result));
                        $("#hdGiftVoucher").val($("#summTotal2").text());

                        var summTotal2 = 0;
                        var sumProrate = 0;
                        var sumTotalProrate = 0;

                        summTotal2 = $("#summTotal2").text().replace(',', '');
                        var summTotal1 = $("#summTotal1").text().replace(',', '');

                        var thisDate = new Date();
                        var thisYear = thisDate.getFullYear();
                        var thisMonth = thisDate.getMonth();

                        var daysInMonth = thisDate.getDaysInMonth();
                        sumProrate = (summTotal2 / daysInMonth) * 1;
                        $('#sumProrate').text(accounting.formatNumber(sumProrate, 2));

                        sumTotalProrate = parseFloat(summTotal2) + parseFloat(sumProrate);
                        $('#sumTotalProrate').text(accounting.formatNumber(sumTotalProrate, 2));


                    }
                }
                else {
                    $("#checkGiftVoucher").show();
                    $("#checkGiftVoucher").text("@L_MSG_PROMO_ACTIVATED");
                    $("#hdShowSPOntopPopup").val("");
                    document.getElementById("checkGiftVoucher").style.color = 'red';
                    document.getElementById("GiftVoucher").style.borderColor = 'red';
                    $("#hdGiftVoucher").val("");
                    onBinding();
                }
            }
        });
    }

    function groupWording(g) {
        var word = "";

        $.ajax({
            type: "GET",
            url: "/SelectPackage/GetDescription",
            data:
            {
                Packgrop: g
            },
            dataType: "json",
            async: false,
            success: function (data) {
                if (data.length == 0 || data[0].DisplayValue == undefined) {
                    return "";
                }
                else {
                    word = data[0].DisplayValue;

                }
            }
        });

        if (word == "")
            return "";
        else
            return word;
    }
    function remarkGroupWording(g, b) {
        var word = "";

        $.ajax({
            type: "GET",
            url: "/SelectPackage/GetRemark",
            data:
            {
                Packgroup: g,
                BuildingName: b
            },
            dataType: "json",
            async: false,
            success: function (data) {
                if (data.length == 0 || data[0].DisplayValue == undefined) {
                    return "";
                }
                else {
                    word = data[0].DisplayValue;

                }
            }
        });
        if (word == "")
            return "";
        else
            return word;
    }

    function onCondition() {

        if ($("input[name=WiFiCondition]:checked").val() == "Y") {
            $("#disCondition21").html("<br>@L_WIFI_ROUTER");
            $("#disCondition22").html("@L_WIFI_DETAIL2<br><br>");
            $("#summLb1Router").html("@L_ROUTER");
        }
        else {
            $("#disCondition21").html("");
            $("#disCondition22").html("");
            $("#summLb1Router").html("");
        }
        onBinding();
    }

    function getPackage(installation) {
        try {
            GetCategory();

            var p_region = $("#P_Region").val();
            var p_province = $("#COVERAGE_L_PROVINCE").val();
            var p_district = $("#COVERAGE_L_AMPHUR").val();
            var p_sub_district = $("#COVERAGE_L_TUMBOL").val();
            var p_address_type = $("#P_addrtype").val();
            var p_building_name = $("#P_build_name").val();
            var p_building_no = $("#P_build_no").val();

            var p_location_code = "@Model.CustomerRegisterPanelModel.L_LOC_CODE";
            var p_asc_code = "@Model.CustomerRegisterPanelModel.L_ASC_CODE";
            var p_partner_type = "@Model.CustomerRegisterPanelModel.outType";
            var p_partner_subtype = "@Model.CustomerRegisterPanelModel.outSubType";

            if ("@FromFBBxEOS" == "Y") {
                p_partner_type = "";
                p_partner_subtype = "";
            }

            $("#HdchkSerenade_Flag").val($('#CoveragePanelModel_Serenade_Flag').val());
            var onCus_type = sessionStorage.getItem("type");
            var p_Serenade_Flag = "";

            if ("@ViewBag.Vas" == "3") {// ลูกค้า triple
                onCus_type = "AIS";
            }
            if (onCus_type == ""
                || onCus_type == null
                || onCus_type == "NEW") {
                p_Serenade_Flag = "";
            }
            else {
                p_Serenade_Flag = $("#HdchkSerenade_Flag").val();
            }

            if ($("#HdFunctionSubProduct").val() == "") $("#HdFunctionSubProduct").val($("#HdFunctionSubProducts").val());
            if ($("#CoveragePanelModel_SffServiceYear").val() == "") $("#CoveragePanelModel_SffServiceYear").val("0");

            var rentalFlagForSave = "";
            if (sessionStorage.getItem("rentalflag") != 'null' && sessionStorage.getItem("rentalflag") != null) {
                rentalFlagForSave = sessionStorage.getItem("rentalflag");
            }

            $("#CustomerRegisterPanelModel_RentalFlag").val(rentalFlagForSave);

            var asyncSafari = false;
            if (/Safari|iPhone|iPad|iPod/i.test(navigator.userAgent))
                asyncSafari = true;

            $.ajax({
                type: "GET",
                url: "/SelectPackage/GetListPackageService",
                data: {
                    "P_OWNER_PRODUCT" : $('#HdFunctionOwner').val(),
                    "P_PRODUCT_SUBTYPE" : "@Model.v_package_subtype",
                    "P_NETWORK_TYPE": "",
                    "P_SERVICE_DAY": "",
                    "line": "@Model.SummaryPanelModel.VAS_FLAG",
                    "P_PACKAGE_FOR": "PUBLIC",
                    "isPartner": $("#ZTEIsPartner").val(),
                    "partnerName": $("#ZTEPartnerName").val(),
                    "accessMode": $("#ZTEAccessModeSerializer").val(),
                    "interfaceId": $("#ZTEInterfaceLogID").val(),
                    "p_region": p_region,
                    "p_province": p_province,
                    "p_district": p_district,
                    "p_sub_district": p_sub_district,
                    "p_address_type": p_address_type,
                    "p_building_name": p_building_name,
                    "p_building_no": p_building_no,
                    "p_asc_code": p_asc_code,
                    "p_location_code": p_location_code,
                    "p_partner_type": p_partner_type,
                    "p_partner_subtype": p_partner_subtype,
                    "p_Serenade_Flag": p_Serenade_Flag,
                    "p_Customer_Type": $('#HdchkAC_Category').val(),
                    "p_Address_Id": $("#CoveragePanelModel_Address_AddressId").val(),
                    "p_InstallationType": installation,
                    "p_Plug_And_Play_Flag": $("#PlugAndPlayFlow").val(), //Add New Parameter for Plug and Play //Added by PatthamawadeeH. 28122016
                    "AisAirNumber": sessionStorage.getItem("AisAirNumber"),
                    "p_rental_flag": sessionStorage.getItem("rentalflag"),
                    "p_customer_subtype": $("#CustomerRegisterPanelModel_CustomerSubtype").val(),
                    "p_router_flag": $("#CustomerRegisterPanelModel_RouterFlag").val(),
                    "subNetworkType": $("#CoveragePanelModel_ChargeType").val(),
                    "accountCategory": $("#CustomerRegisterPanelModel_AccountCategory").val(),
                    "sffServiceYear": $("#CustomerRegisterPanelModel_SffServiceYear").val(),
                    "p_projectname": $('#CustomerRegisterPanelModel_Project_name').val(),
                    "p_mobile_segment": $("#CoveragePanelModel_MobileSegment").val(),
                    "p_staff_id": $("#L_STAFF_ID_FaceRecog").val(),
                    "P_NON_RES_FLAG": $("#Customer_NonResFlag").val()
                },
                dataType: "json",
                async: asyncSafari,
                success: function (data) {
                    LockScreen(false, "");

                    $("#page1").hide();
                    $("#page2").show();
                    $("#wrapSwitchLanguage").hide();

                    //Script Adobe Analytic
                    var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
                    digitalData.page = {
                        pageInfo: {
                            pageName: "newfibre:" + lang + ":selectPackage",
                            site: "newfibre",
                            language: lang
                        }
                    }
                    console.log("page load selectPackage : ", lang);


                    var temp = "";
                    var group = "";
                    var sl = "";
                    var sl2 = "";
                    var installation1 = "";
                    var installation2 = "";
                    if (installation == "0") {
                        installation1 = "checked=''";
                    }
                    else {
                        installation2 = "checked=''";
                    }
                    if (data.length == 0) {
                        $("#optionInstallationBody").empty();
                        $("#optionEntryFeeBody").empty();
                        $("#dynamicBody002").empty();
                        $("#btn002").hide();
                        $("#bullet002").hide();
                        $("#btnNextPage002").hide();
                    }
                    else {
                        $("#btn002").show();
                        $("#bullet002").show();
                        $("#btnNextPage002").show();
                        $("#HdFunctionSubProduct").val(data[0].PRODUCT_SUBTYPE);

                        if ("@ViewBag.Vas" == "3")
                            $("#HdAddTriple").val("Y");
                        var HtmlInatall = "";
                        var ShowInstall = data[0].TEMP_IA;
                        if (ShowInstall == "True") {
                            HtmlInatall += "<strong>@Html.Raw(SELECT_BY_PAY_INSTALLATION)</strong><p class='clearfix'></p>";
                            HtmlInatall += "<div class='panel panel-info'><div class='panel-heading' style='border-bottom: none; !important;'></div>";
                            HtmlInatall += "<div class='table-responsive'><table class='table table-hover'>";
                            HtmlInatall += "<tbody class='promotionDetail2'>";
                            HtmlInatall += "<tr class='promotionDetail-table' style='cursor: pointer;'>";
                            HtmlInatall += "<th><input id='SelectOption0' type='radio' value='0' onclick='' " + installation1 + " name='SelectOptionInstallation'></th>";
                            HtmlInatall += "<td id='divFreeInstall'>@Html.Raw(@SELECT_FREE_INSTALL_VALUE)</td>";
                            HtmlInatall += "</tr>";
                            HtmlInatall += "<tr class='promotionDetail-table' style='cursor: pointer;'>";
                            HtmlInatall += "<th><input id='SelectOption1' type='radio' value='1' onclick='' " + installation2 + " name='SelectOptionInstallation'></th>";
                            HtmlInatall += "<td>@Html.Raw(@SELECT_PAY_INSTALL_VALUE)<div id='InstallationDetail' style='color:red; display: none;'>* @DESCRIPTION_PAY_INSTALL</div></td>";
                            HtmlInatall += "</tr>";
                            HtmlInatall += "</tbody>";
                            HtmlInatall += "</table>";
                            HtmlInatall += "</div></div>";
                        }
                        $("#optionInstallationBody").html(HtmlInatall);
                        var g = data[0].S_GROUP;
                        if (g != undefined) {
                            var css = "";
                            var arr = new Array();
                            $.each(g, function (i, e) {

                                arr.push({ index: i, group: e.PACKAGE_GROUP, type: e.PACKAGE_TYPE });

                                if (e.PACKAGE_TYPE == "TRIPLE" && $("#HdAddTriple").val() != "Y") {

                                }
                                else {

                                    //var chkGroupWord = e.PACKAGE_GROUP + "|" + e.PRODUCT_SUBTYPE;
                                    var chkGroupWord = e.PACKAGE_GROUP;
                                    css = "line-height:12px;";

                                    var packageName = e.PACKAGE_GROUP.replace("-", " ");

                                    group += "<strong>" + packageName + "</strong><br>" +
                                             groupWording(chkGroupWord) +
                                             "<div class='panel panel-info'>";

                                    if (e.PACKAGE_TYPE == "TRIPLE") {
                                        if ($("#HdAddTriple").val() == "Y") {
                                            group += "<div class='panel-heading' style='border-bottom: none;!important;'></div>" +
                                                    "<div class='table-responsive'>" +
                                                    "<table class='table table-hover'><thead class='text-center promotionTitle' style='background: #e9ecf0;' ><tr>" +
                                                        "<th class='text-center'> &nbsp;</th>" +
                                                        "<th class='text-center'>@Html.Raw(L_TECHNOLOGY)</th>" +
                                                        "<th class='text-center'>@Html.Raw(L_COL_AIS_FIBRE)</th>" +
                                                        "<th class='text-center'> &nbsp;</th>" +
                                                        "<th class='text-center'>@Html.Raw(L_COL_AIS_FIXEDLINE)</th>" +
                                                        "<th class='text-center'> &nbsp;</th>" +
                                                        "<th class='text-center'>@Html.Raw(L_COL_AIS_PLAYBOX)</th>" +
                                                    "</tr></thead>";
                                        }
                                    }
                                    else {
                                        group += "<div class='panel-heading' style='border-bottom: none;!important;'></div>" +
                                                    "<div class='table-responsive'>" +
                                                    "<table class='table table-hover'><thead class='text-center promotionTitle' style='background: #e9ecf0;' ><tr>" +
                                                        "<th class='text-center'> &nbsp;</th>" +
                                                        "<th class='text-center'>@Html.Raw(L_TECHNOLOGY)</th>" +
                                                        "<th class='text-center'>@Html.Raw(L_DOWNLOAD)</th>" +
                                                        "<th class='text-center'>@Html.Raw(L_UPLOAD)</th>" +
                                                        "<th class='text-center'>@Html.Raw(L_MONTHLY_FEE)</th>" +
                                                "</tr></thead>";
                                    }

                                    group += "<tbody class='text-center promotionDetail2'  id='dynamicRow" + i + "'></tbody></table>" +
                                            "</div></div>" + remarkGroupWording(chkGroupWord, $("#P_build_name").val()) + "<p class='clearfix'></p>";
                                }
                            });

                            if ($("#HdFunctionSubProduct").val() == "WireBB" || $("#HdFunctionSubProduct").val() == "FTTx")
                                $("#lb002-1").text("@L_INTERNET_WIRE");
                            else
                                $("#lb002-1").text("@L_INTERNET_WIRELESS");

                            if ($("#HdFunctionSubProduct").val() != "WireBB") {
                                $("#dynamicBody002").empty();
                                $("#dynamicBody002")
                                    .append(group + "<div class='discountDetail' id='disDetail'>" + getDisDetail() + "</div>" + "");
                                @*$("#dynamicBody002").append(group +
                                    "<div class='conditionCheck' id='conditionCheck'>" +
                                    "<label id='pri1'></label>" +
                                    "<p style='margin-bottom:25px;' id='pRequest'>@L_REQUEST</p>" +
                                        "" +
                                        "<br><input type='radio' name='WiFiCondition' value='Y' style='margin-left:20px;' onclick='onCondition()' checked> <label id='pri2'></label>" +
                                        "<br><input type='radio' name='WiFiCondition' value='N' style='margin-left:20px;' onclick='onCondition()'> @L_NOT_REQUIRE" +
                                        "</div>" +
                                        "<div class='discountDetail' id='disDetail'>" + getDisDetail() + "</div>" +
                                        "");*@
                            }
                            else {
                                $("#dynamicBody002").empty();
                                $("#dynamicBody002")
                                    .append(group + "<div class='discountDetail' id='disDetail'>" + getDisDetail() + "</div>" + "");
                            }

                            var ff1 = true;
                            $.each(arr, function (j, k) {
                                temp = "";

                                if (k.type == "TRIPLE" && $("#HdAddTriple").val() != "Y") {

                                }
                                else {
                                    var PromotionCodeFBBxEOS = "@PromotionCodeFBBxEOS";
                                    if (PromotionCodeFBBxEOS == "") { PromotionCodeFBBxEOS = "Pxxxxxx" }

                                    var HavePromotionCodeFBBxEOS = false;
                                    data.filter(function (tt, n) {
                                        if (tt.SFF_PROMOTION_CODE == PromotionCodeFBBxEOS) {
                                            HavePromotionCodeFBBxEOS = true;
                                        }
                                    });
                                    $.each(data, function (i, e) {
                                        if (e.PACKAGE_GROUP == k.group && ((e.PACKAGE_TYPE == "Main" || e.PACKAGE_TYPE == "Bundle" || e.PACKAGE_TYPE == "TRIPLE")
                                            && e.PRODUCT_SUBTYPE != "VOIP" && e.PRODUCT_SUBTYPE != "VAS" && e.PRODUCT_SUBTYPE != "PBOX"
                                            && e.PRODUCT_SUBTYPE != "Ontop Special")) {
                                            if (HavePromotionCodeFBBxEOS) {
                                                if (ff1 && PromotionCodeFBBxEOS == e.SFF_PROMOTION_CODE) { sl = "checked"; ff1 = false; }
                                                temp += appendingMain(i, e, sl, data);
                                                sl = "";
                                            }
                                            else {
                                                if ("@FromFBBxEOS" != "Y") {
                                                    if (ff1) { sl = "checked"; ff1 = false; }
                                                }
                                                temp += appendingMain(i, e, sl, data);
                                                sl = "";
                                            }
                                        }
                                    });

                                    $("#dynamicRow" + j).append(temp);
                                }
                            });

                            var tempChild = "";
                            $("#tempOntop").empty();
                            $.each(data, function (i, e) {
                                if (e.PACKAGE_TYPE == "Ontop" && e.PACKAGE_TYPE != "Ontop Special" && e.PRODUCT_SUBTYPE != "VOIP" && e.PRODUCT_SUBTYPE != "VAS")
                                    tempChild += appendingChild(i, e);
                            });
                            $("#tempOntop").append(tempChild);

                            var ff2 = true;
                            var tempChildSP = "";
                            $("#tempOntopSEP").empty();
                            $.each(data, function (i, e) {
                                if (e.PACKAGE_TYPE == "Ontop Special" && e.PACKAGE_TYPE != "Ontop" && e.PRODUCT_SUBTYPE != "VOIP" && e.PRODUCT_SUBTYPE != "VAS") {
                                    if (ff2) { sl2 = "checked"; ff2 = false; }
                                    tempChildSP += appendingChildSP(i, e, sl2);
                                    sl2 = ""
                                    FlagOntopSP = true;
                                }
                            });
                            $("#tempOntopSEP").append(tempChildSP);


                            var tempV = "";
                            $("#tempV").empty();


                            $.each(data, function (i, e) {
                                if (e.PRODUCT_SUBTYPE == "VOIP" || e.PRODUCT_SUBTYPE == "VAS")
                                    tempV += appendingV(i, e);
                            });
                            $("#tempV").append(tempV);

                            var tempAutoMap = "";
                            $("#tempAutoMap").empty();
                            var PACKAGE_AUTO = data[0].PACKAGE_AUTO;
                            if (PACKAGE_AUTO != undefined) {
                                $.each(PACKAGE_AUTO, function (i, e) {
                                    if (e.PACKAGE_TYPE == "Ontop" || e.PACKAGE_TYPE == "Ontop Special" || e.PRODUCT_SUBTYPE == "VOIP" || e.PRODUCT_SUBTYPE == "VAS")
                                        tempAutoMap += appendingAutoMap(i, e);
                                });
                                $("#tempAutoMap").append(tempAutoMap);
                            }

                            var tempOrderFee = "";
                            $("#tempOrderFee").empty();
                            $.each(data, function (i, e) {
                                if (e.PACKAGE_TYPE == "Order Fee")
                                    tempOrderFee += appendingChild(i, e);
                            });
                            $("#tempOrderFee").append(tempOrderFee);
                            //$("#SelectPackage0").click();
                        }
                        // end of create package table

                        if ($("#PlugAndPlayFlow").val() == "Y") {
                            $("#SelectOption1").attr("disabled", "");
                        }

                        $('#dynamicBody002').find('table.table-hover').find('tbody').find('tr').attr("style", "cursor: pointer;");
                        $('#dynamicBody002').find('table.table-hover').find('tbody').find('tr').click(function () {
                            $(this).find('th').find('input[type=radio]').prop('checked', true);
                            onBinding();
                        });
                    }

                    if (HtmlInatall != "" && $("#PlugAndPlayFlow").val() != "Y") {
                        $('#optionInstallationBody').find('table.table-hover').find('tbody').find('tr').attr("style", "cursor: pointer;");
                        $('#optionInstallationBody').find('table.table-hover').find('tbody').find('tr').click(function () {
                            $(this).find('th').find('input[type=radio]').prop('checked', true);
                            onBindingSelectOptionInstallation();
                        });
                    }
                    onBinding();
                    // 18.8 Premium Install
                    showoptionPremiumInstall();
                },
                complete: function (xhr, textStatus) {
                    //console.log("GetListPackageService " + xhr.status + " " + textStatus);
                    var buildLogger = "xhr.status: " + xhr.status + ", textStatus: " + textStatus;

                    @functions{
                        public string GetAntiForgeryToken()
                        {
                            string cookieToken, formToken;
                            AntiForgery.GetTokens(null, out cookieToken, out formToken);
                            return cookieToken + "," + formToken;
                        }
                    }

                    var forgeryId = "@GetAntiForgeryToken()";

                    $.ajax({
                        url: "/Process/writelog",
                        type: 'POST',
                        headers: {
                            'VerificationToken': forgeryId,
                            'isLog': true
                        },
                        data: {
                            message: buildLogger,
                            AisAirNumber: sessionStorage.getItem("AisAirNumber"),
                            method: "_SelectPackage",
                            service: "GetListPackageService"
                        },
                        success: function (result) {
                        }
                    });

                    console.log("Logged");
                }
            });
            //onBinding();
        } catch (e) {
            LockScreen(false, "");
            console.log(e);
        }
    }

    function appendingMain(i, e, sl, data) {

        if (sl == undefined) sl = ""; appendingMain

        var strResult = "";
        strResult = "<tr class='promotionDetail-table'>" +
            "<th>" +
            "<input type='radio' name='SelectPackage' id='SelectPackage" + i + "' " + sl + " onclick='onBinding(this)' value='" + i + "'>" +
            "<input type='hidden' id='MAPPING_CODE" + i + "' value='" + e.MAPPING_CODE + "'>" +
            "<input type='hidden' id='MAPPING_PRODUCT" + i + "' value='" + e.MAPPING_PRODUCT + "'>" +
            "<input type='hidden' id='PACKAGE_CODE" + i + "' value='" + e.PACKAGE_CODE + "'>" +
            "<input type='hidden' id='PACKAGE_NAME" + i + "' value='" + e.PACKAGE_NAME + "'>" +
            "<input type='hidden' id='PACKAGE_GROUP" + i + "' value='" + e.PACKAGE_GROUP + "'>" +
            "<input type='hidden' id='RECURRING_CHARGE" + i + "' value='" + parseFloat(e.RECURRING_CHARGE) + "'>" +
            "<input type='hidden' id='PRE_RECURRING_CHARGE" + i + "' value='" + e.PRE_RECURRING_CHARGE + "'>" +
            "<input type='hidden' id='SFF_PROMOTION_BILL_THA" + i + "' value='" + e.SFF_PROMOTION_BILL_THA + "'>" +
            "<input type='hidden' id='SFF_PROMOTION_BILL_ENG" + i + "' value='" + e.SFF_PROMOTION_BILL_ENG + "'>" +
            "<input type='hidden' id='TECHNOLOGY" + i + "' value='" + e.TECHNOLOGY + "'>" +
            "<input type='hidden' id='DOWNLOAD_SPEED" + i + "' value='" + e.DOWNLOAD_SPEED + "'>" +
            "<input type='hidden' id='UPLOAD_SPEED" + i + "' value='" + e.UPLOAD_SPEED + "'>" +
            "<input type='hidden' id='INITIATION_CHARGE" + i + "' value='" + e.INITIATION_CHARGE + "'>" +
            "<input type='hidden' id='PRE_INITIATION_CHARGE" + i + "' value='" + e.PRE_INITIATION_CHARGE + "'>" +
            "<input type='hidden' id='PACKAGE_TYPE" + i + "' value='" + e.PACKAGE_TYPE + "'>" +
            "<input type='hidden' id='PRODUCT_SUBTYPE_" + i + "' value='" + e.PRODUCT_SUBTYPE + "'>" +
            "<input type='hidden' id='PRODUCT_SUBTYPE3_" + i + "' value='" + e.PRODUCT_SUBTYPE3 + "'>" +
            "<input type='hidden' id='OWNER_PRODUCT" + i + "' value='" + e.OWNER_PRODUCT + "'>" +
            "<input type='hidden' id='ACCESS_MODE" + i + "' value='" + e.ACCESS_MODE + "'>" +
            "<input type='hidden' id='SERVICE_CODE" + i + "' value='" + e.SERVICE_CODE + "'>" +
            "<input type='hidden' id='SFF_PROMOTION_CODE" + i + "' value='" + e.SFF_PROMOTION_CODE + "'>" +
            "<input type='hidden' id='AUTO_MAPPING" + i + "' value='" + e.AUTO_MAPPING + "'>" +
            "<input type='hidden' id='DISPLAY_FLAG" + i + "' value='" + e.DISPLAY_FLAG + "'>" +
            "<input type='hidden' id='MOBILE_PRICE" + i + "' value='" + e.MOBILE_PRICE + "'>" +
            "<input type='hidden' id='EXISTING_MOBILE" + i + "' value='" + e.EXISTING_MOBILE + "'>" +
            "</th>";

        if (isTriple) {
            var dlSp = "";
            var ulSp = "";
            var unitSp = "";

            if (e.DOWNLOAD_SPEED != "" && e.DOWNLOAD_SPEED != undefined) {
                if (e.DOWNLOAD_SPEED.split(" ").length > 1) {
                    dlSp = e.DOWNLOAD_SPEED.split(" ")[0];
                    unitSp = e.DOWNLOAD_SPEED.split(" ")[1];
                }
            }

            if (e.UPLOAD_SPEED != "" && e.UPLOAD_SPEED != undefined) {
                if (e.UPLOAD_SPEED.split(" ")[0].length > 1) {
                    ulSp = e.UPLOAD_SPEED.split(" ")[0];
                }
            }

            var tpRecurring = "";
            var tpHooq = "";
            var autoMappingArray = [];
            $.each(data, function (g, t) {
                if (e.MAPPING_CODE == t.MAPPING_CODE && t.PRODUCT_SUBTYPE == "VOIP" && t.PACKAGE_TYPE == "Main") {
                    strResult += "<input type='hidden' id='TP_RECURRING_CHARGE" + i + "' value='" + t.RECURRING_CHARGE + "'>";
                    tpRecurring = t.RECURRING_CHARGE;
                }
                else if (e.MAPPING_CODE == t.MAPPING_CODE && t.PRODUCT_SUBTYPE == "PBOX" && (t.PRODUCT_SUBTYPE3 == "HOOQ1" || t.PRODUCT_SUBTYPE3 == "HOOQ6")) {
                    strResult += "<input type='hidden' id='TP_HOOQ" + i + "' value='" + t.PRE_RECURRING_CHARGE + "'>";
                    tpHooq = t.PRE_RECURRING_CHARGE;
                }
                else if (e.MAPPING_CODE == t.MAPPING_CODE && t.PRODUCT_SUBTYPE == "PBOX" && t.PRODUCT_SUBTYPE3 == "PBOX") {
                    strResult += "<input type='hidden' id='TP_PRE_INITIATION_PB" + i + "' value='" + t.PRE_INITIATION_CHARGE + "'>" +
                                    "<input type='hidden' id='TP_INITIATION_PB" + i + "' value='" + t.INITIATION_CHARGE + "'>";
                }
                else if (e.MAPPING_CODE == t.MAPPING_CODE && t.PACKAGE_TYPE == "Ontop" && (t.PRODUCT_SUBTYPE == "WireBB" || t.PRODUCT_SUBTYPE == "FTTx")) {
                    strResult += "<input type='hidden' id='TP_PRE_INITIATION_INSTALL" + i + "' value='" + t.PRE_INITIATION_CHARGE + "'>" +
                                    "<input type='hidden' id='TP_INITIATION_INSTALL" + i + "' value='" + t.INITIATION_CHARGE + "'>";
                }
            });

            var flPack = "@Html.Raw(L_TRIPPLE_FIXEDLINE_PACKAGE)";
            flPack = flPack.replace("{0}", tpRecurring);


            var pbPack = "@Html.Raw(L_TRIPLE_PLAYBOX_PACKAGE_1)";

            if (parseInt(tpHooq, 10) > 1) {
                pbPack = "@Html.Raw(L_TRIPLE_PLAYBOX_PACKAGE_6)";
            }

            pbPack = pbPack.replace("{0}", tpHooq);

            strResult += "<td class='text-left'>" + e.TECHNOLOGY + "</td>" +
                        "<td>" + dlSp + "/" + ulSp + " " + unitSp + "</td>" +
                        "<td><i class='fa fa-plus fa-2x'></i></td>" +
                        "<td>" + flPack + "</td>" +
                        "<td><i class='fa fa-plus fa-2x'></i></td>" +
                        "<td>" + pbPack + "</td>"
        } else {

            var proName = e.TECHNOLOGY.replace(/\|/g, '<br>');

            var resultsAutoMapping = data[0].PACKAGE_AUTO;
            if (resultsAutoMapping != undefined) {
                resultsAutoMapping = resultsAutoMapping.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(e.MAPPING_CODE) !== -1 && elem.AUTO_MAPPING.indexOf('A') !== -1 && elem.DISPLAY_FLAG.indexOf('Y') !== -1;
                });
                resultsAutoMapping = sortResults(resultsAutoMapping, "DISPLAY_SEQ", true);
                $.each(resultsAutoMapping, function (g, t) {
                    if (e.TECHNOLOGY != t.TECHNOLOGY) {
                        var tempTechnology = t.TECHNOLOGY.replace(/\|/g, '<br>');
                        proName = proName + "<br>" + tempTechnology;
                    }
                });
            }

            strResult += "<td class='text-left'>" + proName + "</td>" +
                "<td>" + e.DOWNLOAD_SPEED + "</td>" +
                "<td>" + e.UPLOAD_SPEED + "</td>" +
                "<td>" + accounting.formatNumber(e.RECURRING_CHARGE, 2) + "</td>";
        }

        return strResult + "</tr>";
    }

    function appendingChild(i, e) {

        var myCheckOntopContentArray = [];
        @foreach (var CheckOntopContenItem in CheckOntopContentArray)
        {
           @:myCheckOntopContentArray.push("@CheckOntopContenItem");
                         }

        var getName = "SelectOntop";

        if (e.OWNER_PRODUCT == "SWiFi") {
            var mc = e.MAPPING_CODE;
            var yn = "N";

            if ($("#VAS_CODE_" + e.PACKAGE_CODE).length > 0) yn = "Y"; //check ราคา Ontop ใน lov

            var key = mc + yn;
        }
        else {
            var mc = e.MAPPING_CODE;

            //if (e.PACKAGE_TYPE == "Ontop Special") / for special ontop
            //{
            //    mc = e.MAPPING_CODE + "SP";
            //}

            var key = mc + i;
        }
        if (e.PRODUCT_SUBTYPE == "PBOXT" && e.PACKAGE_TYPE == "Ontop") {
            if (myCheckOntopContentArray.indexOf(e.PRODUCT_SUBTYPE3) >= 0) {
                getName = "SelectOntopContent";
            }
        }

        return "<tr>" +
               "<td>" +
               "<input type='text' name='" + getName + mc + e.OWNER_PRODUCT + "' value='" + i + "'>" +
               "<input type='text' id='MAPPING_CODE" + key + "' value='" + e.MAPPING_CODE + "'>" +
               "<input type='text' id='MAPPING_PRODUCT" + key + "' value='" + e.MAPPING_PRODUCT + "'>" +
               "<input type='text' id='PACKAGE_CODE" + key + "' value='" + e.PACKAGE_CODE + "'>" +
               "<input type='text' id='PACKAGE_NAME" + key + "' value='" + e.PACKAGE_NAME + "'>" +
               "<input type='text' id='PACKAGE_GROUP" + key + "' value='" + e.PACKAGE_GROUP + "'>" +
               "<input type='text' id='RECURRING_CHARGE" + key + "' value='" + e.RECURRING_CHARGE + "'>" +
               "<input type='text' id='PRE_RECURRING_CHARGE" + key + "' value='" + e.PRE_RECURRING_CHARGE + "'>" +
               "<input type='text' id='SFF_PROMOTION_BILL_THA" + key + "' value='" + e.SFF_PROMOTION_BILL_THA + "'>" +
               "<input type='text' id='SFF_PROMOTION_BILL_ENG" + key + "' value='" + e.SFF_PROMOTION_BILL_ENG + "'>" +
               "<input type='text' id='TECHNOLOGY" + key + "' value='" + e.TECHNOLOGY + "'>" +
               "<input type='text' id='DOWNLOAD_SPEED" + key + "' value='" + e.DOWNLOAD_SPEED + "'>" +
               "<input type='text' id='UPLOAD_SPEED" + key + "' value='" + e.UPLOAD_SPEED + "'>" +
               "<input type='text' id='INITIATION_CHARGE" + key + "' value='" + e.INITIATION_CHARGE + "'>" +
               "<input type='text' id='PRE_INITIATION_CHARGE" + key + "' value='" + e.PRE_INITIATION_CHARGE + "'>" +
               "<input type='text' id='PACKAGE_TYPE" + key + "' value='" + e.PACKAGE_TYPE + "'>" +
               "<input type='text' id='PRODUCT_SUBTYPE_" + key + "' value='" + e.PRODUCT_SUBTYPE + "'>" +
               "<input type='text' id='PRODUCT_SUBTYPE3_" + key + "' value='" + e.PRODUCT_SUBTYPE3 + "'>" +
               "<input type='text' id='OWNER_PRODUCT" + key + "' value='" + e.OWNER_PRODUCT + "'>" +
               "<input type='text' id='ACCESS_MODE" + key + "' value='" + e.ACCESS_MODE + "'>" +
               "<input type='text' id='SERVICE_CODE" + key + "' value='" + e.SERVICE_CODE + "'>" +
               "<input type='hidden' id='SFF_PROMOTION_CODE" + key + "' value='" + e.SFF_PROMOTION_CODE + "'>" +
               "</td>" +
               "</tr>";
    }

    function appendingChildSP(i, e, sl) {

        if (sl == undefined) sl = "";
        var mc = e.MAPPING_CODE;

        var key = mc + i + "SP";

        //console.log('e.PRODUCT_SUBTYPE = e.INITIATION_CHARGE', e.PRODUCT_SUBTYPE + '=' + e.INITIATION_CHARGE);

        return "<tr>" +
               "<td>" +
               "<input type='hidden' name='SelectOntopSP" + mc + e.OWNER_PRODUCT + "' value='" + i + "'>" +
               "<input type='hidden' id='MAPPING_CODE" + key + "' value='" + e.MAPPING_CODE + "'>" +
               "<input type='hidden' id='MAPPING_PRODUCT" + key + "' value='" + e.MAPPING_PRODUCT + "'>" +
               "<input type='hidden' id='PACKAGE_CODE" + key + "' value='" + e.PACKAGE_CODE + "'>" +
               "<input type='hidden' id='PACKAGE_NAME" + key + "' value='" + e.PACKAGE_NAME + "'>" +
               "<input type='hidden' id='PACKAGE_GROUP" + key + "' value='" + e.PACKAGE_GROUP + "'>" +
               "<input type='hidden' id='RECURRING_CHARGE" + key + "' value='" + e.RECURRING_CHARGE + "'>" +
               "<input type='hidden' id='PRE_RECURRING_CHARGE" + key + "' value='" + e.PRE_RECURRING_CHARGE + "'>" +
               "<input type='hidden' id='SFF_PROMOTION_BILL_THA" + key + "' value='" + e.SFF_PROMOTION_BILL_THA + "'>" +
               "<input type='hidden' id='SFF_PROMOTION_BILL_ENG" + key + "' value='" + e.SFF_PROMOTION_BILL_ENG + "'>" +
               "<input type='hidden' id='TECHNOLOGY" + key + "' value='" + e.TECHNOLOGY + "'>" +
               "<input type='hidden' id='DOWNLOAD_SPEED" + key + "' value='" + e.DOWNLOAD_SPEED + "'>" +
               "<input type='hidden' id='UPLOAD_SPEED" + key + "' value='" + e.UPLOAD_SPEED + "'>" +
               "<input type='hidden' id='INITIATION_CHARGE" + key + "' value='" + e.INITIATION_CHARGE + "'>" +
               "<input type='hidden' id='PRE_INITIATION_CHARGE" + key + "' value='" + e.PRE_INITIATION_CHARGE + "'>" +
               "<input type='hidden' id='PACKAGE_TYPE" + key + "' value='" + e.PACKAGE_TYPE + "'>" +
               "<input type='hidden' id='PRODUCT_SUBTYPE_" + key + "' value='" + e.PRODUCT_SUBTYPE + "'>" +
               "<input type='hidden' id='PRODUCT_SUBTYPE3_" + key + "' value='" + e.PRODUCT_SUBTYPE3 + "'>" +
               "<input type='hidden' id='OWNER_PRODUCT" + key + "' value='" + e.OWNER_PRODUCT + "'>" +
               "<input type='hidden' id='ACCESS_MODE" + key + "' value='" + e.ACCESS_MODE + "'>" +
               "<input type='hidden' id='SERVICE_CODE" + key + "' value='" + e.SERVICE_CODE + "'>" +
               "<input type='hidden' id='DISCOUNT_TYPE" + key + "' value='" + e.DISCOUNT_TYPE + "'>" +
               "<input type='hidden' id='DISCOUNT_VALUE" + key + "' value='" + e.DISCOUNT_VALUE + "'>" +
               "<input type='hidden' id='DISCOUNT_DAY" + key + "' value='" + e.DISCOUNT_DAY + "'>" +
               "<input type='hidden' id='SFF_PROMOTION_CODE" + key + "' value='" + e.SFF_PROMOTION_CODE + "'>" +
               "</td>" +
               "</tr>";


    }

    function appendingPlayBox(i, e) {
        var mc = e.MAPPING_CODE;

        return "<tr>" +
               "<td>" +
               "<input type='text' name='SelectPlayBox" + mc + "' value='" + i + "'>" +
               "<input type='text' id='MAPPING_CODE" + i + "' value='" + e.MAPPING_CODE + "'>" +
               "<input type='text' id='MAPPING_PRODUCT" + i + "' value='" + e.MAPPING_PRODUCT + "'>" +
               "<input type='text' id='PACKAGE_CODE" + i + "' value='" + e.PACKAGE_CODE + "'>" +
               "<input type='text' id='PACKAGE_NAME" + i + "' value='" + e.PACKAGE_NAME + "'>" +
               "<input type='text' id='PACKAGE_GROUP" + i + "' value='" + e.PACKAGE_GROUP + "'>" +
               "<input type='text' id='RECURRING_CHARGE" + i + "' value='" + e.RECURRING_CHARGE + "'>" +
               "<input type='text' id='PRE_RECURRING_CHARGE" + i + "' value='" + e.PRE_RECURRING_CHARGE + "'>" +
               "<input type='text' id='SFF_PROMOTION_BILL_THA" + i + "' value='" + e.SFF_PROMOTION_BILL_THA + "'>" +
               "<input type='text' id='SFF_PROMOTION_BILL_ENG" + i + "' value='" + e.SFF_PROMOTION_BILL_ENG + "'>" +
               "<input type='text' id='TECHNOLOGY" + i + "' value='" + e.TECHNOLOGY + "'>" +
               "<input type='text' id='DOWNLOAD_SPEED" + i + "' value='" + e.DOWNLOAD_SPEED + "'>" +
               "<input type='text' id='UPLOAD_SPEED" + i + "' value='" + e.UPLOAD_SPEED + "'>" +
               "<input type='text' id='INITIATION_CHARGE" + i + "' value='" + e.INITIATION_CHARGE + "'>" +
               "<input type='text' id='PRE_INITIATION_CHARGE" + i + "' value='" + e.PRE_INITIATION_CHARGE + "'>" +
               "<input type='text' id='PACKAGE_TYPE" + i + "' value='" + e.PACKAGE_TYPE + "'>" +
               "<input type='text' id='PRODUCT_SUBTYPE_" + i + "' value='" + e.PRODUCT_SUBTYPE + "'>" +
               "<input type='hidden' id='PRODUCT_SUBTYPE3_" + i + "' value='" + e.PRODUCT_SUBTYPE3 + "'>" +
               "<input type='text' id='OWNER_PRODUCT" + i + "' value='" + e.OWNER_PRODUCT + "'>" +
               "<input type='text' id='ACCESS_MODE" + i + "' value='" + e.ACCESS_MODE + "'>" +
               "<input type='text' id='SERVICE_CODE" + i + "' value='" + e.SERVICE_CODE + "'>" +
               "<input type='hidden' id='SFF_PROMOTION_CODE" + i + "' value='" + e.SFF_PROMOTION_CODE + "'>" +
               "</td>" +
               "</tr>";
    }

    function appendingV(i, e) {
        var mc = e.MAPPING_CODE;
        var mp = e.MAPPING_PRODUCT;
        var key = mc + i;

        var getName = "SelectV" + mc + e.OWNER_PRODUCT;

        if (e.PRODUCT_SUBTYPE == "VOIP" && e.PACKAGE_TYPE == "Ontop") {
            getName = "SelectOntopV" + mp + e.OWNER_PRODUCT;
        }

        return "<tr>" +
               "<td>" +
               "<input type='text' name='" + getName + "' value='" + i + "'>" +
               "<input type='text' id='MAPPING_CODE" + key + "' value='" + e.MAPPING_CODE + "'>" +
               "<input type='text' id='MAPPING_PRODUCT" + key + "' value='" + e.MAPPING_PRODUCT + "'>" +
               "<input type='text' id='PACKAGE_CODE" + key + "' value='" + e.PACKAGE_CODE + "'>" +
               "<input type='text' id='PACKAGE_NAME" + key + "' value='" + e.PACKAGE_NAME + "'>" +
               "<input type='text' id='PACKAGE_GROUP" + key + "' value='" + e.PACKAGE_GROUP + "'>" +
               "<input type='text' id='RECURRING_CHARGE" + key + "' value='" + e.RECURRING_CHARGE + "'>" +
               "<input type='text' id='PRE_RECURRING_CHARGE" + key + "' value='" + e.PRE_RECURRING_CHARGE + "'>" +
               "<input type='text' id='SFF_PROMOTION_BILL_THA" + key + "' value='" + e.SFF_PROMOTION_BILL_THA + "'>" +
               "<input type='text' id='SFF_PROMOTION_BILL_ENG" + key + "' value='" + e.SFF_PROMOTION_BILL_ENG + "'>" +
               "<input type='text' id='TECHNOLOGY" + key + "' value='" + e.TECHNOLOGY + "'>" +
               "<input type='text' id='DOWNLOAD_SPEED" + key + "' value='" + e.DOWNLOAD_SPEED + "'>" +
               "<input type='text' id='UPLOAD_SPEED" + key + "' value='" + e.UPLOAD_SPEED + "'>" +
               "<input type='text' id='INITIATION_CHARGE" + key + "' value='" + e.INITIATION_CHARGE + "'>" +
               "<input type='text' id='PRE_INITIATION_CHARGE" + key + "' value='" + e.PRE_INITIATION_CHARGE + "'>" +
               "<input type='text' id='PACKAGE_TYPE" + key + "' value='" + e.PACKAGE_TYPE + "'>" +
               "<input type='text' id='PRODUCT_SUBTYPE_" + key + "' value='" + e.PRODUCT_SUBTYPE + "'>" +
               "<input type='text' id='PRODUCT_SUBTYPE3_" + key + "' value='" + e.PRODUCT_SUBTYPE3 + "'>" +
               "<input type='text' id='OWNER_PRODUCT" + key + "' value='" + e.OWNER_PRODUCT + "'>" +
               "<input type='text' id='ACCESS_MODE" + key + "' value='" + e.ACCESS_MODE + "'>" +
               "<input type='text' id='SERVICE_CODE" + key + "' value='" + e.SERVICE_CODE + "'>" +
               "<input type='hidden' id='SFF_PROMOTION_CODE" + key + "' value='" + e.SFF_PROMOTION_CODE + "'>" +
               "</td>" +
               "</tr>";
    }

    function appendingAutoMap(i, e) {
        var mc = e.MAPPING_CODE;
        var mp = e.MAPPING_PRODUCT;
        var key = mc + i;

        var getName = "SelectAutoMap" + mc + e.OWNER_PRODUCT;

        return "<tr>" +
               "<td>" +
               "<input type='text' name='" + getName + "' value='" + i + "'>" +
               "<input type='text' id='MAPPING_CODE" + key + "' value='" + e.MAPPING_CODE + "'>" +
               "<input type='text' id='MAPPING_PRODUCT" + key + "' value='" + e.MAPPING_PRODUCT + "'>" +
               "<input type='text' id='PACKAGE_CODE" + key + "' value='" + e.PACKAGE_CODE + "'>" +
               "<input type='text' id='PACKAGE_NAME" + key + "' value='" + e.PACKAGE_NAME + "'>" +
               "<input type='text' id='PACKAGE_GROUP" + key + "' value='" + e.PACKAGE_GROUP + "'>" +
               "<input type='text' id='RECURRING_CHARGE" + key + "' value='" + e.RECURRING_CHARGE + "'>" +
               "<input type='text' id='PRE_RECURRING_CHARGE" + key + "' value='" + e.PRE_RECURRING_CHARGE + "'>" +
               "<input type='text' id='SFF_PROMOTION_BILL_THA" + key + "' value='" + e.SFF_PROMOTION_BILL_THA + "'>" +
               "<input type='text' id='SFF_PROMOTION_BILL_ENG" + key + "' value='" + e.SFF_PROMOTION_BILL_ENG + "'>" +
               "<input type='text' id='TECHNOLOGY" + key + "' value='" + e.TECHNOLOGY + "'>" +
               "<input type='text' id='DOWNLOAD_SPEED" + key + "' value='" + e.DOWNLOAD_SPEED + "'>" +
               "<input type='text' id='UPLOAD_SPEED" + key + "' value='" + e.UPLOAD_SPEED + "'>" +
               "<input type='text' id='INITIATION_CHARGE" + key + "' value='" + e.INITIATION_CHARGE + "'>" +
               "<input type='text' id='PRE_INITIATION_CHARGE" + key + "' value='" + e.PRE_INITIATION_CHARGE + "'>" +
               "<input type='text' id='PACKAGE_TYPE" + key + "' value='" + e.PACKAGE_TYPE + "'>" +
               "<input type='text' id='PRODUCT_SUBTYPE_" + key + "' value='" + e.PRODUCT_SUBTYPE + "'>" +
               "<input type='text' id='PRODUCT_SUBTYPE3_" + key + "' value='" + e.PRODUCT_SUBTYPE3 + "'>" +
               "<input type='text' id='OWNER_PRODUCT" + key + "' value='" + e.OWNER_PRODUCT + "'>" +
               "<input type='text' id='ACCESS_MODE" + key + "' value='" + e.ACCESS_MODE + "'>" +
               "<input type='text' id='SERVICE_CODE" + key + "' value='" + e.SERVICE_CODE + "'>" +
               "<input type='hidden' id='SFF_PROMOTION_CODE" + key + "' value='" + e.SFF_PROMOTION_CODE + "'>" +
               "<input type='text' id='DISCOUNT_TYPE" + key + "' value='" + e.DISCOUNT_TYPE + "'>" +
               "<input type='text' id='DISCOUNT_VALUE" + key + "' value='" + e.DISCOUNT_VALUE + "'>" +
               "<input type='hidden' id='DISCOUNT_DAY" + key + "' value='" + e.DISCOUNT_DAY + "'>" +
               "<input type='hidden' id='DISPLAY_FLAG" + key + "' value='" + e.DISPLAY_FLAG + "'>" +
               "</td>" +
               "</tr>";
    }

    //TODO: R18.1 FTTB Sell Router (ซื้อ และ ใช้ของตนเอง)
    function getConditionWhenBuyRouter() {
        //if ($("#ActiveSellRouterFlag").val() == "Y" && $('#TopUp').val() == "5" && ($('#CustomerRegisterPanelModel_RouterFlag').val() == "S" || $('#CustomerRegisterPanelModel_RouterFlag').val() == "M")) {
        //    return "class='hide'";
        //}
        return "";
    }

    function getDisDetail() {
        var discountDetail = "<div class='getDisDetail add-rounded-gray'>" + "<p class='clearfix'></p>";
        var discountDetail_default = "<div id='divConWifi01' " + getConditionWhenBuyRouter() + " >" +
                "<strong>@L_DISCOUNT</strong> <br>" +
                "<p id='disCondition1'></p><p id='disConditionPmt'></p>" +
                "<p class='clearfix'></p>" +
                "</div>" +
                "<strong>@L_LAN_WIRING</strong> <br>" +
                "<ul style='list-style-type: circle; margin: 15px;'>" +
                "<li>@L_LAN_WIRING_1</li>" +
                "<li>@L_LAN_WIRING_2</li>" +
                "<li>@L_LAN_WIRING_3</li></ul>" +
                "<p class='clearfix'></p>" +
                "<div id='divConWifi02' " + getConditionWhenBuyRouter() + " >" +
                "<strong><label id='disCondition21'></label></strong> <br>" +
                "<p id='disCondition22'></p>" +
                "<p class='clearfix'></p>" +
                "<p class='clearfix'></p>" +
                "</div>" +
                "</div>";

        var detailFee = "";
        detailFee = '@L_ENTRANCE_FEE';
        @*if ($("#ActiveSellRouterFlag").val() == "Y" && $('#TopUp').val() == "5" && $('#CustomerRegisterPanelModel_RouterFlag').val() == "S") {
            detailFee += " " + '@L_ROUTER_EQUIPMENT_FEE';
        }*@
        var discountDetail_entranceFee = "<strong>@L_CHARGE_ON_INSTALL_DATE</strong> <br>" +
                "<p id='disEntranceFee'>" + detailFee + "</p>" +
                "<p class='clearfix'></p>";

        if ($("#showEntrancefee").val() == "true") // entranceFee
            discountDetail = discountDetail + discountDetail_entranceFee + discountDetail_default;
        else
            discountDetail = discountDetail + discountDetail_default;

        return discountDetail;
    }

    function openMoreDetail() {
        clearPageScrollUp(".conditionCheck");
        $('#modal002').modal();
        $("#detail002").show();
    }

    function nextPage002FRspontop() {

        /// for special ontop cal price
        var ee = $("input[name=SelectOntopRadioSP]:checked").val();
        $('#hdSelectSubRadioSP').val(ee);
        var discount_type = $('#DISCOUNT_TYPE' + ee).val();
        var discount_value = $('#DISCOUNT_VALUE' + ee).val();
        var sff_promotion_code = $('#SFF_PROMOTION_CODE' + ee).val();
        var i = $("input[name=SelectPackage]:checked").val();
        var Charge = $('#RECURRING_CHARGE' + i).val();
        var summTotal1 = $('#summTotal1').text() != "" && $('#summTotal1').text() != undefined ? parseFloat($('#summTotal1').text().replace(',', '')) : 0;

        var result = Calculate_Discount(discount_type, discount_value, i);
        if (result == null || typeof result == "undefined")
            result = parseFloat(Charge);

        var daysInMonth = new Date().getDaysInMonth();
        var sumProrate = (result / daysInMonth) * 1;
        var sumTotalProrate = result + sumProrate + summTotal1;

        $('#sumProrateVas').text(accounting.formatNumber(sumProrate, 2));
        $('#sumTotalProrateVas').text(accounting.formatNumber(sumTotalProrate, 2));

        $('#summVal3Vas').text(accounting.formatNumber(Charge, 2));


        $('#hdSelectSPONTOP').val("1");
        //ส่วนลด Bundling 16.3



        var promotionCode = $('#hdPackageCode').val();
        var strpromotionCode = promotionCode.split(',');

        var dis = 0;
        var discount = Charge - result;
        var diss = discount.toString().indexOf('.');
        if (diss >= 0) {
            dis = discount.toFixed(2);
        }
        else {
            dis = discount;
        }

        var results = 0;
        var num = result.toString().indexOf('.');
        if (num >= 0) {
            results = result.toFixed(2);
        }
        else {
            results = result;
        }

        $('#summTotal2Vas').text(results);

        var Code = strpromotionCode.indexOf(sff_promotion_code);
        if (!isNoRouter) {
            if (Code >= 0) {
                $("#DisplayPackagePanelModel_L_SPECIAL_BUNDLING_DISCOUNT").val(dis);
                $('#trBundling').show();
                $('#trDiscount').hide();
                $('#summBundingVas').text(dis);

                $("#sideTabVas").show();

            }
            else {
                $("#DisplayPackagePanelModel_L_SPECIAL_DISCOUNT").val(dis);
                $('#trBundling').hide();
                $('#trDiscount').show();
                $('#summDiscountVas').text(dis);

                $("#sideTabVas").hide();

            }
        }

        var mc = $("#MAPPING_CODE" + ee).val();
        var ow = $("#OWNER_PRODUCT" + ee).val();
        var findOntopSP = $("[name=SelectOntopSP" + mc + ow + "]");
        var promotionCode = $('#hdPackageCode').val();
        var strpromotionCode = promotionCode.split(',');
        var ee2 = $("input[name=SelectOntopRadioSP]:checked").val();
        var sff_promotion_code2 = $('#SFF_PROMOTION_CODE' + ee2).val();
        var ee3 = $("input[name=SelectPackage]:checked").val();
        var ps3 = $("#PRODUCT_SUBTYPE3_" + ee3).val();

        var flang_bundle_main = "";
        var flang_bundle_sp = "";
        if (ps3 == "BUNDLE") {
            flang_bundle_main = "Y";
        }
        else {
            if (findOntopSP != undefined) {
                var Code = strpromotionCode.indexOf(sff_promotion_code2);
                if (Code >= 0) {
                    flang_bundle_sp = "Y";
                }
                else {
                    flang_bundle_sp = "N";
                }
            }
        }
        $("#CoveragePanelModel_BUNDLINGMAINFLAG").val(flang_bundle_main);
        if (($("#haveBundlingAutoMapping").val() == "N" || $("#haveDiscountAutoMapping").val() == "N")) {
            $("#CoveragePanelModel_BUNDLINGSPECIALFLAG").val(flang_bundle_sp);
        }

        ShowPopUpOntop();
    }

    function checkServiceLevel() {
        //Initial premium value before check service level.
        if ($("#CustomerRegisterPanelModel_PREMIUM_FLAG").val() == "") {
            checkPremiumArea($("input[name=SelectPackage]:checked").val());
        }

        var result = {};
        var action = $('#ServiceLevel_Action').val();
        var totalPrice = parseFloat($("#tmpSummTotal2Vas").text());
        var isPremiumInstall = $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val() == "@FBB_Con_PREMIUM_FLAG";
        var forcePremiumTimeslot = false;

        if (action == 1) {
            result = {
                servicelevel: "@SERVICE_LEVEL_H",
                servicelevel_flag: "@SERVICE_LEVEL_FLAG_EXISTING"
            }
        } else {
            var isCheckOtherCondition = false;
            //Check premium install
            if (isPremiumInstall) {
                var resultCheck = checkPremium_ServiceLevel();
                if (resultCheck == 1) {
                    result = {
                        servicelevel: "@SERVICE_LEVEL_H",
                        servicelevel_flag: "@SERVICE_LEVEL_FLAG_MEMO"
                    };
                } else if (resultCheck == 2) {
                    isCheckOtherCondition = true;
                } else {
                    isCheckOtherCondition = true;
                }
            } else {
                isCheckOtherCondition = true;
            }
            //Check other condition by action
            if (isCheckOtherCondition) {
                var valRecurringCharge = $("#PRICE_CHARGE" + $("input[name=SelectPackage]:checked").val()).val();
                if (action == 2) {
                    result = {
                        servicelevel: "@SERVICE_LEVEL_H",
                        servicelevel_flag: "@SERVICE_LEVEL_FLAG_PA"
                    };
                } else if (action == 3) {
                    if (totalPrice >= parseFloat("@SERVICE_LEVEL_MINIMUM_NETPRICE")) {
                        result = {
                            servicelevel: "@SERVICE_LEVEL_H",
                            servicelevel_flag: "@SERVICE_LEVEL_FLAG_TOTAL"
                        };
                    } else if (parseFloat(valRecurringCharge) >= parseFloat("@FBB_Con_L_RECURING_CHECK")) {
                        forcePremiumTimeslot = true;
                        result = {
                            servicelevel: "@SERVICE_LEVEL_L",
                            servicelevel_flag: "@SERVICE_LEVEL_FLAG_PACK"
                        };
                    } else {
                        //SFF return data not found.
                        if ($("#ServiceLevel").val() == "null" || $("#ServiceLevel").val() == "") {
                            result.servicelevel = "@SERVICE_LEVEL_L";
                        } else {
                            //Not set service level here because it already set from previous page.
                            result.servicelevel = $("#ServiceLevel_Initial").val();
                        }
                        result.servicelevel_flag = "@SERVICE_LEVEL_FLAG_OTHER";
                    }
                } else if (action == 4) {
                    if (totalPrice >= parseFloat("@SERVICE_LEVEL_MINIMUM_NETPRICE")) {
                        result = {
                            servicelevel: "@SERVICE_LEVEL_H",
                            servicelevel_flag: "@SERVICE_LEVEL_FLAG_TOTAL"
                        };
                    } else if (parseFloat(valRecurringCharge) >= parseFloat("@FBB_Con_L_RECURING_CHECK")) {
                        forcePremiumTimeslot = true;
                        result = {
                            servicelevel: "@SERVICE_LEVEL_L",
                            servicelevel_flag: "@SERVICE_LEVEL_FLAG_PACK"
                        };
                    } else {
                        result.servicelevel = "@SERVICE_LEVEL_L";
                        result.servicelevel_flag = "@SERVICE_LEVEL_FLAG_OTHER";
                    }
                }
            }
        }
        //Check premium install timeslot.
        if (result.servicelevel == "@SERVICE_LEVEL_H" || forcePremiumTimeslot) {
            result.is_premium_timeslot = true;
            $("#CustomerRegisterPanelModel_SUB_ACCESS_MODE").val("@FBB_Con_SUB_ACCESS_MODE");
            $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("@FBB_Con_PREMIUM_FLAG");
            $("#CustomerRegisterPanelModel_REQUEST_SUB_FLAG").val("@FBB_Con_REQUEST_SUB_FLAG");
        } else {
            //chist571 Edit check Premium
            $("#CustomerRegisterPanelModel_SUB_ACCESS_MODE").val("");
            $("#CustomerRegisterPanelModel_REQUEST_SUB_FLAG").val("");
            result.is_premium_timeslot = false;
        }
        $("#ServiceLevel").val(result.servicelevel);
        $("#ServiceLevel_Flag").val(result.servicelevel_flag);

        //console.log("Flow action : " + action);
        //console.log("Total price : " + totalPrice);
        //console.log("Premium install : " + isPremiumInstall);
        //console.log("Premium timeslot : " + result.is_premium_timeslot);
        //console.log("Service Level : " + $("#ServiceLevel").val() + " Service Level Flag : " + $("#ServiceLevel_Flag").val());

        return result;
    }
    function checkPremium_ServiceLevel() {
        if ("@Model.TopUp" == "5") {
            var checkBox = document.getElementById("chkPremiumInstall");
            if (checkBox.checked == true) {
                return 1;
            }
            else {
                return checkPremiumDiscount_ServiceLevel();
            }
        }
        else {
            return checkPremiumDiscount_ServiceLevel();
        }
    }
    function checkPremiumDiscount_ServiceLevel() {
        var valRecurringCharge = $("#PRICE_CHARGE" + $("input[name=SelectPackage]:checked").val()).val();
        if (parseFloat(valRecurringCharge) >= parseFloat("@FBB_Con_L_RECURING_CHECK")) {
            return 2;
        } else {
            return 3;
        }
    }
    function displayServiceLevel() {
        //console.log("Model.TopUp","@Model.TopUp")
        if ("@Model.TopUp" == "5") {
            var servicelevel = $('#ServiceLevel').val();
            if (servicelevel != null) {
                if ($("#ServiceLevel").val() == '@SERVICE_LEVEL_H') {
                    $(".valueServiceLevel").text('@DISPLAY_SERVICE_LEVEL_H');
                } else if ($("#ServiceLevel").val() == '@SERVICE_LEVEL_M') {
                    $(".valueServiceLevel").text('@DISPLAY_SERVICE_LEVEL_M');
                } else if ($("#ServiceLevel").val() == '@SERVICE_LEVEL_L') {
                    $(".valueServiceLevel").text('@DISPLAY_SERVICE_LEVEL_L');
                }
                $(".divSideServiceLevel").show()
            }
        }
    }

    var signatureShowFlag = false;
    function nextPage002() {

        var valOptionSelectPackage = $("input[name=SelectPackage]:checked").val();

        if ((valOptionSelectPackage  == null) || (valOptionSelectPackage  == "")) {
            toastrErrorMessage('Please select package.');
            return;
        }
        var EntryfeeShow = $("#ENTRYFEE_SHOW" + valOptionSelectPackage).val();
        if (EntryfeeShow == "Y") {
            var valOptionSelectEntryFee = $("input[name=SelectOptionEntryFee]:checked").val();
            if ((valOptionSelectEntryFee == null) || (valOptionSelectEntryFee == "")) {
                toastrErrorMessage('Please select EntryFee.');
                return;
            }
        }

        $("#CustomerRegisterPanelModel_FlagDopa").val("");
        $("#CustomerRegisterPanelModel_FlagFaceRecognition").val("");
        $("#CustomerRegisterPanelModel_FlagTakePhoto").val("");
        $("#CustomerRegisterPanelModel_FlagBrowseFile").val("");

        if ($("#checkGiftVoucher").text() != "@L_MSG_PROMO_CORRECT" && $("#GiftVoucher").val() != "") {
            $("#GiftVoucher").focus();
            return;
        }
        $("#IsDbSp").val("");

        if ($("input[name=WiFiCondition]:checked").val() == undefined) //WireBB or FTTx
            $("#DisplayPackagePanelModel_WIFIAccessPoint").val("Y");
        else
            $("#DisplayPackagePanelModel_WIFIAccessPoint").val($("input[name=WiFiCondition]:checked").val());

        if ($("input[name=WiFiCondition]:checked").val() == "N") {
            //mapp ontop = 0
            $("#SummaryPanelModel_PackageModel_INITIATION_CHARGE_ONTOP").val("0");
            $("#SummaryPanelModel_PackageModel_DISCOUNT_INITIATION_ONTOP").val("0");
            $("#SummaryPanelModel_PackageModel_PACKAGE_CLASS_ONTOP").val("");
        }

        $("#pRequest").removeClass("i-red");

        var i = $("input[name=SelectPackage]:checked").val();

        //19.3
        $("#CustomerRegisterPanelModel_MobilePrice").val($("#MOBILE_PRICE" + i).val());
        $("#CustomerRegisterPanelModel_Existing_Mobile").val($("#EXISTING_MOBILE" + i).val());

        //19.6 Redcap
        var download_speed = '0';
        var str_download_speed = $("#DOWNLOAD_SPEED" + i).val().split(' ')
        if(!isNaN(parseInt(str_download_speed[0]))){
            download_speed = str_download_speed[0]
        }
        $("#CustomerRegisterPanelModel_DownloadSpeed").val(download_speed);

        // 18.8 Premium Install
        //if (listPremiumByRegion.indexOf($("#P_Region").val()) > -1 && listPremiumByTechnology.indexOf($("#ACCESS_MODE" + i).val()) > -1) {

        // Update 19.10 Premium Install Check call package
        checkPremiumArea(i);
        @*var lang = $("#LanguagePage").val() == 1 ? "T" : "E";
        $.ajax({
            url: '/SelectPackage/CheckPremiumArea',
            data: {
                SubDistrict: $('#COVERAGE_L_TUMBOL :selected').text(),
                District: $('#COVERAGE_L_AMPHUR :selected').text(),
                Province: $('#COVERAGE_L_PROVINCE :selected').text(),
                PostalCode: $("#CoveragePanelModel_Address_L_ZIPCODE :selected").text(),
                Language: lang
            },
            dataType: "json",
            type: 'POST',
            async: false,
            success: function (data) {
                if (data.outReturnCode == "0" && data.outReturnPremiumConfig.length > 0
                    && listPremiumByTechnology.indexOf($("#ACCESS_MODE" + i).val()) > -1) {
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("@FBB_Con_PREMIUM_FLAG");
                }
                else {
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("N");
                }
            }
        });*@
        if ($("#CustomerRegisterPanelModel_PREMIUM_FLAG").val() == "@FBB_Con_PREMIUM_FLAG")
        {
            var isPremium = CheckPremiumInstall();
            if (!isPremium) return;
        }
        //20.3 Service Level
        checkServiceLevel();
        displayServiceLevel()

        var mc = $("#MAPPING_CODE" + i).val();
        var tech = $("#PRODUCT_SUBTYPE_" + i).val();
        var pg = $("#PACKAGE_GROUP" + i).val();
        var type = $("#PACKAGE_TYPE" + i).val();
        $("#HdPackage_Group_Name").val(pg);
        var dbspeed = false;
        var isNonMobile = false;


        if ($("#tAisAirNumber").val().substr(0, 1) == "0")
            isNonMobile = true;

        $.ajax({
            url: '/CheckCoverage/GetCustomerSpeOffer',
            data: {
                orderRef: $("#tOrderRef").val(), technology: tech, isNonMobile: isNonMobile, sffLogId: $("#SffProfileLogID").val()
                , packageGroup: pg, isAWNProduct: $("#IsAWNProduct").val()
            },
            dataType: "json",
            type: 'GET',
            async: false,
            success: function (data) {
                $.each(data, function (i, e) {
                    if (e == "DOUBLE_SPEED")
                        dbspeed = true;
                });
            }
        });

        var ee = $("input[name=SelectPackage]:checked").val();
        var ps3 = $("#PRODUCT_SUBTYPE3_" + ee).val();

        var flang_bundle_main = "";
        var flang_bundle_sp = "";

        if (ps3 == "BUNDLE") {
            $("#CoveragePanelModel_BUNDLINGMAINFLAG").val("Y");
        }
        else {
            //if (findOntopSP != undefined) {
            //    var Code = strpromotionCode.indexOf(sff_promotion_code);
            //    if (Code >= 0) {
            //        flang_bundle_sp = "Y";
            //    }
            //    else {
            //        flang_bundle_sp = "N";
            //    }
            //}
        }
        if ($("#haveBundlingAutoMapping").val() == "N" && $("#haveDiscountAutoMapping").val() == "N") {
            $("#CoveragePanelModel_BUNDLINGSPECIALFLAG").val("");
        }

        // 19.3
        if($("#CustomerRegisterPanelModel_Existing_Mobile").val() == "Y")
        {
            $('input[name="SelectOntopRadioFMC"]').prop('checked', false);
            var checkFMCData = CheckPopupFMC($("#SFF_PROMOTION_CODE" + ee).val(),$("#CustomerRegisterPanelModel_Existing_Mobile").val());
            if(checkFMCData != "")
            {
                var dataLov = '@Html.Raw(L_FMC_EXISTING_MOBILE)';
                $('#rdiFMC').hide();
                if (checkFMCData != "") {
                    dataLov = dataLov.replace('[mobileNo]', $("#CoveragePanelModel_P_MOBILE").val());
                    dataLov = dataLov.replace('[mobilePackage]', checkFMCData);
                    $('#myModalFMCmsg').html(dataLov);
                    $('#rdiFMC').show();
                }
                $("[name=SelectOntopRadioFMC").prop("checked", true);
                $('#myModalFMC').modal('show');
            }
            else
            {
                $("#CustomerRegisterPanelModel_Existing_Mobile").val("N");
            }
        }

        if (type == "TRIPLE") {
            //$('#hdSelectSPONTOP').val("0");
            //$("#page2").hide();
            //onPackageDetailPage_Load();
            //$("#PackageDetailPage").show();
        }
        else {
            //DbspOrVas(dbspeed);
            checkFlagProcess();

            if ($("#hdShowSPOntopPopup").val() == "ShowVoucher") {// Update 16.3 กรอก voucher ถูก ไม่มี Popup discount

                $('#tableOntopSEP').hide();
                $('#tableBunding').hide();
                $('#divSelectSPOntip').hide();
                $('#hdSelectSPONTOP').val("0");

                ShowPopUpOntop();
            }
            else {
                ShowSPOntopPopup();
            }


        }

    }

    var ua = window.navigator.userAgent;
    var iOS = !!ua.match(/iPad/i) || !!ua.match(/iPhone/i);
    var webkit = !!ua.match(/WebKit/i);
    var iOSSafari = iOS && webkit && !ua.match(/CriOS/i);

    function checkFlagProcess(){
        //18.12
        $.ajax({
            url: '/Process/CheckFlagProcess',
            data: {
                Type: $("#CustomerRegisterPanelModel_outType").val(),
                SubType: $("#CustomerRegisterPanelModel_outSubType").val(),
                MobileType: $("#CustomerRegisterPanelModel_SubNetworkType").val(),
                ServiceYearByDay: $("#CustomerRegisterPanelModel_SffServiceYear").val(),
                Mobile: $("#CoveragePanelModel_P_MOBILE").val()
            },
            dataType: "json",
            type: 'POST',
            async: false,
            success: function (data) {
                $("#CustomerRegisterPanelModel_FlagDopa").val(data.P_FLAG_DOPA);
                $("#CustomerRegisterPanelModel_FlagFaceRecognition").val(data.P_FLAG_FACE_RECOGNITION);
                $("#CustomerRegisterPanelModel_FlagTakePhoto").val(data.P_FLAG_TAKE_PHOTO);
                $("#CustomerRegisterPanelModel_FlagBrowseFile").val(data.P_FLAG_BROWSE_FILE);
                $("#CustomerRegisterPanelModel_FlagVarifyDocuments").val(data.P_FLAG_VARIFY_DOCUMENTS);

                if(data.P_FLAG_TAKE_PHOTO == "Y" && navigator.userAgent.indexOf("SamsungBrowser") == -1 && !iOSSafari && !iOS){
                    $.ajax({
                        type: "GET",
                        url: "/Process/get_usedData_flag",
                        dataType: "json",
                        success: function (data) {
                            if (data.result == 'YY') {

                                if (typeof aisNative == "undefined" || typeof aisNative == "" || typeof aisNative == null){
                                    $("label[for='fileTakePhoto']").show();
                                    $("label[for='filesignature']").hide();
                                }
                                else{
                                    $("label[for='fileTakePhoto']").hide();
                                    $("label[for='filesignature']").show();
                                    signatureShowFlag = true;
                                }
                            }
                            else {
                                $("label[for='fileTakePhoto']").show();
                                $("label[for='filesignature']").hide();
                            }
                        }
                    });

                    $("label[for='fileR2TakePhoto']").show();
                    $("label[for='fileR3TakePhoto']").show();
                    $("label[for='fileR4TakePhoto']").show();

                    $("label[for='fileBillTakePhoto']").show();
                    $("label[for='fileG1TakePhoto']").show();
                    $("label[for='fileG2TakePhoto']").show();
                    $("label[for='fileG3TakePhoto']").show();
                    $("label[for='fileG4TakePhoto']").show();
                    $("label[for='fileG5TakePhoto']").show();
                    $("label[for='fileG6TakePhoto']").show();

                    $("label[for='fileB1TakePhoto']").show();
                    $("label[for='fileB2TakePhoto']").show();
                    $("label[for='fileB3TakePhoto']").show();
                    $("label[for='fileB4TakePhoto']").show();
                    $("label[for='fileB5TakePhoto']").show();
                    $("label[for='fileB6TakePhoto']").show();
                    $("label[for='fileB7TakePhoto']").show();
                }
                else
                {
                    $("label[for='fileTakePhoto']").hide();
                    $("label[for='fileR2TakePhoto']").hide();
                    $("label[for='fileR3TakePhoto']").hide();
                    $("label[for='fileR4TakePhoto']").hide();
                    $("label[for='fileTakePhoto']").hide();

                    $("label[for='fileBillTakePhoto']").hide();
                    $("label[for='fileG1TakePhoto']").hide();
                    $("label[for='fileG2TakePhoto']").hide();
                    $("label[for='fileG3TakePhoto']").hide();
                    $("label[for='fileG4TakePhoto']").hide();
                    $("label[for='fileG5TakePhoto']").hide();
                    $("label[for='fileG6TakePhoto']").hide();

                    $("label[for='fileB1TakePhoto']").hide();
                    $("label[for='fileB2TakePhoto']").hide();
                    $("label[for='fileB3TakePhoto']").hide();
                    $("label[for='fileB4TakePhoto']").hide();
                    $("label[for='fileB5TakePhoto']").hide();
                    $("label[for='fileB6TakePhoto']").hide();
                    $("label[for='fileB7TakePhoto']").hide();
                }

                if(data.P_FLAG_BROWSE_FILE == "Y" && (typeof aisNative == "undefined" || typeof aisNative == "" || typeof aisNative == null))
                {
                    $("label[for='file']").show();
                    $("label[for='fileR2']").show();
                    $("label[for='fileR3']").show();
                    $("label[for='fileR4']").show();

                    $("label[for='fileBill']").show();
                    $("label[for='fileG1']").show();
                    $("label[for='fileG2']").show();
                    $("label[for='fileG3']").show();
                    $("label[for='fileG4']").show();
                    $("label[for='fileG5']").show();
                    $("label[for='fileG6']").show();

                    $("label[for='fileB1']").show();
                    $("label[for='fileB2']").show();
                    $("label[for='fileB3']").show();
                    $("label[for='fileB4']").show();
                    $("label[for='fileB5']").show();
                    $("label[for='fileB6']").show();
                    $("label[for='fileB7']").show();
                }
                else
                {
                    $("label[for='file']").hide();
                    $("label[for='fileR2']").hide();
                    $("label[for='fileR3']").hide();
                    $("label[for='fileR4']").hide();

                    $("label[for='fileBill']").hide();
                    $("label[for='fileG1']").hide();
                    $("label[for='fileG2']").hide();
                    $("label[for='fileG3']").hide();
                    $("label[for='fileG4']").hide();
                    $("label[for='fileG5']").hide();
                    $("label[for='fileG6']").hide();

                    $("label[for='fileB1']").hide();
                    $("label[for='fileB2']").hide();
                    $("label[for='fileB3']").hide();
                    $("label[for='fileB4']").hide();
                    $("label[for='fileB5']").hide();
                    $("label[for='fileB6']").hide();
                    $("label[for='fileB7']").hide();
                }

            }
        });
    }

    function onSelectPlayBox_Click(option) {

        if (option == 1) {

            //Set Flag Select PlayBox
            $("#hdSelectPlayBox").val("1");
            if (flagLoadDB) {
                $("#divPlayBoxPopUp").hide();
                $("#divDoubleSpeedPopUp").show();
            }
            else if (flagLoadVas) {
                $("#divPlayBoxPopUp").hide();
                $("#divVasPopUp").show();

                var div1 = $('#simplemodal-container');
                div1.css('width', '550px');

                if ($("#LanguagePage").val() == "1")
                    div1.css('height', '340px');
                else
                    div1.css('height', '355px');
            }
            else {
                //Change Page
                $(".simplemodal-close").click();

                $("#page2").hide();
                onLoad003();
                $("#page3").show();
            }
        }
        else {

            //Set Flag Select PlayBox
            $("#hdSelectPlayBox").val("0");
            if (flagLoadDB) {
                $("#divPlayBoxPopUp").hide();
                $("#divDoubleSpeedPopUp").show();
            }
            else if (flagLoadVas) {
                $("#divPlayBoxPopUp").hide();
                $("#divVasPopUp").show();

                var div1 = $('#simplemodal-container');
                div1.css('width', '550px');

                if ($("#LanguagePage").val() == "1")
                    div1.css('height', '340px');
                else
                    div1.css('height', '355px');
            }
            else {
                //Change Page
                $(".simplemodal-close").click();

                $("#page2").hide();
                onLoad003();
                $("#page3").show();
            }
        }
    }

    function onSelectDoubleSpeed_Click() {
        if (flagLoadVas) {
            $("#divDoubleSpeedPopUp").hide();
            $("#divVasPopUp").show();

            var div1 = $('#simplemodal-container');
            div1.css('width', '550px');

            if ($("#LanguagePage").val() == "1")
                div1.css('height', '340px');
            else
                div1.css('height', '355px');
        }
        else {
            //Change Page
            $(".simplemodal-close").click();

            $("#page2").hide();
            onLoad003();
            $("#page3").show();
        }
    }

    function onSelectVas_Click(option) {
        if (option == 1) {
            //Select VAS
            $('#hdSelectVas').val("0");
            $("#page2").hide();
            onLoadPage2_1();
            $("#page2_1").show();
            window.scrollTo(0, 0); //scroll page to top
        }
        else {
            //Not Select VAS
            $('#hdSelectVas').val("1");
            $("#page2").hide();
            onLoad003();
            $("#page3").show();
            window.scrollTo(0, 0); //scroll page to top
        }
    }

    var flagLoadPB = false;
    var flagLoadDB = false;
    var flagLoadVas = false;

    function ShowPopUpOntop() {

        flagLoadPB = false;
        flagLoadDB = false;
        flagLoadVas = false;
        flagjohnPB = false;

        $("#hdSelectPlayBox").val("0");
        $('#hdSelectVas').val("1");


        //16.3ส่งค่าไปหน้าCustomerRegister
        var chk = $("input[name=SelectPackage]:checked").val();

        var ee = $("input[name=SelectOntopRadioSP]:checked").val();
        var sff_promotion_code = $('#SFF_PROMOTION_CODE' + ee).val();
        var promotionCode = $('#hdPackageCode').val();
        var strpromotionCode = promotionCode.split(',');

        var lovFlagPB_SSO = "@SHOW_POPUP_PLAYBOX_SSO" == "Y" ? true : false;
        var lovFlagPB_Cust = "@SHOW_POPUP_PLAYBOX_CUST" == "Y" ? true : false;
        var lovFlagDB_SSO = "@SHOW_POPUP_DOUBLE_SPEED_SSO" == "Y" ? true : false;
        var lovFlagDB_Cust = "@SHOW_POPUP_DOUBLE_SPEED_CUST" == "Y" ? true : false;
        var lovFlagVas_SSO = "@SHOW_POPUP_SELECT_VAS_SSO" == "Y" ? true : false;
        var lovFlagVas_Cust = "@SHOW_POPUP_SELECT_VAS_CUST" == "Y" ? true : false;



        var lovFlag_Cust_Home = "@SHOW_POPUP_SELECT_VAS_CUST_HOME" == "Y" ? true : false;
        var lovFlag_SSO_Home = "@SHOW_POPUP_SELECT_VAS_SSO_HOME" == "Y" ? true : false;
        var lovFlag_SSO_Pro = "@SHOW_POPUP_SELECT_VAS_SSO_PRO" == "Y" ? true : false;
        var lovFlag_Cust_Pro = "@SHOW_POPUP_SELECT_VAS_CUST_PRO" == "Y" ? true : false;

        //PlayBox
        var i = $("input[name=SelectPackage]:checked").val();
        var mc = $("#MAPPING_CODE" + i).val();
        var owner = $("#OWNER_PRODUCT" + i).val();
        var findOntop = $("[name=SelectOntop" + mc + owner + "]");
        var findV = $("[name=SelectV" + mc + owner + "]");
        var hasPlayBox = false;
        var hasPlayBox2 = false;
        var recurring = "";
        var strMonth = "";
        var playBoxDetail = "@Html.Raw(L_POPUP_PLAYBOX_DETAIL)";



        if ("@ViewBag.Vas" == "") {
            if (lovFlagPB_Cust) {

                $.each(findOntop, function (i, e) {
                    if ($("#PRODUCT_SUBTYPE_" + mc + e.value).val() == "PBOX") {
                        hasPlayBox = true;
                        recurring = $("#RECURRING_CHARGE" + mc + e.value).val();
                    }
                });

                if (hasPlayBox) {

                    strMonth = parseInt(recurring, 10) > 1 ? "@L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTHS" : "@L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTH";
                    $("#lblPlayBoxDetailPopup").html(playBoxDetail + " " + recurring + " " + strMonth);

                    flagLoadPB = true;
                }
            }
        }
        else {
            if (lovFlagPB_SSO) {

                $.each(findOntop, function (i, e) {
                    if ($("#PRODUCT_SUBTYPE_" + mc + e.value).val() == "PBOX") {
                        hasPlayBox = true;
                        recurring = $("#RECURRING_CHARGE" + mc + e.value).val();
                    }
                });

                if (hasPlayBox) {

                    strMonth = parseInt(recurring, 10) > 1 ? "@L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTHS" : "@L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTH";
                    $("#lblPlayBoxDetailPopup").html(playBoxDetail + " " + recurring + " <b>" + strMonth);

                    flagLoadPB = true;
                }
            }
        }
        //End Play Box

        //DoubleSpeed
        if (lovFlagDB_SSO) {
            //flagLoadDB = true;
            //load Double Speed
        }
        //End DoubleSpeed

        //Vas
        if ("@ViewBag.Vas" == "" || "@ViewBag.Vas" == "3") {
            if (lovFlagVas_Cust) {
                if ($("[name=SelectV" + mc + "]").length > 0) {
                    flagLoadVas = true;
                }

                $.each(findOntop, function (i, e) {
                    if ($("#PRODUCT_SUBTYPE_" + mc + e.value).val() == "PBOX") {
                        hasPlayBox2 = true;
                        recurring = $("#RECURRING_CHARGE" + mc + e.value).val();
                    }
                });
                $.each(findV, function (i, e) {
                    if ($("#PRODUCT_SUBTYPE_" + mc + e.value).val() == "VOIP") {
                        hasPlayBox2 = true;
                    }
                });

                if (hasPlayBox2) {

                    strMonth = parseInt(recurring, 10) > 1 ? "@L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTHS" : "@L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTH";
                    $("#lblPlayBoxDetailPopup").html(playBoxDetail + " " + recurring + " " + strMonth);

                    flagjohnPB = true;
                }
            }

        }
        else {
            if (lovFlagVas_SSO) {
                if ($("[name=SelectV" + mc + owner + "]").length > 0 && "@ViewBag.Vas" == "1") {
                    flagLoadVas = true;
                }

                $.each(findOntop, function (i, e) {
                    if ($("#PRODUCT_SUBTYPE_" + mc + e.value).val() == "PBOX") {
                        hasPlayBox2 = true;
                        recurring = $("#RECURRING_CHARGE" + mc + e.value).val();
                    }
                });
                $.each(findV, function (i, e) {
                    if ($("#PRODUCT_SUBTYPE_" + mc + e.value).val() == "VOIP") {
                        hasPlayBox2 = true;
                    }
                });

                if (hasPlayBox2) {

                    strMonth = parseInt(recurring, 10) > 1 ? "@L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTHS" : "@L_ONTOP_PLAYBOX_DISCOUNT_HOOQ_MONTH";
                    $("#lblPlayBoxDetailPopup").html(playBoxDetail + " " + recurring + " " + strMonth);

                    flagjohnPB = true;
                }
            }
        }
        //End Vas

        var flagShowPopUp = false;
        var i = $("input[name=SelectPackage]:checked").val();
        var pgGroup = $("#PACKAGE_GROUP" + i).val();//.split(' ')[0];

        if ("@Model.SummaryPanelModel.VAS_FLAG" == "" || "@Model.SummaryPanelModel.VAS_FLAG" == "3") {
            //Cust
            //if (pgGroup == "Home") {
            //    flagShowPopUp = lovFlag_Cust_Home;
            //}
            //else {
            //    flagShowPopUp = lovFlag_Cust_Pro;
            //}
            var dd = GetAllowPopup(pgGroup, "CUST");
            flagShowPopUp = dd == "Y" ? true : false;
        }
        else if ("@Model.SummaryPanelModel.VAS_FLAG" == "1") {
            //SSO
            //if (pgGroup == "Home") {
            //    flagShowPopUp = lovFlag_SSO_Home;
            //}
            //else {
            //    flagShowPopUp = lovFlag_SSO_Pro;
            //}
            var dd = GetAllowPopup(pgGroup, "SSO");
            flagShowPopUp = dd == "Y" ? true : false;
        }
        else if ("@Model.TopUp" == "5") {
            // officer
            var dd = GetAllowPopup(pgGroup, "SALE");
            flagShowPopUp = dd == "Y" ? true : false;
        }
        else if ("@Model.SummaryPanelModel.VAS_FLAG" == "6") {
            // officer
            var dd = GetAllowPopup(pgGroup, "STAFF");
            flagShowPopUp = dd == "Y" ? true : false;
        }

        //console.log(flagLoadPB + " " + flagLoadDB + " " + flagLoadVas + " " + flagjohnPB + " |" + flagShowPopUp + "|");
        if ((flagLoadPB || flagLoadDB || flagLoadVas || flagjohnPB) && flagShowPopUp) {

            // UnComment this if want to show pop up
            //-----------------------------------------
            //$('#divSelectVas').modal('show');
            //-----------------------------------------

            if (flagLoadPB) {
                $("#divPlayBoxPopUp").show();
                var div1 = $('#simplemodal-container');
                div1.css('width', '550px');
                div1.css('height', '420px');
                div1.css('margin-left', '5%');
                div1.css('margin-top', '-5%');
            }
            else if (flagLoadDB) {
                $("#divDoubleSpeedPopUp").show();
            }
            else {

                $.each(findOntop, function (i, e) {
                    if ($("#PRODUCT_SUBTYPE_" + mc + e.value).val() == "PBOX") {
                        hasPlayBox = true;
                        recurring = $("#RECURRING_CHARGE" + mc + e.value).val();
                    }
                });

                $("#divVasBoth").hide();
                $("#divVasVoip").hide();
                $("#divVasPlayBox").hide();

                var flagShowVoip = false;
                var flagShowPB = false;

                if ("@VAS" == "1") {
                    //SSO
                    flagShowVoip = "@SHOW_ICON_FIXEDLINE_SSO_REGISTER" == "Y" ? true : false;
                    flagShowPB = "@SHOW_ICON_PLAYBOX_SSO_REGISTER" == "Y" ? true : false;
                }
                else {
                    //Cus
                    flagShowVoip = "@SHOW_ICON_FIXEDLINE_CUST_REGISTER" == "Y" ? true : false;
                    flagShowPB = "@SHOW_ICON_PLAYBOX_CUST_REGISTER" == "Y" ? true : false;
                }

                if (hasPlayBox == false) {
                    if (flagShowVoip) {
                        $("#divVasVoip").show();
                    }
                }
                else {
                    if (flagShowVoip == true && flagShowPB == true) {
                        $("#divVasBoth").show();
                    }
                    else if (flagShowVoip) {
                        $("#divVasVoip").show();
                    }
                    else if (flagShowPB) {
                        $("#divVasPlayBox").show();
                    }
                }

                $('#hdSelectVas').val("0");
                $("#page2").hide();
                onLoadPage2_1();
                $("#page2_1").show();
                window.scrollTo(0, 0); //scroll page to top

                //script Adobe Analytic
                var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
                digitalData.page = {
                    pageInfo: {
                        pageName: "newfibre:" + lang + ":SelectVas",
                        site: "newfibre",
                        language: lang
                    }
                }
                console.log("page load select vas : ", lang);


                // UnComment this if want to show pop up
                //-----------------------------------------
                //$("#divVasPopUp").show();

                //var div1 = $('#simplemodal-container');
                //div1.css('width', '550px');

                //if ($("#LanguagePage").val() == "1")
                //    div1.css('height', '340px');
                //else
                //    div1.css('height', '375px');
                //------------------------------------------
            }
        }
        else {
            if ($("#haveInstallPlayBoxAutoMapping").val() != "Y") {
                $("#hdGetPlayBox").val(0);
            }
            $("#hdGetBPL").val(0);
            $("#page2").hide();
            onLoad003();
            $("#page3").show();
        }

    }

    function DbspOrVas(dbspeed) {
        $("#dbspeedPane").empty();
        var playBox = false;
        var i = $("input[name=SelectPackage]:checked").val();
        var pgGroup = $("#PACKAGE_GROUP" + i).val().split(' ')[0];
    }

    function openPopupVasDbsp(dbspeed) {
        $('#divSelectVas').modal("show");
        $('#divSelectVas').css('display', 'block');
        var div1 = $('#simplemodal-container');
        div1.css('width', '500px');
        div1.css('margin-left', '10%');

        $("#lineBtn1").show();
        $("#lineBtn2").hide();

        if (dbspeed) {
            appendDbsp();
            div1.css('height', '490px');
            $('#divSelectVas fieldset').css('height', '453px');
        }
        else {
            div1.css('height', '165px');
        }
    }

    function openPopupDbsp() {
        $('#divSelectVas').modal('show');
        $('#divSelectVas').css('display', 'block');
        var div1 = $('#simplemodal-container');
        div1.css('width', '500px');
        div1.css('margin-left', '10%');

        $("#lineBtn1").hide();
        $("#lineBtn2").show();

        appendDbsp();
        div1.css('height', '440px');
        $('#divSelectVas fieldset').css('height', '403px');
    }

    function appendDbsp() {
        $("#IsDbSp").val("Y");
        var i = $("input[name=SelectPackage]:checked").val();
        var downSp = $("#DOWNLOAD_SPEED" + i).val();
        var upSp = $("#UPLOAD_SPEED" + i).val();
        var d = parseFloat(downSp.split(' ')[0]);
        var u = upSp.split(' ')[0];
        var d2 = d * 2;
        var recurr = $("#RECURRING_CHARGE" + i).val();
        var head = $("#PACKAGE_GROUP" + i).val().split(' ')[0] + " " + "@M_DOUBLE_SPEED3";

        $("#dbspeedPane").html("@M_DOUBLE_SPEED1<br>@M_DOUBLE_SPEED2<br>" +
                "<table align='center' width='380' cellpadding='6' cellspacing='2' style='margin-top:6px;'><tr bgcolor='#bbe0e3'><th colspan='3'>" + head + "</th></tr>" +
                "<tr bgcolor='#e7f3f4'><td align='center'>@M_DOUBLE_SPEED4<br>@M_DOUBLE_SPEED6</td><td align='center'>@M_DOUBLE_SPEED5<br>@M_DOUBLE_SPEED6</td><td align='center'><b>Monthly Fee<br>(THB)</b></td></tr>" +
                "<tr bgcolor='#f3f9fa'><td align='center'>" + d + "/" + u + "</td><td align='center'>" + d2 + "/" + u + "</td><td align='center'><b>" + parseFloat(recurr) + "</b></td></tr>" +
                "</table>" +
                "" +
                "<p align='left' class='condDbsp'><u>@C_DOUBLE_SPEED1</u>" +
                "<br>@C_DOUBLE_SPEED2" +
                "<br>@C_DOUBLE_SPEED3" +
                "<br>@C_DOUBLE_SPEED4" +
                "<br>@C_DOUBLE_SPEED5" +
                "<br>@C_DOUBLE_SPEED6" +
                "</p>" +
                "");
    }

    function backPage002() {
        $("#optionInstallationBody").empty();
        $("#optionEntryFeeBody").empty();
        $("#dynamicBody002").empty();
        $("#lb002-1").text("");
        $("#page2").hide();
        $("#FromCoverageFBBxEOS").val("");
        $("#WTTX_COVERAGE_RESULT").val("");
        //18.8
        $("#chkPremiumInstall").removeAttr('checked');
        $("#txtReferURNo").val("");
        $("#txtReferURNo").attr("readonly", true);
        //20.3 Service Level
        $("#ServiceLevel").val($("#ServiceLevel_Initial").val());
        $("#ServiceLevel_Flag").val($("#ServiceLevel_Flag_Initial").val());
        displayServiceLevel_Checkcoverage();
        //FTTR
        $("#CoverageAreaResultModel_SPLITTER_3BB_JSON").val("");
        $("#L_SplitterListStr").val("");
        $("#CoverageAreaResultModel_IS_3BB_COVERAGE").val("");
        $("#CoveragePanelModel_L_FLOWFLAG").val("");
        $("#CoveragePanelModel_CoverageResult").val("");
        $("#ZTEPartnerName").val("");
        $('#Is3bbCoverage').val("");
        $("#ZTEAccessModeSerializer").val("");
        $("#CoveragePanelModel_Address_AddressId").val("");
        $("#ZTEAddressID").val("");
        $("#P_addrtype").val("");
        $("#ZTEPartnerName").val("");
        $('#Is3bbCoverage').val("");
        $('#CoveragePanelModel_L_SITECODE').val("");

        //Set
        $("#ZTEPartnerName").val("");
        $('#Is3bbCoverage').val("");

        if ('@FromCoverageFBBxEOS' == 'Y') {
            onBuildChange();
        }
        //TODO: R18.1 FTTB Sell Router
        //if ($("#ActiveSellRouterFlag").val() == "Y" && $('#TopUp').val() == "5") {
        //    $("#pageSelectRouter").show();
        //}
        //else {
            $("#page1").show();
            if ('@Model.TopUp' == "7") {//เส้นEngineer
                $(".wrapSwitchLanguage").show();
            }
            else if ('@ViewBag.Vas' == "6") {//เส้นStaff
                $(".wrapSwitchLanguage").show();
            }

            if ($("#R_OTHER").is(":checked")) {//checkแผนที่ให้ back กลับเป็น condo
                $("#R_BUILD").prop("checked", true);
                onBuildChange();
            }
            $('#UseMap').val("");
            $('#Is3bbCoverage').val("");
            $('#tempSplitter3BB').html("");
            $('#tempSplitterMap').html("");
            $("#L_SplitterListStr").val("");

            if ('@Model.TopUp' == "5") // officer
            {
                $("#L_EVENT_CODE").val("");
                $("#L_EVENT_CODE").trigger("focusout");
                $("#CoveragePanelModel_Address_L_BUILD_NAME_Hied").val("");
                if ($("input[name*='CustomerRegisterPanelModel_L_CHECK_EVENT_CODE']:checked").val())
                    $("#chkEventCode").click();
                $('#PlayBox_Serial').val("");
                $("#CPE_Serial").val("");
        }
        //if ($("#WTTX_COVERAGE_RESULT").val() == "YES") {
        //    $("#WTTx_Serial").removeClass("form-control errorinput ").addClass("form-control");
        //}
        //}
    }

    // etc function

    // get total number of days in month.
    // month is 1 based.
    function getDaysInMonth(month, year) {
        return new Date(year, month, 0).getDate();
    }

    function showjpopup(width_, height_) {
        $('#basic-modal-content').modal('show');
        $('#basic-modal-content').css('display', 'block');
        var div1 = $('#simplemodal-container');
        if (width_ != null) { div1.css('width', width_); }
        if (height_ != null) { div1.css('height', height_); }

        div1.css('margin-left', '10%');

        return false;
    }

    function GetPackageCode() {

        $.ajax({
            type: "GET",
            url: "/SelectPackage/GetPromotionCode",
            dataType: "json",
            async: false,
            success: function (data) {

                if (data.length != 0) {
                    var promotionCode = [];
                    promotionCode = data;
                    $('#hdPackageCode').val(promotionCode);
                }

            }
        });

    }

    function ShowSPOntopPopup() {

        GetPackageCode();
        var ee = $("input[name=SelectPackage]:checked").val();
        var ee2 = $("input[name=SelectOntopRadioSP]:checked").val();
        var mc = $("#MAPPING_CODE" + ee).val();
        var ow = $("#OWNER_PRODUCT" + ee).val();
        var findOntopSP = $("[name=SelectOntopSP" + mc + ow + "]");
        var ps3 = $("#PRODUCT_SUBTYPE3_" + ee).val();
        var flag = false;
        var ff3 = true;
        var ff4 = true;
        var sl4 = "";
        var sl3 = "";
        var strResultSP = "";
        var strResultSPBundling = "";
        var i = 0;
        var l = 0;
        var promotionCode = $('#hdPackageCode').val();
        var strpromotionCode = promotionCode.split(',');
        var sff_promotion_code = $('#SFF_PROMOTION_CODE' + ee2).val();

        $("#tableBunding").empty();
        $("#tableOntopSEP").empty();

        if ("@ViewBag.Vas" == "3") {
            sessionStorage.setItem("type", "AIS");
        }

        if (FlagOntopSP && findOntopSP.length > 0) {
            ////ส่วนลดธรรมดา

            $.each(findOntopSP, function (i, e) {

                if ("@Model.TopUp" == "5") {
                    sl3 = "checked";
                    if (ff3) { sl3 = "checked"; ff3 = false; }
                }
                else {
                    sl3 = "";
                    if (ff3) { sl3 = "checked"; ff3 = false; }
                }

                var namePro = "";
                var SFF_PROMOTION_CODE = "";
                SFF_PROMOTION_CODE = $("#SFF_PROMOTION_CODE" + mc + e.value + "SP").val();

                var Code = strpromotionCode.indexOf(SFF_PROMOTION_CODE);
                if (Code < 0) {
                    if ($("#LanguagePage").val() == "1") {
                        namePro = $("#SFF_PROMOTION_BILL_THA" + mc + e.value + "SP").val();
                    }
                    else {
                        namePro = $("#SFF_PROMOTION_BILL_ENG" + mc + e.value + "SP").val();
                    }

                    strResultSP += "<label class='radio-inline' style='font-weight: normal !important;'>" +
                           "<input type='radio' name='SelectOntopRadioSP' id='SelectOntopRadioSP" + i + "' " + sl3 + " value='" + mc + e.value + "SP" + "'>" + namePro + "</label>" + "<p class='clearfix'></p>";
                }

            });

            $("#divSelectSPOntip").find("#tableOntopSEP").html("");
            $("#divSelectSPOntip").find("#tableOntopSEP").html(strResultSP);
            var chkSerenade = $("#HdchkSerenade_Flag").val();

            ////Bunding

            if ((chkSerenade == "Y" || chkSerenade == "N") && $('#CustomerRegisterPanelModel_Project_name').val() == "") {  //if 0 นำหน้า
                var PackageType = "";
                $.each(findOntopSP, function (i, e) {
                    packageType = $("#PACKAGE_TYPE" + mc + e.value + "SP").val();
                });
                if (packageType == "Ontop Special") {//check Package type == "Ontop Special"
                    var onCus_type = sessionStorage.getItem("type");


                    $.each(findOntopSP, function (l, e) {

                        if ("@Model.TopUp" == "5") {
                            if (strResultSP != "") {
                                sl4 = "";
                            }
                            else {
                                if (ff4) { sl4 = "checked"; ff4 = false; }
                            }
                        }
                        else {
                            if (ff4) { sl4 = "checked"; ff4 = false; }
                        }

                        var namePro = "";
                        var SFF_PROMOTION_CODE = "";
                        SFF_PROMOTION_CODE = $("#SFF_PROMOTION_CODE" + mc + e.value + "SP").val();

                        var Code = strpromotionCode.indexOf(SFF_PROMOTION_CODE);
                        if (Code >= 0) {
                            if ($("#LanguagePage").val() == "1") {
                                namePro = $("#SFF_PROMOTION_BILL_THA" + mc + e.value + "SP").val();
                            }
                            else {
                                namePro = $("#SFF_PROMOTION_BILL_ENG" + mc + e.value + "SP").val();
                            }

                            strResultSPBundling += "<label class='radio-inline' style='font-weight: normal !important;'>" +
                                   "<input type='radio' name='SelectOntopRadioSP' id='SelectOntopRadioSP" + l + "' " + sl4 + " value='" + mc + e.value + "SP" + "'>" + namePro + "</label>" + "<p class='clearfix'></p>";
                        }

                    });
                    $("#divSelectSPOntip").find("#tableBunding").html("");
                    $("#divSelectSPOntip").find("#tableBunding").html(strResultSPBundling);
                }
            }

            var onCus_type = sessionStorage.getItem("type");
            if (onCus_type == "NEW"
                || onCus_type == null
                || onCus_type == "") {//ลุกค้าใหม่
                //alert("NEW");

                if (("@ViewBag.Vas" == "" && "@Model.TopUp" == "") || ("@ViewBag.Vas" == "3" && $("#PACKAGE_TYPE" + $("input[name=SelectPackage]:checked").val()).val() != "TRIPLE")) { // ลูกค้าธรรมดา กับ ลูกค้าเข้า triple
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_CUST_NEW" == "Y") {

                        if (strResultSP == "") {
                            $('#tableOntopSEP').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').show();
                            $('#tableBunding').hide();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@ViewBag.Vas" == "1") {
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_SSO_NEW" == "Y") {
                        if (strResultSP == "") {
                            $('#tableOntopSEP').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').show();
                            $('#tableBunding').hide();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@Model.TopUp" == "5") { // officer line
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_SALE_NEW" == "Y") {
                        if (strResultSP == "") {
                            $('#tableOntopSEP').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').show();
                            $('#tableBunding').hide();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@ViewBag.Vas" == "6") {  // staff line
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_NEW" == "Y") {
                        if (strResultSP == "") {
                            $('#tableOntopSEP').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').show();
                            $('#tableBunding').hide();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@Model.TopUp" == "7") { // Engineer line
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_ENG_NEW" == "Y") {
                        if (strResultSP == "") {
                            $('#tableOntopSEP').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').show();
                            $('#tableBunding').hide();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }

            }

            else if (onCus_type == "AIS") {//ลูกค้าเก่า
                // alert("AIS");

                if (("@ViewBag.Vas" == "" && "@Model.TopUp" == "") || ("@ViewBag.Vas" == "3" && $("#PACKAGE_TYPE" + $("input[name=SelectPackage]:checked").val()).val() != "TRIPLE")) {

                    // ลูกค้าธรรมดา กับ ลูกค้าเข้า triple
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_CUST_EXISTING" == "Y") {
                        if (strResultSPBundling == "") {
                            $('#tableBunding').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').hide();
                            $('#tableBunding').show();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@ViewBag.Vas" == "3") {// ลูกค้า triple
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_TRIPLE_EXISTING" == "Y") {
                        if (strResultSPBundling == "") {
                            $('#tableBunding').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').hide();
                            $('#tableBunding').show();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@ViewBag.Vas" == "1") {//เส้นTopup
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_SSO_EXISTING" == "Y") {
                        if (strResultSPBundling == "") {
                            $('#tableBunding').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').hide();
                            $('#tableBunding').show();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@Model.TopUp" == "5") { // officer line
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_SALE_EXISTING" == "Y") {
                        if (strResultSPBundling == "" && strResultSP == "") {
                            $('#tableBunding').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').show();
                            $('#tableBunding').show();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@ViewBag.Vas" == "6") {  // staff line
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_STAFF_EXISTING" == "Y") {
                        if (strResultSPBundling == "") {
                            $('#tableBunding').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').hide();
                            $('#tableBunding').show();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else if ("@Model.TopUp" == "7") { // Engineer line
                    if ("@SHOW_POPUP_SPECIAL_DISCOUNT_ENG_EXISTING" == "Y") {
                        if (strResultSPBundling == "") {
                            $('#tableBunding').hide();
                            $('#divSelectSPOntip').hide();
                            $('#hdSelectSPONTOP').val("0");
                            ShowPopUpOntop();
                        }
                        else {
                            $('#divSelectSPOntip').modal();
                            $('#tableOntopSEP').hide();
                            $('#tableBunding').show();
                        }
                    }
                    else {
                        $('#divSelectSPOntip').hide();
                        $('#hdSelectSPONTOP').val("0");
                        ShowPopUpOntop();
                    }
                }
                else {
                    $('#divSelectSPOntip').hide();
                    $('#hdSelectSPONTOP').val("0");
                    ShowPopUpOntop();
                }
            }
        }
        else if (isNoRouter) {
            //$('#divSelectSPOntip').modal();
            $('#divSelectSPOntip').hide();
            //$('#hdSelectSPONTOP').val("0");
            ShowPopUpOntop();
        }
        else {
            $('#divSelectSPOntip').hide();
            $('#hdSelectSPONTOP').val("0");
            ShowPopUpOntop();
        }
    }


    function Calculate_Discount(type, value, keyMain) {

        if (type == "PCT") {

            var dis = (parseFloat($('#RECURRING_CHARGE' + keyMain).val()) * parseFloat(value)) / 100;
            var total = parseFloat($('#RECURRING_CHARGE' + keyMain).val()) - dis;
            return total;
        }
        else if (type == "MNY") {
            var total = parseFloat($('#RECURRING_CHARGE' + keyMain).val()) - value;
            return total;
        }
        else if (type == "PAID") {
            var total = parseFloat(value);
            return total;
        }
    }


    function GetAllowPopup(group, line) {
        var result = "N";
        $.ajax({
            type: "GET",
            url: "/SelectPackage/GetAllowPopup",
            data:
            {
                Packgrop: group,
                line: line
            },
            dataType: "json",
            async: false,
            success: function (data) {

                if (data.length == 0) {
                    result = "N";
                }
                else {
                    result = data[0].DisplayValue;

                }
            }
        });

        return result;
    }

    function GetTopUpVasFlag() {
        alert("ViewBag.TopUp = " + "@ViewBag.TopUp");
        alert("ViewBag.Vas = " + "@ViewBag.Vas");
        alert("Model.TopUp = " + "@Model.TopUp");
        alert("Model.SummaryPanelModel.TOPUP = " + "@Model.SummaryPanelModel.TOPUP");
        alert("Model.SummaryPanelModel.VAS_FLAG = " + "@Model.SummaryPanelModel.VAS_FLAG");
    }

    function GetCategory() {
        $('#HdchkAC_Category').val("");

        if ($("#CoveragePanelModel_ChargeType").val() == "POSTPAID") {
            var accountCategory = $('#Customer_NonResFlag').val() == '@NON_RESIDENTIAL_NONRESFLAG_YES' ? '@NON_RESIDENTIAL_CARDTYPE' : $("#CustomerRegisterPanelModel_AccountCategory").val();
            $.ajax({
                url: '/SelectPackage/GetACC_CATEGORY',
                data: { ACC_CATEGORY: accountCategory  },
                dataType: "json",
                type: 'POST',
                async: false,
                success: function (data) {
                    if (data != "" && data != null) {
                        $('#HdchkAC_Category').val(data);
                    }
                }
            });
        }
        else {
            $('#HdchkAC_Category').val("");
        }
    }

    function sortResults(data, prop, asc) {
        return data.sort(function (a, b) {
            if (asc) {
                return (a[prop] > b[prop]) ? 1 : ((a[prop] < b[prop]) ? -1 : 0);
            } else {
                return (b[prop] > a[prop]) ? 1 : ((b[prop] < a[prop]) ? -1 : 0);
            }
        });
    }

    function GetPackageCodeAutoMapping() {
        var result = "";
        $.ajax({
            type: "GET",
            url: "/SelectPackage/GetPromotionCode",
            dataType: "json",
            async: false,
            success: function (data) {

                if (data.length != 0) {
                    var promotionCode = [];
                    promotionCode = data;
                    result = promotionCode;
                }

            }
        });
        return result;
    }

    function GetConfigShowOptionInstall() {
        var result = [];
        $.ajax({
            type: "GET",
            url: "/SelectPackage/GetLovConfigShowOptionInstallJsonData",
            dataType: "json",
            async: false,
            success: function (data) {

                if (data.length != 0) {
                    $.each(data, function (i, item) {
                        result.push(item.LovValue1);
                    });
                }

            }
        });
        return result;
    }

    function GetConfigDetailFreeInstall(productCode) {
        $.ajax({
            type: "POST",
            url: "/SelectPackage/GetLovConfigDetailFreeInstall",
            data: { productCode: productCode },
            dataType: "json",
            async: false,
            success: function (data) {
                $("#divFreeInstall").html("");
                $("#divFreeInstall").html(data);
            }
        });
    }

    function sortJson(element, prop, propType, asc) {
        switch (propType) {
            case "int":
                element = element.sort(function (a, b) {
                    if (asc) {
                        return (parseInt(a[prop]) > parseInt(b[prop])) ? 1 : ((parseInt(a[prop]) < parseInt(b[prop])) ? -1 : 0);
                    } else {
                        return (parseInt(b[prop]) > parseInt(a[prop])) ? 1 : ((parseInt(b[prop]) < parseInt(a[prop])) ? -1 : 0);
                    }
                });
                break;
            default:
                element = element.sort(function (a, b) {
                    if (asc) {
                        return (a[prop].toLowerCase() > b[prop].toLowerCase()) ? 1 : ((a[prop].toLowerCase() < b[prop].toLowerCase()) ? -1 : 0);
                    } else {
                        return (b[prop].toLowerCase() > a[prop].toLowerCase()) ? 1 : ((b[prop].toLowerCase() < a[prop].toLowerCase()) ? -1 : 0);
                    }
                });
        }
    }

    function CheckKeyUps(id, RexStr) {
        var strKey = $("#" + id).val();
        var strBuilder = "";
        var filter = new RegExp(RexStr);
        for (var i = 0; i < strKey.length; i++) {
            if (filter.test(strKey.substr(i, 1))) {
                strBuilder += strKey.substr(i, 1);
            }
        }
        $("#" + id).val(strBuilder);
    }

    function displayRefURNo()
    {
        if ($("#txtReferURNo").hasClass('form-control errorinput'))
            $("#txtReferURNo").removeClass('form-control errorinput').addClass('form-control');

        var checkBox = document.getElementById("chkPremiumInstall");
        if (checkBox.checked == true){
            $("#txtReferURNo").attr("readonly", false)
        } else {
            $("#txtReferURNo").val("");
            $("#txtReferURNo").attr("readonly", true)
        }

        checkServiceLevel();
    }

    function checkPremiumArea(i) {
        var lang = $("#LanguagePage").val() == 1 ? "T" : "E";
        $.ajax({
            url: '/SelectPackage/CheckPremiumArea',
            data: {
                SubDistrict: $('#COVERAGE_L_TUMBOL :selected').text(),
                District: $('#COVERAGE_L_AMPHUR :selected').text(),
                Province: $('#COVERAGE_L_PROVINCE :selected').text(),
                PostalCode: $("#CoveragePanelModel_Address_L_ZIPCODE :selected").text(),
                Language: lang
            },
            dataType: "json",
            type: 'POST',
            async: false,
            success: function (data) {
                if (data.outReturnCode == "0" && data.outReturnPremiumConfig.length > 0
                    && listPremiumByTechnology.indexOf($("#ACCESS_MODE" + i).val()) > -1) {
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("@FBB_Con_PREMIUM_FLAG");
                }
                else {
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("N");
                }
            }
        });
    }

    function CheckPremiumInstall()
    {
        if ("@Model.TopUp" == "5") {
            var checkBox = document.getElementById("chkPremiumInstall");
            if (checkBox.checked == true) {
                if ($("#txtReferURNo").val() == "") {
                    $("#txtReferURNo").addClass("errorinput");
                    //document.getElementById("txtReferURNo").style.borderColor = 'red';
                    $("#txtReferURNo").focus();
                    toastrErrorMessage("กรุณากรอก Refer UR No");
                    LockScreen(false);
                    return false;
                }
                else {
                    $("#txtReferURNo").removeClass('form-control errorinput').addClass('form-control');
                    //document.getElementById("txtReferURNo").style.borderColor = '';

                    // Set "PREMIUM" , txtReferURNo , "Y" , "Y"
                    $("#CustomerRegisterPanelModel_SUB_ACCESS_MODE").val("@FBB_Con_SUB_ACCESS_MODE");
                    $("#CustomerRegisterPanelModel_REF_UR_NO").val($("#txtReferURNo").val());
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("@FBB_Con_PREMIUM_FLAG");
                    $("#CustomerRegisterPanelModel_REQUEST_SUB_FLAG").val("@FBB_Con_REQUEST_SUB_FLAG");
                }
            }
            else {
                CheckDiscountValue();
            }
        }
        else {
            CheckDiscountValue();
        }

        return true;
    }

    function CheckDiscountValue()
    {
        // 18.8 Premium Install
        var indexSelectPackByPrem = $("input[name=SelectPackage]:checked").val();
        var valRecurringCharge = $("#PRICE_CHARGE" + indexSelectPackByPrem).val();

        // Check
        if (parseFloat(valRecurringCharge) >= parseFloat("@FBB_Con_L_RECURING_CHECK")) {
            // Set "PREMIUM" , "Premium by Package" , "Y" , "Y"
            $("#CustomerRegisterPanelModel_SUB_ACCESS_MODE").val("@FBB_Con_SUB_ACCESS_MODE");
            $("#CustomerRegisterPanelModel_REF_UR_NO").val("@FBB_Con_REF_UR_NO");
            $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("@FBB_Con_PREMIUM_FLAG");
            $("#CustomerRegisterPanelModel_REQUEST_SUB_FLAG").val("@FBB_Con_REQUEST_SUB_FLAG");
        }
        else
        {
            // Set "" , "" , "N" , ""
            $("#CustomerRegisterPanelModel_SUB_ACCESS_MODE").val("");
            $("#CustomerRegisterPanelModel_REF_UR_NO").val("");
            $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("N");
            $("#CustomerRegisterPanelModel_REQUEST_SUB_FLAG").val("");
        }
    }

    function showoptionPremiumInstall() {

        // R19.10 Premium Install
        var S = $('#COVERAGE_L_TUMBOL :selected').text();
        var D = $('#COVERAGE_L_AMPHUR :selected').text();
        var P = $('#COVERAGE_L_PROVINCE :selected').text();
        var PC = $("#CoveragePanelModel_Address_L_ZIPCODE :selected").text();

        var lang = $("#LanguagePage").val() == 1 ? "T" : "E";
        $.ajax({
            url: '/SelectPackage/CheckPremiumArea',
            data: {
                SubDistrict: $('#COVERAGE_L_TUMBOL :selected').text(),
                District: $('#COVERAGE_L_AMPHUR :selected').text(),
                Province: $('#COVERAGE_L_PROVINCE :selected').text(),
                PostalCode: $("#CoveragePanelModel_Address_L_ZIPCODE :selected").text(),
                Language: lang
            },
            dataType: "json",
            type: 'POST',
            success: function (data) {

                // 18.8 Premium Install
                var i = $("input[name=SelectPackage]:checked").val();

                // Update 19.10 Premium Install Check call package
                // if (listPremiumByRegion.indexOf($("#P_Region").val()) > -1 && listPremiumByTechnology.indexOf($("#ACCESS_MODE" + i).val()) > -1)
                if (data.outReturnCode == "0" && data.outReturnPremiumConfig.length > 0
                    && listPremiumByTechnology.indexOf($("#ACCESS_MODE" + i).val()) > -1)
                {
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("@FBB_Con_PREMIUM_FLAG");
                }
                else {
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("N");
                }

                if ("@Model.TopUp" == "5"
                    && !!$("#CustomerRegisterPanelModel_L_LOC_CODE").val()
                    && listPremiumByLocation.indexOf($("#CustomerRegisterPanelModel_L_LOC_CODE").val()) > -1
                    && $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val() == "@FBB_Con_PREMIUM_FLAG"
                    ) {
                            $("#optionPremiumInstall").show();
                }
                //----End 18.8
            }
        });
    }

    function GetDeveloper() {
        $.ajax({
            type: "GET",
            url: "/process/Getdropdowndeveloper",
            dataType: "json",
            async: false,
            success: function (data) {

                var strBuilder = "";
                $.each(data, function (i, e) {

                    var str = '<option value="' + e.Value + '">' + e.Text + '</option>';
                    strBuilder += str;
                });

                $('#DEVELOPER').append(strBuilder);
            }
        });
        resetOrDefault();
        $('#DEVELOPER').select2();
        $("#DEVELOPER option[value='']").attr('selected', true)
    }

    function CheckPopupFMC(PromotionCode, ExistingMobileFlag) {
        var ResultValue = "";
        $.ajax({
            url: '/SelectPackage/CheckPopupFMC',
            data: { PromotionCode: PromotionCode,ExistingMobileFlag: ExistingMobileFlag },
            dataType: "json",
            async: false,
            type: 'POST',
            success: function (data) {
                ResultValue = data;
            }
        });
        return ResultValue;
    }

    function selectFMC()
    {
        var valSelectOntopRadioFMC = $("input[name=SelectOntopRadioFMC]:checked").val();

        if ((valSelectOntopRadioFMC == null) || (valSelectOntopRadioFMC == "")) {
            toastrErrorMessage('@Html.Raw(L_FMC_CHOOSE)');
        }
        else
        {
            var FMCValue = $("input[name=SelectOntopRadioFMC]:checked").val();
            $("#CustomerRegisterPanelModel_Existing_Mobile").val(FMCValue);
            $("#myModalFMC").modal("hide");
        }
    }

    function nextPageSelectContents() {

        var valOptionSelectPackage = $("input[name=SelectPackage]:checked").val();

        if ((valOptionSelectPackage == null) || (valOptionSelectPackage == "")) {
            toastrErrorMessage('Please select package.');
            return;
        }
        var EntryfeeShow = $("#ENTRYFEE_SHOW" + valOptionSelectPackage).val();
        if (EntryfeeShow == "Y") {
            var valOptionSelectEntryFee = $("input[name=SelectOptionEntryFee]:checked").val();
            if ((valOptionSelectEntryFee == null) || (valOptionSelectEntryFee == "")) {
                toastrErrorMessage('Please select EntryFee.');
                window.scrollTo(0, 0);
                return;
            }
        }

        $("#CustomerRegisterPanelModel_FlagDopa").val("");
        $("#CustomerRegisterPanelModel_FlagFaceRecognition").val("");
        $("#CustomerRegisterPanelModel_FlagTakePhoto").val("");
        $("#CustomerRegisterPanelModel_FlagBrowseFile").val("");


        if ($("#checkGiftVoucher").text() != "@L_MSG_PROMO_CORRECT" && $("#GiftVoucher").val() != "") {
            $("#GiftVoucher").focus();
            return;
        }
        $("#IsDbSp").val("");
        $("#DisplayPackagePanelModel_WIFIAccessPoint").val("Y");
        if ($("input[name=WiFiCondition]:checked").val() == "N") {
            //mapp ontop = 0
            $("#SummaryPanelModel_PackageModel_INITIATION_CHARGE_ONTOP").val("0");
            $("#SummaryPanelModel_PackageModel_DISCOUNT_INITIATION_ONTOP").val("0");
            $("#SummaryPanelModel_PackageModel_PACKAGE_CLASS_ONTOP").val("");
        }
        $("#pRequest").removeClass("i-red");

        var i = $("input[name=SelectPackage]:checked").val();

        //19.3
        $("#CustomerRegisterPanelModel_MobilePrice").val($("#MOBILE_PRICE" + i).val());
        $("#CustomerRegisterPanelModel_Existing_Mobile").val($("#EXISTING_MOBILE" + i).val());

        //19.6 Redcap
        var download_speed = '0';
        var str_download_speed = $("#DOWNLOAD_SPEED" + i).val().split(' ')
        if (!isNaN(parseInt(str_download_speed[0]))) {
            download_speed = str_download_speed[0]
        }
        $("#CustomerRegisterPanelModel_DownloadSpeed").val(download_speed);

        // 18.8 Premium Install
        //if (listPremiumByRegion.indexOf($("#P_Region").val()) > -1 && listPremiumByTechnology.indexOf($("#ACCESS_MODE" + i).val()) > -1) {

        // Update 19.10 Premium Install Check call package
        checkPremiumArea(i);
        @*var lang = $("#LanguagePage").val() == 1 ? "T" : "E";
        $.ajax({
            url: '/SelectPackage/CheckPremiumArea',
            data: {
                SubDistrict: $('#COVERAGE_L_TUMBOL :selected').text(),
                District: $('#COVERAGE_L_AMPHUR :selected').text(),
                Province: $('#COVERAGE_L_PROVINCE :selected').text(),
                PostalCode: $("#CoveragePanelModel_Address_L_ZIPCODE :selected").text(),
                Language: lang
            },
            dataType: "json",
            type: 'POST',
            async: false,
            success: function (data) {
                if (data.outReturnCode == "0" && data.outReturnPremiumConfig.length > 0
                    && listPremiumByTechnology.indexOf($("#ACCESS_MODE" + i).val()) > -1) {
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("@FBB_Con_PREMIUM_FLAG");
                }
                else {
                    $("#CustomerRegisterPanelModel_PREMIUM_FLAG").val("N");
                }

            }
        });*@
        if ($("#CustomerRegisterPanelModel_PREMIUM_FLAG").val() == "@FBB_Con_PREMIUM_FLAG") {
            var isPremium = CheckPremiumInstall();
            if (!isPremium) return;
        }
        //20.3 Service Level
        checkServiceLevel();
        displayServiceLevel()

        var tech = $("#PRODUCT_SUBTYPE_" + i).val();
        var pg = $("#PACKAGE_GROUP" + i).val();
        $("#HdPackage_Group_Name").val(pg);
        var isNonMobile = false;

        if ($("#tAisAirNumber").val().substr(0, 1) == "0")
            isNonMobile = true;

        $.ajax({
            url: '/CheckCoverage/GetCustomerSpeOffer',
            data: {
                orderRef: $("#tOrderRef").val(), technology: tech, isNonMobile: isNonMobile, sffLogId: $("#SffProfileLogID").val()
                , packageGroup: pg, isAWNProduct: $("#IsAWNProduct").val()
            },
            dataType: "json",
            type: 'GET',
            async: false,
            success: function (data) {
                $.each(data, function (i, e) {
                    if (e == "DOUBLE_SPEED")
                        dbspeed = true;
                });
            }
        });

        var ee = $("input[name=SelectPackage]:checked").val();

        // 19.3
        if ($("#CustomerRegisterPanelModel_Existing_Mobile").val() == "Y") {
            $('input[name="SelectOntopRadioFMC"]').prop('checked', false);
            var checkFMCData = CheckPopupFMC($("#SFF_PROMOTION_CODE" + ee).val(), $("#CustomerRegisterPanelModel_Existing_Mobile").val());
            $('#rdiFMC').hide();
            if (checkFMCData != "") {
                var dataLov = '@Html.Raw(L_FMC_EXISTING_MOBILE)';
                if (dataLov != "") {
                    dataLov = dataLov.replace('[mobileNo]', $("#CoveragePanelModel_P_MOBILE").val());
                    dataLov = dataLov.replace('[mobilePackage]', checkFMCData);
                    $('#myModalFMCmsg').html(dataLov);
                    $('#rdiFMC').show();
                }
                $("[name=SelectOntopRadioFMC").prop("checked", true);
                $('#myModalFMC').modal('show');
            }
            else {
                $("#CustomerRegisterPanelModel_Existing_Mobile").val("N");
            }
        }

        checkFlagProcess();

        var IsShowPopupDiscount = true;
        if ($("#hdShowSPOntopPopup").val() == "ShowVoucher") {// Update 16.3 กรอก voucher ถูก ไม่มี Popup discount

            $('#tableOntopSEP').hide();
            $('#tableBunding').hide();
            $('#divSelectSPOntip').hide();
            $('#hdSelectSPONTOP').val("0");
            IsShowPopupDiscount = false;
        }
        checkHavePackageDiscount(IsShowPopupDiscount);
    }

    var promotionOntopDiscount = {};//R24.01 Check fraud by Max kunlp885
    function checkHavePackageDiscount(IsShowPopupDiscount) {
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();
        var strResultSP = "";
        var showPopupDiscount = false;
        if (IsShowPopupDiscount) {
            var strCheckDiscount = "";
            var noCheckDiscount = true;
            $("#tableBunding").empty();
            $("#tableOntopSEP").empty();
            /// find Discount
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageDiscountList.length > 0) {
                var tmpPackageDiscount = tmpPackageDataV2.packageDiscountList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                });
                //20.4 SUPERCONVERGENCE
                if (tmpPackageDiscount.length > 0 && $("#CoverageMemberGetMember_CampaignProjectName").val() != "SUPERCONVERGENCE") {
                    tmpPackageDiscount = tmpPackageDiscount.filter(function (elem) {
                        return elem.PACKAGE_GROUP.indexOf("SUPERCONVERGENCE") === -1;
                    });
                }
                if (tmpPackageDiscount != undefined && tmpPackageDiscount.length > 0) {
                    $.each(tmpPackageDiscount, function (i, e) {
                        var namePro = "";
                        var sffPromotionCode = e.SFF_PROMOTION_CODE;
                        if (typeof addPromotionToPackageList === 'function') {
                            addPromotionToPackageList(e);//R24.01 Check fraud by Max kunlp885
                        }
                        if ('@language' == "1") {
                            namePro = e.PACKAGE_DISPLAY_THA;
                            promotionOntopDiscount.PROMOTION_NAME = e.SFF_WORD_IN_STATEMENT_THA; //R24.01 Check fraud by Max kunlp885
                        }
                        else {
                            namePro = e.PACKAGE_DISPLAY_ENG;
                            promotionOntopDiscount.PROMOTION_NAME = e.SFF_WORD_IN_STATEMENT_ENG; //R24.01 Check fraud by Max kunlp885
                        }
                        if (e.PACKAGE_GROUP == "SUPERCONVERGENCE") {
                            namePro += " " + $("#CoverageMemberGetMember_FBB_PERCENT_DISCOUNT").val();
                        }
                        if (noCheckDiscount) { strCheckDiscount = "checked"; noCheckDiscount = false; }
                        strResultSP += "<label class='radio-inline' style='font-weight: normal !important;'>" +
                            "<input type='radio' name='SelectOntopRadioSP' id='SelectOntopRadioSP" + i +
                            "' " + strCheckDiscount + " value='" + sffPromotionCode + "'>" + namePro + "</label>" +
                            "<p class='clearfix'></p>";

                        promotionOntopDiscount.DISCOUNT_VALUE = e.DISCOUNT_VALUE; //R24.01 Check fraud by Max kunlp885
                    });
                    $("#divSelectSPOntip").find("#tableOntopSEP").html("");
                    $("#divSelectSPOntip").find("#tableOntopSEP").html(strResultSP);
                    showPopupDiscount = true;
                }
            }

            if (showPopupDiscount) {
                $('#divSelectSPOntip').modal();
                $('#tableOntopSEP').show();
                $('#tableBunding').hide();
            }
            else {
                $('#divSelectSPOntip').hide();
                $('#hdSelectSPONTOP').val("0");
                checkHavePackageContentsToNaxtPage(false);
            }
        }
        else {
            checkHavePackageContentsToNaxtPage(false);
        }

    }

    var haveContentPackage = false;
    function checkHavePackageContentsToNaxtPage(IsHaveDiscount) {
        $('#divVasBoxDynamic').empty();
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();
        var discountSFFPromotionCode = "";
        var strBuilderContents = "";
        var setPlayBoxDiv = "";
        var setPlayBoxID = "";
        //R23.11_22112023
        var chkpricechange = false;
        var setFixlineDivGlobal = "";
        var setFixlineIDGlobal = "";
        var checknonFixline = false;

        GetListDeviceContractOnlineQuery();//R21.11 ATV
        ///Find SuperMESHWifi
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageSuperMESHWifiList.length > 0) {
            var tmpPackageSuperMESHWifi = tmpPackageDataV2.packageSuperMESHWifiList.filter(function(elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            var chkPackMeshWifi = @Html.Raw(Json.Encode(CHK_PACKMESHWifi));
            if (tmpPackageSuperMESHWifi != undefined && tmpPackageSuperMESHWifi.length > 0) {
                $.each(tmpPackageSuperMESHWifi, function (i, e) {
                    if (chkPackMeshWifi.indexOf(e.SFF_PROMOTION_CODE) !== -1) {
                        var namePro = "@Html.Raw(L_CLICK_CHECKBOX)";
                        var sffPromotionCode = e.SFF_PROMOTION_CODE;//this; //R21.12PP ATV Issue Bug Monthly SuperMESHWifi (comment)
                        if (typeof addPromotionToPackageList === 'function') {
                            addPromotionToPackageList(e);//R24.01 Check fraud by Max kunlp885
                        }
                        var SuperMESHWifiDetail = "@Html.Raw(@L_MESH_WIFI)";
                        var picSuperMESHWifi = "MeshWifi_logo.jpg";
                        var maxmesh = "@Html.Raw(MAX_MESH_NEW)";

                        strBuilderContents += "<div id='contentSuperMESHWifi" + i + "' class='row' >";
                        strBuilderContents += "<div class='col-sm-4 col-md-4 col-xs-12'><img src='../img/" + picSuperMESHWifi + "' class='img-responsive center-block'></div>";
                        strBuilderContents += "<p class='clearfix visible-xs'></p>"
                        strBuilderContents += "<div class='col-sm-8 col-xs-12' style='margin-top: 30px'>"
                        strBuilderContents += "<label>" + namePro + "</label><br>";
                        strBuilderContents += "<div class='checkbox'>";
                        strBuilderContents += "<label><input name='contentSuperMESHWifi' type='checkbox' id='contentSuperMESHWifi_" + sffPromotionCode + "' onclick='onContentBox_Click(contentSuperMESHWifi" + i + ",this)'> " + SuperMESHWifiDetail + " </label>&nbsp;";
                        strBuilderContents += "<select id='ddlSuperMESHWifi" + sffPromotionCode + "' disabled onChange=\"BindingValueDropDownList('SuperMESHWifi','" + sffPromotionCode + "')\">";
                        var i;
                        for (i = 0; i < parseInt(maxmesh); i++) {
                            strBuilderContents += "<option value='" + (i + 1) + "'>" + (i + 1) + "</option >";
                        }
                        strBuilderContents += "</select >";
                        strBuilderContents += "<input type='hidden' id='tempSuperMESHWifi" + sffPromotionCode + "'' />";
                        strBuilderContents += "</div>";
                        strBuilderContents += "</div>";
                        strBuilderContents += "</div>";
                        strBuilderContents += "<p class='clearfix'></p>";
                    }
                });
            }
        }

        //R23.06 Find IP Camera
        if ( "@CHK_IPCAMERA_ACTIVESTATUS" == "Open") {
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageIpCameraList.length > 0) {
                var tmpPackageIpCamera = tmpPackageDataV2.packageIpCameraList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                });
                if (tmpPackageIpCamera != undefined && tmpPackageIpCamera.length > 0) {
                    $.each(tmpPackageIpCamera, function (i, e) {

                        var namePro = "@Html.Raw(L_CLICK_CHECKBOX)";
                        var picIpCamera = "@Html.Raw(SHOW_IPCAMERA_PICTURE)";
                        var sffPromotionCode = e.SFF_PROMOTION_CODE;

                        if (typeof addPromotionToPackageList === 'function') {
                            addPromotionToPackageList(e);//R24.01 Check fraud by Max kunlp885
                        }

                        //New Version R23.08
                        if (i === 0) {
                            strBuilderContents += "<div id='contentIpCamera" + i + "' class='row' >";
                            strBuilderContents += "<div class='col-sm-4 col-md-4 col-xs-12'><img src='data:image/png;base64," + picIpCamera + "' class='img-responsive center-block'></div>";
                            strBuilderContents += "<p class='clearfix visible-xs'></p>"
                            strBuilderContents += "<div class='col-sm-8 col-xs-12' style='margin-top: 30px;'>"
                            strBuilderContents += "<label>" + namePro + "</label><br>";
                        }

                        @foreach (var itemPromotion in SHOW_IPCAMERA_PROMOTIONNAME)
                        {
                            if (itemPromotion.Contains("7"))
                            {
                                @:strBuilderContents += "<div id='contentIpCamera7Days" + i + "' class='checkbox'>";
                                @:strBuilderContents += "<label><input name='contentIpCamera7Days' type='checkbox' id='contentIpCamera7Days_" + sffPromotionCode + "' onclick='onContentBox_Click(contentIpCamera7Days" + i + ",this)'>@itemPromotion</label>&nbsp;&nbsp;&nbsp;&nbsp;";
                                @:strBuilderContents += "<select id='ddlIpCamera7Days" + sffPromotionCode + "' disabled onChange=\"BindingValueDropDownList('IpCamera7Days','" + sffPromotionCode + "')\">";

                                int i;
                                for (i = 0; i < int.Parse(MAX_IPCAMERA_LIST7DAYS); i++)
                                {
                                    @:strBuilderContents += "<option value='" + (@i + 1) + "'>" + (@i + 1) + "</option>";
                                }
                                @:strBuilderContents += "</select >";
                                @:strBuilderContents += "<input type='hidden' id='tempIpCamera" + sffPromotionCode + "'' />";
                                @:strBuilderContents += "<br>";
                                @:strBuilderContents += "</div>";
                             }
                        }

                        strBuilderContents += "</div>";
                        strBuilderContents += "</div>";
                        strBuilderContents += "<p class='clearfix'></p>";

                            //Old Version 7,14,30 Days R23.06
                            @*if (i === 0) {
                                strBuilderContents += "<div id='contentIpCamera" + i + "' class='row' >";
                                strBuilderContents += "<div class='col-sm-4 col-md-4 col-xs-12' style='margin-top: 10px'><img src='data:image/png;base64," + picIpCamera + "' class='img-responsive center-block'></div>";
                                strBuilderContents += "<p class='clearfix visible-xs'></p>"
                                strBuilderContents += "<div class='col-sm-8 col-xs-12' style='margin-top: 20px; margin-bottom: 10px;'>"
                                strBuilderContents += "<label>" + namePro + "</label><br>";
                            }

                            if (sffPromotionCode == "P230619106") {
                                strBuilderContents += "<div id='contentIpCameraFree7Days" + i + "' class='checkbox'>";
                                strBuilderContents += "<label><input name='contentIpCameraFree7Days' type='checkbox' id='contentIpCameraFree7Days_" + sffPromotionCode + "' onclick='onContentBox_Click(contentIpCameraFree7Days" + i + ",this)' checked='' disabled='true'>ทดสอบ</label>";
                                strBuilderContents += "</div>";

                            }
                            if (sffPromotionCode == "P230619107") {

                                @foreach (var itemPromotion in SHOW_IPCAMERA_PROMOTIONNAME)
                                {
                                    if (itemPromotion.Contains("7"))
                                    {
                                        @:strBuilderContents += "<div id='contentIpCamera7Days" + i + "' class='checkbox'>";
                                        @:strBuilderContents += "<label><input name='contentIpCamera7Days' type='checkbox' id='contentIpCamera7Days_" + sffPromotionCode + "' onclick='onContentBox_Click(contentIpCamera7Days" + i + ",this)'>@itemPromotion</label>&nbsp;&nbsp;&nbsp;&nbsp;";
                                        @:strBuilderContents += "<select id='ddlIpCamera7Days" + sffPromotionCode + "' disabled onChange=\"BindingValueDropDownList('IpCamera7Days','" + sffPromotionCode + "')\">";

                                        int i;
                                        for (i = 0; i < int.Parse(MAX_IPCAMERA_LIST7DAYS); i++)
                                        {
                                            @:strBuilderContents += "<option value='" + (@i + 1) + "'>" + (@i + 1) + "</option>";
                                        }
                                        @:strBuilderContents += "</select >";
                                        @:strBuilderContents += "<input type='hidden' id='tempIpCamera" + sffPromotionCode + "'' />";
                                        @:strBuilderContents += "<br>";
                                        @:strBuilderContents += "</div>";
                                    }
                                    else if (itemPromotion.Contains("14"))
                                    {
                                        @:strBuilderContents += "<div id='contentIpCamera14Days" + i + "' class='checkbox'>";
                                        @:strBuilderContents += "<label><input name='contentIpCamera14Days' type='checkbox' id='contentIpCamera14Days_" + sffPromotionCode + "' onclick='onContentBox_Click(contentIpCamera14Days" + i + ",this)'>@itemPromotion</label>&nbsp;";
                                        @:strBuilderContents += "<select id='ddlIpCamera14Days" + sffPromotionCode + "' disabled onChange=\"BindingValueDropDownList('IpCamera14Days','" + sffPromotionCode + "')\">";

                                        int i;
                                        for (i = 0; i < int.Parse(MAX_IPCAMERA_LIST14DAYS); i++)
                                        {
                                            @:strBuilderContents += "<option value='" + (@i + 1) + "'>" + (@i + 1) + "</option>";
                                        }
                                        @:strBuilderContents += "</select >";
                                        @:strBuilderContents += "<input type='hidden' id='tempIpCamera" + sffPromotionCode + "'' />";
                                        @:strBuilderContents += "<br>";
                                        @:strBuilderContents += "</div>";
                                    }
                                    else if (itemPromotion.Contains("30"))
                                    {
                                        @:strBuilderContents += "<div id='contentIpCamera30Days" + i + "' class='checkbox'>";
                                        @:strBuilderContents += "<label><input name='contentIpCamera30Days' type='checkbox' id='contentIpCamera30Days_" + sffPromotionCode + "' onclick='onContentBox_Click(contentIpCamera30Days" + i + ",this)'>@itemPromotion</label>&nbsp;";
                                        @:strBuilderContents += "<select id='ddlIpCamera30Days" + sffPromotionCode + "' disabled onChange=\"BindingValueDropDownList('IpCamera30Days','" + sffPromotionCode + "')\">";

                                        int i;
                                        for (i = 0; i < int.Parse(MAX_IPCAMERA_LIST30DAYS); i++)
                                        {
                                            @:strBuilderContents += "<option value='" + (@i + 1) + "'>" + (@i + 1) + "</option>";
                                        }
                                        @:strBuilderContents += "</select >";
                                        @:strBuilderContents += "<input type='hidden' id='tempIpCamera" + sffPromotionCode + "'' />";
                                        @:strBuilderContents += "<br>";
                                        @:strBuilderContents += "</div>";
                                    }
                                }

                                strBuilderContents += "</div>";
                                strBuilderContents += "</div>";
                                strBuilderContents += "</div>";
                                strBuilderContents += "<p class='clearfix'></p>";
                            }*@
                    });
                }
            }
        }

        //Find PlayBox
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packagePlayboxMonthlyFeeList.length > 0) {
            var tmpPackagePlaybox = tmpPackageDataV2.packagePlayboxMonthlyFeeList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            if (tmpPackagePlaybox != undefined && tmpPackagePlaybox.length > 0) {
                $.each(tmpPackagePlaybox, function (i, e) {
                    var namePro = "@Html.Raw(L_CLICK_CHECKBOX)";
                    var sffPromotionCode = e.SFF_PROMOTION_CODE;
                    if (typeof addPromotionToPackageList === 'function') {
                        addPromotionToPackageList(e);//R24.01 Check fraud by Max kunlp885
                    }
                    var playboxPricecharge = parseFloat(e.PRICE_CHARGE);
                    var chboxPlayBoxShow = "";
                    var chboxPlayBox = "";
                    var chboxContentPlayBoxShow = "style = 'display: none'";
                    if (playboxPricecharge == 0) {
                        chboxPlayBoxShow = "disabled='true'";
                        chboxPlayBox = "checked=''";
                        chboxContentPlayBoxShow = "";
                        setPlayBoxDiv = "contentPlaybox" + i;
                        setPlayBoxID = "contentPlaybox_" + sffPromotionCode;
                    }
                    strBuilderContents += "<div id='contentPlaybox" + i + "' class='row' >";
                    strBuilderContents += "<div class='col-sm-4 col-xs-12'><img src='../img/play_box.png' class='img-responsive center-block'></div>";
                    strBuilderContents += "<p class='clearfix visible-xs'></p>"
                    strBuilderContents += "<div class='col-sm-8 col-xs-12' style='margin-top: 30px'>"
                    strBuilderContents += "<label>" + namePro + "</label><br>";
                    strBuilderContents += "<div class='checkbox'>";
                    strBuilderContents += "<label><input name='contentPlaybox' type='checkbox' id='contentPlaybox_" + sffPromotionCode + "' onclick='onContentBox_Click(contentPlaybox" + i + ",this)'" + chboxPlayBox + chboxPlayBoxShow + ">";
                    strBuilderContents += "AIS Playbox" + "</label><br>";
                    strBuilderContents += "</div>";

                    //R21.11 ATV (แบบเก่า ไม่ได้ใช้ เก็บไว้ก่อน)--------
                    @*strBuilderContents += "<div class='checkbox'>";
                    strBuilderContents += "<div id='divCheckboxContentPlaybox'" + chboxContentPlayBoxShow +">";
                    if (tmpPackageDataV2.packageContentPlayboxList.length > 0) {
                        var tmpPackageContentPlaybox = tmpPackageDataV2.packageContentPlayboxList.filter(function (elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                        });
                        $.each(tmpPackageContentPlaybox, function (ContentPlayboxIndex, ContentPlayboxData) {
                            strBuilderContents += GetOntopContentV2(ContentPlayboxIndex, ContentPlayboxData.SFF_PROMOTION_CODE, ContentPlayboxData.PRICE_CHARGE);
                        });
                    }
                    strBuilderContents += "</div>";
                    strBuilderContents += "</div>";*@

                    //R21.11 ATV
                    strBuilderContents += "<div id='divContentPlayboxAuto'>";
                    if (tmpPackageDataV2.packageAutoContentPlayboxList.length > 0) {
                        var tmpPackageAutoContentPlaybox = tmpPackageDataV2.packageAutoContentPlayboxList.filter(function (elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                                && elem.AUTO_MAPPING_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                        });
                        if (tmpPackageAutoContentPlaybox != undefined && tmpPackageAutoContentPlaybox.length > 0) {
                            $.each(tmpPackageAutoContentPlaybox, function (ContentPlayboxIndex, ContentPlayboxData) {

                                strBuilderContents += "<label style='padding-left:5px;'>";
                                strBuilderContents += "<div class='col-sm-12 col-xs-12'>";
                                strBuilderContents += "<label id='contentPlayboxAuto_" + ContentPlayboxData.SFF_PROMOTION_CODE + "'>";

                                if ('@language' == "1") {
                                    strBuilderContents += ContentPlayboxData.PACKAGE_DISPLAY_THA;
                                }
                                else {
                                    strBuilderContents += ContentPlayboxData.PACKAGE_DISPLAY_ENG;
                                }

                                strBuilderContents += "</label>";
                                strBuilderContents += "</div>";
                                strBuilderContents += "</label>";
                            });
                        }
                    }
                    strBuilderContents += "</div>";
                    //-------------
                    strBuilderContents += "</div>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "<p class='clearfix'></p>";
                });
            }
        }

        //Find Playbox Ontop //R21.11 ATV
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageContentPlayboxList.length > 0) {
            var tmpPackageContentPlaybox = tmpPackageDataV2.packageContentPlayboxList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            if (tmpPackageContentPlaybox != undefined && tmpPackageContentPlaybox.length > 0) {
                var namePro = "@Html.Raw(L_CLICK_CHECKBOX)";
                var imgbase64PicContent = "@Html.Raw(L_PIC_CONTENT)";
                strBuilderContents += "<div id='contentPlayboxOntop0' class='row' >";
                strBuilderContents += "<div class='col-sm-4 col-xs-12'><img src='data:image/png;base64," + imgbase64PicContent + "' class='img-responsive center-block'></div>";
                strBuilderContents += "<p class='clearfix visible-xs'></p>"
                strBuilderContents += "<div class='col-sm-8 col-xs-12' style='margin-top: 30px'>"
                strBuilderContents += "<label>" + namePro + "</label><br>";

                $.each(tmpPackageContentPlaybox, function (i, e) {
                    strBuilderContents += GetOntopContentV2Ontop(i, e.SFF_PROMOTION_CODE, e.PRICE_CHARGE, "contentPlayboxOntop0");
                });

                strBuilderContents += "</div>";
                strBuilderContents += "</div>";
                strBuilderContents += "<p class='clearfix'></p>";
            }
        }

        //Find Fixline
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageFixlineList.length > 0) {
            var tmpPackageFixline = tmpPackageDataV2.packageFixlineList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            if (tmpPackageFixline != undefined && tmpPackageFixline.length > 0) {
                $.each(tmpPackageFixline, function (i, e) {
                    var namePro = "@Html.Raw(L_CLICK_CHECKBOX)";
                    var sffPromotionCode = e.SFF_PROMOTION_CODE;
                    if (typeof addPromotionToPackageList === 'function') {
                        addPromotionToPackageList(e);//R24.01 Check fraud by Max kunlp885
                    }
                    var topup = '@L_MAINTEN_FEE2';
                    topup = topup.replace("{1}", e.PRICE_CHARGE);
                    var picfixedline = "";

                    //R23.11_22112023
                    //chaitt49
                    var fixlinePricecharge = parseFloat(e.PRICE_CHARGE);
                    var chkFixlineOnclick = "";
                    setFixlineDivGlobal = "contentFixline" + i;
                    setFixlineIDGlobal = "contentFixline_" + sffPromotionCode;
                    checknonFixline = true;
                    if (fixlinePricecharge == 0) {
                        chkpricechange = true;
                    }

                    if ("@language" == "1") {
                        picfixedline = "fixedlineTH.jpg";
                    }
                    else {
                        picfixedline = "fixedlineEN.jpg";
                    }
                    strBuilderContents += "<div id='contentFixline" + i + "' class='row' >";
                    strBuilderContents += "<div class='col-sm-4 col-md-4 col-xs-12'><img src='../img/" + picfixedline + "' class='img-responsive center-block'></div>";
                    strBuilderContents += "<p class='clearfix visible-xs'></p>"
                    strBuilderContents += "<div class='col-sm-8 col-xs-12' style='margin-top: 30px'>"
                    strBuilderContents += "<label>" + namePro + "</label><br>";
                    strBuilderContents += "<div class='checkbox'>";
                    strBuilderContents += "<label><input name='contentFixline' type='checkbox' id='contentFixline_" + sffPromotionCode + "'>" + topup + " </label>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "<p class='clearfix'></p>";
                });
            }
        }

        //Find WifiLog
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packagWiFiLogList.length > 0) {
            var tmpPackageWifiLog = tmpPackageDataV2.packagWiFiLogList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            if (tmpPackageWifiLog != undefined && tmpPackageWifiLog.length > 0) {
                $.each(tmpPackageWifiLog, function (i, e) {
                    var namePro = "@Html.Raw(L_CLICK_CHECKBOX)";
                    var sffPromotionCode = e.SFF_PROMOTION_CODE;
                    if (typeof addPromotionToPackageList === 'function') {
                        addPromotionToPackageList(e);//R24.01 Check fraud by Max kunlp885
                    }
                    var wifilogDetail = "";
                    var picWifiLog = "WiFiLog_logo-2.jpg";
                    if ("@language" == "1") {
                        wifilogDetail = e.PACKAGE_DISPLAY_THA;
                    }
                    else {
                        wifilogDetail = e.PACKAGE_DISPLAY_ENG;
                    }
                    strBuilderContents += "<div id='contentWifiLog" + i + "' class='row' >";
                    strBuilderContents += "<div class='col-sm-4 col-md-4 col-xs-12'><img src='../img/" + picWifiLog + "' class='img-responsive center-block'></div>";
                    strBuilderContents += "<p class='clearfix visible-xs'></p>"
                    strBuilderContents += "<div class='col-sm-8 col-xs-12' style='margin-top: 30px'>"
                    strBuilderContents += "<label>" + namePro + "</label><br>";
                    strBuilderContents += "<div class='checkbox'>";
                    strBuilderContents += "<label><input name='contentWifiLog' type='checkbox' id='contentWifiLog_" + sffPromotionCode + "' onclick='onContentBox_Click(contentWifiLog" + i + ",this)'> " + wifilogDetail + " </label>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "<p class='clearfix'></p>";
                });
            }
        }

        //Find SpeedBoost packageSpeedBoostList
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageSpeedBoostList.length > 0) {
            var tmpPackageSpeedBoost = tmpPackageDataV2.packageSpeedBoostList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            if (tmpPackageSpeedBoost != undefined && tmpPackageSpeedBoost.length > 0) {
                $.each(tmpPackageSpeedBoost, function (i, e) {
                    var namePro = "@Html.Raw(L_CLICK_CHECKBOX)";
                    var sffPromotionCode = e.SFF_PROMOTION_CODE;
                    if (typeof addPromotionToPackageList === 'function') {
                        addPromotionToPackageList(e);//R24.01 Check fraud by Max kunlp885
                    }
                    var SpeedBoostDetail = "";
                    var picSpeedBoost = "SpeedBoost_logo_1.jpg";
                    if ("@language" == "1") {
                        SpeedBoostDetail = e.PACKAGE_DISPLAY_THA;
                    }
                    else {
                        SpeedBoostDetail = e.PACKAGE_DISPLAY_ENG;
                    }
                    strBuilderContents += "<div id='contentSpeedBoost" + i + "' class='row contentSpeedBoost' >";
                    strBuilderContents += "<div class='col-sm-4 col-md-4 col-xs-12'><img src='../img/" + picSpeedBoost + "' class='img-responsive center-block'></div>";
                    strBuilderContents += "<p class='clearfix visible-xs'></p>"
                    strBuilderContents += "<div class='col-sm-8 col-xs-12' style='margin-top: 30px'>"
                    strBuilderContents += "<label>" + namePro + "</label><br>";
                    strBuilderContents += "<div class='checkbox'>";
                    strBuilderContents += "<label><input name='contentSpeedBoost' type='checkbox' id='contentSpeedBoost_" + sffPromotionCode + "' onclick='onContentBox_Click(contentSpeedBoost" + i + ",this)'> " + SpeedBoostDetail + " </label>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "</div>";
                    strBuilderContents += "<p class='clearfix'></p>";
                });
            }
        }


        ///Find Discount
        $("#trBundling").hide();
        if (IsHaveDiscount) {
            var discountType = "";
            var discountValue = 0;
            var discountSffPromotionCode = "";
            discountSFFPromotionCode = $("input[name=SelectOntopRadioSP]:checked").val();
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageDiscountList.length > 0) {
                var tmpPackageDiscount = tmpPackageDataV2.packageDiscountList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(discountSFFPromotionCode) !== -1;
                });
                if (tmpPackageDiscount != undefined && tmpPackageDiscount.length > 0) {
                    $.each(tmpPackageDiscount, function (i, e) {
                        discountSffPromotionCode = e.SFF_PROMOTION_CODE;
                        discountType = e.DISCOUNT_TYPE;
                        discountValue = parseFloat(e.DISCOUNT_VALUE);
                    });
                    /// calculatesDiscount sideTabVasMonthly
                    calculatesDiscount(discountType, discountValue, discountSffPromotionCode);
                    CalculateFirstShellCostVas();
                    checkServiceLevel();
                    displayServiceLevel()
                }
            }
        }

        $("#page2").hide();
        if (strBuilderContents != "") {
            $('#divVasBoxDynamic').append(strBuilderContents);
            if (setPlayBoxDiv != "" && setPlayBoxID != "") {
                onContentBox_Click(document.getElementById(setPlayBoxDiv), document.getElementById(setPlayBoxID));
            }
            //R23.11_22112023
            //chaitt49 Fixline only
            if (chkpricechange == true) {
                let setFixID = document.getElementById(setFixlineIDGlobal);
                setFixID.checked = true;
                setFixID.disabled = true;
                setFixID.onclick = function () { return false; };
                onContentBox_Click(document.getElementById(setFixlineDivGlobal), setFixID);
            }
            else if (checknonFixline == true && chkpricechange == false) {
                let setFixID = document.getElementById(setFixlineIDGlobal);
                setFixID.onclick = function () { onContentBox_Click(document.getElementById(setFixlineDivGlobal), setFixID); };
            }
            $("#page2_1").show();
            window.scrollTo(0, 0);
            haveContentPackage = true;
            //script Adobe Analytic
            var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
            digitalData.page = {
                pageInfo: {
                    pageName: "newfibre:" + lang + ":SelectVas",
                    site: "newfibre",
                    language: lang
                }
            }
            console.log("page load select vas : ", lang);

        }
        else {
            //// go to Page 3
            haveContentPackage = false;
            onLoad003V2();
            $("#page3").show();
        }

    }

    var tmpPackageDataDeviceContract;
    var objPromotionCodeforGetDeviceArry = [];
    function GetListDeviceContractOnlineQuery() { //R21.11 ATV
        objPromotionCodeforGetDeviceArry = [];
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();
        if (tmpPackageDataV2 != undefined) {
             //Find Mesh at Main
            if (tmpPackageDataV2.packageMainList.length > 0) {
                var tmpPackageMain = tmpPackageDataV2.packageMainList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                });
                if (tmpPackageMain != undefined && tmpPackageMain.length > 0) {
                    $.each(tmpPackageMain, function (i, e) {
                        objPromotionCodeforGetDeviceArry.push({ SFF_PROMOTION_CODE: e.SFF_PROMOTION_CODE });
                    });
                }
            }
            //Find IP Camera R23.08
            if (tmpPackageDataV2.packageIpCameraList.length > 0) {
                var tmpPackageIpCamera = tmpPackageDataV2.packageIpCameraList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                });
                if (tmpPackageIpCamera != undefined && tmpPackageIpCamera.length > 0) {
                    $.each(tmpPackageIpCamera, function (i, e) {
                        objPromotionCodeforGetDeviceArry.push({ SFF_PROMOTION_CODE: e.SFF_PROMOTION_CODE });
                    });
                }
            }
            //Find PlayBox
            if (tmpPackageDataV2.packagePlayboxMonthlyFeeList.length > 0) {
                var tmpPackagePlaybox = tmpPackageDataV2.packagePlayboxMonthlyFeeList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                });
                if (tmpPackagePlaybox != undefined && tmpPackagePlaybox.length > 0) {
                    $.each(tmpPackagePlaybox, function (i, e) {
                        objPromotionCodeforGetDeviceArry.push({ SFF_PROMOTION_CODE: e.SFF_PROMOTION_CODE });
                    });
                }
            }
        }

        if (objPromotionCodeforGetDeviceArry.length > 0) {
            console.log(sessionStorage.getItem("AisAirNumber"));
            $.ajax({
                type: "GET",
                url: "/SelectPackage/GetListDeviceContractOnlineQuery",
                data: {
                    "AisAirNumber": sessionStorage.getItem("AisAirNumber"),
                    "P_CHANNEL": "WEB",
                    "P_EVENT": "New",
                    "PROMOTION_CODE_ARRAY": JSON.stringify(objPromotionCodeforGetDeviceArry),
                    //R22.07 Edit Add Parameter GetListDeviceContract OnlineQuery
                    "P_PRODUCT_SUBTYPE": "@Model.v_package_subtype",
                    "P_OWNER_PRODUCT": tmpPackageDataV2.owenerProduct,
                    "P_SALE_CHANNEL": $("#CoveragePanelModel_SAVEORDER_SALE_CHANNEL").val(),
                    "accessMode": $("#ZTEAccessModeSerializer").val(),
                    "isPartner": $("#ZTEIsPartner").val(),
                    "partnerName": $("#ZTEPartnerName").val(),
                    "addressId": $("#CoveragePanelModel_Address_AddressId").val()
                    //-------------------------------
                },
                dataType: "json",
                async: false,
                success: function (data) {
                    tmpPackageDataDeviceContract = data;
                    console.log(tmpPackageDataDeviceContract);
                }
            });
        }
    }

    var objMonthlyDiscountPackageArry = [];
    function calculatesDiscount(discountType, discountValue, sffPromotionCode) {
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var priceChargeOld = 0;
        var priceCharge = 0;
        var discountCharge = 0;
        priceChargeOld = parseFloat($("#PRICE_CHARGE" + SelectPackageIndex).val());
        priceCharge = parseFloat($("#PRICE_CHARGE" + SelectPackageIndex).val());
        if (discountType == "PCT") {

            var discountCharge = (priceCharge * discountValue) / 100;
            priceCharge = priceCharge - discountCharge;
            console.log("discountCharge : ", discountCharge);
        }
        else if (discountType == "MNY") {
            discountCharge = discountValue;
            priceCharge = priceCharge - discountCharge;
        }
        else if (discountType == "PAID") {
            priceCharge = discountValue;
            discountCharge = priceChargeOld - priceCharge;
        }
        var msgBunding = "";
        var Code = -1;
        if (tmpBundlingDiscount != undefined && tmpBundlingDiscount.length > 0) {
            Code = tmpBundlingDiscount.indexOf(sffPromotionCode);
        }

        if (Code != -1) {
            msgBunding = "@L_BUNDLING_DISCOUNT_DTL";
        }
        else {
            msgBunding = "@L_DISCOUNT_DTL";
        }

        $("#Bunding").text(msgBunding);
        $("#summBunding").text(accounting.formatNumber(discountCharge, 2));
        $("#summTotal2").text(accounting.formatNumber(priceCharge, 2));
        $("#tmpSummTotal2").text(priceCharge);
        $("#trBundling").show();

        $("#BundingVas").text(msgBunding);
        $("#summBundingVas").text(accounting.formatNumber(discountCharge, 2));
        $("#summTotal2Vas").text(accounting.formatNumber(priceCharge, 2));
        $("#tmpSummTotal2Vas").text(priceCharge);
        $("#trBundlingVas").show();
        objMonthlyDiscountPackageArry = [];
        objMonthlyDiscountPackageArry.push({ SffPromotionCode: sffPromotionCode, Name: msgBunding, Value: discountCharge });

        return priceCharge;
    }
    function onContentBox_Click(divId, divClick) {
        var thisVasHasChecked = $("#" + divClick.id).is(":checked");
        var contentType = "";
        var sffPromotionCode = "";
        sffPromotionCode = divClick.id;

        // SuperMESHWifi
        if (divId.id.indexOf("SuperMESHWifi") != -1) {
            sffPromotionCode = sffPromotionCode.replace("contentSuperMESHWifi_", "");
            contentType = "SuperMESHWifi";
            if (thisVasHasChecked) {
                $("#" + divId.id).addClass("add-rounded-green");
                BindingValueContent(contentType, sffPromotionCode, "Add");
            } else {
                $("#" + divId.id).removeClass("add-rounded-green");
                BindingValueContent(contentType, sffPromotionCode, "Del");
            }
        }

        // R23.06 IPCamera
        if ( "@CHK_IPCAMERA_ACTIVESTATUS" == "Open") {

            //New Version R23.08
            if (divId.id.indexOf("IpCamera7Days") != -1) {
                sffPromotionCode = sffPromotionCode.match(/_(.*)/)[1];
                contentType = "IpCamera7Days";
                if (thisVasHasChecked) {
                    $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
                    BindingValueContent(contentType, sffPromotionCode, "Add");
                } else {
                    $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
                    $("#divVasBoxDynamic input[type=checkbox][name^='contentIpCamera']:checked").length == 0 ? $("#" + "contentIpCamera0").removeClass("errorinput add-rounded-green") : "";
                    BindingValueContent(contentType, sffPromotionCode, "Del");
                }
            }

            //Old Version 7,14,30 Days R23.06
            //if (divId.id.indexOf("IpCamera7Days") != -1) {
            //    sffPromotionCode = sffPromotionCode.match(/_(.*)/)[1];
            //    contentType = "IpCamera7Days";
            //    if (thisVasHasChecked) {
            //        $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
            //        BindingValueContent(contentType, sffPromotionCode, "Add");
            //    } else {
            //        $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
            //        $("#divVasBoxDynamic input[type=checkbox][name^='contentIpCamera']:checked").length == 0 ? $("#" + "contentIpCamera0").removeClass("errorinput add-rounded-green") : "";
            //        BindingValueContent(contentType, sffPromotionCode, "Del");
            //    }
            //} else if (divId.id.indexOf("IpCamera14Days") != -1) {
            //    sffPromotionCode = sffPromotionCode.match(/_(.*)/)[1];
            //    contentType = "IpCamera14Days";
            //    if (thisVasHasChecked) {
            //        $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
            //        BindingValueContent(contentType, sffPromotionCode, "Add");
            //    } else {
            //        $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
            //        $("#divVasBoxDynamic input[type=checkbox][name^='contentIpCamera']:checked").length == 0 ? $("#" + "contentIpCamera0").removeClass("errorinput add-rounded-green") : "";
            //        BindingValueContent(contentType, sffPromotionCode, "Del");
            //    }
            //} else if (divId.id.indexOf("IpCamera30Days") != -1) {
            //    sffPromotionCode = sffPromotionCode.match(/_(.*)/)[1];
            //    contentType = "IpCamera30Days";
            //    if (thisVasHasChecked) {
            //        $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
            //        BindingValueContent(contentType, sffPromotionCode, "Add");
            //    } else {
            //        $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
            //        $("#divVasBoxDynamic input[type=checkbox][name^='contentIpCamera']:checked").length == 0 ? $("#" + "contentIpCamera0").removeClass("errorinput add-rounded-green") : "";
            //        BindingValueContent(contentType, sffPromotionCode, "Del");
            //    }
            //}
        }

        // Playbox
        if (divId.id.indexOf("Playbox") != -1) {
            sffPromotionCode = sffPromotionCode.replace("contentPlaybox_", "");
            contentType = "Playbox";
            if (thisVasHasChecked) {
                $("#" + divId.id).addClass("add-rounded-green");
                //$("#divCheckboxContentPlaybox").show(); //R21.11 ATV (แบบเก่า ไม่ได้ใช้ เก็บไว้ก่อน)
                BindingValueContent(contentType, sffPromotionCode, "Add");
            } else {
                $("#" + divId.id).removeClass("add-rounded-green");

                //R21.11 ATV (แบบเก่า ไม่ได้ใช้ เก็บไว้ก่อน)--------
                @*$("#divCheckboxContentPlaybox").hide();
                $('#' + divId.id + ' input:checkbox').each(function () {
                    if ($("#" + this.id).prop('checked') == true) {
                        var sffPromotionCodeContentPlayBox = "";
                        $(this).removeAttr('checked');
                        sffPromotionCodeContentPlayBox = this.id;
                        sffPromotionCodeContentPlayBox = sffPromotionCodeContentPlayBox.replace("contentSubPlaybox_", "");
                        BindingValueContentPlayBox(sffPromotionCodeContentPlayBox, "Del");
                    }
                });*@

                BindingValueContent(contentType, sffPromotionCode, "Del");
            }
        }
        // Fixline
        if (divId.id.indexOf("Fixline") != -1) {
            sffPromotionCode = sffPromotionCode.replace("contentFixline_", "");
            contentType = "Fixline";
            //if (thisVasHasChecked) {
            //    $("#" + divId.id).addClass("add-rounded-green");
            //    BindingValueContent(contentType, sffPromotionCode, "Add");
            //}
            //R23.11_22112023
            if (document.getElementById(divClick.id).disabled == true && thisVasHasChecked) {
                $("#" + divId.id).removeClass("add-rounded-green");
                BindingValueContent(contentType, sffPromotionCode, "Add");
            }
            else if (thisVasHasChecked) {
                $("#" + divId.id).addClass("add-rounded-green");
                BindingValueContent(contentType, sffPromotionCode, "Add");
            }
            else {
                $("#" + divId.id).removeClass("add-rounded-green");
                BindingValueContent(contentType, sffPromotionCode, "Del");
            }
        }
        // WifiLog
        if (divId.id.indexOf("WifiLog") != -1) {
            sffPromotionCode = sffPromotionCode.replace("contentWifiLog_", "");
            contentType = "WifiLog";
            if (thisVasHasChecked) {
                $("#" + divId.id).addClass("add-rounded-green");
                BindingValueContent(contentType, sffPromotionCode, "Add");
            } else {
                $("#" + divId.id).removeClass("add-rounded-green");
                BindingValueContent(contentType, sffPromotionCode, "Del");
            }
        }
        // SpeedBoost
        if (divId.id.indexOf("SpeedBoost") != -1) {
            var sffPromotionCode = sffPromotionCode.replace("contentSpeedBoost_", "");
            contentType = "SpeedBoost";
            var checkbox = $('.contentSpeedBoost');
            if ($("#" + divClick.id).prop('checked') == true) {
                checkbox.each(function () {
                    var tmpcheckbox = $("#" + this.id + " input:checkbox")[0];
                    if (tmpcheckbox.id != divClick.id) {

                        if ($("#" + tmpcheckbox.id).prop('checked') == true) {
                            $("#" + this.id).removeClass("add-rounded-green");
                            $("#" + tmpcheckbox.id).removeAttr('checked');
                            sffPromotionCode = tmpcheckbox.id;
                            sffPromotionCode = sffPromotionCode.replace("contentSpeedBoost_", "");
                            BindingValueContent(contentType, sffPromotionCode, "Del");
                        }
                    }
                });
                $("#" + divId.id).addClass("add-rounded-green");
                sffPromotionCode = divClick.id;
                sffPromotionCode = sffPromotionCode.replace("contentSpeedBoost_", "");
                BindingValueContent(contentType, sffPromotionCode, "Add");
            }
            else {
                $("#" + divId.id).removeClass("add-rounded-green");
                sffPromotionCode = divClick.id;
                sffPromotionCode = sffPromotionCode.replace("contentSpeedBoost_", "");
                BindingValueContent(contentType, sffPromotionCode, "Del");
            }
        }
    };

    function onContentPlayBox_Click(divId, chbId) { //R21.11 ATV (แบบเก่า ไม่ได้ใช้ เก็บไว้ก่อน)
        var sffPromotionCode = "";
        if ($("#" + chbId.id).prop('checked') == true) {
            $('#' + divId.id + ' input:checkbox').each(function () {
                if (this.id != chbId.id) {
                    if ($("#" + this.id).prop('checked') == true) {
                        $(this).removeAttr('checked');
                        sffPromotionCode = this.id;
                        sffPromotionCode = sffPromotionCode.replace("contentSubPlaybox_", "");
                        BindingValueContentPlayBox(sffPromotionCode, "Del");
                    }
                }
            });
            sffPromotionCode = chbId.id;
            sffPromotionCode = sffPromotionCode.replace("contentSubPlaybox_", "");
            BindingValueContentPlayBox(sffPromotionCode, "Add");
        }
        else {
            sffPromotionCode = chbId.id;
            sffPromotionCode = sffPromotionCode.replace("contentSubPlaybox_", "");
            BindingValueContentPlayBox(sffPromotionCode, "Del");
        }
    }

    function onContentPlayBoxOntop_Click(divId, chbId) { //R21.11 ATV Ontop
        var sffPromotionCode = "";
        if ($("#" + chbId.id).prop('checked') == true) {
            $('#' + divId.id + ' input:checkbox').each(function () {
                if (this.id != chbId.id) {
                    if ($("#" + this.id).prop('checked') == true) {
                        $(this).removeAttr('checked');
                        sffPromotionCode = this.id;
                        sffPromotionCode = sffPromotionCode.replace("contentPlayboxOntop_", "");
                        BindingValueContentPlayBoxOntop(sffPromotionCode, "Del");
                    }
                }
            });
            $("#" + divId.id).addClass("add-rounded-green");
            sffPromotionCode = chbId.id;
            sffPromotionCode = sffPromotionCode.replace("contentPlayboxOntop_", "");
            BindingValueContentPlayBoxOntop(sffPromotionCode, "Add");
        }
        else {
            $("#" + divId.id).removeClass("add-rounded-green");
            sffPromotionCode = chbId.id;
            sffPromotionCode = sffPromotionCode.replace("contentPlayboxOntop_", "");
            BindingValueContentPlayBoxOntop(sffPromotionCode, "Del");
        }
    }

    var objInstallContentSuperMESHWifiArry = []; //R21.11 ATV
    var objInstallContentPlayboxArry = [];
    var objInstallContentFixlineArry = [];
    var objMonthlySuperMESHWifiArry = [];
    var objMonthlySuperMESHWifiAutoArry = []; //R21.11 ATV
    var objInstallContentIpCamera7DaysArry = []; //R23.06 IP Camera
    //var objInstallContentIpCamera14DaysArry = []; //R23.06 IP Camera
    //var objInstallContentIpCamera30DaysArry = []; //R23.06 IP Camera
    var objInstallContentIpCameraGroupArry = []; //R23.06 IP Camera
    var objMonthlyIpCamera7DaysArry = []; //R23.06 IP Camera
    //var objMonthlyIpCamera14DaysArry = []; //R23.06 IP Camera
    //var objMonthlyIpCamera30DaysArry = []; //R23.06 IP Camera
    var objMonthlyIpCameraGroupArry = []; //R23.06 IP Camera
    var objMonthlyAutoIpCamera7DaysArry = []; //R23.06 IP Camera
    var objMonthlyAutoIpCameraGroupArry = []; //R23.06 IP Camera
    var objCountMaxIpCameraArry = []; //R23.06 IP Camera
    var objMonthlyPlayBoxArry = [];
    var objMonthlyContentPlayBoxAutoArry = []; //R21.11 ATV
    var objMonthlyFixlineArry = [];
    var objMonthlyWiFiLogArry = [];
    var objMonthlySpeedBoostArry = [];
    function BindingValueDropDownList(contentType, sffPromotionCode) {
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();
        if ("@Html.Raw(meshArpu_Month_Flag)" == "Y") {
            BindingValueDropDownListPromotion(contentType, sffPromotionCode);
        } else {
            BindingValueDropDownListDefault(contentType, sffPromotionCode);
        }

    }

    function BindingValueContent(contentType, sffPromotionCode, action) {
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();
        console.log("@Html.Raw(meshArpu_Month_Flag)");
        if ("@Html.Raw(meshArpu_Month_Flag)" == "Y") {
            BindingValueContentPromotion(contentType, sffPromotionCode, action);
        } else {
            BindingValueContentDefault(contentType, sffPromotionCode, action);
        }
    }

    function BindingValueContentDefault(contentType, sffPromotionCode, action) {
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();

        if (contentType == "SuperMESHWifi") {
            objInstallContentSuperMESHWifiArry = []; //R21.11 ATV
            objMonthlySuperMESHWifiArry = [];
            objMonthlySuperMESHWifiAutoArry = []; //R21.11 ATV
            var sffPromotionCodeSuperMESHWifi = sffPromotionCode; //R21.11 ATV
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageSuperMESHWifiList.length > 0) {

                var tmpPackageSuperMESHWifi = tmpPackageDataV2.packageSuperMESHWifiList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });

                if (tmpPackageSuperMESHWifi != undefined && tmpPackageSuperMESHWifi.length > 0) {
                    /// Monthly SuperMESHWifi
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var quantity = 0;
                    var sumSuperMESHWifi = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    var cur = "";
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageSuperMESHWifi, function (i, eDDL) {
                        sffPromotionCode = eDDL.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(eDDL.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = eDDL.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = eDDL.PACKAGE_DISPLAY_THA;
                            cur = "บาท";
                        }
                        else {
                            packageMsg = eDDL.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = eDDL.PACKAGE_DISPLAY_ENG;
                            cur = "THB";
                        }
                    });

                    quantity = parseFloat($("#ddlSuperMESHWifi" + sffPromotionCode).val());
                    priceCharge = priceCharge * quantity;

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblSuperMESHWifiMonthly").text(packageMsgR);
                        $("#lblSumSuperMESHWifiMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trSuperMESHWifiMonthly").show();
                        objMonthlySuperMESHWifiArry.push({
                            SffPromotionCode: sffPromotionCode,
                            Name: packageMsg,
                            NameR: packageMsgR,
                            NameR1: packageMsgR,
                            Value: priceCharge,
                            qty: quantity,
                            currency: cur,
                            method: 'BindingValueContentDefault'
                        });
                        $("#ddlSuperMESHWifi" + sffPromotionCode).prop("disabled", false);
                    }
                    else {
                        //R21.12PP ATV Issue Bug Monthly SuperMESHWifi
                        if ($("#lblSumSuperMESHWifiMonthly").text() != "") {
                            sumSuperMESHWifi = parseInt($("#lblSumSuperMESHWifiMonthly").text());
                            sumTotal2Vas -= sumSuperMESHWifi;
                        }
                        else {
                            sumTotal2Vas -= priceCharge
                        }
                        //------------------
                        $("#lblSuperMESHWifiMonthly").text("");
                        $("#lblSumSuperMESHWifiMonthly").text("");
                        $("#trSuperMESHWifiMonthly").hide();
                        $("#ddlSuperMESHWifi" + sffPromotionCode).prop("disabled", true);
                    }
                    $("#tempSuperMESHWifi" + sffPromotionCode).val(priceCharge);
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));

                    //Install SuperMESHWifi //R21.11 ATV
                    var sffPromotionCodeInstall = "";
                    var prePriceCharge = 0;
                    var priceCharge = 0;
                    var sumTotal1Vas = 0;
                    var tmpstrMeshInstall = "";
                    var tmpstrMeshDisInstall = "";
                    var flagContractDeviceMesh = false;
                    var durationByMonth = "";
                    sumTotal1Vas = parseFloat($("#tmpSummTotal1Vas").text());
                    if (tmpPackageDataDeviceContract.ContractDeviceList != undefined && tmpPackageDataDeviceContract.ContractDeviceList.length > 0) {
                        var tmpContractDeviceMeshList = tmpPackageDataDeviceContract.ContractDeviceList.filter(function (elem) {
                            return elem.PRODUCT_SUBTYPE.indexOf("MESH") !== -1;
                        });
                        console.log(tmpContractDeviceMeshList);
                        if (tmpContractDeviceMeshList != undefined && tmpContractDeviceMeshList.length > 0) {
                            flagContractDeviceMesh = true;
                            $.each(tmpContractDeviceMeshList, function (i, e) {
                                sffPromotionCodeInstall = e.SFF_PROMOTION_CODE;
                                prePriceCharge = parseFloat(e.PENALTY_CHARGE);
                                priceCharge = parseFloat(e.PENALTY_CHARGE);
                                durationByMonth = e.DURATION_BY_MONTH;
                                if ('@language' == "1") {
                                    tmpstrMeshInstall = e.CONTRACT_DISPLAY_TH_1;
                                    tmpstrMeshDisInstall = e.CONTRACT_DISPLAY_TH_2;
                                }
                                else {
                                    tmpstrMeshInstall = e.CONTRACT_DISPLAY_EN_1;
                                    tmpstrMeshDisInstall = e.CONTRACT_DISPLAY_EN_2;
                                }
                            });
                        }
                    }

                    if (action == "Add" && flagContractDeviceMesh == true) {
                        //R21.12PP ATV
                        $("#sideTabVasSuperMESHWifiInstallation").html("");
                        var strInstallationMeshDetail = "";
                        var MESH_COUNT = parseInt($("#ddlSuperMESHWifi" + sffPromotionCode).val());
                        if (MESH_COUNT == 1) {
                            strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                            strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation1'>" + tmpstrMeshInstall + "</span></span>";
                            strInstallationMeshDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation1'>" + accounting.formatNumber(prePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                            strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                            strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation1' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>" + tmpstrMeshDisInstall + "</span></span>";
                            strInstallationMeshDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasSuperMESHWifiDiscountInstallation1'>" + accounting.formatNumber(priceCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";
                        }
                        else {
                            var icMesh = 0;
                            var strWORDIND_MESH = "";
                            while (icMesh < MESH_COUNT) {
                                strWORDIND_MESH = "@WORDIND_MESH";
                                strWORDIND_MESH = strWORDIND_MESH.replace("{x}", (icMesh + 1).toString());
                                strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                                strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation" + (icMesh + 1).toString() + "'>" + tmpstrMeshInstall + " " + strWORDIND_MESH + "</span></span>";
                                strInstallationMeshDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation" + (icMesh + 1).toString() + "'>" + accounting.formatNumber(prePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                                strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                                strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation" + (icMesh + 1).toString() + "' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>" + tmpstrMeshDisInstall + " " + strWORDIND_MESH + "</span></span>";
                                strInstallationMeshDetail += "<span class='col-xs-4 text-right'  style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasSuperMESHWifiDiscountInstallation" + (icMesh + 1).toString() + "'>" + accounting.formatNumber(priceCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";
                                icMesh++;
                            }
                        }
                        $("#sideTabVasSuperMESHWifiInstallation").html(strInstallationMeshDetail);
                        //ผลรวม(sumTotal1Vas) ของ Install SuperMESHWifi คิดครั้งเดียว เพราะใช้ข้อมูลที่มากจากตัวเดียวกัน
                        //------------------

                        //R21.11 ATV
                        sumTotal1Vas += prePriceCharge - priceCharge;

                        @*$("#summLbVasSuperMESHWifiInstallation").text(tmpstrMeshInstall);
                        $("#summLbVasSuperMESHWifiDiscountInstallation").text(tmpstrMeshDisInstall);*@
                        //------------------

                        $("#summValVasSuperMESHWifiInstallation").text(accounting.formatNumber(prePriceCharge, 2));
                        $("#summValVasSuperMESHWifiDiscountInstallation").text(accounting.formatNumber(priceCharge, 2));

                        $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                        $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                        $("#sideTabVasSuperMESHWifiInstallation").show();
                        objInstallContentSuperMESHWifiArry.push({
                            MeshCodeMain: sffPromotionCode,
                            SffPromotionCode: sffPromotionCodeInstall,
                            Name: tmpstrMeshInstall,
                            Value: prePriceCharge,
                            DurationByMonth: durationByMonth,
                            Action: "Add",
                            method: 'BindingValueContentDefault',
                            isDiscount: false
                        });
                        objInstallContentSuperMESHWifiArry.push({
                            MeshCodeMain: sffPromotionCode,
                            SffPromotionCode: sffPromotionCodeInstall,
                            Name: tmpstrMeshDisInstall,
                            Value: priceCharge,
                            DurationByMonth: durationByMonth,
                            Action: "Del",
                            method: 'BindingValueContentDefault',
                            isDiscount: true
                        });
                    } else {
                        //R21.12PP ATV
                        $("#sideTabVasSuperMESHWifiInstallation").html("");
                        //------------------
                        //R21.11 ATV
                        sumTotal1Vas -= prePriceCharge - priceCharge;
                        @*$("#summLbVasSuperMESHWifiInstallation").text("");
                        $("#summLbVasSuperMESHWifiDiscountInstallation").text("");*@
                        //------------------
                        $("#summValVasSuperMESHWifiInstallation").text("");
                        $("#summValVasSuperMESHWifiDiscountInstallation").text("");

                        $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                        $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                        $("#sideTabVasSuperMESHWifiInstallation").hide();
                    }

                    /// Auto SuperMESHWifi //R21.11 ATV
                    if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageAutoSuperMESHWifiListMeshArpu.length > 0) {
                        var packageAutoSuperMESHWifiListMeshArpu = tmpPackageDataV2.packageAutoSuperMESHWifiListMeshArpu.filter(function (elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        });
                        if (packageAutoSuperMESHWifiListMeshArpu != undefined && packageAutoSuperMESHWifiListMeshArpu.length > 0) {
                            var sffPromotionCodeAutoSuperMESHWifi = "";
                            $.each(packageAutoSuperMESHWifiListMeshArpu, function (i, e) {
                                sffPromotionCodeAutoSuperMESHWifi = e.SFF_PROMOTION_CODE;
                            });
                            if (action == "Add") {
                                objMonthlySuperMESHWifiAutoArry.push({ SffPromotionCode: sffPromotionCodeAutoSuperMESHWifi, Name: packageMsg, Value: priceCharge });
                            }
                            else {

                            }
                        }
                    }
                }
            }
        }
        else if (contentType == "IpCamera7Days") { //R23.06 IP Camera
            objInstallContentIpCamera7DaysArry = [];
            objMonthlyIpCamera7DaysArry = [];
            objMonthlyAutoIpCamera7DaysArry = [];
            var IPCAMERA7DAYS_COUNT = parseInt($("#ddlIpCamera7Days" + sffPromotionCode).val());
            var sffPromotionCodeIpCamera = sffPromotionCode;
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageIpCameraList.length > 0) {

                var tmpPackageIpCamera = tmpPackageDataV2.packageIpCameraList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });

                if (tmpPackageIpCamera != undefined && tmpPackageIpCamera.length > 0) {
                    /// Monthly IP Camera
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var tmpPriceCharge = 0;
                    var quantity = 0;
                    var sumIpCamera = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    var cur = "";
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageIpCamera, function (i, eDDL) {
                        sffPromotionCode = eDDL.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(eDDL.PRICE_CHARGE);
                        tmpPriceCharge = parseFloat(eDDL.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = eDDL.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = eDDL.PACKAGE_DISPLAY_THA;
                            cur = "บาท";
                        }
                        else {
                            packageMsg = eDDL.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = eDDL.PACKAGE_DISPLAY_ENG;
                            cur = "THB";
                        }
                    });

                    //23.06 IP Camera
                    funcCountIpCameraArr(sffPromotionCode); // Get data objCountMaxIpCameraArry
                    priceCharge = priceCharge * objCountMaxIpCameraArry[0].countIpCamera7Days;

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblIpCamera7DaysMonthly").text(packageMsgR);
                        $("#lblSumIpCamera7DaysMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trIpCamera7DaysMonthly").show();
                        funcObjMonthlyIpCameraAllDays(contentType, sffPromotionCode, tmpPriceCharge, packageMsg, packageMsgR, cur);
                        $("#ddlIpCamera7Days" + sffPromotionCode).prop("disabled", false);
                    }
                    else {
                        if ($("#lblSumIpCamera7DaysMonthly").text() != "") {
                            sumIpCamera = parseInt($("#lblSumIpCamera7DaysMonthly").text());
                            sumTotal2Vas -= sumIpCamera;
                        }
                        else {
                            sumTotal2Vas -= priceCharge
                        }
                        //------------------
                        $("#lblIpCamera7DaysMonthly").text("");
                        $("#lblSumIpCamera7DaysMonthly").text("");
                        $("#trIpCamera7DaysMonthly").hide();
                        $("#ddlIpCamera7Days" + sffPromotionCode).prop("disabled", true);
                    }
                    $("#tempIpCamera" + sffPromotionCode).val(priceCharge);
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));

                    //Install IpCamera
                    var sffPromotionCodeInstall = "";
                    var prePriceCharge = 0;
                    var priceCharge = 0;
                    var sumTotal1Vas = 0;
                    var tmpstrIpCameraInstall = "";
                    var tmpstrIpCameraDisInstall = "";
                    var flagContractDeviceIpCamera = false;
                    var durationByMonth = "";
                    sumTotal1Vas = parseFloat($("#tmpSummTotal1Vas").text());

                    if (tmpPackageDataDeviceContract.ContractDeviceList != undefined && tmpPackageDataDeviceContract.ContractDeviceList.length > 0) {
                        var tmpContractDeviceIpCameraList = tmpPackageDataDeviceContract.ContractDeviceList.filter(function (elem) {
                            return elem.PRODUCT_SUBTYPE.indexOf("IP_CAMERA") !== -1;
                        });
                        console.log(tmpContractDeviceIpCameraList);
                        if (tmpContractDeviceIpCameraList != undefined && tmpContractDeviceIpCameraList.length > 0) {
                            flagContractDeviceIpCamera = true;
                            $.each(tmpContractDeviceIpCameraList, function (i, e) {
                                sffPromotionCodeInstall = e.SFF_PROMOTION_CODE;
                                prePriceCharge = parseFloat(e.PENALTY_CHARGE);
                                priceCharge = parseFloat(e.PENALTY_CHARGE);
                                durationByMonth = e.DURATION_BY_MONTH;
                                if ('@language' == "1") {
                                    tmpstrIpCameraInstall = e.CONTRACT_DISPLAY_TH_1;
                                    tmpstrIpCameraDisInstall = e.CONTRACT_DISPLAY_TH_2;
                                }
                                else {
                                    tmpstrIpCameraInstall = e.CONTRACT_DISPLAY_EN_1;
                                    tmpstrIpCameraDisInstall = e.CONTRACT_DISPLAY_EN_2;
                                }
                            });
                        }
                    }

                    if (action == "Add" && flagContractDeviceIpCamera == true) {
                        $("#sideTabVasIpCamera7DaysInstallation").html("");
                        var strInstallationIpCameraDetail = "";
                        if (IPCAMERA7DAYS_COUNT == 1) {
                            strInstallationIpCameraDetail += "<div><p class='clearfix'></p>";
                            strInstallationIpCameraDetail += "<span class='col-xs-8'><span id='summLbVasIpCamera7DaysInstallation1'>" + tmpstrIpCameraInstall + "</span></span>";
                            strInstallationIpCameraDetail += "<span class='col-xs-4 text-right'><span id='summValVasIpCamera7DaysInstallation1'>" + accounting.formatNumber(prePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                            strInstallationIpCameraDetail += "<div><p class='clearfix'></p>";
                            strInstallationIpCameraDetail += "<span class='col-xs-8'><span id='summLbVasIpCamera7DaysDiscountInstallation1' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>" + tmpstrIpCameraDisInstall + "</span></span>";
                            strInstallationIpCameraDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasIpCamera7DaysDiscountInstallation1'>" + accounting.formatNumber(priceCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";
                        }
                        else {
                            var icIpCamera = 0;
                            var strWORDIND_IPCAMERA = "";
                            while (icIpCamera < IPCAMERA7DAYS_COUNT) {
                                strWORDIND_IPCAMERA = "@WORDIND_MESH";
                                strWORDIND_IPCAMERA = strWORDIND_IPCAMERA.replace("{x}", (icIpCamera + 1).toString());
                                strInstallationIpCameraDetail += "<div><p class='clearfix'></p>";
                                strInstallationIpCameraDetail += "<span class='col-xs-8'><span id='summLbVasIpCamera7DaysInstallation" + (icIpCamera + 1).toString() + "'>" + tmpstrIpCameraInstall + " " + strWORDIND_IPCAMERA + "</span></span>";
                                strInstallationIpCameraDetail += "<span class='col-xs-4 text-right'><span id='summValVasIpCamera7DaysInstallation" + (icIpCamera + 1).toString() + "'>" + accounting.formatNumber(prePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                                strInstallationIpCameraDetail += "<div><p class='clearfix'></p>";
                                strInstallationIpCameraDetail += "<span class='col-xs-8'><span id='summLbVasIpCamera7DaysDiscountInstallation" + (icIpCamera + 1).toString() + "' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>" + tmpstrIpCameraDisInstall + " " + strWORDIND_IPCAMERA + "</span></span>";
                                strInstallationIpCameraDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasIpCamera7DaysDiscountInstallation" + (icIpCamera + 1).toString() + "'>" + accounting.formatNumber(priceCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";
                                icIpCamera++;
                            }
                        }
                        $("#sideTabVasIpCamera7DaysInstallation").html(strInstallationIpCameraDetail);
                        //------------------

                        sumTotal1Vas += prePriceCharge - priceCharge;

                        //------------------

                        $("#summValVasIpCamera7DaysInstallation").text(accounting.formatNumber(prePriceCharge, 2));
                        $("#summValVasIpCamera7DaysDiscountInstallation").text(accounting.formatNumber(priceCharge, 2));

                        $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                        $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                        $("#sideTabVasIpCamera7DaysInstallation").show();
                        objInstallContentIpCamera7DaysArry.push({ IpCameraCodeMain: sffPromotionCode, SffPromotionCode: sffPromotionCodeInstall, Name: tmpstrIpCameraInstall, Value: prePriceCharge, DurationByMonth: durationByMonth, Action: "Add" });
                        objInstallContentIpCamera7DaysArry.push({ IpCameraCodeMain: sffPromotionCode, SffPromotionCode: sffPromotionCodeInstall, Name: tmpstrIpCameraDisInstall, Value: priceCharge, DurationByMonth: durationByMonth, Action: "Del" });
                    }
                    else {
                        $("#sideTabVasIpCamera7DaysInstallation").html("");
                        //------------------
                        sumTotal1Vas -= prePriceCharge - priceCharge;
                        //------------------
                        $("#summValVasIpCamera7DaysInstallation").text("");
                        $("#summValVasIpCamera7DaysDiscountInstallation").text("");

                        $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                        $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                        $("#sideTabVasIpCamera7DaysInstallation").hide();
                    }

                    //R23.08 Auto IP Camera Auto
                    if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageAutoIpCameraList.length > 0) {
                        var tmpPackageAutoIpCamera = tmpPackageDataV2.packageAutoIpCameraList.filter(function (elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        });
                        if (tmpPackageAutoIpCamera != undefined && tmpPackageAutoIpCamera.length > 0) {
                            var sffPromotionCodeAutoIpCamera = "";
                            $.each(tmpPackageAutoIpCamera, function (i, e) {
                                sffPromotionCodeAutoIpCamera = e.SFF_PROMOTION_CODE;
                            });
                            if (action == "Add") {
                                objMonthlyAutoIpCamera7DaysArry.push({ SffPromotionCode: sffPromotionCodeAutoIpCamera, Name: packageMsg, Value: priceCharge });
                            }
                            else {

                            }
                        }
                    }
                }
            }
        }
        else if (contentType == "Playbox") {
            objInstallContentPlayboxArry = [];
            objMonthlyPlayBoxArry = [];
            objMonthlyContentPlayBoxAutoArry = []; //R21.11 ATV
            var sffPromotionCodePBOX = sffPromotionCode; //R21.11 ATV
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packagePlayboxMonthlyFeeList.length > 0) {

                var tmpPackagePlayboxMonthlyFeeList = tmpPackageDataV2.packagePlayboxMonthlyFeeList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackagePlayboxMonthlyFeeList != undefined && tmpPackagePlayboxMonthlyFeeList.length > 0) {
                    /// Monthly
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var packageMsg = "";
                    var sumTotal2Vas = 0;

                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackagePlayboxMonthlyFeeList, function (i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.PACKAGE_DISPLAY_THA;
                        }
                        else {
                            packageMsg = e.PACKAGE_DISPLAY_ENG;
                        }
                    });

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblPlayBoxMonthly").text(packageMsg);
                        $("#lblSumPlayBoxMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trPlayBoxMonthly").show();
                        objMonthlyPlayBoxArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, Value: priceCharge });
                    }
                    else {
                        sumTotal2Vas -= priceCharge;
                        $("#lblPlayBoxMonthly").text("");
                        $("#lblSumPlayBoxMonthly").text("");
                        $("#trPlayBoxMonthly").hide();
                    }
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));

                    /// Install
                    if (tmpPackageDataV2.packagePlayboxList != undefined && tmpPackageDataV2.packagePlayboxList.length > 0) {
                        var tmpPackagePlayboxList = tmpPackageDataV2.packagePlayboxList.filter(function (elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                        });
                        if (tmpPackagePlayboxList != undefined && tmpPackagePlayboxList.length > 0) {
                            var sffPromotionCodeInstall = "";
                            var prePriceCharge = 0;
                            var priceCharge = 0;
                            var prePriceChargeDefault = 0; //R21.12PP ATV
                            var priceChargeDefault = 0; //R21.12PP ATV
                            var discountChargeDefault = 0; //R21.12PP ATV
                            var sumTotal1Vas = 0;
                            var tmpstrPlayboxInstall = ""; //R21.11 ATV
                            var tmpstrPlayboxDisInstall = ""; //R21.11 ATV
                            var flagContractDevicePlaybox = false; //R21.11 ATV
                            var durationByMonth = ""; //R21.11 ATV
                            sumTotal1Vas = parseFloat($("#tmpSummTotal1Vas").text());
                            $.each(tmpPackagePlayboxList, function (i, e) {
                                sffPromotionCodeInstall = e.SFF_PROMOTION_CODE;
                                prePriceChargeDefault = parseFloat(e.PRE_PRICE_CHARGE); //R21.12PP ATV
                                priceChargeDefault = parseFloat(e.PRICE_CHARGE); //R21.12PP ATV
                            });

                            //R21.11 ATV
                            if (tmpPackageDataDeviceContract.ContractDeviceList != undefined && tmpPackageDataDeviceContract.ContractDeviceList.length > 0) {
                                var tmpContractDeviceList = tmpPackageDataDeviceContract.ContractDeviceList.filter(function (elem) {
                                    return elem.PRODUCT_SUBTYPE.indexOf("PBOX") !== -1;
                                });
                                if (tmpContractDeviceList != undefined && tmpContractDeviceList.length > 0)
                                {
                                    //ATV
                                    flagContractDevicePlaybox = true;
                                    $.each(tmpContractDeviceList, function (i, e) {
                                        prePriceCharge = parseFloat(e.PENALTY_CHARGE);
                                        priceCharge = parseFloat(e.PENALTY_CHARGE);
                                        durationByMonth = e.DURATION_BY_MONTH;
                                        if ('@language' == "1") {
                                            tmpstrPlayboxInstall = e.CONTRACT_DISPLAY_TH_1;
                                            tmpstrPlayboxDisInstall = e.CONTRACT_DISPLAY_TH_2;
                                        }
                                        else {
                                            tmpstrPlayboxInstall = e.CONTRACT_DISPLAY_EN_1;
                                            tmpstrPlayboxDisInstall = e.CONTRACT_DISPLAY_EN_2;
                                        }
                                    });
                                }
                            }
                            //---------

                            if (action == "Add") {
                                //R21.11 ATV
                                if (flagContractDevicePlaybox){
                                    //ATV
                                    sumTotal1Vas += (prePriceCharge - priceCharge);

                                    objInstallContentPlayboxArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: tmpstrPlayboxInstall, Value: prePriceCharge, DurationByMonth: durationByMonth, Action: "Add", flagATV: true });
                                    objInstallContentPlayboxArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: tmpstrPlayboxDisInstall, Value: priceCharge, DurationByMonth: durationByMonth, Action: "Del", flagATV: true });

                                    $("#summLbVasPlayboxInstallation").text(tmpstrPlayboxInstall);
                                    $("#summLbVasPlayboxDiscountInstallation").text(tmpstrPlayboxDisInstall);
                                    $("#summValVasPlayboxInstallation").text(accounting.formatNumber(prePriceCharge, 2));
                                    $("#summValVasPlayboxDiscountInstallation").text(accounting.formatNumber(priceCharge, 2));
                                }
                                else {
                                    //Default
                                    if (prePriceChargeDefault > 0) {
                                        discountChargeDefault = prePriceChargeDefault - priceChargeDefault;
                                    }
                                    sumTotal1Vas += priceChargeDefault;

                                    objInstallContentPlayboxArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: '@L_ONTOP_PLAYBOX_PRE_INITIATION', DurationByMonth: durationByMonth, Value: prePriceChargeDefault, Action: "Add", flagATV: false });
                                    objInstallContentPlayboxArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: '@L_ONTOP_PLAYBOX_DISCOUNT_INITIATION', DurationByMonth: durationByMonth, Value: discountChargeDefault, Action: "Del", flagATV: false });

                                    $("#summLbVasPlayboxInstallation").text('@L_ONTOP_PLAYBOX_PRE_INITIATION');
                                    $("#summLbVasPlayboxDiscountInstallation").text('@L_ONTOP_PLAYBOX_DISCOUNT_INITIATION');
                                    $("#summValVasPlayboxInstallation").text(accounting.formatNumber(prePriceChargeDefault, 2));
                                    $("#summValVasPlayboxDiscountInstallation").text(accounting.formatNumber(discountChargeDefault, 2));
                                }

                                $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                                $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                                $("#sideTabVasPlayboxInstallation").show();

                            }
                            else {
                                if (flagContractDevicePlaybox) //ATV
                                    sumTotal1Vas -= (prePriceCharge - priceCharge);
                                else //Default
                                    sumTotal1Vas -= priceChargeDefault;

                                $("#summValVasPlayboxInstallation").text("");
                                $("#summValVasPlayboxDiscountInstallation").text("");

                                $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                                $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                                $("#sideTabVasPlayboxInstallation").hide();
                            }
                        }
                    }
                    /// Auto Content Playbox //R21.11 ATV
                    if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageAutoContentPlayboxList.length > 0) {
                        var tmpPackageAutoContentPlaybox = tmpPackageDataV2.packageAutoContentPlayboxList.filter(function (elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                                && elem.AUTO_MAPPING_PROMOTION_CODE.indexOf(sffPromotionCodePBOX) !== -1;
                        });
                        if (tmpPackageAutoContentPlaybox != undefined && tmpPackageAutoContentPlaybox.length > 0) {
                            var sffPromotionCodeAutoContentPlaybox = "";
                            var priceCharge = 0;
                            var packageMsg = "";
                            var sumTotal2Vas = 0;
                            sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                            $.each(tmpPackageAutoContentPlaybox, function (i, e) {
                                sffPromotionCodeAutoContentPlaybox = e.SFF_PROMOTION_CODE;
                                priceCharge = parseFloat(e.PRICE_CHARGE);
                                if ('@language' == "1") {
                                    packageMsg = e.PACKAGE_DISPLAY_THA;
                                }
                                else {
                                    packageMsg = e.PACKAGE_DISPLAY_ENG;
                                }
                            });
                            if (action == "Add") {
                                sumTotal2Vas += priceCharge;
                                $("#lblAutoContentPlayBoxMonthly").text(packageMsg);
                                $("#lblSumAutoContentPlayBoxMonthly").text(accounting.formatNumber(priceCharge, 2));
                                $("#trAutoContentPlayBoxMonthly").show();
                                objMonthlyContentPlayBoxAutoArry.push({ SffPromotionCode: sffPromotionCodeAutoContentPlaybox, Name: packageMsg, Value: priceCharge });
                            }
                            else {
                                sumTotal2Vas -= priceCharge;
                                $("#lblAutoContentPlayBoxMonthly").text("");
                                $("#lblSumAutoContentPlayBoxMonthly").text("");
                                $("#trAutoContentPlayBoxMonthly").hide();
                            }
                            $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                            $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
                        }
                    }
                }
            }
        }
        else if (contentType == "Fixline") {
            objInstallContentFixlineArry = [];
            objMonthlyFixlineArry = [];
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageFixlineList.length > 0) {
                /// Monthly
                var tmpPackageFixline = tmpPackageDataV2.packageFixlineList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageFixline != undefined && tmpPackageFixline.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var packageMsg = "";
                    var sumTotal2Vas = 0;
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageFixline, function (i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.PACKAGE_DISPLAY_THA;
                        }
                        else {
                            packageMsg = e.PACKAGE_DISPLAY_ENG;
                        }
                    });

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblFixLineMonthly").text(packageMsg);
                        $("#lblSumFixLineMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trFixLineMonthly").show();
                        objMonthlyFixlineArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, Value: priceCharge })
                    }
                    else {
                        sumTotal2Vas -= priceCharge;
                        $("#lblFixLineMonthly").text("");
                        $("#lblSumFixLineMonthly").text("");
                        $("#trFixLineMonthly").hide();
                    }
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));

                    /// Install
                    if (tmpPackageDataV2.packageFixlineInstallList != undefined && tmpPackageDataV2.packageFixlineInstallList.length > 0) {
                        var tmpPackageFixlineInstall = tmpPackageDataV2.packageFixlineInstallList.filter(function (elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                        });
                        if (tmpPackageFixlineInstall != undefined && tmpPackageFixlineInstall.length > 0) {
                            var sffPromotionCodeInstall = "";
                            var prePriceCharge = 0;
                            var priceCharge = 0;
                            var discountCharge = 0;
                            var sumTotal1Vas = 0;
                            sumTotal1Vas = parseFloat($("#tmpSummTotal1Vas").text());
                            $.each(tmpPackageFixlineInstall, function (i, e) {
                                sffPromotionCodeInstall = e.SFF_PROMOTION_CODE;
                                prePriceCharge = parseFloat(e.PRE_PRICE_CHARGE);
                                priceCharge = parseFloat(e.PRICE_CHARGE);
                            });
                            if (prePriceCharge > 0) {
                                discountCharge = prePriceCharge - priceCharge;
                            }
                            if (action == "Add") {
                                sumTotal1Vas += priceCharge;
                                $("#summValVasFixLineInstallation").text(accounting.formatNumber(prePriceCharge, 2));
                                $("#summValVasFixLineDiscountInstallation").text(accounting.formatNumber(discountCharge, 2));

                                $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                                $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                                $("#sideTabVasFixLineInstallation").show();
                                objInstallContentFixlineArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: '@L_SUM_INSTALL_RATE', Value: prePriceCharge, Action: "Add" });
                                objInstallContentFixlineArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: '@L_SUM_DISCOUNT_INSTALL_RATE', Value: discountCharge, Action: "Del" });
                            }
                            else {
                                sumTotal1Vas -= priceCharge;
                                $("#summValVasFixLineInstallation").text("");
                                $("#summValVasFixLineDiscountInstallation").text("");

                                $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                                $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                                $("#sideTabVasFixLineInstallation").hide();
                            }
                        }
                    }
                }
            }
        }
        else if (contentType == "WifiLog") {
            objMonthlyWiFiLogArry = [];
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packagWiFiLogList.length > 0) {
                var tmpPackageWifiLog = tmpPackageDataV2.packagWiFiLogList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageWifiLog != undefined && tmpPackageWifiLog.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageWifiLog, function (i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = e.PACKAGE_DISPLAY_THA;
                        }
                        else {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = e.PACKAGE_DISPLAY_ENG;
                        }
                    });

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblWifiLogMonthly").text(packageMsgR);
                        $("#lblSumWifiLogMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trWifiLogMonthly").show();
                        objMonthlyWiFiLogArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, NameR: packageMsgR, Value: priceCharge })
                    }
                    else {
                        sumTotal2Vas -= priceCharge;
                        $("#lblWifiLogMonthly").text("");
                        $("#lblSumWifiLogMonthly").text("");
                        $("#trWifiLogMonthly").hide();
                    }
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
                }
            }
        }
        else if (contentType == "SpeedBoost") {
            objMonthlySpeedBoostArry = [];
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageSpeedBoostList.length > 0) {
                var tmpPackageSpeedBoost = tmpPackageDataV2.packageSpeedBoostList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageSpeedBoost != undefined && tmpPackageSpeedBoost.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageSpeedBoost, function (i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = e.PACKAGE_DISPLAY_THA;
                        }
                        else {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = e.PACKAGE_DISPLAY_ENG;
                        }
                    });

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblSpeedBoostMonthly").text(packageMsgR);
                        $("#lblSumSpeedBoostMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trSpeedBoostMonthly").show();
                        objMonthlySpeedBoostArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, NameR: packageMsgR, Value: priceCharge })
                    }
                    else {
                        sumTotal2Vas -= priceCharge;
                        $("#lblSpeedBoostMonthly").text("");
                        $("#lblSumSpeedBoostMonthly").text("");
                        $("#trSpeedBoostMonthly").hide();
                    }
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
                }
            }
        }
        CalculateFirstShellCostVas();
        checkServiceLevel();
        displayServiceLevel()
    }

    function BindingValueDropDownListDefault(contentType, sffPromotionCode) {
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();

        if (contentType == "SuperMESHWifi") {
            objMonthlySuperMESHWifiArry = [];
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageSuperMESHWifiList.length > 0) {

                var tmpPackageSuperMESHWifi = tmpPackageDataV2.packageSuperMESHWifiList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageSuperMESHWifi != undefined && tmpPackageSuperMESHWifi.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var quantity = 0;
                    var sumSuperMESHWifi = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    var cur = "";
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageSuperMESHWifi, function (i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = e.PACKAGE_DISPLAY_THA;
                            cur = "บาท";
                        }
                        else {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = e.PACKAGE_DISPLAY_ENG;
                            cur = "THB";
                        }
                    });

                    quantity = parseFloat($("#ddlSuperMESHWifi" + sffPromotionCode).val());
                    priceCharge = priceCharge * quantity;

                    //R21.12PP ATV Issue Bug Monthly SuperMESHWifi
                    sumSuperMESHWifi = $("#lblSumSuperMESHWifiMonthly").text() != "" ? parseInt($("#lblSumSuperMESHWifiMonthly").text()) : 0;
                    sumTotal2Vas -= sumSuperMESHWifi;
                    //------------------
                    sumTotal2Vas += priceCharge;
                    $("#lblSuperMESHWifiMonthly").text(packageMsgR);
                    $("#lblSumSuperMESHWifiMonthly").text(accounting.formatNumber(priceCharge, 2));
                    $("#trSuperMESHWifiMonthly").show();

                    const nameR1 = '@package_display_mesh_001'.trim();
                    const nameR2 = '@package_display_mesh_002'.trim();
                    const nameR3 = '@package_display_mesh_003'.trim();
                    objMonthlySuperMESHWifiArry.push({
                        SffPromotionCode: sffPromotionCode,
                        Name: packageMsg,
                        NameR: packageMsgR,
                        NameR1: nameR1,
                        NameR2: nameR2,
                        NameR2_Discount: undefined,
                        NameR3: nameR3,
                        NameR3_Discount: undefined,
                        Value: priceCharge,
                        qty: quantity,
                        currency: cur,
                        method: 'BindingValueDropDownListDefault'
                    });
                    //R21.12PP ATV
                    if (objInstallContentSuperMESHWifiArry != undefined && objInstallContentSuperMESHWifiArry.length > 0) {
                        var tmpstrMeshInstall = "";
                        var tmpstrMeshDisInstall = "";
                        var tmpprePriceCharge = 0;
                        var tmppriceCharge = 0;
                        $.each(objInstallContentSuperMESHWifiArry, function (indexInstall, InstallMeshData) {
                            if (InstallMeshData.Action == "Add") {
                                tmpstrMeshInstall = InstallMeshData.Name;
                                tmpprePriceCharge = InstallMeshData.Value;
                            }
                            else {
                                tmpstrMeshDisInstall = InstallMeshData.Name;
                                tmppriceCharge = InstallMeshData.Value;
                            }
                        });
                    }
                    $("#sideTabVasSuperMESHWifiInstallation").html("");
                    var strInstallationMeshDetail = "";
                    var MESH_COUNT = parseInt(quantity);
                    if (MESH_COUNT == 1) {
                        strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                        strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation1'>" + tmpstrMeshInstall + "</span></span>";
                        strInstallationMeshDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation1'>" + accounting.formatNumber(tmpprePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                        strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                        strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation1' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>" + tmpstrMeshDisInstall + "</span></span>";
                        strInstallationMeshDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasSuperMESHWifiDiscountInstallation1'>" + accounting.formatNumber(tmppriceCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";
                    }
                    else {
                        var icMesh = 0;
                        var strWORDIND_MESH = "";
                        while (icMesh < MESH_COUNT) {
                            strWORDIND_MESH = '@WORDIND_MESH';
                            strWORDIND_MESH = strWORDIND_MESH.replace("{x}", (icMesh + 1).toString());
                            strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                            strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation" + (icMesh + 1).toString() + "'>" + tmpstrMeshInstall + " " + strWORDIND_MESH + "</span></span>";
                            strInstallationMeshDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation" + (icMesh + 1).toString() + "'>" + accounting.formatNumber(tmpprePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                            strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                            strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation" + (icMesh + 1).toString() + "' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>" + tmpstrMeshDisInstall + " " + strWORDIND_MESH + "</span></span>";
                            strInstallationMeshDetail += "<span class='col-xs-4 text-right'  style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasSuperMESHWifiDiscountInstallation" + (icMesh + 1).toString() + "'>" + accounting.formatNumber(tmppriceCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";
                            icMesh++;
                        }
                    }
                    $("#sideTabVasSuperMESHWifiInstallation").html(strInstallationMeshDetail);
                    //------------------

                    $("#tempSuperMESHWifi" + sffPromotionCode).val(priceCharge);
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
                }
            }

            CalculateFirstShellCostVas();
            checkServiceLevel();
            displayServiceLevel()
        }
        else if (contentType == "IpCamera7Days") { //R23.06 IP Camera
            objMonthlyIpCamera7DaysArry = [];
            $("#" + "contentIpCamera0").removeClass("errorinput").addClass("add-rounded-green");
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageIpCameraList.length > 0) {

                var tmpPackageIpCamera = tmpPackageDataV2.packageIpCameraList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageIpCamera != undefined && tmpPackageIpCamera.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var tmpPriceCharge = 0;
                    var quantity = 0;
                    var sumIpCamera = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    var cur = "";
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageIpCamera, function (i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        tmpPriceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = e.PACKAGE_DISPLAY_THA;
                            cur = "บาท";
                        }
                        else {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = e.PACKAGE_DISPLAY_ENG;
                            cur = "THB";
                        }
                    });

                    //23.06 IP Camera
                    funcCountIpCameraArr(sffPromotionCode); // Get data objCountMaxIpCameraArry
                    priceCharge = priceCharge * objCountMaxIpCameraArry[0].countIpCamera7Days;

                    sumIpCamera = $("#lblSumIpCamera7DaysMonthly").text() != "" ? parseInt($("#lblSumIpCamera7DaysMonthly").text()) : 0;
                    sumTotal2Vas -= sumIpCamera;
                    //------------------
                    sumTotal2Vas += priceCharge;
                    $("#lblIpCamera7DaysMonthly").text(packageMsgR);
                    $("#lblSumIpCamera7DaysMonthly").text(accounting.formatNumber(priceCharge, 2));
                    $("#trIpCamera7DaysMonthly").show();
                    funcObjMonthlyIpCameraAllDays(contentType, sffPromotionCode, tmpPriceCharge, packageMsg, packageMsgR, cur);
                    var IPCAMERA7DAYS_COUNT = parseInt(quantity7Day);

                    if (objInstallContentIpCamera7DaysArry != undefined && objInstallContentIpCamera7DaysArry.length > 0) {
                        var tmpstrIpCameraInstall = "";
                        var tmpstrIpCameraDisInstall = "";
                        var tmpprePriceCharge = 0;
                        var tmppriceCharge = 0;
                        $.each(objInstallContentIpCamera7DaysArry, function (indexInstall, InstallIpCameraData) {
                            if (InstallIpCameraData.Action == "Add") {
                                tmpstrIpCameraInstall = InstallIpCameraData.Name;
                                tmpprePriceCharge = InstallIpCameraData.Value;
                            }
                            else {
                                tmpstrIpCameraDisInstall = InstallIpCameraData.Name;
                                tmppriceCharge = InstallIpCameraData.Value;
                            }
                        });
                    }
                    $("#sideTabVasIpCamera7DaysInstallation").html("");
                    var strInstallationIpCameraDetail = "";
                    if (IPCAMERA7DAYS_COUNT == 1) {
                        strInstallationIpCameraDetail += "<div><p class='clearfix'></p>";
                        strInstallationIpCameraDetail += "<span class='col-xs-8'><span id='summLbVasIpCamera7DaysInstallation1'>" + tmpstrIpCameraInstall + "</span></span>";
                        strInstallationIpCameraDetail += "<span class='col-xs-4 text-right'><span id='summValVasIpCamera7DaysInstallation1'>" + accounting.formatNumber(tmpprePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                        strInstallationIpCameraDetail += "<div><p class='clearfix'></p>";
                        strInstallationIpCameraDetail += "<span class='col-xs-8'><span id='summLbVasIpCamera7DaysDiscountInstallation1' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>" + tmpstrIpCameraDisInstall + "</span></span>";
                        strInstallationIpCameraDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasIpCamera7DaysDiscountInstallation1'>" + accounting.formatNumber(tmppriceCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";
                    }
                    else {
                        var icIpCamera = 0;
                        var strWORDIND_IPCAMERA = "";
                        while (icIpCamera < IPCAMERA7DAYS_COUNT) {
                            strWORDIND_IPCAMERA = '@WORDIND_MESH';
                            strWORDIND_IPCAMERA = strWORDIND_IPCAMERA.replace("{x}", (icIpCamera + 1).toString());
                            strInstallationIpCameraDetail += "<div><p class='clearfix'></p>";
                            strInstallationIpCameraDetail += "<span class='col-xs-8'><span id='summLbVasIpCamera7DaysInstallation" + (icIpCamera + 1).toString() + "'>" + tmpstrIpCameraInstall + " " + strWORDIND_IPCAMERA + "</span></span>";
                            strInstallationIpCameraDetail += "<span class='col-xs-4 text-right'><span id='summValVasIpCamera7DaysInstallation" + (icIpCamera + 1).toString() + "'>" + accounting.formatNumber(tmpprePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                            strInstallationIpCameraDetail += "<div><p class='clearfix'></p>";
                            strInstallationIpCameraDetail += "<span class='col-xs-8'><span id='summLbVasIpCamera7DaysDiscountInstallation" + (icIpCamera + 1).toString() + "' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>" + tmpstrIpCameraDisInstall + " " + strWORDIND_IPCAMERA + "</span></span>";
                            strInstallationIpCameraDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasIpCamera7DaysDiscountInstallation" + (icIpCamera + 1).toString() + "'>" + accounting.formatNumber(tmppriceCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";
                            icIpCamera++;
                        }
                    }
                    $("#sideTabVasIpCamera7DaysInstallation").html(strInstallationIpCameraDetail);
                    //------------------

                    $("#tempIpCamera" + sffPromotionCode).val(priceCharge);
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
                }
            }

            CalculateFirstShellCostVas();
            checkServiceLevel();
            displayServiceLevel()
        }
    };

      //******new mesh arpu version*************/
    //var objInstallContentSuperMESHWifiArry = []; //R21.11 ATV
    //var objInstallContentPlayboxArry = [];
    //var objInstallContentFixlineArry = [];
    //var objMonthlySuperMESHWifiArry = [];
    //var objMonthlySuperMESHWifiAutoArry = []; //R21.11 ATV
    //var objMonthlyPlayBoxArry = [];
    //var objMonthlyContentPlayBoxAutoArry = []; //R21.11 ATV
    //var objMonthlyFixlineArry = [];
    //var objMonthlyWiFiLogArry = [];
    //var objMonthlySpeedBoostArry = [];

    //******new mesh arpu version*************/
    function BindingValueContentPromotion(contentType, sffPromotionCode, action) {
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();

        if (contentType == "SuperMESHWifi") {
            objInstallContentSuperMESHWifiArry = []; //R21.11 ATV
            objMonthlySuperMESHWifiArry = [];
            objMonthlySuperMESHWifiAutoArry = []; //R21.11 ATV

            //clear text mesh arpu
            $("#trSuperMESHWifiMonthly").hide();

            $("#trSuperMESHWifiArpuMonthly2").hide();
            $("#trSuperMESHWifiArpuMonthlyDiscount2").hide();
            $("#lblSuperMESHWifiMonthly2").text("");
            $("#lblSumSuperMESHWifiMonthly2").text("");
            $("#lblSuperMESHWifiMonthly_Discount2").text("");
            $("#lblSumSuperMESHWifiMonthly_Discount2").text("");

            $("#trSuperMESHWifiArpuMonthly3").hide();
            $("#trSuperMESHWifiArpuMonthly3Discount").hide();
            $("#lblSuperMESHWifiMonthly3").text("");
            $("#lblSumSuperMESHWifiMonthly3").text("");
            $("#lblSuperMESHWifiMonthly_Discount3").text("");
            $("#lblSumSuperMESHWifiMonthly_Discount3").text("");

            $("#lblSuperMESHWifiMonthlyTotal").text()
            $("#lblSumSuperMESHWifiMonthlyTotal").text()


            var sffPromotionCodeSuperMESHWifi = sffPromotionCode; //R21.11 ATV
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageSuperMESHWifiList.length > 0) {

                var tmpPackageSuperMESHWifi = tmpPackageDataV2.packageSuperMESHWifiList.filter(function(elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });

                if (tmpPackageSuperMESHWifi != undefined && tmpPackageSuperMESHWifi.length > 0) {
                    /// Monthly SuperMESHWifi
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var quantity = 0;
                    var sumSuperMESHWifi = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    var cur = "";
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());

                    //mesh arpu
                    var package_duration =  $("#Install_Package_Duration").val();

                    var package_display_mesh_001 = "@Html.Raw(package_display_mesh_001)";
                    var price_charge_mesh_001 = "@Html.Raw(price_charge_mesh_001)";

                    var package_display_mesh_002 = "@Html.Raw(package_display_mesh_002)";
                    var package_displayDiscount_mesh_002 = "@Html.Raw(package_displayDiscount_mesh_002)";
                        package_displayDiscount_mesh_002 = package_displayDiscount_mesh_002.replace("XX", package_duration)
                    var price_charge_mesh_002 = "@Html.Raw(price_charge_mesh_002)";
                    var price_chargeDiscount_mesh_002 = "@Html.Raw(price_chargeDiscount_mesh_002)" != "" ? "@Html.Raw(price_chargeDiscount_mesh_002)" : "0";

                    var package_display_mesh_003 = "@Html.Raw(package_display_mesh_003)";
                    var package_displayDiscount_mesh_003 = "@Html.Raw(package_displayDiscount_mesh_003)";
                        package_displayDiscount_mesh_003 =package_displayDiscount_mesh_003.replace("XX", package_duration)
                    var price_charge_mesh_003 = "@Html.Raw(price_charge_mesh_003)";
                    var price_chargeDiscount_mesh_003 = "@Html.Raw(price_chargeDiscount_mesh_003)" != "" ? "@Html.Raw(price_chargeDiscount_mesh_003)" : "0";

                    var package_displayDate_mesh = "@Html.Raw(package_displayDate_mesh_004)";
                    console.log(package_displayDate_mesh + "| Content");

                    $.each(tmpPackageSuperMESHWifi, function(i, eDDL) {
                        sffPromotionCode = eDDL.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(eDDL.PRICE_CHARGE);

                        if ('@language' == "1") {
                            packageMsg = eDDL.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = eDDL.PACKAGE_DISPLAY_THA;
                            cur = "บาท";
                        }
                        else {
                            packageMsg = eDDL.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = eDDL.PACKAGE_DISPLAY_ENG;
                            cur = "THB";
                        }
                    });

                    quantity = parseFloat($("#ddlSuperMESHWifi" + sffPromotionCode).val());


                    if (action == "Add") {

                        //mesh arpu
                        if (quantity == 2) {

                            priceCharge = parseFloat(price_charge_mesh_001) + (parseFloat(price_charge_mesh_002) - parseFloat(price_chargeDiscount_mesh_002));
                            sumTotal2Vas += priceCharge;

                            $("#lblSuperMESHWifiMonthly").text(package_display_mesh_001);
                            $("#lblSumSuperMESHWifiMonthly").text(accounting.formatNumber(price_charge_mesh_001, 2));

                            $("#lblSuperMESHWifiMonthly2").text(package_display_mesh_002);
                            $("#lblSumSuperMESHWifiMonthly2").text(accounting.formatNumber(price_charge_mesh_002, 2));
                            $("#lblSuperMESHWifiMonthly_Discount2").text(package_displayDiscount_mesh_002);
                            $("#lblSumSuperMESHWifiMonthly_Discount2").text(accounting.formatNumber(price_chargeDiscount_mesh_002, 2));
                            $("#lblSuperMESHWifiDate").text(package_displayDate_mesh);
                            $("#trSuperMESHWifiDate").show();

                            $("#trSuperMESHWifiMonthly").show();
                            $("#trSuperMESHWifiArpuMonthly2").show();
                            "@Html.Raw(package_displayDiscount_mesh_002)" != "" ? $("#trSuperMESHWifiArpuMonthlyDiscount2").show() : $("#trSuperMESHWifiArpuMonthlyDiscount2").hide(); //$("#trSuperMESHWifiArpuMonthlyDiscount2").show();


                            $("#lblSuperMESHWifiMonthlyTotal").show();
                            $("#lblSumSuperMESHWifiMonthlyTotal").show();
                            $("#lblSuperMESHWifiMonthlyTotal").text("รวมรายการ MESH WiFi ที่ต้องชำระ");
                            $("#lblSumSuperMESHWifiMonthlyTotal").text(accounting.formatNumber(priceCharge, 2));

                            objMonthlySuperMESHWifiArry.push({
                                SffPromotionCode: sffPromotionCode,
                                Name: packageMsg,
                                NameR: packageMsgR,
                                Value: priceCharge,
                                NameS: "รวมรายการ Mesh Wifi ที่ต้องชำระ",
                                NameR1: package_display_mesh_001,
                                Price1: price_charge_mesh_001,
                                NameR2: package_display_mesh_002,
                                NameR2_Discount: package_displayDiscount_mesh_002,
                                Price2: price_charge_mesh_002,
                                Price2_Discount: price_chargeDiscount_mesh_002,
                                qty: quantity,
                                currency: cur
                            })

                            $("#ddlSuperMESHWifi" + sffPromotionCode).prop("disabled", false);

                        } else if (quantity == 3) {

                            priceCharge = parseFloat(price_charge_mesh_001) + (parseFloat(price_charge_mesh_002) - parseFloat(price_chargeDiscount_mesh_002)) + (parseFloat(price_charge_mesh_003) - parseFloat(price_chargeDiscount_mesh_003));
                            sumTotal2Vas += priceCharge;
                            $("#lblSuperMESHWifiMonthly").text(package_display_mesh_001);
                            $("#lblSumSuperMESHWifiMonthly").text(accounting.formatNumber(price_charge_mesh_001, 2));

                            $("#lblSuperMESHWifiMonthly2").text(package_display_mesh_002);
                            $("#lblSumSuperMESHWifiMonthly2").text(accounting.formatNumber(price_charge_mesh_002, 2));

                            $("#lblSuperMESHWifiMonthly3").text(package_display_mesh_003);
                            $("#lblSumSuperMESHWifiMonthly3").text(accounting.formatNumber(price_charge_mesh_003, 2));

                            $("#lblSuperMESHWifiMonthly_Discount2").text(package_displayDiscount_mesh_002);
                            $("#lblSumSuperMESHWifiMonthly_Discount2").text(accounting.formatNumber(price_chargeDiscount_mesh_002, 2));
                            $("#lblSuperMESHWifiMonthly_Discount3").text(package_displayDiscount_mesh_003);
                            $("#lblSumSuperMESHWifiMonthly_Discount3").text(accounting.formatNumber(price_chargeDiscount_mesh_003, 2));

                            $("#lblSuperMESHWifiDate").text(package_displayDate_mesh);
                            $("#trSuperMESHWifiDate").show();
                            $("#trSuperMESHWifiMonthly").show();
                            $("#trSuperMESHWifiArpuMonthly2").show();
                            "@Html.Raw(package_displayDiscount_mesh_002)" != "" ? $("#trSuperMESHWifiArpuMonthlyDiscount2").show() : $("#trSuperMESHWifiArpuMonthlyDiscount2").hide(); //$("#trSuperMESHWifiArpuMonthlyDiscount2").show();

                            $("#trSuperMESHWifiArpuMonthly3").show();
                            "@Html.Raw(package_displayDiscount_mesh_003)" != "" ? $("#trSuperMESHWifiArpuMonthly3Discount").show() : $("#trSuperMESHWifiArpuMonthly3Discount").hide(); //$("#trSuperMESHWifiArpuMonthly3Discount").show();

                            $("#lblSuperMESHWifiMonthlyTotal").show();
                            $("#lblSumSuperMESHWifiMonthlyTotal").show();
                            $("#lblSuperMESHWifiMonthlyTotal").text("รวมรายการ MESH WiFi ที่ต้องชำระ ");
                            $("#lblSumSuperMESHWifiMonthlyTotal").text(accounting.formatNumber(priceCharge, 2));

                            objMonthlySuperMESHWifiArry.push({
                                SffPromotionCode: sffPromotionCode,
                                Name: packageMsg,
                                NameR: packageMsgR,
                                Value: priceCharge,
                                NameS: "รวมรายการ Mesh Wifi ที่ต้องชำระ",
                                NameR1: package_display_mesh_001,
                                Price1: price_charge_mesh_001,
                                NameR2: package_display_mesh_002,
                                NameR2_Discount: package_displayDiscount_mesh_002,
                                Price2: price_charge_mesh_002,
                                Price2_Discount: price_chargeDiscount_mesh_002,
                                NameR3: package_display_mesh_003,
                                NameR3_Discount: package_displayDiscount_mesh_003,
                                Price3: price_charge_mesh_003,
                                Price3_Discount: price_chargeDiscount_mesh_003,
                                qty: quantity,
                                currency: cur
                            })

                            $("#ddlSuperMESHWifi" + sffPromotionCode).prop("disabled", false);

                        } else {

                            priceCharge = parseFloat(price_charge_mesh_001) * quantity;

                            sumTotal2Vas += priceCharge;

                            $("#lblSuperMESHWifiMonthly").text(package_display_mesh_001);
                            $("#lblSumSuperMESHWifiMonthly").text(accounting.formatNumber(priceCharge, 2));
                            $("#trSuperMESHWifiMonthly").show();
                            $("#trSuperMESHWifiArpuMonthly2").hide();
                            $("#trSuperMESHWifiArpuMonthlyDiscount2").hide();
                            $("#trSuperMESHWifiArpuMonthly3").hide();
                            $("#trSuperMESHWifiArpuMonthly3Discount").hide();
                            $("#trSuperMESHWifiDate").hide();
                            $("#lblSuperMESHWifiMonthlyTotal").show();
                            $("#lblSumSuperMESHWifiMonthlyTotal").show();
                            $("#lblSuperMESHWifiMonthlyTotal").text("รวมรายการ MESH WiFi ที่ต้องชำระ");
                            $("#lblSumSuperMESHWifiMonthlyTotal").text(accounting.formatNumber(priceCharge, 2));

                           objMonthlySuperMESHWifiArry.push({
                                SffPromotionCode: sffPromotionCode,
                                Name: packageMsg,
                                NameR: packageMsgR,
                                Value: priceCharge,
                                NameS: "รวมรายการ Mesh Wifi ที่ต้องชำระ",
                                NameR1: package_display_mesh_001,
                                Price1: price_charge_mesh_001,
                                qty: quantity,
                                currency: cur
                           })


                            $("#ddlSuperMESHWifi" + sffPromotionCode).prop("disabled", false);

                        }


                    }
                    else {

                        //mesh arpu
                        if ($("#lblSuperMESHWifiMonthlyTotal").text() != "") {
                            sumSuperMESHWifi = parseInt($("#lblSumSuperMESHWifiMonthlyTotal").text());
                            sumTotal2Vas -= sumSuperMESHWifi;

                        }
                        else {
                            sumTotal2Vas -= priceCharge
                        }


                        $("#lblSuperMESHWifiMonthly").text("");
                        $("#lblSumSuperMESHWifiMonthly").text("");
                        $("#trSuperMESHWifiMonthly").hide();

                        $("#ddlSuperMESHWifi" + sffPromotionCode).prop("disabled", true);

                        //clear text mesh arpu
                        $("#lblSuperMESHWifiMonthly2").text("");
                        $("#lblSumSuperMESHWifiMonthly2").text("");
                        $("#lblSuperMESHWifiMonthly_Discount2").text("");

                        $("#lblSuperMESHWifiMonthly3").text("");
                        $("#lblSumSuperMESHWifiMonthly3").text("");
                        $("#lblSuperMESHWifiMonthly_Discount3").text("");
                        $("#lblSuperMESHWifiDate").text("");
                        $("#trSuperMESHWifiArpuMonthly2").hide();
                        $("#trSuperMESHWifiArpuMonthlyDiscount2").hide();
                        $("#trSuperMESHWifiArpuMonthly3").hide();
                        $("#trSuperMESHWifiArpuMonthly3Discount").hide();
                        $("#trSuperMESHWifiDate").hide();
                        $("#lblSuperMESHWifiMonthlyTotal").text()
                        $("#lblSumSuperMESHWifiMonthlyTotal").text()

                        $("#lblSuperMESHWifiMonthlyTotal").hide();
                        $("#lblSumSuperMESHWifiMonthlyTotal").hide();

                    }


                    $("#tempSuperMESHWifi" + sffPromotionCode).val(priceCharge);
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));

                    //Install SuperMESHWifi //R21.11 ATV
                    var sffPromotionCodeInstall = "";
                    var prePriceCharge = 0;
                    var priceCharge = 0;
                    var sumTotal1Vas = 0;
                    var tmpstrMeshInstall = "";
                    var tmpstrMeshDisInstall = "";
                    var flagContractDeviceMesh = false;
                    var durationByMonth = "";
                    sumTotal1Vas = parseFloat($("#tmpSummTotal1Vas").text());
                    if (tmpPackageDataDeviceContract != undefined && tmpPackageDataDeviceContract != undefined && tmpPackageDataDeviceContract.ContractDeviceList != undefined && tmpPackageDataDeviceContract.ContractDeviceList.length > 0) {
                        var tmpContractDeviceMeshList = tmpPackageDataDeviceContract.ContractDeviceList.filter(function(elem) {
                            return elem.PRODUCT_SUBTYPE.indexOf("MESH") !== -1;
                        });
                        console.log(tmpContractDeviceMeshList)
                        if (tmpContractDeviceMeshList != undefined && tmpContractDeviceMeshList.length > 0) {
                            flagContractDeviceMesh = true;
                            $.each(tmpContractDeviceMeshList, function(i, e) {
                                sffPromotionCodeInstall = e.SFF_PROMOTION_CODE;
                                prePriceCharge = parseFloat(e.PENALTY_CHARGE);
                                priceCharge = parseFloat(e.PENALTY_CHARGE);
                                durationByMonth = e.DURATION_BY_MONTH;
                                if ('@language' == "1") {
                                    tmpstrMeshInstall = e.CONTRACT_DISPLAY_TH_1;
                                    tmpstrMeshDisInstall = e.CONTRACT_DISPLAY_TH_2;
                                }
                                else {
                                    tmpstrMeshInstall = e.CONTRACT_DISPLAY_EN_1;
                                    tmpstrMeshDisInstall = e.CONTRACT_DISPLAY_EN_2;
                                }
                            });
                        }
                    }

                    if (action == "Add" && flagContractDeviceMesh == true) {
                        //R21.12PP ATV
                        $("#sideTabVasSuperMESHWifiInstallation").html("");
                        var strInstallationMeshDetail = "";
                        var MESH_COUNT = parseInt($("#ddlSuperMESHWifi" + sffPromotionCode).val());
                        if (MESH_COUNT == 1) {
                            strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                            strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation1'>" + tmpstrMeshInstall + "</span></span>";
                            strInstallationMeshDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation1'>" + accounting.formatNumber(prePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                            strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                            strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation1' style='color:@SHOW_DISCOUNT_COLOR;'>" + tmpstrMeshDisInstall + "</span></span>";
                            strInstallationMeshDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasSuperMESHWifiDiscountInstallation1'>" + accounting.formatNumber(priceCharge, 2) + "</span> @L_BAHT</span></div>";
                        }
                        else {
                            var icMesh = 0;
                            var strWORDIND_MESH = "";
                            while (icMesh < MESH_COUNT) {
                                strWORDIND_MESH = "@WORDIND_MESH";
                                strWORDIND_MESH = strWORDIND_MESH.replace("{x}", (icMesh + 1).toString());
                                strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                                strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation" + (icMesh + 1).toString() + "'>" + tmpstrMeshInstall + " " + strWORDIND_MESH + "</span></span>";
                                strInstallationMeshDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation" + (icMesh + 1).toString() + "'>" + accounting.formatNumber(prePriceCharge, 2) + "</span> @L_BAHT</span></div>";
                                strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                                strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation" + (icMesh + 1).toString() + "' style='color:@SHOW_DISCOUNT_COLOR;'>" + tmpstrMeshDisInstall + " " + strWORDIND_MESH + "</span></span>";
                                strInstallationMeshDetail += "<span class='col-xs-4 text-right'  style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasSuperMESHWifiDiscountInstallation" + (icMesh + 1).toString() + "'>" + accounting.formatNumber(priceCharge, 2) + "</span> @L_BAHT</span></div>";
                                icMesh++;
                            }
                        }
                        $("#sideTabVasSuperMESHWifiInstallation").html(strInstallationMeshDetail);
                        //ผลรวม(sumTotal1Vas) ของ Install SuperMESHWifi คิดครั้งเดียว เพราะใช้ข้อมูลที่มากจากตัวเดียวกัน
                        //------------------

                        //R21.11 ATV
                        sumTotal1Vas += prePriceCharge - priceCharge;

                        $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                        $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                        $("#sideTabVasSuperMESHWifiInstallation").show();
                        objInstallContentSuperMESHWifiArry.push({ MeshCodeMain: sffPromotionCode, SffPromotionCode: sffPromotionCodeInstall, Name: tmpstrMeshInstall, Value: prePriceCharge, DurationByMonth: durationByMonth, Action: "Add" });
                        objInstallContentSuperMESHWifiArry.push({ MeshCodeMain: sffPromotionCode, SffPromotionCode: sffPromotionCodeInstall, Name: tmpstrMeshDisInstall, Value: priceCharge, DurationByMonth: durationByMonth, Action: "Del" });
                    }
                    else {
                        //R21.12PP ATV
                        $("#sideTabVasSuperMESHWifiInstallation").html("");
                        //------------------
                        //R21.11 ATV
                        sumTotal1Vas -= prePriceCharge - priceCharge;

                        $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                        $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                        $("#sideTabVasSuperMESHWifiInstallation").hide();
                    }

                    /// Auto SuperMESHWifi //R21.11 ATV
                    if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageAutoSuperMESHWifiListMeshArpu.length > 0) {
                        var packageAutoSuperMESHWifiListMeshArpu = tmpPackageDataV2.packageAutoSuperMESHWifiListMeshArpu.filter(function(elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        });
                        if (packageAutoSuperMESHWifiListMeshArpu != undefined && packageAutoSuperMESHWifiListMeshArpu.length > 0) {
                            var sffPromotionCodeAutoSuperMESHWifi = "";
                            $.each(packageAutoSuperMESHWifiListMeshArpu, function(i, e) {
                                sffPromotionCodeAutoSuperMESHWifi = e.SFF_PROMOTION_CODE;
                            });
                            if (action == "Add") {
                                objMonthlySuperMESHWifiAutoArry.push({ SffPromotionCode: sffPromotionCodeAutoSuperMESHWifi, Name: packageMsg, Value: priceCharge });
                            }
                            else {

                            }
                        }
                    }
                }
            }
        }
        else if (contentType == "Playbox") {
            objInstallContentPlayboxArry = [];
            objMonthlyPlayBoxArry = [];
            objMonthlyContentPlayBoxAutoArry = []; //R21.11 ATV
            var sffPromotionCodePBOX = sffPromotionCode; //R21.11 ATV
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packagePlayboxMonthlyFeeList.length > 0) {

                var tmpPackagePlayboxMonthlyFeeList = tmpPackageDataV2.packagePlayboxMonthlyFeeList.filter(function(elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackagePlayboxMonthlyFeeList != undefined && tmpPackagePlayboxMonthlyFeeList.length > 0) {
                    /// Monthly
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var packageMsg = "";
                    var sumTotal2Vas = 0;

                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackagePlayboxMonthlyFeeList, function(i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.PACKAGE_DISPLAY_THA;
                        }
                        else {
                            packageMsg = e.PACKAGE_DISPLAY_ENG;
                        }
                    });

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblPlayBoxMonthly").text(packageMsg);
                        $("#lblSumPlayBoxMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trPlayBoxMonthly").show();
                        objMonthlyPlayBoxArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, Value: priceCharge });
                    }
                    else {
                        sumTotal2Vas -= priceCharge;
                        $("#lblPlayBoxMonthly").text("");
                        $("#lblSumPlayBoxMonthly").text("");
                        $("#trPlayBoxMonthly").hide();
                    }
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));

                    /// Install
                    if (tmpPackageDataV2.packagePlayboxList != undefined && tmpPackageDataV2.packagePlayboxList.length > 0) {
                        var tmpPackagePlayboxList = tmpPackageDataV2.packagePlayboxList.filter(function(elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                        });
                        if (tmpPackagePlayboxList != undefined && tmpPackagePlayboxList.length > 0) {
                            var sffPromotionCodeInstall = "";
                            var prePriceCharge = 0;
                            var priceCharge = 0;
                            var prePriceChargeDefault = 0; //R21.12PP ATV
                            var priceChargeDefault = 0; //R21.12PP ATV
                            var discountChargeDefault = 0; //R21.12PP ATV
                            var sumTotal1Vas = 0;
                            var tmpstrPlayboxInstall = ""; //R21.11 ATV
                            var tmpstrPlayboxDisInstall = ""; //R21.11 ATV
                            var flagContractDevicePlaybox = false; //R21.11 ATV
                            var durationByMonth = ""; //R21.11 ATV
                            sumTotal1Vas = parseFloat($("#tmpSummTotal1Vas").text());
                            $.each(tmpPackagePlayboxList, function(i, e) {
                                sffPromotionCodeInstall = e.SFF_PROMOTION_CODE;
                                prePriceChargeDefault = parseFloat(e.PRE_PRICE_CHARGE); //R21.12PP ATV
                                priceChargeDefault = parseFloat(e.PRICE_CHARGE); //R21.12PP ATV
                            });

                            //R21.11 ATV
                            if (tmpPackageDataDeviceContract != undefined && tmpPackageDataDeviceContract != undefined && tmpPackageDataDeviceContract.ContractDeviceList != undefined && tmpPackageDataDeviceContract.ContractDeviceList.length > 0) {
                                var tmpContractDeviceList = tmpPackageDataDeviceContract.ContractDeviceList.filter(function(elem) {
                                    return elem.PRODUCT_SUBTYPE.indexOf("PBOX") !== -1;
                                });
                                if (tmpContractDeviceList != undefined && tmpContractDeviceList.length > 0) {
                                    //ATV
                                    flagContractDevicePlaybox = true;
                                    $.each(tmpContractDeviceList, function(i, e) {
                                        prePriceCharge = parseFloat(e.PENALTY_CHARGE);
                                        priceCharge = parseFloat(e.PENALTY_CHARGE);
                                        durationByMonth = e.DURATION_BY_MONTH;
                                        if ('@language' == "1") {
                                            tmpstrPlayboxInstall = e.CONTRACT_DISPLAY_TH_1;
                                            tmpstrPlayboxDisInstall = e.CONTRACT_DISPLAY_TH_2;
                                        }
                                        else {
                                            tmpstrPlayboxInstall = e.CONTRACT_DISPLAY_EN_1;
                                            tmpstrPlayboxDisInstall = e.CONTRACT_DISPLAY_EN_2;
                                        }
                                    });
                                }
                            }
                            //---------

                            if (action == "Add") {
                                //R21.11 ATV
                                if (flagContractDevicePlaybox) {
                                    //ATV
                                    sumTotal1Vas += (prePriceCharge - priceCharge);

                                    objInstallContentPlayboxArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: tmpstrPlayboxInstall, Value: prePriceCharge, DurationByMonth: durationByMonth, Action: "Add", flagATV: true });
                                    objInstallContentPlayboxArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: tmpstrPlayboxDisInstall, Value: priceCharge, DurationByMonth: durationByMonth, Action: "Del", flagATV: true });

                                    $("#summLbVasPlayboxInstallation").text(tmpstrPlayboxInstall);
                                    $("#summLbVasPlayboxDiscountInstallation").text(tmpstrPlayboxDisInstall);
                                    $("#summValVasPlayboxInstallation").text(accounting.formatNumber(prePriceCharge, 2));
                                    $("#summValVasPlayboxDiscountInstallation").text(accounting.formatNumber(priceCharge, 2));
                                }
                                else {
                                    //Default
                                    if (prePriceChargeDefault > 0) {
                                        discountChargeDefault = prePriceChargeDefault - priceChargeDefault;
                                    }
                                    sumTotal1Vas += priceChargeDefault;

                                    objInstallContentPlayboxArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: '@Html.Raw(L_ONTOP_PLAYBOX_PRE_INITIATION)', DurationByMonth: durationByMonth, Value: prePriceChargeDefault, Action: "Add", flagATV: false });
                                    objInstallContentPlayboxArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: '@Html.Raw(L_ONTOP_PLAYBOX_DISCOUNT_INITIATION)', DurationByMonth: durationByMonth, Value: discountChargeDefault, Action: "Del", flagATV: false });

                                    $("#summLbVasPlayboxInstallation").text('@Html.Raw(L_ONTOP_PLAYBOX_PRE_INITIATION)');
                                    $("#summLbVasPlayboxDiscountInstallation").text('@Html.Raw(L_ONTOP_PLAYBOX_DISCOUNT_INITIATION)');
                                    $("#summValVasPlayboxInstallation").text(accounting.formatNumber(prePriceChargeDefault, 2));
                                    $("#summValVasPlayboxDiscountInstallation").text(accounting.formatNumber(discountChargeDefault, 2));
                                }

                                $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                                $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                                $("#sideTabVasPlayboxInstallation").show();

                            }
                            else {
                                if (flagContractDevicePlaybox) //ATV
                                    sumTotal1Vas -= (prePriceCharge - priceCharge);
                                else //Default
                                    sumTotal1Vas -= priceChargeDefault;

                                $("#summValVasPlayboxInstallation").text("");
                                $("#summValVasPlayboxDiscountInstallation").text("");

                                $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                                $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                                $("#sideTabVasPlayboxInstallation").hide();
                            }
                        }
                    }
                    /// Auto Content Playbox //R21.11 ATV
                    if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageAutoContentPlayboxList.length > 0) {
                        var tmpPackageAutoContentPlaybox = tmpPackageDataV2.packageAutoContentPlayboxList.filter(function(elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                                && elem.AUTO_MAPPING_PROMOTION_CODE.indexOf(sffPromotionCodePBOX) !== -1;
                        });
                        if (tmpPackageAutoContentPlaybox != undefined && tmpPackageAutoContentPlaybox.length > 0) {
                            var sffPromotionCodeAutoContentPlaybox = "";
                            var priceCharge = 0;
                            var packageMsg = "";
                            var sumTotal2Vas = 0;
                            sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                            $.each(tmpPackageAutoContentPlaybox, function(i, e) {
                                sffPromotionCodeAutoContentPlaybox = e.SFF_PROMOTION_CODE;
                                priceCharge = parseFloat(e.PRICE_CHARGE);
                                if ('@language' == "1") {
                                    packageMsg = e.PACKAGE_DISPLAY_THA;
                                }
                                else {
                                    packageMsg = e.PACKAGE_DISPLAY_ENG;
                                }
                            });
                            if (action == "Add") {
                                sumTotal2Vas += priceCharge;
                                $("#lblAutoContentPlayBoxMonthly").text(packageMsg);
                                $("#lblSumAutoContentPlayBoxMonthly").text(accounting.formatNumber(priceCharge, 2));
                                $("#trAutoContentPlayBoxMonthly").show();
                                objMonthlyContentPlayBoxAutoArry.push({ SffPromotionCode: sffPromotionCodeAutoContentPlaybox, Name: packageMsg, Value: priceCharge });
                            }
                            else {
                                sumTotal2Vas -= priceCharge;
                                $("#lblAutoContentPlayBoxMonthly").text("");
                                $("#lblSumAutoContentPlayBoxMonthly").text("");
                                $("#trAutoContentPlayBoxMonthly").hide();
                            }
                            $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                            $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
                        }
                    }
                }
            }
        }
        else if (contentType == "Fixline") {
            objInstallContentFixlineArry = [];
            objMonthlyFixlineArry = [];
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageFixlineList.length > 0) {
                /// Monthly
                var tmpPackageFixline = tmpPackageDataV2.packageFixlineList.filter(function(elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageFixline != undefined && tmpPackageFixline.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var packageMsg = "";
                    var sumTotal2Vas = 0;
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageFixline, function(i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.PACKAGE_DISPLAY_THA;
                        }
                        else {
                            packageMsg = e.PACKAGE_DISPLAY_ENG;
                        }
                    });

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblFixLineMonthly").text(packageMsg);
                        $("#lblSumFixLineMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trFixLineMonthly").show();
                        objMonthlyFixlineArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, Value: priceCharge })
                    }
                    else {
                        sumTotal2Vas -= priceCharge;
                        $("#lblFixLineMonthly").text("");
                        $("#lblSumFixLineMonthly").text("");
                        $("#trFixLineMonthly").hide();
                    }
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));

                    /// Install
                    if (tmpPackageDataV2.packageFixlineInstallList != undefined && tmpPackageDataV2.packageFixlineInstallList.length > 0) {
                        var tmpPackageFixlineInstall = tmpPackageDataV2.packageFixlineInstallList.filter(function(elem) {
                            return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                        });
                        if (tmpPackageFixlineInstall != undefined && tmpPackageFixlineInstall.length > 0) {
                            var sffPromotionCodeInstall = "";
                            var prePriceCharge = 0;
                            var priceCharge = 0;
                            var discountCharge = 0;
                            var sumTotal1Vas = 0;
                            sumTotal1Vas = parseFloat($("#tmpSummTotal1Vas").text());
                            $.each(tmpPackageFixlineInstall, function(i, e) {
                                sffPromotionCodeInstall = e.SFF_PROMOTION_CODE;
                                prePriceCharge = parseFloat(e.PRE_PRICE_CHARGE);
                                priceCharge = parseFloat(e.PRICE_CHARGE);
                            });
                            if (prePriceCharge > 0) {
                                discountCharge = prePriceCharge - priceCharge;
                            }
                            if (action == "Add") {
                                sumTotal1Vas += priceCharge;
                                $("#summValVasFixLineInstallation").text(accounting.formatNumber(prePriceCharge, 2));
                                $("#summValVasFixLineDiscountInstallation").text(accounting.formatNumber(discountCharge, 2));

                                $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                                $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                                $("#sideTabVasFixLineInstallation").show();
                                objInstallContentFixlineArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: '@L_SUM_INSTALL_RATE', Value: prePriceCharge, Action: "Add" });
                                objInstallContentFixlineArry.push({ SffPromotionCode: sffPromotionCodeInstall, Name: '@L_SUM_DISCOUNT_INSTALL_RATE', Value: discountCharge, Action: "Del" });
                            }
                            else {
                                sumTotal1Vas -= priceCharge;
                                $("#summValVasFixLineInstallation").text("");
                                $("#summValVasFixLineDiscountInstallation").text("");

                                $("#tmpSummTotal1Vas").text(sumTotal1Vas);
                                $("#summTotal1Vas").text(accounting.formatNumber(sumTotal1Vas, 2));
                                $("#sideTabVasFixLineInstallation").hide();
                            }
                        }
                    }
                }
            }
        }
        else if (contentType == "WifiLog") {
            objMonthlyWiFiLogArry = [];
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packagWiFiLogList.length > 0) {
                var tmpPackageWifiLog = tmpPackageDataV2.packagWiFiLogList.filter(function(elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageWifiLog != undefined && tmpPackageWifiLog.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageWifiLog, function(i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = e.PACKAGE_DISPLAY_THA;
                        }
                        else {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = e.PACKAGE_DISPLAY_ENG;
                        }
                    });

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblWifiLogMonthly").text(packageMsgR);
                        $("#lblSumWifiLogMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trWifiLogMonthly").show();
                        objMonthlyWiFiLogArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, NameR: packageMsgR, Value: priceCharge })
                    }
                    else {
                        sumTotal2Vas -= priceCharge;
                        $("#lblWifiLogMonthly").text("");
                        $("#lblSumWifiLogMonthly").text("");
                        $("#trWifiLogMonthly").hide();
                    }
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
                }
            }
        }
        else if (contentType == "SpeedBoost") {
            objMonthlySpeedBoostArry = [];
            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageSpeedBoostList.length > 0) {
                var tmpPackageSpeedBoost = tmpPackageDataV2.packageSpeedBoostList.filter(function(elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageSpeedBoost != undefined && tmpPackageSpeedBoost.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                    $.each(tmpPackageSpeedBoost, function(i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = e.PACKAGE_DISPLAY_THA;
                        }
                        else {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = e.PACKAGE_DISPLAY_ENG;
                        }
                    });

                    if (action == "Add") {
                        sumTotal2Vas += priceCharge;
                        $("#lblSpeedBoostMonthly").text(packageMsgR);
                        $("#lblSumSpeedBoostMonthly").text(accounting.formatNumber(priceCharge, 2));
                        $("#trSpeedBoostMonthly").show();
                        objMonthlySpeedBoostArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, NameR: packageMsgR, Value: priceCharge })
                    }
                    else {
                        sumTotal2Vas -= priceCharge;
                        $("#lblSpeedBoostMonthly").text("");
                        $("#lblSumSpeedBoostMonthly").text("");
                        $("#trSpeedBoostMonthly").hide();
                    }
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
                }
            }
        }
        CalculateFirstShellCostVas();
        checkServiceLevel();
        displayServiceLevel()
    }

    function BindingValueDropDownListPromotion(contentType, sffPromotionCode) {
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();

        if (contentType == "SuperMESHWifi") {
            objMonthlySuperMESHWifiArry = [];

            //clear text mesh arpu
            $("#trSuperMESHWifiArpuMonthly2").hide();
            $("#trSuperMESHWifiArpuMonthlyDiscount2").hide();
            $("#lblSuperMESHWifiMonthly2").text("");
            $("#lblSumSuperMESHWifiMonthly2").text("");
            $("#lblSuperMESHWifiMonthly_Discount2").text("");
            $("#lblSumSuperMESHWifiMonthly_Discount2").text("");

            $("#trSuperMESHWifiArpuMonthly3").hide();
            $("#trSuperMESHWifiArpuMonthly3Discount").hide();
            $("#lblSuperMESHWifiMonthly3").text("");
            $("#lblSumSuperMESHWifiMonthly3").text("");
            $("#lblSuperMESHWifiMonthly_Discount3").text("");
            $("#lblSumSuperMESHWifiMonthly_Discount3").text("");

            $("#lblSuperMESHWifiMonthlyTotal").text()
            $("#lblSumSuperMESHWifiMonthlyTotal").hide()
            $("#lblSumSuperMESHWifiMonthlyTotal").text()

            if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageSuperMESHWifiList.length > 0) {

                var tmpPackageSuperMESHWifi = tmpPackageDataV2.packageSuperMESHWifiList.filter(function(elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
                });
                if (tmpPackageSuperMESHWifi != undefined && tmpPackageSuperMESHWifi.length > 0) {
                    var sffPromotionCode = "";
                    var priceCharge = 0;
                    var quantity = 0;
                    var sumSuperMESHWifi = 0;
                    var packageMsg = "";
                    var packageMsgR = "";
                    var sumTotal2Vas = 0;
                    var cur = "";

                    //mesh arpu
                    var package_duration =  $("#Install_Package_Duration").val();

                    var package_display_mesh_001 = "@Html.Raw(package_display_mesh_001)";
                    var price_charge_mesh_001 = "@Html.Raw(price_charge_mesh_001)";

                    var package_display_mesh_002 = "@Html.Raw(package_display_mesh_002)";
                    var package_displayDiscount_mesh_002 = "@Html.Raw(package_displayDiscount_mesh_002)";
                        package_displayDiscount_mesh_002 =package_displayDiscount_mesh_002.replace("XX", package_duration)
                    var price_charge_mesh_002 = "@Html.Raw(price_charge_mesh_002)";
                    var price_chargeDiscount_mesh_002 = "@Html.Raw(price_chargeDiscount_mesh_002)" != "" ? "@Html.Raw(price_chargeDiscount_mesh_002)" : "0";

                    var package_display_mesh_003 = "@Html.Raw(package_display_mesh_003)";
                    var package_displayDiscount_mesh_003 = "@Html.Raw(package_displayDiscount_mesh_003)";
                        package_displayDiscount_mesh_003 =package_displayDiscount_mesh_003.replace("XX", package_duration)
                    var price_charge_mesh_003 = "@Html.Raw(price_charge_mesh_003)";
                    var price_chargeDiscount_mesh_003 = "@Html.Raw(price_chargeDiscount_mesh_003)" != "" ? "@Html.Raw(price_chargeDiscount_mesh_003)" : "0";

                    var package_displayDate_mesh = "@Html.Raw(package_displayDate_mesh_004)";
                    console.log(package_displayDate_mesh + "| Dropdown");
                    sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());

                    $.each(tmpPackageSuperMESHWifi, function(i, e) {
                        sffPromotionCode = e.SFF_PROMOTION_CODE;
                        priceCharge = parseFloat(e.PRICE_CHARGE);
                        if ('@language' == "1") {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_THA;
                            packageMsgR = e.PACKAGE_DISPLAY_THA;
                            cur = "บาท";
                        }
                        else {
                            packageMsg = e.SFF_WORD_IN_STATEMENT_ENG;
                            packageMsgR = e.PACKAGE_DISPLAY_ENG;
                            cur = "THB";
                        }
                    });

                    quantity = parseFloat($("#ddlSuperMESHWifi" + sffPromotionCode).val());

                    //mesh arpu
                    if (quantity == 2) {

                        priceCharge = parseFloat(price_charge_mesh_001) + (parseFloat(price_charge_mesh_002) - parseFloat(price_chargeDiscount_mesh_002));

                        sumSuperMESHWifi = $("#lblSumSuperMESHWifiMonthlyTotal").text() != "" ? parseInt($("#lblSumSuperMESHWifiMonthlyTotal").text()) : 0;
                        sumTotal2Vas -= sumSuperMESHWifi;

                        sumTotal2Vas += priceCharge;

                        $("#lblSuperMESHWifiMonthly").text(package_display_mesh_001);
                        $("#lblSumSuperMESHWifiMonthly").text(accounting.formatNumber(price_charge_mesh_001, 2));

                        $("#lblSuperMESHWifiMonthly2").text(package_display_mesh_002);
                        $("#lblSumSuperMESHWifiMonthly2").text(accounting.formatNumber(price_charge_mesh_002, 2));
                        $("#lblSuperMESHWifiMonthly_Discount2").text(package_displayDiscount_mesh_002);
                        $("#lblSumSuperMESHWifiMonthly_Discount2").text(accounting.formatNumber(price_chargeDiscount_mesh_002, 2));
                        $("#lblSuperMESHWifiDate").text(package_displayDate_mesh);
                        $("#trSuperMESHWifiDate").show();
                        $("#trSuperMESHWifiMonthly").show();
                        $("#trSuperMESHWifiArpuMonthly2").show();
                        "@Html.Raw(package_displayDiscount_mesh_002)" != "" ? $("#trSuperMESHWifiArpuMonthlyDiscount2").show() : $("#trSuperMESHWifiArpuMonthlyDiscount2").hide(); //$("#trSuperMESHWifiArpuMonthlyDiscount2").show();


                        $("#lblSuperMESHWifiMonthlyTotal").text("รวมรายการ MESH WiFi ที่ต้องชำระ");
                        $("#lblSumSuperMESHWifiMonthlyTotal").text(accounting.formatNumber(priceCharge, 2));
                        $("#lblSumSuperMESHWifiMonthlyTotal").show();

                        objMonthlySuperMESHWifiArry.push({
                            SffPromotionCode: sffPromotionCode,
                            Name: packageMsg,
                            NameR: packageMsgR,
                            Value: priceCharge,
                            NameS: "รวมรายการ Mesh Wifi ที่ต้องชำระ",
                            NameR1: package_display_mesh_001,
                            Price1: price_charge_mesh_001,
                            NameR2: package_display_mesh_002,
                            NameR2_Discount: package_displayDiscount_mesh_002,
                            Price2: price_charge_mesh_002,
                            Price2_Discount: price_chargeDiscount_mesh_002,
                            qty: quantity,
                            currency: cur
                       })


                    }
                    else if (quantity == 3) {

                        priceCharge = parseFloat(price_charge_mesh_001) + (parseFloat(price_charge_mesh_002) - parseFloat(price_chargeDiscount_mesh_002)) + (parseFloat(price_charge_mesh_003) - parseFloat(price_chargeDiscount_mesh_003));

                        sumSuperMESHWifi = $("#lblSumSuperMESHWifiMonthlyTotal").text() != "" ? parseInt($("#lblSumSuperMESHWifiMonthlyTotal").text()) : 0;
                        sumTotal2Vas -= sumSuperMESHWifi;

                        sumTotal2Vas += priceCharge;
                        $("#lblSuperMESHWifiMonthly").text(package_display_mesh_001);
                        $("#lblSumSuperMESHWifiMonthly").text(accounting.formatNumber(price_charge_mesh_001, 2));

                        $("#lblSuperMESHWifiMonthly2").text(package_display_mesh_002);
                        $("#lblSumSuperMESHWifiMonthly2").text(accounting.formatNumber(price_charge_mesh_002, 2));

                        $("#lblSuperMESHWifiMonthly3").text(package_display_mesh_003);
                        $("#lblSumSuperMESHWifiMonthly3").text(accounting.formatNumber(price_charge_mesh_003, 2));

                        $("#lblSuperMESHWifiMonthly_Discount2").text(package_displayDiscount_mesh_002);
                        $("#lblSumSuperMESHWifiMonthly_Discount2").text(accounting.formatNumber(price_chargeDiscount_mesh_002, 2));
                        $("#lblSuperMESHWifiMonthly_Discount3").text(package_displayDiscount_mesh_003);
                        $("#lblSumSuperMESHWifiMonthly_Discount3").text(accounting.formatNumber(price_chargeDiscount_mesh_003, 2));


                        $("#lblSuperMESHWifiDate").text(package_displayDate_mesh);
                        $("#trSuperMESHWifiMonthly").show();
                        $("#trSuperMESHWifiArpuMonthly2").show();
                        "@Html.Raw(package_displayDiscount_mesh_002)" != "" ? $("#trSuperMESHWifiArpuMonthlyDiscount2").show() : $("#trSuperMESHWifiArpuMonthlyDiscount2").hide(); //$("#trSuperMESHWifiArpuMonthlyDiscount2").show();
                        $("#trSuperMESHWifiArpuMonthly3").show();
                        "@Html.Raw(package_displayDiscount_mesh_003)" != "" ? $("#trSuperMESHWifiArpuMonthly3Discount").show() : $("#trSuperMESHWifiArpuMonthly3Discount").hide(); //$("#trSuperMESHWifiArpuMonthly3Discount").show();
                        $("#trSuperMESHWifiDate").show();

                        $("#lblSuperMESHWifiMonthlyTotal").text("รวมรายการ MESH WiFi ที่ต้องชำระ");
                        $("#lblSumSuperMESHWifiMonthlyTotal").text(accounting.formatNumber(priceCharge, 2));
                        $("#lblSumSuperMESHWifiMonthlyTotal").show();

                        objMonthlySuperMESHWifiArry.push({
                            SffPromotionCode: sffPromotionCode,
                            Name: packageMsg,
                            NameR: packageMsgR,
                            Value: priceCharge,
                            NameS: "รวมรายการ Mesh Wifi ที่ต้องชำระ",
                            NameR1: package_display_mesh_001,
                            Price1: price_charge_mesh_001,
                            NameR2: package_display_mesh_002,
                            NameR2_Discount: package_displayDiscount_mesh_002,
                            Price2: price_charge_mesh_002,
                            Price2_Discount: price_chargeDiscount_mesh_002,
                            NameR3: package_display_mesh_003,
                            NameR3_Discount: package_displayDiscount_mesh_003,
                            Price3: price_charge_mesh_003,
                            Price3_Discount: price_chargeDiscount_mesh_003,
                            qty: quantity,
                            currency: cur
                       })


                    } else {

                        priceCharge = priceCharge * quantity;

                        sumSuperMESHWifi = $("#lblSumSuperMESHWifiMonthlyTotal").text() != "" ? parseInt($("#lblSumSuperMESHWifiMonthlyTotal").text()) : 0;
                        sumTotal2Vas -= sumSuperMESHWifi;

                        sumTotal2Vas += priceCharge;

                        $("#lblSuperMESHWifiMonthly").text(package_display_mesh_001);
                        $("#lblSumSuperMESHWifiMonthly").text(accounting.formatNumber(price_charge_mesh_001, 2));
                        $("#trSuperMESHWifiMonthly").show();
                        $("#trSuperMESHWifiArpuMonthly2").hide();
                        $("#trSuperMESHWifiArpuMonthlyDiscount2").hide();
                        $("#trSuperMESHWifiArpuMonthly3").hide();
                        $("#trSuperMESHWifiArpuMonthly3Discount").hide();
                        $("#trSuperMESHWifiDate").hide();

                        $("#lblSuperMESHWifiMonthlyTotal").text("รวมรายการ MESH WiFi ที่ต้องชำระ");
                        $("#lblSumSuperMESHWifiMonthlyTotal").text(accounting.formatNumber(priceCharge, 2));
                        $("#lblSumSuperMESHWifiMonthlyTotal").show();

                        objMonthlySuperMESHWifiArry.push({
                            SffPromotionCode: sffPromotionCode,
                            Name: packageMsg,
                            NameR: packageMsgR,
                            Value: priceCharge,
                            NameS: "รวมรายการ Mesh Wifi ที่ต้องชำระ",
                            NameR1: package_display_mesh_001,
                            Price1: price_charge_mesh_001,
                            qty: quantity,
                            currency: cur
                      })

                    }


                    //R21.12PP ATV
                    if (objInstallContentSuperMESHWifiArry != undefined && objInstallContentSuperMESHWifiArry.length > 0) {
                        var tmpstrMeshInstall = "";
                        var tmpstrMeshDisInstall = "";
                        var tmpprePriceCharge = 0;
                        var tmppriceCharge = 0;
                        $.each(objInstallContentSuperMESHWifiArry, function(indexInstall, InstallMeshData) {
                            if (InstallMeshData.Action == "Add") {
                                tmpstrMeshInstall = InstallMeshData.Name;
                                tmpprePriceCharge = InstallMeshData.Value;
                            }
                            else {
                                tmpstrMeshDisInstall = InstallMeshData.Name;
                                tmppriceCharge = InstallMeshData.Value;
                            }
                        });
                    }
                    $("#sideTabVasSuperMESHWifiInstallation").html("");
                    var strInstallationMeshDetail = "";
                    var MESH_COUNT = parseInt(quantity);
                    if (MESH_COUNT == 1) {
                        strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                        strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation1'>" + tmpstrMeshInstall + "</span></span>";
                        strInstallationMeshDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation1'>" + accounting.formatNumber(tmpprePriceCharge, 2) + "</span> @Html.Raw(L_BAHT)</span></div>";
                        strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                        strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation1' style='color:@SHOW_DISCOUNT_COLOR;'>" + tmpstrMeshDisInstall + "</span></span>";
                        strInstallationMeshDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasSuperMESHWifiDiscountInstallation1'>" + accounting.formatNumber(tmppriceCharge, 2) + "</span> @Html.Raw(L_BAHT)</span></div>";
                    }
                    else {
                        var icMesh = 0;
                        var strWORDIND_MESH = "";
                        while (icMesh < MESH_COUNT) {
                            strWORDIND_MESH = '@Html.Raw(WORDIND_MESH)';
                            strWORDIND_MESH = strWORDIND_MESH.replace("{x}", (icMesh + 1).toString());
                            strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                            strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation" + (icMesh + 1).toString() + "'>" + tmpstrMeshInstall + " " + strWORDIND_MESH + "</span></span>";
                            strInstallationMeshDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation" + (icMesh + 1).toString() + "'>" + accounting.formatNumber(tmpprePriceCharge, 2) + "</span> @Html.Raw(L_BAHT)</span></div>";
                            strInstallationMeshDetail += "<div><p class='clearfix'></p>";
                            strInstallationMeshDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation" + (icMesh + 1).toString() + "' style='color:@SHOW_DISCOUNT_COLOR;'>" + tmpstrMeshDisInstall + " " + strWORDIND_MESH + "</span></span>";
                            strInstallationMeshDetail += "<span class='col-xs-4 text-right'  style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasSuperMESHWifiDiscountInstallation" + (icMesh + 1).toString() + "'>" + accounting.formatNumber(tmppriceCharge, 2) + "</span> @Html.Raw(L_BAHT)</span></div>";
                            icMesh++;
                        }
                    }
                    $("#sideTabVasSuperMESHWifiInstallation").html(strInstallationMeshDetail);
                    //------------------

                    $("#tempSuperMESHWifi" + sffPromotionCode).val(priceCharge);
                    $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                    $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));

                }
            }

            CalculateFirstShellCostVas();
            checkServiceLevel();
            displayServiceLevel()
        };
    };

    var objMonthlyContentPlayBoxArry = [];
    function BindingValueContentPlayBox(sffPromotionCode, action) { //R21.11 ATV (แบบเก่า ไม่ได้ใช้ เก็บไว้ก่อน)
        objMonthlyContentPlayBoxArry = [];
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageContentPlayboxList.length > 0) {
            var tmpPackageContentPlaybox = tmpPackageDataV2.packageContentPlayboxList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                    && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
            });
            if (tmpPackageContentPlaybox != undefined && tmpPackageContentPlaybox.length > 0) {
                var sffPromotionCode = "";
                var priceCharge = 0;
                var packageMsg = "";
                var sumTotal2Vas = 0;
                sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                $.each(tmpPackageContentPlaybox, function (i, e) {
                    sffPromotionCode = e.SFF_PROMOTION_CODE;
                    priceCharge = parseFloat(e.PRICE_CHARGE);
                    if ('@language' == "1") {
                        packageMsg = e.PACKAGE_DISPLAY_THA;
                    }
                    else {
                        packageMsg = e.PACKAGE_DISPLAY_ENG;
                    }
                });
                if (action == "Add") {
                    sumTotal2Vas += priceCharge;
                    $("#lblContentPlayBoxMonthly").text(packageMsg);
                    $("#lblSumContentPlayBoxMonthly").text(accounting.formatNumber(priceCharge, 2));
                    $("#trContentPlayBoxMonthly").show();
                    objMonthlyContentPlayBoxArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, Value: priceCharge });
                }
                else {
                    sumTotal2Vas -= priceCharge;
                    $("#lblContentPlayBoxMonthly").text("");
                    $("#lblSumContentPlayBoxMonthly").text("");
                    $("#trContentPlayBoxMonthly").hide();
                }
                $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
            }
        }
        CalculateFirstShellCostVas();
        checkServiceLevel();
        displayServiceLevel()
    }

    var objMonthlyContentPlayBoxOntopArry = [];
    function BindingValueContentPlayBoxOntop(sffPromotionCode, action) { //R21.11 ATV Ontop
        objMonthlyContentPlayBoxOntopArry = [];
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageContentPlayboxList.length > 0) {
            var tmpPackageContentPlaybox = tmpPackageDataV2.packageContentPlayboxList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                    && elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1;
            });
            if (tmpPackageContentPlaybox != undefined && tmpPackageContentPlaybox.length > 0) {
                var sffPromotionCode = "";
                var priceCharge = 0;
                var packageMsg = "";
                var sumTotal2Vas = 0;
                sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
                $.each(tmpPackageContentPlaybox, function (i, e) {
                    sffPromotionCode = e.SFF_PROMOTION_CODE;
                    priceCharge = parseFloat(e.PRICE_CHARGE);
                    if ('@language' == "1") {
                        packageMsg = e.PACKAGE_DISPLAY_THA;
                    }
                    else {
                        packageMsg = e.PACKAGE_DISPLAY_ENG;
                    }
                });
                if (action == "Add") {
                    sumTotal2Vas += priceCharge;
                    $("#lblContentPlayBoxMonthly").text(packageMsg);
                    $("#lblSumContentPlayBoxMonthly").text(accounting.formatNumber(priceCharge, 2));
                    $("#trContentPlayBoxMonthly").show();
                    objMonthlyContentPlayBoxOntopArry.push({ SffPromotionCode: sffPromotionCode, Name: packageMsg, Value: priceCharge });
                }
                else {
                    sumTotal2Vas -= priceCharge;
                    $("#lblContentPlayBoxMonthly").text("");
                    $("#lblSumContentPlayBoxMonthly").text("");
                    $("#trContentPlayBoxMonthly").hide();
                }
                $("#tmpSummTotal2Vas").text(sumTotal2Vas);
                $("#summTotal2Vas").text(accounting.formatNumber(sumTotal2Vas, 2));
            }
        }
        CalculateFirstShellCostVas();
        checkServiceLevel();
        displayServiceLevel()
    }

    var firstShellCostArry = [];
    function CalculateFirstShellCost() {
        firstShellCostArry = [];
        var sumProrate = 0;
        var sumTotalProrate = 0;
        var sumTotal1 = parseFloat($("#tmpSummTotal1").text());
        var sumTotal2 = parseFloat($("#tmpSummTotal2").text());
        var thisDate = new Date();
        var daysInMonth = thisDate.getDaysInMonth();
        let sumProrateBefore = (sumTotal1 + sumTotal2);
        sumProrate = ((sumTotal1 + sumTotal2) / daysInMonth) * 1;
        sumTotalProrate = (sumTotal1 + sumTotal2) + sumProrate;

        $("#sumProrate").text(accounting.formatNumber(sumProrate, 2));
        $("#sumTotalProrate").text(accounting.formatNumber(sumTotalProrate, 2));

        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL13", Value: "" });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL14", Value: sumProrate });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL15", Value: sumTotalProrate });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL12", Value: "" });
        firstShellCostArry.push({ Name: "@L_SUMM_PRORATE_DETAIL", Value: "" });
        firstShellCostArry.push({ Name: "ค่าเฉลี่ยก่อนหารวัน", Value: sumProrateBefore });
    }

    function CalculateFirstShellCostVas() {
        firstShellCostArry = [];
        var sumProrate = 0;
        var sumTotalProrate = 0;
        var sumTotal1Vas = parseFloat($("#tmpSummTotal1Vas").text());
        var sumTotal2Vas = parseFloat($("#tmpSummTotal2Vas").text());
        var thisDate = new Date();
        var daysInMonth = thisDate.getDaysInMonth();
        let sumProrateBefore = (sumTotal1Vas + sumTotal2Vas);
        sumProrate = ((sumTotal1Vas + sumTotal2Vas) / daysInMonth) * 1;
        sumTotalProrate = sumTotal1Vas + sumTotal2Vas + sumProrate;

        $("#sumProrateVas").text(accounting.formatNumber(sumProrate, 2));
        $("#sumTotalProrateVas").text(accounting.formatNumber(sumTotalProrate, 2));

        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL13", Value: "" });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL14", Value: sumProrate });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL15", Value: sumTotalProrate });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL12", Value: "" });
        firstShellCostArry.push({ Name: "@L_SUMM_PRORATE_DETAIL", Value: "" });
        firstShellCostArry.push({ Name: "ค่าเฉลี่ยก่อนหารวัน", Value: sumProrateBefore });
    }

    var tmpPackageDataV2
    var tmpBundlingDiscount
    function getPackageNewV2(installation) {
        $("#CoveragePanelModel_SAVEORDER_SALE_CHANNEL").val("");
        $("#CoveragePanelModel_SAVEORDER_OWNER_PRODUCT").val("");
        $("#CoveragePanelModel_SAVEORDER_PACKAGE_FOR").val("");
        $("#CoveragePanelModel_SAVEORDER_REGION").val("");
        $("#CoveragePanelModel_SAVEORDER_PROVINCE").val("");
        $("#CoveragePanelModel_SAVEORDER_DISTRICT").val("");
        $("#CoveragePanelModel_SAVEORDER_SUB_DISTRICT").val("");
        $("#CoveragePanelModel_SAVEORDER_SERENADE_FLAG").val("");

        if ($("#CoveragePanelModel_USE_INPUT_MOBILE_ONLINE_QUERY").val() != "Y") {
            $("#CoveragePanelModel_SAVEORDER_FMPA_FLAG").val("");
            $("#CoveragePanelModel_SAVEORDER_CVM_FLAG").val("");
            $("#CoveragePanelModel_SAVEORDER_FMC_SPECIAL_FLAG").val("");
            $("#CoveragePanelModel_SAVEORDER_MOU_FLAG").val("");//R21.10 MOU
        }

        try {
            GetCategory();
            tmpBundlingDiscount = GetPackageCodeAutoMapping();
            var p_region = $("#P_Region").val();
            var p_province = $("#COVERAGE_L_PROVINCE").val();
            var p_district = $("#COVERAGE_L_AMPHUR").val();
            var p_sub_district = $("#COVERAGE_L_TUMBOL").val();
            var p_address_type = $("#P_addrtype").val();
            var p_building_name = $("#P_build_name").val();
            var p_building_no = $("#P_build_no").val();
            var p_package_for = "PUBLIC";
            var p_location_province = "";

            var p_location_code = "@Model.CustomerRegisterPanelModel.L_LOC_CODE";
            var p_asc_code = "@Model.CustomerRegisterPanelModel.L_ASC_CODE";
            var p_partner_type = "@Model.CustomerRegisterPanelModel.outType";
            var p_partner_subtype = "@Model.CustomerRegisterPanelModel.outSubType";

            var p_sale_channel = "CUSTOMER";
            if ("@FromFBBxEOS" == "Y") {
                p_partner_type = "";
                p_partner_subtype = "";
                p_sale_channel = "SME";
            }

            if ("@Model.TopUp" == "5") {   //Officer
                p_sale_channel = "OFFICER";
                p_location_province = $("#outLocationProvince").val();
            }

            if ('@Model.StaffPrivilegeBypass_Flag' == 'Y') {
                p_sale_channel = '@Model.StaffPrivilegeBypass_Channel';
            }

            var PromotionCodeFBBxEOS = "@PromotionCodeFBBxEOS";
            if (PromotionCodeFBBxEOS == "") { PromotionCodeFBBxEOS = "Pxxxxxx" }

            $("#HdchkSerenade_Flag").val($('#CoveragePanelModel_Serenade_Flag').val());
            var onCus_type = sessionStorage.getItem("type");
            var p_Serenade_Flag = "";

            if ("@ViewBag.Vas" == "3") {// ลูกค้า triple
                onCus_type = "AIS";
            }
            if (onCus_type == ""
                || onCus_type == null
                || onCus_type == "NEW") {
                p_Serenade_Flag = "";
            }
            else {
                p_Serenade_Flag = $("#HdchkSerenade_Flag").val();
            }

            if ($("#HdFunctionSubProduct").val() == "") $("#HdFunctionSubProduct").val($("#HdFunctionSubProducts").val());
            if ($("#CoveragePanelModel_SffServiceYear").val() == "") $("#CoveragePanelModel_SffServiceYear").val("0");

            var rentalFlagForSave = "";
            if (sessionStorage.getItem("rentalflag") != 'null' && sessionStorage.getItem("rentalflag") != null) {
                rentalFlagForSave = sessionStorage.getItem("rentalflag");
            }

            $("#CustomerRegisterPanelModel_RentalFlag").val(rentalFlagForSave);

            var asyncSafari = false;
            if (/Safari|iPhone|iPad|iPod/i.test(navigator.userAgent))
                asyncSafari = true;
            // bindvalue For saveOrderNew
            $("#CoveragePanelModel_SAVEORDER_PACKAGE_FOR").val(p_package_for);
            $("#CoveragePanelModel_SAVEORDER_SALE_CHANNEL").val(p_sale_channel);
            $("#CoveragePanelModel_SAVEORDER_REGION").val(p_region);
            $("#CoveragePanelModel_SAVEORDER_PROVINCE").val(p_province);
            $("#CoveragePanelModel_SAVEORDER_DISTRICT").val(p_district);
            $("#CoveragePanelModel_SAVEORDER_SUB_DISTRICT").val(p_sub_district);
            $("#CoveragePanelModel_SAVEORDER_SERENADE_FLAG").val(p_Serenade_Flag);

            // R25.05_28052025

            if ($("#CoveragePanelModel_SAVEORDER_FMC_SPECIAL_FLAG").val() == "") {
                $("#CoveragePanelModel_SAVEORDER_FMC_SPECIAL_FLAG").val('N');
            }

            var p_fmpa_flag = $("#CoveragePanelModel_SAVEORDER_FMPA_FLAG").val();
            var p_cvm_flag = $("#CoveragePanelModel_SAVEORDER_CVM_FLAG").val();
            var p_fmc_special_flag = $("#CoveragePanelModel_SAVEORDER_FMC_SPECIAL_FLAG").val();
            var p_existing_mobile_flag = $("#CoveragePanelModel_EXISTING_MOBILE_FLAG").val();
            var p_use_input_mobile_online_query = $("#CoveragePanelModel_USE_INPUT_MOBILE_ONLINE_QUERY").val();
            var p_mou_flag = $("#CoveragePanelModel_SAVEORDER_MOU_FLAG").val();//R21.10 MOU

            $.ajax({
                type: "GET",
                url: "/SelectPackage/GetListPackageServiceV2",
                data: {
                    "AisAirNumber": sessionStorage.getItem("AisAirNumber"),
                    "accessMode": $("#ZTEAccessModeSerializer").val(),
                    "isPartner": $("#ZTEIsPartner").val(),
                    "partnerName": $("#ZTEPartnerName").val(),
                    "subNetworkType": $("#CoveragePanelModel_ChargeType").val(),
                    "accountCategory": $("#CustomerRegisterPanelModel_AccountCategory").val(),
                    "sffServiceYear": $("#CustomerRegisterPanelModel_SffServiceYear").val(),
                    "p_projectname": $('#CustomerRegisterPanelModel_Project_name').val(),
                    "P_PRODUCT_SUBTYPE": "@Model.v_package_subtype",
                    "P_PACKAGE_FOR": p_package_for,
                    "P_LOCATION_CODE": p_location_code,
                    "P_ASC_CODE" : p_asc_code,
                    "P_REGION": p_region,
                    "P_PROVINCE": p_province,
                    "P_DISTRICT": p_district,
                    "P_SUB_DISTRICT": p_sub_district,
                    "P_PARTNER_TYPE": p_partner_type,
                    "P_PARTNER_SUBTYPE": p_partner_subtype,
                    "P_SERENADE_FLAG": p_Serenade_Flag,
                    "P_CUSTOMER_TYPE": $('#HdchkAC_Category').val(),
                    "P_ADDRESS_ID": $("#CoveragePanelModel_Address_AddressId").val(),
                    "P_CUSTOMER_SUBTYPE": $("#CustomerRegisterPanelModel_CustomerSubtype").val(),
                    "P_STAFF_ID": $("#L_STAFF_ID_FaceRecog").val(),
                    "P_SALE_CHANNEL": p_sale_channel,
                    "P_NON_RES_FLAG": $("#Customer_NonResFlag").val(),
                    "P_DistChn": $("#outDistChn").val(),
                    "P_ChnSales": $("#outChnSales").val(),
                    "P_ShopType": $("#outShopType").val(),
                    "P_LocationProvince": p_location_province,
                    "P_FMPA_FLAG": p_fmpa_flag,
                    "P_CVM_FLAG": p_cvm_flag,
                    "P_FMC_SPECIAL_FLAG": p_fmc_special_flag,
                    "P_EXISTING_MOBILE_FLAG": p_existing_mobile_flag,
                    "P_USE_INPUT_MOBILE_ONLINE_QUERY": p_use_input_mobile_online_query,
                    "P_MOU_FLAG": p_mou_flag, //R21.10 MOU
                    "Is3bbCoverage": $('#Is3bbCoverage').val(),
                    "addressType": p_address_type
                },
                dataType: "json",
                async: asyncSafari,
                success: function (data) {
                    LockScreen(false, "");
                    var tmpMappingCodeSelect;
                    tmpPackageDataV2 = data;

                    var tmpInstallShow = false;
                    $("#page1").hide();
                    $("#page2").show();
                    $("#wrapSwitchLanguage").hide();

                    //Script Adobe Analytic
                    var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
                    digitalData.page = {
                        pageInfo: {
                            pageName: "newfibre:" + lang + ":selectPackage",
                            site: "newfibre",
                            language: lang
                        }
                    }
                    console.log("page load selectPackage : ", lang);


                    if (data.packageGroupList.length == 0) {
                        $("#optionInstallationBody").empty();
                        $("#optionEntryFeeBody").empty();
                        $("#dynamicBody002").empty();
                        $("#divTablePackages").empty();
                        $("#btn002").hide();
                        $("#bullet002").hide();
                        $("#btnNextPage002").hide();
                        if ($('#GRID_ID').val() != '' && $('#GRID_ID').val() != null) {
                            openNoPackagePopupWTTX();
                        }
                    }
                    else {
                        $("#btn002").show();
                        $("#bullet002").show();
                        $("#btnNextPage002").show();

                        var selectPackage = true;
                        var sl = "";
                        var group = "";
                        var groupList = data.packageGroupList;
                        var indexAllPackage = 0;
                        if (groupList != undefined) {
                            $("#CoveragePanelModel_SAVEORDER_OWNER_PRODUCT").val(data.owenerProduct);
                            $("#CoveragePanelModel_SAVEORDER_FMPA_FLAG").val(data.fmpa_flag);
                            $("#CoveragePanelModel_SAVEORDER_CVM_FLAG").val(data.cvm_flag);
                            $("#CoveragePanelModel_SAVEORDER_FMC_SPECIAL_FLAG").val(data.fmc_special_flag);
                            $("#CoveragePanelModel_SAVEORDER_MOU_FLAG").val(data.mou_flag);//R21.10 MOU
                            $.each(groupList, function (groupIndex, groupData) {
                                var strGroupWording = "";
                                var strRemarkGroupWording = "";
                                if ($("#LanguagePage").val() == 1) {
                                    strGroupWording = groupData.PACKAGE_GROUP_DESC_THA;
                                    strRemarkGroupWording = groupData.PACKAGE_REMARK_THA;
                                }
                                else {
                                    strGroupWording = groupData.PACKAGE_GROUP_DESC_ENG;
                                    strRemarkGroupWording = groupData.PACKAGE_REMARK_ENG;
                                }

                                group += "<strong>" + groupData.PACKAGE_GROUP + "</strong><br>" +
                                    strGroupWording +
                                    "<div class='panel panel-info'>";

                                group += "<div class='panel-heading' style='border-bottom: none;!important;'></div>" +
                                    "<div class='table-responsive'>" +
                                    "<table class='table table-hover'><thead class='text-center promotionTitle' style='background: #e9ecf0;' ><tr>" +
                                    "<th class='text-center'> &nbsp;</th>" +
                                    "<th class='text-center'>@Html.Raw(L_TECHNOLOGY)</th>" +
                                    "<th class='text-center'>@Html.Raw(L_DOWNLOAD)</th>" +
                                    "<th class='text-center'>@Html.Raw(L_UPLOAD)</th>" +
                                    "<th class='text-center'>@Html.Raw(L_MONTHLY_FEE)</th>" +
                                    "</tr></thead>";

                                group += "<tbody class='text-center promotionDetail2'  id='dynamicRow" + groupIndex + "'>";

                                var tempPackage = "";
                                $.each(groupData.PackageItems, function (packageIndex, packageData) {
                                    if ("@FromFBBxEOS" != "Y") {
                                        if (selectPackage) {
                                            sl = "checked";
                                            selectPackage = false;
                                            $("#HdFunctionSubProduct").val(packageData.PRODUCT_SUBTYPE);
                                            tmpMappingCodeSelect = packageData.MAPPING_CODE;
                                            if (packageData.INSTALL_SHOW == "Y") {
                                                tmpInstallShow = true;
                                            }
                                        }
                                        tempPackage += appendingMainV2(indexAllPackage, packageData, sl, data.packageAutoList);
                                        indexAllPackage++;
                                        sl = "";
                                    }
                                    else {
                                        // checkPackage Bypass
                                        if (selectPackage && PromotionCodeFBBxEOS == packageData.SFF_PROMOTION_CODE) {
                                            sl = "checked";
                                            selectPackage = false;
                                            $("#HdFunctionSubProduct").val(packageData.PRODUCT_SUBTYPE);
                                            tmpMappingCodeSelect = packageData.MAPPING_CODE;
                                            if (packageData.INSTALL_SHOW == "Y") {
                                                tmpInstallShow = true;
                                            }
                                        }

                                        tempPackage += appendingMainV2(indexAllPackage, packageData, sl, data.packageAutoList);
                                        indexAllPackage++;
                                        sl = "";
                                    }
                                    group += tempPackage;
                                    tempPackage = "";
                                });

                                group += "</tbody></table></div></div>" + strRemarkGroupWording + "<p class='clearfix'></p>";
                            });
                        }

                        $("#dynamicBody002").empty();
                        $("#dynamicBody002")
                            .append(group + "<div class='discountDetail' id='disDetail'></div>" + "");
                        if ($("#WTTX_COVERAGE_RESULT").val() != '') {
                            $("#disDetail").html('@Html.Raw(WTTX_WORDING_SCREEN_LISTPACKAGE)');
                        } else {
                            $("#disDetail").html(getPackageRemarkDetail());
                        }

                        if (tmpInstallShow) {
                            setHtmlInstall(installation, tmpMappingCodeSelect, data.packageInstallList, data.packageInstallList2);
                        }
                        else {
                            objInstallArry = [];
                            $("#tmpSummTotal2Vas").text("0.00");
                            $("#summTotal2Vas").text(accounting.formatNumber(0.00, 2));
                            setInstallContent("");
                        }
                        setHtmlEntryFee(tmpMappingCodeSelect, data.packagEntryFeeList);
                        $('#dynamicBody002').find('table.table-hover').find('tbody').find('tr').attr("style", "cursor: pointer;");
                        $('#dynamicBody002').find('table.table-hover').find('tbody').find('tr').click(function () {
                            $(this).find('th').find('input[type=radio]').prop('checked', true);
                            var radioSelectPackage = $("input[name='SelectPackage']:checked").val();
                            onBindingV2(radioSelectPackage);
                        });

                        var radioSelectPackage = $("input[name='SelectPackage']:checked").val();
                        onBindingV2(radioSelectPackage);

                        if ($("#HdFunctionSubProduct").val() == "WireBB" || $("#HdFunctionSubProduct").val() == "FTTx")
                            $("#lb002-1").text("@L_INTERNET_WIRE");
                        else
                            $("#lb002-1").text("@L_INTERNET_WIRELESS");
                    }
                }
            });

        } catch (e) {
            LockScreen(false, "");
            console.log(e);
        }
    }

    //20.2 : WTTx
    function openNoPackagePopupWTTX() {
        $('#lbPackagePopup-WTTX').html("@Html.Raw(L_RESULT_NOPACKAGE_WTTX)");

        $("#modal-nopackage-wttx").modal();
        $("#modal-nopackage-wttx-detail").show();
    }
    $('#modal-nopackage-wttx').on('hidden.bs.modal', function (e) {
        window.location.href = "/Process/Index";
    });

    var installSffPromotionCodeSelect = "";
    function setHtmlInstall(installation, mappingCode, packageInstallData, packageInstallData2) {
        var dataInstall = packageInstallData;
        var dataInstall2 = packageInstallData2;
        var HtmlInstall = "";
        var installationClick = "";
        if ($("#WTTX_COVERAGE_RESULT").val() == '') {
            HtmlInstall += "<strong>@Html.Raw(SELECT_BY_PAY_INSTALLATION)</strong><p class='clearfix'></p>";
        } else {
            HtmlInstall += "<strong>@Html.Raw(SELECT_BY_PAY_WTTX)</strong><p class='clearfix'></p>";
        }
        HtmlInstall += "<div class='panel panel-info'><div class='panel-heading' style='border-bottom: none; !important;'></div>";
        HtmlInstall += "<div class='table-responsive'><table class='table table-hover'>";
        HtmlInstall += "<tbody class='promotionDetail2'>";
        if (dataInstall != undefined && mappingCode != undefined) {
            dataInstall = dataInstall.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            var dataInstallSelect = dataInstall.filter(function (elem) {
                return elem.SFF_PROMOTION_CODE.indexOf(installSffPromotionCodeSelect) !== -1;
            });

            $.each(dataInstall, function (g, t) {
                if (tmpPackageDataV2.owenerProduct != "WTTx") {
                    var dataInstallSelect2 = dataInstall2.filter(function (elem) {
                        return elem.SFF_PROMOTION_CODE.indexOf(t.AUTO_MAPPING_PROMOTION_CODE) !== -1;
                    });
                    if (installSffPromotionCodeSelect == "" || dataInstallSelect == undefined || dataInstallSelect.length == 0) {
                        //if (installation == 0 && parseFloat(t.PRICE_CHARGE) == 0) {
                        if (installation == 0 && parseFloat(dataInstallSelect2[g].PRICE_CHARGE) == 0) {
                            installationClick = "checked=''";
                        }
                    }
                    else {
                        if (t.SFF_PROMOTION_CODE == installSffPromotionCodeSelect) {
                            installationClick = "checked=''";
                        }
                    }
                }
                else {
                    if (installSffPromotionCodeSelect == "" || dataInstallSelect == undefined || dataInstallSelect.length == 0) {
                        if (installation == 0 && parseFloat(t.PRICE_CHARGE) == 0) {
                            installationClick = "checked=''";
                        }
                    }
                    else {
                        if (t.SFF_PROMOTION_CODE == installSffPromotionCodeSelect) {
                            installationClick = "checked=''";
                        }
                    }
                }

                if ('@language' == "1") {
                    HtmlInstall += "<tr class='promotionDetail-table' style='cursor: pointer;'>";
                    HtmlInstall += "<th><input id='SelectOption_" + g + "' type='radio' value='" + t.SFF_PROMOTION_CODE + "' " + installationClick + " name='SelectOptionInstallation' onclick=''></th>";

                    if (tmpPackageDataV2.owenerProduct != "WTTx") {
                        HtmlInstall += "<td>" + t.PACKAGE_DISPLAY_THA + "<div class='InstallationDetail' id='InstallationDetail_" + t.SFF_PROMOTION_CODE + "' style='color:red; display: none;'> " + dataInstallSelect2[g].PACKAGE_REMARK_THA + "</div></td>";
                    }
                    else {
                        HtmlInstall += "<td>" + t.PACKAGE_DISPLAY_THA + "<div class='InstallationDetail' id='InstallationDetail_" + t.SFF_PROMOTION_CODE + "' style='color:red; display: none;'> " + t.PACKAGE_REMARK_THA + "</div></td>";
                    }
                    HtmlInstall += "</tr>";
                }
                else {
                    HtmlInstall += "<tr class='promotionDetail-table' style='cursor: pointer;'>";
                    HtmlInstall += "<th><input id='SelectOption_" + g + "' type='radio' value='" + t.SFF_PROMOTION_CODE + "' " + installationClick + " name='SelectOptionInstallation' onclick=''></th>";
                    if (tmpPackageDataV2.owenerProduct != "WTTx") {
                        HtmlInstall += "<td>" + t.PACKAGE_DISPLAY_ENG + "<div class='InstallationDetail' id='InstallationDetail_" + t.SFF_PROMOTION_CODE + "' style='color:red; display: none;'> " + dataInstallSelect2[g].PACKAGE_REMARK_ENG + "</div></td>";
                    }
                    else {
                        HtmlInstall += "<td>" + t.PACKAGE_DISPLAY_ENG + "<div class='InstallationDetail' id='InstallationDetail_" + t.SFF_PROMOTION_CODE + "' style='color:red; display: none;'> " + t.PACKAGE_REMARK_ENG + "</div></td>";
                    }
                    HtmlInstall += "</tr>";
                }
                installationClick = "";

            });
        }
        HtmlInstall += "</tbody>";
        HtmlInstall += "</table>";
        HtmlInstall += "</div></div>";

        $("#optionInstallationBody").html(HtmlInstall);

        $('#optionInstallationBody').find('table.table-hover').find('tbody').find('tr').attr("style", "cursor: pointer;");
        $('#optionInstallationBody').find('table.table-hover').find('tbody').find('tr').click(function () {
            $(this).find('th').find('input[type=radio]').prop('checked', true);
            var radioInstall = $("input[name='SelectOptionInstallation']:checked").val();
            onBindingInstallation(radioInstall);
        });

        var radioInstall = $("input[name='SelectOptionInstallation']:checked").val();
        onBindingInstallation(radioInstall, mappingCode);
    }

    var objEntryFeeArry = [];
    var entryFeeSffPromotionCodeSelect = "";
    function setHtmlEntryFee(mappingCode, packageEntryFeeData) {
        var dataEntryFee = packageEntryFeeData;
        var HtmlEntryFee = "";
        var entryFeeClick = "";
        $("#optionEntryFeeBody").html("");
        HtmlEntryFee += "<strong>@Html.Raw(L_ENTRY_FEE)</strong><p class='clearfix'></p>";
        HtmlEntryFee += "<div class='panel panel-info'><div class='panel-heading' style='border-bottom: none; !important;'></div>";
        HtmlEntryFee += "<div class='table-responsive'><table class='table table-hover'>";
        HtmlEntryFee += "<tbody class='promotionDetail2'>";
        if (dataEntryFee != undefined) {
            dataEntryFee = dataEntryFee.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            if (dataEntryFee != undefined && dataEntryFee.length > 1) {
                $.each(dataEntryFee, function (g, t) {
                    if (t.SFF_PROMOTION_CODE == entryFeeSffPromotionCodeSelect) { entryFeeClick = "checked=''"; }
                    if ('@language' == "1") {
                        HtmlEntryFee += "<tr class='promotionDetail-table' style='cursor: pointer;'>";
                        HtmlEntryFee += "<th><input id='SelectOptionEntryFee_" + g + "' type='radio' value='" + t.SFF_PROMOTION_CODE + "' " + entryFeeClick + " name='SelectOptionEntryFee' onclick=''></th>";
                        HtmlEntryFee += "<td>" + t.PACKAGE_DISPLAY_THA + "</td>";
                        HtmlEntryFee += "</tr>";
                    }
                    else {
                        HtmlEntryFee += "<tr class='promotionDetail-table' style='cursor: pointer;'>";
                        HtmlEntryFee += "<th><input id='SelectOptionEntryFee_" + g + "' type='radio' value='" + t.SFF_PROMOTION_CODE + "' " + entryFeeClick + " name='SelectOptionEntryFee' onclick=''></th>";
                        HtmlEntryFee += "<td>" + t.PACKAGE_DISPLAY_ENG + "</td>";
                        HtmlEntryFee += "</tr>";
                    }
                    entryFeeClick = "";
                });

                HtmlEntryFee += "</tbody>";
                HtmlEntryFee += "</table>";
                HtmlEntryFee += "</div></div>";
                $("#optionEntryFeeBody").html(HtmlEntryFee);

                $('#optionEntryFeeBody').find('table.table-hover').find('tbody').find('tr').attr("style", "cursor: pointer;");
                $('#optionEntryFeeBody').find('table.table-hover').find('tbody').find('tr').click(function () {
                    $(this).find('th').find('input[type=radio]').prop('checked', true);
                    var radioEntryFee = $("input[name='SelectOptionEntryFee']:checked").val();
                    onBindingEntryFee(radioEntryFee);
                });
                if ($("input[name='SelectOptionEntryFee']:checked").val() != undefined) {
                    var radioEntryFee = $("input[name='SelectOptionEntryFee']:checked").val();
                    onBindingEntryFee(radioEntryFee);
                }
            }
            else if (dataEntryFee != undefined && dataEntryFee.length == 1) {
                onBindingEntryFee(dataEntryFee[0].SFF_PROMOTION_CODE);
            }
        }
    }

    var lineSetupDetail = "";
    var objMonthlyMainPackageArry = [];
    var objMonthlyAutoPackageArry = [];
    function onBindingV2(mainIndex) {
        console.log("@Html.Raw(meshArpu_Month_Flag)");
        var SelectPackageIndex = $("input[name=SelectPackage]:checked").val();
        var mappingCode = $("#MAPPING_CODE" + SelectPackageIndex).val();
        if ("@Html.Raw(meshArpu_Month_Flag)" == "Y") {
            onBindingV2Promotion(mainIndex);
        } else {
            onBindingV2Default(mainIndex);
        }
    }
    function onBindingV2Default(mainIndex) {
        var sideTabMonthlyHtml = "";
        var sideTabVasMonthlyHtml = "";
        var packageNameSelect = "";
        var packageNameSelectSFF = "";
        var productSubtype = "";
        var priceCharge = 0;
        var mappingCode = "";
        var installShow = "N";
        var sffPromtionCode = "";
        objMonthlyMainPackageArry = [];
        objInstallArry = [];
        objEntryFeeArry = [];
        objInstallContentSuperMESHWifiArry = []; //R21.11 ATV
        objMonthlySuperMESHWifiArry = []; //R21.12PP ATV
        objMonthlySuperMESHWifiAutoArry = []; //R21.11 ATV
        objInstallContentIpCamera7DaysArry = []; //R23.06 IP Camera
        //objInstallContentIpCamera14DaysArry = []; //R23.06 IP Camera
        //objInstallContentIpCamera30DaysArry = []; //R23.06 IP Camera
        objInstallContentIpCameraGroupArry = []; //R23.06 IP Camera
        objMonthlyIpCamera7DaysArry = []; //R23.06 IP Camera
        //objMonthlyIpCamera14DaysArry = []; //R23.06 IP Camera
        //objMonthlyIpCamera30DaysArry = []; //R23.06 IP Camera
        objMonthlyIpCameraGroupArry = []; //R23.06 IP Camera
        objMonthlyAutoIpCamera7DaysArry = []; //R23.06 IP Camera
        objMonthlyAutoIpCameraGroupArry = []; //R23.06 IP Camera
        objCountMaxIpCameraArry = []; //R23.06 IP Camera
        objInstallContentPlayboxArry = [];
        objMonthlyPlayBoxArry = [];
        objMonthlyContentPlayBoxAutoArry = []; //R21.11 ATV
        objMonthlyContentPlayBoxArry = []; //R21.11 ATV (แบบเก่า ไม่ได้ใช้ เก็บไว้ก่อน)
        objMonthlyContentPlayBoxOntopArry = []; //R21.12PP ATV Ontop
        objInstallContentFixlineArry = [];
        objMonthlyFixlineArry = [];
        objMonthlyWiFiLogArry = [];
        objMonthlySpeedBoostArry = []; //R21.12PP ATV
        objMonthlyAutoPackageArry = [];
        objMonthlyDiscountPackageArry = [];
        if (mainIndex != undefined) {
            mappingCode = $("#MAPPING_CODE" + mainIndex).val();
            installShow = $("#INSTALL_SHOW" + mainIndex).val();
            sffPromtionCode = $("#SFF_PROMOTION_CODE" + mainIndex).val();
            if ('@language' == "1") {
                packageNameSelect = $("#PACKAGE_DISPLAY_THA" + mainIndex).val();
                packageNameSelectSFF = $("#SFF_WORD_IN_STATEMENT_THA" + mainIndex).val();
            }
            else {
                packageNameSelect = $("#PACKAGE_DISPLAY_ENG" + mainIndex).val();
                packageNameSelectSFF = $("#SFF_WORD_IN_STATEMENT_ENG" + mainIndex).val();
            }
            priceCharge = parseFloat($("#PRICE_CHARGE" + mainIndex).val());
            productSubtype = $("#PRODUCT_SUBTYPE_" + mainIndex).val();

            showoptionPremiumInstall();
        }

        $("#optionInstallationBody").html("");
        $("#sideTabInstallation").hide();
        $("#trBundling").hide();
        $("#trBundlingVas").hide();
        if (installShow == "Y" && tmpPackageDataV2 != undefined && tmpPackageDataV2.packageInstallList.length > 0) {
            var tmpPackageInstall = tmpPackageDataV2.packageInstallList;
            var tmpPackageInstall2 = tmpPackageDataV2.packageInstallList2;
            setHtmlInstall(0, mappingCode, tmpPackageInstall, tmpPackageInstall2);
            $("#sideTabInstallation").show();
        }
        else {
            objInstallArry = [];
            $("#tmpSummTotal1").text("0.00");
            $("#summTotal1").text(accounting.formatNumber(0.00, 2));
            $("#tmpSummTotal1Vas").text("0.00");
            $("#summTotal1Vas").text(accounting.formatNumber(0.00, 2));
            $("#tmpSummTotal2Vas").text("0.00");
            $("#summTotal2Vas").text(accounting.formatNumber(0.00, 2));
            setInstallContent("");
        }

        $("#optionEntryFeeBody").html("");
        $("#pageDotEntranceFee").hide();
        $("#divEntranceFee").html("");
        $("#pageDotEntranceFeeVasPB").hide();
        $("#divEntranceFeeVas").html("");
        $(".disEntranceFee").each(function () {
            $(this).hide();
        });
        if (mappingCode != "" && tmpPackageDataV2 != undefined && tmpPackageDataV2.packagEntryFeeList.length > 0) {
            setHtmlEntryFee(mappingCode, tmpPackageDataV2.packagEntryFeeList);
        }


        var cdt = "";
        if (productSubtype == "WireBB") {
            cdt = "@L_SUMM_DETAIL_WireBB";
            $("#disConWifi1").html("<br>@L_WIFI_ROUTER_ONU");
            $("#disConWifi2").html("@L_WIFI_DETAIL1");
        }
        else if (productSubtype == "SWiFi") {
            cdt = "@L_SUMM_DETAIL_SWiFi";
            $("#disConWifi1").html("@L_WIFI_ROUTER");
            $("#disConWifi2").html("@L_WIFI_DETAIL2<br><br>");
        }
        else if (productSubtype == "FTTx" || productSubtype == "SYMPHONY") {
            cdt = "@L_SUMM_DETAIL_FTTx";
            $("#disConWifi1").html("<br>@L_WIFI_ROUTER_ONU");
            $("#disConWifi2").html("@L_WIFI_DETAIL1");
        }
        else {
            $("#disConWifi1").html("@L_WIFI_ROUTER");
            $("#disConWifi2").html("@L_WIFI_DETAIL2<br><br>");
        }

        sideTabMonthlyHtml += "<i class='fa fa-chevron-right tgreen'></i><span class='tgreen' id='oProrate'>@L_SUMM_DETAIL9</span>";
        sideTabMonthlyHtml += "<p class='clearfix'></p>";
        sideTabMonthlyHtml += "<div class='col-xs-8'><span id='o6'>@L_SUMM_DETAIL10</span><input type='hidden' id='summLb3'><div id='summLb3show'></div></div>";
        sideTabMonthlyHtml += "<div class='col-xs-4 text-right'><span id='summVal3'></span> @L_BAHT</div>";

        sideTabMonthlyHtml += "<div id='trBundling' style='display: none;'>";
        sideTabMonthlyHtml += "<p class='clearfix'></p>";
        sideTabMonthlyHtml += "<span class='col-xs-8'><span id='Bunding_Discount'></span><span id='Bunding'>@L_BUNDLING_DISCOUNT_DTL</span></span>";
        sideTabMonthlyHtml += "<span class='col-xs-4 text-right'><span id='summBunding'></span> @L_BAHT</span>";
        sideTabMonthlyHtml += "</div>";

        // sideTabVaMonthly
        sideTabVasMonthlyHtml += "<i class='fa fa-chevron-right tgreen'></i><span class='tgreen' id='oProrateVas'>@L_SUMM_DETAIL9</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "<div class='col-xs-8'><span id='o6Vas'>@L_SUMM_DETAIL10</span><input type='hidden' id='summLb3Vas'><div id='summLb3showVas'></div></div>";
        sideTabVasMonthlyHtml += "<div class='col-xs-4 text-right'><span id='summVal3Vas'></span> @L_BAHT</div>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";

        var summTotal2 = priceCharge;

        /// Set Auto Mapping
        objMonthlyAutoPackageArry = [];
        var haveAutoDiscount = false;
        var discountTypeAuto = "";
        var discountValueAuto = 0;
        var discountSffPromotionCodeAuto = "";
        if (mappingCode != "" && tmpPackageDataV2 != undefined && tmpPackageDataV2.packageAutoList.length > 0) {
            var dataPackageAuto = tmpPackageDataV2.packageAutoList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                    && elem.DISPLAY_FLAG.indexOf('Y') !== -1
                    && elem.PACKAGE_TYPE.indexOf('4') === -1;
            });
            if (dataPackageAuto != undefined && dataPackageAuto.length > 0) {
                $.each(dataPackageAuto, function (g, t) {
                    var proNameAuto = "";
                    var priceChargeAuto = 0;
                    priceChargeAuto = parseFloat(t.PRICE_CHARGE);
                    summTotal2 += priceChargeAuto;
                    if ('@language' == "1") {
                        proNameAuto = t.PACKAGE_DISPLAY_THA.replace(/\|/g, '<br>');
                    }
                    else {
                        proNameAuto = t.PACKAGE_DISPLAY_ENG.replace(/\|/g, '<br>');
                    }
                    sideTabMonthlyHtml += "<div><span class='col-xs-8'>" + proNameAuto + "</span>";
                    sideTabMonthlyHtml += "<span class='col-xs-4 text-right'><span>" + accounting.formatNumber(priceChargeAuto, 2) + "</span> @L_BAHT</span>";
                    sideTabMonthlyHtml += "<p class='clearfix'></p></div>";

                    // sideTabVaMonthly
                    sideTabVasMonthlyHtml += "<div><span class='col-xs-8'>" + proNameAuto + "</span>";
                    sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span>" + accounting.formatNumber(priceChargeAuto, 2) + "</span> @L_BAHT</span>";
                    sideTabVasMonthlyHtml += "<p class='clearfix'></p></div>";

                    objMonthlyAutoPackageArry.push({ SffPromotionCode: t.SFF_PROMOTION_CODE, Name: proNameAuto, Value: priceChargeAuto });
                });
            }
            var tmpPackageDiscountAuto = tmpPackageDataV2.packageAutoList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                    && elem.PACKAGE_TYPE.indexOf("4") !== -1
                    && elem.DISPLAY_FLAG.indexOf("Y") !== -1;
            });
            if (tmpPackageDiscountAuto != undefined && tmpPackageDiscountAuto.length > 0) {
                $.each(tmpPackageDiscountAuto, function (i, e) {
                    discountSffPromotionCodeAuto = e.SFF_PROMOTION_CODE;
                    discountTypeAuto = e.DISCOUNT_TYPE;
                    discountValueAuto = parseFloat(e.DISCOUNT_VALUE);
                });
                haveAutoDiscount = true;
            }
        }

        sideTabVasMonthlyHtml += "<div id='trSuperMESHWifiMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSuperMESHWifiMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSuperMESHWifiMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        //R23.06 IP Camera
        if ( "@CHK_IPCAMERA_ACTIVESTATUS" == "Open") {
        //R23.06 IP Camera 7 Days
        sideTabVasMonthlyHtml += "<div id='trIpCamera7DaysMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblIpCamera7DaysMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumIpCamera7DaysMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        //R23.06 IP Camera 14 Days
        @*sideTabVasMonthlyHtml += "<div id='trIpCamera14DaysMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblIpCamera14DaysMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumIpCamera14DaysMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";*@

        //R23.06 IP Camera 30 Days
        @*sideTabVasMonthlyHtml += "<div id='trIpCamera30DaysMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblIpCamera30DaysMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumIpCamera30DaysMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";*@
        }

        sideTabVasMonthlyHtml += "<div id='trPlayBoxMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblPlayBoxMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumPlayBoxMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";



        //R21.11 ATV Content PlayBox Auto
        sideTabVasMonthlyHtml += "<div id='trAutoContentPlayBoxMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblAutoContentPlayBoxMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumAutoContentPlayBoxMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trContentPlayBoxMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblContentPlayBoxMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumContentPlayBoxMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trFixLineMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblFixLineMonthly'>@L_SUM_MAINTEN_RATE</span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumFixLineMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trWifiLogMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblWifiLogMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumWifiLogMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trSpeedBoostMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSpeedBoostMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSpeedBoostMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trBundlingVas' style='display: none;'>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8'><span id='Bunding_Discount'></span><span id='BundingVas'>@L_BUNDLING_DISCOUNT_DTL</span></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='summBundingVas'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        /// sideTabMonthly

        sideTabMonthlyHtml += "<div class='col-xs-8'><strong><span id='o7'>@L_SUMM_DETAIL11</span></strong></div>";
        sideTabMonthlyHtml += "<div class='col-xs-4 text-right'><strong><span id='summTotal2'></span><input type='hidden' id='tmpSummTotal2'> @L_BAHT</strong></div>";
        sideTabMonthlyHtml += "<p class='clearfix'></p>";

        // sideTabVasMonthly
        sideTabVasMonthlyHtml += "<div class='col-xs-8'><strong><span id='o7Vas'>@L_SUMM_DETAIL11</span></strong></div>";
        sideTabVasMonthlyHtml += "<div class='col-xs-4 text-right'><strong><span id='summTotal2Vas'></span><input type='hidden' id='tmpSummTotal2Vas'> @L_BAHT</strong></div>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";

        $("#sideTabMonthly").html(sideTabMonthlyHtml);
        /// sideTabVas
        $("#sideTabVasMonthly").html(sideTabVasMonthlyHtml);
        objMonthlyDiscountPackageArry = [];
        if (haveAutoDiscount) {
            /// calculatesDiscount sideTabVasMonthly
            summTotal2 -= priceCharge;
            summTotal2 += calculatesDiscount(discountTypeAuto, discountValueAuto, discountSffPromotionCodeAuto);
        }

        lineSetupDetail = cdt;
        $("#disCondition2").html(cdt);
        $("#summDetail").text(cdt);
        $("#summDetailVas").text(cdt);
        $("#summLb3").val(packageNameSelect);
        $("#summLb3show").html(packageNameSelect.replace(/\|/g, '<br>'));


        $("#summVal3").text(accounting.formatNumber(priceCharge, 2));
        $("#summTotal2").text(accounting.formatNumber(summTotal2, 2));
        $("#tmpSummTotal2").text(summTotal2);

        /// sideTabVas
        $("#summLb3Vas").val(packageNameSelect);
        $("#summLb3showVas").html(packageNameSelect.replace(/\|/g, '<br>'));


        $("#summVal3Vas").text(accounting.formatNumber(priceCharge, 2));
        $("#summTotal2Vas").text(accounting.formatNumber(summTotal2, 2));
        $("#tmpSummTotal2Vas").text(summTotal2);

        objMonthlyMainPackageArry = [];
        if (sffPromtionCode != "") {
            objMonthlyMainPackageArry.push({ SffPromotionCode: sffPromtionCode, Name: packageNameSelect.replace(/\|/g, '<br>'), NameSFF: packageNameSelectSFF, Value: priceCharge });
        }

        firstShellCostArry = [];

        var thisDate = new Date();
        var daysInMonth = thisDate.getDaysInMonth();
        var sumProrate = 0;
        var sumTotalProrate = 0;
        var sumInstall = 0;
        if ($("#tmpSummTotal1").text() != "") { sumInstall = parseFloat($("#tmpSummTotal1").text()); }
        let sumProrateBefore = (summTotal2 + sumInstall);

        sumProrate = ((summTotal2 + sumInstall) / daysInMonth) * 1;
        sumTotalProrate = summTotal2 + sumInstall + sumProrate;

        $("#sumProrate").text(accounting.formatNumber(sumProrate, 2));
        $("#sumTotalProrate").text(accounting.formatNumber(sumTotalProrate, 2));
        $("#sumProrateVas").text(accounting.formatNumber(sumProrate, 2));
        $("#sumTotalProrateVas").text(accounting.formatNumber(sumTotalProrate, 2));

        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL13", Value: "" });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL14", Value: sumProrate });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL15", Value: sumTotalProrate });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL12", Value: "" });
        firstShellCostArry.push({ Name: "@L_SUMM_PRORATE_DETAIL", Value: "" });
        firstShellCostArry.push({ Name: "ค่าเฉลี่ยก่อนหารวัน", Value: sumProrateBefore });

        //20.4 Service Level
        checkServiceLevel();
        displayServiceLevel()
    }
    function onBindingV2Promotion(mainIndex) {
        var sideTabMonthlyHtml = "";
        var sideTabVasMonthlyHtml = "";
        var packageNameSelect = "";
        var packageNameSelectSFF = "";
        var productSubtype = "";
        var priceCharge = 0;
        var mappingCode = "";
        var installShow = "N";
        var sffPromtionCode = "";
        objMonthlyMainPackageArry = [];
        objInstallArry = [];
        objEntryFeeArry = [];
        objInstallContentSuperMESHWifiArry = []; //R21.11 ATV
        objMonthlySuperMESHWifiArry = []; //R21.12PP ATV
        objMonthlySuperMESHWifiAutoArry = []; //R21.11 ATV
        objInstallContentIpCamera7DaysArry = []; //R23.06 IP Camera
        //objInstallContentIpCamera14DaysArry = []; //R23.06 IP Camera
        //objInstallContentIpCamera30DaysArry = []; //R23.06 IP Camera
        objInstallContentIpCameraGroupArry = []; //R23.06 IP Camera
        objMonthlyIpCamera7DaysArry = []; //R23.06 IP Camera
        //objMonthlyIpCamera14DaysArry = []; //R23.06 IP Camera
        //objMonthlyIpCamera30DaysArry = []; //R23.06 IP Camera
        objMonthlyIpCameraGroupArry = []; //R23.06 IP Camera
        objMonthlyAutoIpCamera7DaysArry = [];
        objMonthlyAutoIpCameraGroupArry = [];
        objCountMaxIpCameraArry = []; //R23.06 IP Camera
        objInstallContentPlayboxArry = [];
        objMonthlyPlayBoxArry = [];
        objMonthlyContentPlayBoxAutoArry = []; //R21.11 ATV
        objMonthlyContentPlayBoxArry = []; //R21.11 ATV (แบบเก่า ไม่ได้ใช้ เก็บไว้ก่อน)
        objMonthlyContentPlayBoxOntopArry = []; //R21.12PP ATV Ontop
        objInstallContentFixlineArry = [];
        objMonthlyFixlineArry = [];
        objMonthlyWiFiLogArry = [];
        objMonthlySpeedBoostArry = []; //R21.12PP ATV
        objMonthlyAutoPackageArry = [];
        objMonthlyDiscountPackageArry = [];
        if (mainIndex != undefined) {
            mappingCode = $("#MAPPING_CODE" + mainIndex).val();
            installShow = $("#INSTALL_SHOW" + mainIndex).val();
            sffPromtionCode = $("#SFF_PROMOTION_CODE" + mainIndex).val();
            if ('@language' == "1") {
                packageNameSelect = $("#PACKAGE_DISPLAY_THA" + mainIndex).val();
                packageNameSelectSFF = $("#SFF_WORD_IN_STATEMENT_THA" + mainIndex).val();
            }
            else {
                packageNameSelect = $("#PACKAGE_DISPLAY_ENG" + mainIndex).val();
                packageNameSelectSFF = $("#SFF_WORD_IN_STATEMENT_ENG" + mainIndex).val();
            }
            priceCharge = parseFloat($("#PRICE_CHARGE" + mainIndex).val());
            productSubtype = $("#PRODUCT_SUBTYPE_" + mainIndex).val();

            showoptionPremiumInstall();
        }

        $("#optionInstallationBody").html("");
        $("#sideTabInstallation").hide();
        $("#trBundling").hide();
        $("#trBundlingVas").hide();
        if (installShow == "Y" && tmpPackageDataV2 != undefined && tmpPackageDataV2.packageInstallList.length > 0) {
            var tmpPackageInstall = tmpPackageDataV2.packageInstallList;
            var tmpPackageInstall2 = tmpPackageDataV2.packageInstallList2;
            setHtmlInstall(0, mappingCode, tmpPackageInstall, tmpPackageInstall2);
            $("#sideTabInstallation").show();
        }
        else {
            objInstallArry = [];
            $("#tmpSummTotal1").text("0.00");
            $("#summTotal1").text(accounting.formatNumber(0.00, 2));
            $("#tmpSummTotal1Vas").text("0.00");
            $("#summTotal1Vas").text(accounting.formatNumber(0.00, 2));
            $("#tmpSummTotal2Vas").text("0.00");
            $("#summTotal2Vas").text(accounting.formatNumber(0.00, 2));
            setInstallContent("");
        }

        $("#optionEntryFeeBody").html("");
        $("#pageDotEntranceFee").hide();
        $("#divEntranceFee").html("");
        $("#pageDotEntranceFeeVasPB").hide();
        $("#divEntranceFeeVas").html("");
        $(".disEntranceFee").each(function () {
            $(this).hide();
        });
        if (mappingCode != "" && tmpPackageDataV2 != undefined && tmpPackageDataV2.packagEntryFeeList.length > 0) {
            setHtmlEntryFee(mappingCode, tmpPackageDataV2.packagEntryFeeList);
        }


        var cdt = "";
        if (productSubtype == "WireBB") {
            cdt = "@L_SUMM_DETAIL_WireBB";
            $("#disConWifi1").html("<br>@L_WIFI_ROUTER_ONU");
            $("#disConWifi2").html("@L_WIFI_DETAIL1");
        }
        else if (productSubtype == "SWiFi") {
            cdt = "@L_SUMM_DETAIL_SWiFi";
            $("#disConWifi1").html("@L_WIFI_ROUTER");
            $("#disConWifi2").html("@L_WIFI_DETAIL2<br><br>");
        }
        else if (productSubtype == "FTTx" || productSubtype == "SYMPHONY") {
            cdt = "@L_SUMM_DETAIL_FTTx";
            $("#disConWifi1").html("<br>@L_WIFI_ROUTER_ONU");
            $("#disConWifi2").html("@L_WIFI_DETAIL1");
        }
        else {
            $("#disConWifi1").html("@L_WIFI_ROUTER");
            $("#disConWifi2").html("@L_WIFI_DETAIL2<br><br>");
        }

        sideTabMonthlyHtml += "<i class='fa fa-chevron-right tgreen'></i><span class='tgreen' id='oProrate'>@L_SUMM_DETAIL9</span>";
        sideTabMonthlyHtml += "<p class='clearfix'></p>";
        sideTabMonthlyHtml += "<div class='col-xs-8'><span id='o6'>@L_SUMM_DETAIL10</span><input type='hidden' id='summLb3'><div id='summLb3show'></div></div>";
        sideTabMonthlyHtml += "<div class='col-xs-4 text-right'><span id='summVal3'></span> @L_BAHT</div>";

        sideTabMonthlyHtml += "<div id='trBundling' style='display: none;'>";
        sideTabMonthlyHtml += "<p class='clearfix'></p>";
        sideTabMonthlyHtml += "<span class='col-xs-8'><span id='Bunding_Discount'></span><span id='Bunding'>@L_BUNDLING_DISCOUNT_DTL</span></span>";
        sideTabMonthlyHtml += "<span class='col-xs-4 text-right'><span id='summBunding'></span> @L_BAHT</span>";
        sideTabMonthlyHtml += "</div>";

        // sideTabVaMonthly
        sideTabVasMonthlyHtml += "<i class='fa fa-chevron-right tgreen'></i><span class='tgreen' id='oProrateVas'>@L_SUMM_DETAIL9</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "<div class='col-xs-8'><span id='o6Vas'>@L_SUMM_DETAIL10</span><input type='hidden' id='summLb3Vas'><div id='summLb3showVas'></div></div>";
        sideTabVasMonthlyHtml += "<div class='col-xs-4 text-right'><span id='summVal3Vas'></span> @L_BAHT</div>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";

        var summTotal2 = priceCharge;

        /// Set Auto Mapping
        objMonthlyAutoPackageArry = [];
        var haveAutoDiscount = false;
        var discountTypeAuto = "";
        var discountValueAuto = 0;
        var discountSffPromotionCodeAuto = "";
        if (mappingCode != "" && tmpPackageDataV2 != undefined && tmpPackageDataV2.packageAutoList.length > 0) {
            var dataPackageAuto = tmpPackageDataV2.packageAutoList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                    && elem.DISPLAY_FLAG.indexOf('Y') !== -1
                    && elem.PACKAGE_TYPE.indexOf('4') === -1;
            });
            if (dataPackageAuto != undefined && dataPackageAuto.length > 0) {
                $.each(dataPackageAuto, function (g, t) {
                    var proNameAuto = "";
                    var priceChargeAuto = 0;
                    priceChargeAuto = parseFloat(t.PRICE_CHARGE);
                    summTotal2 += priceChargeAuto;
                    if ('@language' == "1") {
                        proNameAuto = t.PACKAGE_DISPLAY_THA.replace(/\|/g, '<br>');
                    }
                    else {
                        proNameAuto = t.PACKAGE_DISPLAY_ENG.replace(/\|/g, '<br>');
                    }
                    sideTabMonthlyHtml += "<div><span class='col-xs-8'>" + proNameAuto + "</span>";
                    sideTabMonthlyHtml += "<span class='col-xs-4 text-right'><span>" + accounting.formatNumber(priceChargeAuto, 2) + "</span> @L_BAHT</span>";
                    sideTabMonthlyHtml += "<p class='clearfix'></p></div>";

                    // sideTabVaMonthly
                    sideTabVasMonthlyHtml += "<div><span class='col-xs-8'>" + proNameAuto + "</span>";
                    sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span>" + accounting.formatNumber(priceChargeAuto, 2) + "</span> @L_BAHT</span>";
                    sideTabVasMonthlyHtml += "<p class='clearfix'></p></div>";

                    objMonthlyAutoPackageArry.push({ SffPromotionCode: t.SFF_PROMOTION_CODE, Name: proNameAuto, Value: priceChargeAuto });
                });
            }
            var tmpPackageDiscountAuto = tmpPackageDataV2.packageAutoList.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                    && elem.PACKAGE_TYPE.indexOf("4") !== -1
                    && elem.DISPLAY_FLAG.indexOf("Y") !== -1;
            });
            if (tmpPackageDiscountAuto != undefined && tmpPackageDiscountAuto.length > 0) {
                $.each(tmpPackageDiscountAuto, function (i, e) {
                    discountSffPromotionCodeAuto = e.SFF_PROMOTION_CODE;
                    discountTypeAuto = e.DISCOUNT_TYPE;
                    discountValueAuto = parseFloat(e.DISCOUNT_VALUE);
                });
                haveAutoDiscount = true;
            }
        }

        sideTabVasMonthlyHtml += "<div id='trSuperMESHWifiMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSuperMESHWifiMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSuperMESHWifiMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        //add new mesh arpu
        sideTabVasMonthlyHtml += "<div id='trSuperMESHWifiArpuMonthly2' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSuperMESHWifiMonthly2'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSuperMESHWifiMonthly2'></span> @(L_BAHT)</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trSuperMESHWifiArpuMonthly3' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSuperMESHWifiMonthly3'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSuperMESHWifiMonthly3'></span> @(L_BAHT)</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trSuperMESHWifiArpuMonthlyDiscount2' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSuperMESHWifiMonthly_Discount2'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSuperMESHWifiMonthly_Discount2'></span> @(L_BAHT)</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trSuperMESHWifiArpuMonthly3Discount' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSuperMESHWifiMonthly_Discount3'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSuperMESHWifiMonthly_Discount3'></span> @(L_BAHT)</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trSuperMESHWifiDate' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-12' id='lblSuperMESHWifiDate' style='color: #D31E1E;'></span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trSuperMESHWifiMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSuperMESHWifiMonthlyTotal' style='display: none;'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSuperMESHWifiMonthlyTotal'></span> @(L_BAHT)</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";
        //end
        sideTabVasMonthlyHtml += "<div id='trPlayBoxMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblPlayBoxMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumPlayBoxMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";



        //R21.11 ATV Content PlayBox Auto
        sideTabVasMonthlyHtml += "<div id='trAutoContentPlayBoxMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblAutoContentPlayBoxMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumAutoContentPlayBoxMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trContentPlayBoxMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblContentPlayBoxMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumContentPlayBoxMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trFixLineMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblFixLineMonthly'>@L_SUM_MAINTEN_RATE</span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumFixLineMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trWifiLogMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblWifiLogMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumWifiLogMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trSpeedBoostMonthly' style='display: none;'>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8' id='lblSpeedBoostMonthly'></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='lblSumSpeedBoostMonthly'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        sideTabVasMonthlyHtml += "<div id='trBundlingVas' style='display: none;'>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "<span class='col-xs-8'><span id='Bunding_Discount'></span><span id='BundingVas'>@L_BUNDLING_DISCOUNT_DTL</span></span>";
        sideTabVasMonthlyHtml += "<span class='col-xs-4 text-right'><span id='summBundingVas'></span> @L_BAHT</span>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";
        sideTabVasMonthlyHtml += "</div>";

        /// sideTabMonthly

        sideTabMonthlyHtml += "<div class='col-xs-8'><strong><span id='o7'>@L_SUMM_DETAIL11</span></strong></div>";
        sideTabMonthlyHtml += "<div class='col-xs-4 text-right'><strong><span id='summTotal2'></span><input type='hidden' id='tmpSummTotal2'> @L_BAHT</strong></div>";
        sideTabMonthlyHtml += "<p class='clearfix'></p>";

        // sideTabVasMonthly
        sideTabVasMonthlyHtml += "<div class='col-xs-8'><strong><span id='o7Vas'>@L_SUMM_DETAIL11</span></strong></div>";
        sideTabVasMonthlyHtml += "<div class='col-xs-4 text-right'><strong><span id='summTotal2Vas'></span><input type='hidden' id='tmpSummTotal2Vas'> @L_BAHT</strong></div>";
        sideTabVasMonthlyHtml += "<p class='clearfix'></p>";

        $("#sideTabMonthly").html(sideTabMonthlyHtml);
        /// sideTabVas
        $("#sideTabVasMonthly").html(sideTabVasMonthlyHtml);
        objMonthlyDiscountPackageArry = [];
        if (haveAutoDiscount) {
            /// calculatesDiscount sideTabVasMonthly
            summTotal2 -= priceCharge;
            summTotal2 += calculatesDiscount(discountTypeAuto, discountValueAuto, discountSffPromotionCodeAuto);
        }

        lineSetupDetail = cdt;
        $("#disCondition2").html(cdt);
        $("#summDetail").text(cdt);
        $("#summDetailVas").text(cdt);
        $("#summLb3").val(packageNameSelect);
        $("#summLb3show").html(packageNameSelect.replace(/\|/g, '<br>'));


        $("#summVal3").text(accounting.formatNumber(priceCharge, 2));
        $("#summTotal2").text(accounting.formatNumber(summTotal2, 2));
        $("#tmpSummTotal2").text(summTotal2);

        /// sideTabVas
        $("#summLb3Vas").val(packageNameSelect);
        $("#summLb3showVas").html(packageNameSelect.replace(/\|/g, '<br>'));


        $("#summVal3Vas").text(accounting.formatNumber(priceCharge, 2));
        $("#summTotal2Vas").text(accounting.formatNumber(summTotal2, 2));
        $("#tmpSummTotal2Vas").text(summTotal2);

        objMonthlyMainPackageArry = [];
        if (sffPromtionCode != "") {
            objMonthlyMainPackageArry.push({ SffPromotionCode: sffPromtionCode, Name: packageNameSelect.replace(/\|/g, '<br>'), NameSFF: packageNameSelectSFF, Value: priceCharge });
        }

        firstShellCostArry = [];

        var thisDate = new Date();
        var daysInMonth = thisDate.getDaysInMonth();
        var sumProrate = 0;
        var sumTotalProrate = 0;
        var sumInstall = 0;
        if ($("#tmpSummTotal1").text() != "") { sumInstall = parseFloat($("#tmpSummTotal1").text()); }

        let sumProrateBefore = (summTotal2 + sumInstall);
        sumProrate = ((summTotal2 + sumInstall) / daysInMonth) * 1;
        sumTotalProrate = summTotal2 + sumInstall + sumProrate;

        $("#sumProrate").text(accounting.formatNumber(sumProrate, 2));
        $("#sumTotalProrate").text(accounting.formatNumber(sumTotalProrate, 2));
        $("#sumProrateVas").text(accounting.formatNumber(sumProrate, 2));
        $("#sumTotalProrateVas").text(accounting.formatNumber(sumTotalProrate, 2));

        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL13", Value: "" });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL14", Value: sumProrate });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL15", Value: sumTotalProrate });
        firstShellCostArry.push({ Name: "@L_SUMM_DETAIL12", Value: "" });
        firstShellCostArry.push({ Name: "@L_SUMM_PRORATE_DETAIL", Value: "" });
        firstShellCostArry.push({ Name: "ค่าเฉลี่ยก่อนหารวัน", Value: sumProrateBefore });

        //20.4 Service Level
        checkServiceLevel();
        displayServiceLevel()
    }

    function setInstallContent(strInstallationVasDetail) {
        if (strInstallationVasDetail != undefined) {
            //div SuperMESHWifiInstall //R21.11 ATV
            strInstallationVasDetail += "<div id='sideTabVasSuperMESHWifiInstallation' style='display: none'>";
            //R21.12PP ATV
            @*strInstallationVasDetail += "<div><p class='clearfix'></p>";
            strInstallationVasDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiInstallation'></span></span>";
            strInstallationVasDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiInstallation'></span> @L_BAHT</span></div><div>";
            strInstallationVasDetail += "<p class='clearfix'></p>";
            strInstallationVasDetail += "<span class='col-xs-8'><span id='summLbVasSuperMESHWifiDiscountInstallation'></span></span>";
            strInstallationVasDetail += "<span class='col-xs-4 text-right'><span id='summValVasSuperMESHWifiDiscountInstallation'></span> @L_BAHT</span></div>";*@
            strInstallationVasDetail += "</div > ";

            //R23.06 IP Camera
            if ( "@CHK_IPCAMERA_ACTIVESTATUS" == "Open") {
                //div IP Camera 7 Days (R23.06)
                strInstallationVasDetail += "<div id='sideTabVasIpCamera7DaysInstallation' style='display: none'>";
                strInstallationVasDetail += "</div > ";
                //div IP Camera 14 Days (R23.06)
                //strInstallationVasDetail += "<div id='sideTabVasIpCamera14DaysInstallation' style='display: none'>";
                //strInstallationVasDetail += "</div > ";
                //div IP Camera 30 Days (R23.06)
                //strInstallationVasDetail += "<div id='sideTabVasIpCamera30DaysInstallation' style='display: none'>";
                //strInstallationVasDetail += "</div > ";
            }

            //div PlayboxInstall
            strInstallationVasDetail += "<div id='sideTabVasPlayboxInstallation' style='display: none'>";
            strInstallationVasDetail += "<div><p class='clearfix'></p>";
            strInstallationVasDetail += "<span class='col-xs-8'><span id='summLbVasPlayboxInstallation'></span></span>";   @*@L_ONTOP_PLAYBOX_PRE_INITIATION*@//R21.11 ATV
            strInstallationVasDetail += "<span class='col-xs-4 text-right'><span id='summValVasPlayboxInstallation'></span> @L_BAHT</span></div><div>";
            strInstallationVasDetail += "<p class='clearfix'></p>";
            strInstallationVasDetail += "<span class='col-xs-8'><span id='summLbVasPlayboxDiscountInstallation' style='color:@SHOW_DISCOUNT_COLOR_NAME;'></span></span>";   @*@L_ONTOP_PLAYBOX_DISCOUNT_INITIATION*@//R21.11 ATV
            strInstallationVasDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasPlayboxDiscountInstallation'></span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'> @L_BAHT</span></span></div></div>";
            //div FixLineInstall
            strInstallationVasDetail += "<div id='sideTabVasFixLineInstallation' style='display: none'>";
            strInstallationVasDetail += "<div><p class='clearfix'></p>";
            strInstallationVasDetail += "<span class='col-xs-8'><span id='summLbVasFixLineInstallation'>@L_SUM_INSTALL_RATE</span></span>";
            strInstallationVasDetail += "<span class='col-xs-4 text-right'><span id='summValVasFixLineInstallation'></span> @L_BAHT</span></div><div>";
            strInstallationVasDetail += "<p class='clearfix'></p>";
            strInstallationVasDetail += "<span class='col-xs-8'><span id='summLbVasFixLineDiscountInstallation' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>@L_SUM_DISCOUNT_INSTALL_RATE</span></span>";
            strInstallationVasDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasFixLineDiscountInstallation'></span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'> @L_BAHT</span></span></div></div>";
            $("#sideTabVasRouterInstallationFee").html(strInstallationVasDetail);
        }
    }

    var objInstallArry = [];
    function onBindingInstallation(sffPromotionCode, mappingCode) {
        installSffPromotionCodeSelect = sffPromotionCode;
        var prePriceCharge = 0;
        var priceCharge = 0;
        var discountCharge = 0;
        var installMsg = "";
        var strInstallationDetail = "";
        var strInstallationVasDetail = "";
        $("#sideTabRouterInstallationFee").html("");
        $("#sideTabVasRouterInstallationFee").html("");
        if (mappingCode == undefined) {
            mappingCode = $("#MAPPING_CODE"+$("input[name='SelectPackage']:checked").val()).val();
        }
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packageInstallList.length > 0) {
            //R21.6 eApplication

            if (tmpPackageDataV2.owenerProduct != "WTTx") {
                var dataAuto = tmpPackageDataV2.packageAutoList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.PACKAGE_TYPE == "2" && elem.PACKAGE_TYPE_DESC == "Ontop install penalty"
                        && elem.SFF_PROMOTION_CODE == sffPromotionCode;
                });
            }
            else {
                var dataAuto = tmpPackageDataV2.packageAutoList.filter(function (elem) {
                    return elem.MAPPING_CODE.indexOf(mappingCode) !== -1
                        && elem.PACKAGE_TYPE == "2" && elem.PACKAGE_TYPE_DESC == "Ontop install penalty"
                        && elem.AUTO_MAPPING_PROMOTION_CODE == sffPromotionCode;
                });
            }

            $("#Install_Package_Duration").val("");
            if (dataAuto != undefined && dataAuto.length > 0) {
                if (dataAuto[0].PACKAGE_DURATION != null && dataAuto[0].PACKAGE_DURATION != "")
                    $("#Install_Package_Duration").val(dataAuto[0].PACKAGE_DURATION);
            }
            //end R21.6

            var dataInstall = tmpPackageDataV2.packageInstallList.filter(function (elem) {
                return elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1
                    && elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            if (dataInstall != undefined && dataInstall.length > 0) {
                if ('@language' == "1") {
                    installMsg = dataInstall[0].PACKAGE_DISPLAY_THA;
                }
                else {
                    installMsg = dataInstall[0].PACKAGE_DISPLAY_ENG;
                }

                if (tmpPackageDataV2.owenerProduct != "WTTx") {
                    var dataInstall2 = tmpPackageDataV2.packageInstallList2.filter(function (elem) {
                        return elem.SFF_PROMOTION_CODE.indexOf(dataInstall[0].AUTO_MAPPING_PROMOTION_CODE) !== -1
                            && elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
                    });
                    prePriceCharge = parseFloat(dataInstall2[0].PRE_PRICE_CHARGE); //parseFloat(dataInstall[0].PRE_PRICE_CHARGE);
                    priceCharge = parseFloat(dataInstall2[0].PRICE_CHARGE); //parseFloat(dataInstall[0].PRICE_CHARGE);
                    if (prePriceCharge > 0) {
                        discountCharge = prePriceCharge - priceCharge;
                    }
                }
                else {
                    prePriceCharge = parseFloat(dataInstall[0].PRE_PRICE_CHARGE);
                    priceCharge = parseFloat(dataInstall[0].PRICE_CHARGE);
                    if (prePriceCharge > 0) {
                        discountCharge = prePriceCharge - priceCharge;
                    }
                }


                if ($("#WTTX_COVERAGE_RESULT").val() == '') {
                    strInstallationDetail += "<div class='col-xs-8'><span>@L_SUMM_DETAIL6</span></div>";
                    strInstallationDetail += "<div class='col-xs-4 text-right'><span>" + accounting.formatNumber(prePriceCharge, 2) + "</span><span> @L_BAHT</span></div>";
                    strInstallationDetail += "<p class='clearfix'></p>";
                    strInstallationDetail += "<div class='col-xs-8'><span>@L_SUMM_DETAIL7</span></div>";
                    strInstallationDetail += "<div class='col-xs-4 text-right'><span>" + accounting.formatNumber(discountCharge, 2) + "</span> @L_BAHT</div>";
                    strInstallationDetail += "<p class='clearfix'></p>";

                    // sideTabVasRouterInstallationFee
                    strInstallationVasDetail += "<div id='sideTabVasInstallation'>";
                    strInstallationVasDetail += "<div><p class='clearfix'></p>";
                    strInstallationVasDetail += "<span class='col-xs-8'><span id='summLbVasInstallation'>@L_SUMM_DETAIL6</span></span>";
                    strInstallationVasDetail += "<span class='col-xs-4 text-right'><span id='summValVasInstallation'>" + accounting.formatNumber(prePriceCharge, 2) + "</span> @L_BAHT</span></div><div>";
                    strInstallationVasDetail += "<p class='clearfix'></p>";
                    strInstallationVasDetail += "<span class='col-xs-8'><span id='summLbVasDiscountInstallation' style='color:@SHOW_DISCOUNT_COLOR_NAME;'>@L_SUMM_DETAIL7</span></span>";
                    strInstallationVasDetail += "<span class='col-xs-4 text-right' style='color:@SHOW_DISCOUNT_COLOR;'><span id='summValVasDiscountInstallation'>" + accounting.formatNumber(discountCharge, 2) + " " + "</span><span style='color:@SHOW_DISCOUNT_COLOR_BATH;'>@L_BAHT</span></span></div>";

                    objInstallArry = [];
                    objInstallArry.push({ SffPromotionCode: dataInstall[0].SFF_PROMOTION_CODE, Name: '@L_SUMM_DETAIL6', Value: prePriceCharge, Action: "Add" });
                    objInstallArry.push({ SffPromotionCode: dataInstall[0].SFF_PROMOTION_CODE, Name: '@L_SUMM_DETAIL7', Value: discountCharge, Action: "Del" });
                } else {
                    strInstallationDetail += "<div class='col-xs-8'><span>@L_SUMM_DETAIL6_WTTX</span></div>";
                    strInstallationDetail += "<div class='col-xs-4 text-right'><span>" + accounting.formatNumber(prePriceCharge, 2) + "</span><span> @L_BAHT</span></div>";
                    strInstallationDetail += "<p class='clearfix'></p>";
                    strInstallationDetail += "<div class='col-xs-8'><span>@L_SUMM_DETAIL7_WTTX</span></div>";
                    strInstallationDetail += "<div class='col-xs-4 text-right'><span>" + accounting.formatNumber(discountCharge, 2) + "</span> @L_BAHT</div>";
                    strInstallationDetail += "<p class='clearfix'></p>";

                    objInstallArry = [];
                    objInstallArry.push({ SffPromotionCode: dataInstall[0].SFF_PROMOTION_CODE, Name: '@L_SUMM_DETAIL6_WTTX', Value: prePriceCharge, Action: "Add" });
                    objInstallArry.push({ SffPromotionCode: dataInstall[0].SFF_PROMOTION_CODE, Name: '@L_SUMM_DETAIL7_WTTX', Value: discountCharge, Action: "Del" });
                }
            }
        }
        else { objInstallArry = []; }

        $(".InstallationDetail").each(function () {
            $(this).hide();
        });
        $("#disCondition1").html("");
        if (priceCharge > 0) {
            $("#InstallationDetail_" + sffPromotionCode).show();
        }

        $("#sideTabRouterInstallationFee").html(strInstallationDetail);

        /// sideTabVasRouterInstallationFee
        setInstallContent(strInstallationVasDetail);

        $("#disCondition1").html(installMsg);
        $("#lblPreIniPrice").text(accounting.formatNumber(priceCharge, 2));
        $("#lblIniDiscount").text(accounting.formatNumber(discountCharge, 2));
        $("#summTotal1").text(accounting.formatNumber(priceCharge, 2));
        $("#tmpSummTotal1").text(priceCharge);
        $("#summTotal1Vas").text(accounting.formatNumber(priceCharge, 2));
        $("#tmpSummTotal1Vas").text(priceCharge);
        CalculateFirstShellCost();
    }

    function onBindingEntryFee(sffPromotionCode) {
        objEntryFeeArry = [];
        entryFeeSffPromotionCodeSelect = sffPromotionCode;
        $("#pageDotEntranceFee").hide();
        $("#divEntranceFee").html("");
        $("#pageDotEntranceFeeVasPB").hide();
        $("#divEntranceFeeVas").html("");
        $(".disEntranceFee").each(function () {
            $(this).hide();
        });
        var priceCharge = 0;
        var strEntrancefeeDetail = "";
        var mappingCode = $("#MAPPING_CODE" + $("input[name='SelectPackage']:checked").val()).val();
        if (tmpPackageDataV2 != undefined && tmpPackageDataV2.packagEntryFeeList.length > 0) {
            var dataEntryFee = tmpPackageDataV2.packagEntryFeeList.filter(function (elem) {
                return elem.SFF_PROMOTION_CODE.indexOf(sffPromotionCode) !== -1
                    && elem.MAPPING_CODE.indexOf(mappingCode) !== -1;
            });
            if (dataEntryFee != undefined && dataEntryFee.length > 0) {
                if ("@SHOW_ENTRY_FEE_VAT_FLAG" == 'Y') { //R25.09 parseFloat(dataEntryFee[0].PRICE_CHARGE);
                    priceCharge += parseFloat(dataEntryFee[0].PRICE_CHARGE_VAT);
                }
                else {
                    priceCharge += parseFloat(dataEntryFee[0].PRICE_CHARGE);
                }
                $(".disEntranceFee").each(function () {
                    $(this).show();
                });
                objEntryFeeArry.push({ SffPromotionCode: dataEntryFee[0].SFF_PROMOTION_CODE, Name: "@L_ENTRY_FEE", Value: priceCharge });
            }
        }

        strEntrancefeeDetail += "<div class='col-xs-8'><span>@L_ENTRY_FEE</span></div>";
        strEntrancefeeDetail += "<div class='col-xs-4 text-right'><span class='lblEntranceFee'>" + accounting.formatNumber(priceCharge, 2) + " </span> @L_BAHT</div>";
        strEntrancefeeDetail += "<p class='clearfix'></p>";
        $("#divEntranceFee").html(strEntrancefeeDetail);
        $("#pageDotEntranceFee").show();
        $("#divEntranceFeeVas").html(strEntrancefeeDetail);
        $("#pageDotEntranceFeeVasPB").show();
    }

    function getPackageRemarkDetail() {
        var discountDetail = "<div class='getDisDetail add-rounded-gray'><p class='clearfix'></p>";
        var discountDetail_default = "<strong class='disEntranceFee' style='display: none;'>@L_CHARGE_ON_INSTALL_DATE</strong>" +
            "<p class='disEntranceFee' style='display: none;'>@L_ENTRY_FEE</p>" +
            "<p class='clearfix disEntranceFee' style='display: none;'></p>" +
            "<div>" +
            "<strong class='disInstall'>@L_DISCOUNT</strong>" +
            "<p class='disInstall'><ul><li id='disCondition1'></li><li id='disCondition2'></li></ul></p>" +
            "<p class='clearfix disInstall'></p>" +
            "</div>" +
            "<strong>@L_LAN_WIRING</strong> <br>" +
            "<ul style='list-style-type: circle; margin: 15px;'>" +
            "<li>@L_LAN_WIRING_1</li>" +
            "<li>@L_LAN_WIRING_2</li>" +
            "<li>@L_LAN_WIRING_3</li></ul>" +
            "<p class='clearfix'></p>" +
            "<div id='divConWifi'>" +
            "<strong><label id='disConWifi1'></label></strong> <br>" +
            "<p id='disConWifi2'></p>" +
            "<p class='clearfix'></p>" +
            "<p class='clearfix'></p>" +
            "</div>" +
            "</div>";


        discountDetail += discountDetail_default;

        return discountDetail;
    }

    function getPackageRemarkDetailWTTX() {
        var discountDetail = "<div class='getDisDetail add-rounded-gray'><p class='clearfix'></p>";
        var discountDetail_default =
            "<strong class='disEntranceFee' style='display: none;'>@L_CHARGE_ON_REGISTER_DATE</strong>" +
            "<p class='disEntranceFee' style='display: none;'>@L_ENTRY_FEE</p>" +
            "<p class='clearfix disEntranceFee' style='display: none;'></p>" +
            "<div>" +
            "<strong class='disInstall'>@L_DISCOUNT_WTTX</strong>" +
            "<p class='disInstall'><ul><li id='disCondition1'></li><li id='disCondition2'></li></ul></p>" +
            "<p class='clearfix disInstall'></p>" +
            "</div>" +
            "<div>" +
            "<strong class='disRouter'>@L_ROUTER_WTTX</strong>" +
            "<p class='disRouter'>@L_RETURN_ROUTER_WTTX</p>" +
            "<p class='clearfix disRouter'></p>" +
            "</div>" +
            "</div>";

        discountDetail += discountDetail_default;

        return discountDetail;
    }

    function appendingMainV2(i, e, sl, data) {

        if (sl == undefined) sl = "";

        var strResult = "";

        strResult = "<tr class='promotionDetail-table'>" +
            "<th>" +
            "<input type='radio' name='SelectPackage' id='SelectPackage" + i + "' " + sl + " onclick='' value='" + i + "'>" +
            "<input type='hidden' id='MAPPING_CODE" + i + "' value='" + e.MAPPING_CODE + "'>" +
            "<input type='hidden' id='PACKAGE_SERVICE_CODE" + i + "' value='" + e.PACKAGE_SERVICE_CODE + "'>" +
            "<input type='hidden' id='SFF_PROMOTION_CODE" + i + "' value='" + e.SFF_PROMOTION_CODE + "'>" +
            "<input type='hidden' id='SFF_PRODUCT_NAME" + i + "' value='" + e.SFF_PRODUCT_NAME + "'>" +
            "<input type='hidden' id='PACKAGE_GROUP" + i + "' value='" + e.PACKAGE_GROUP + "'>" +
            "<input type='hidden' id='PACKAGE_GROUP_DESC_THA" + i + "' value='" + e.PACKAGE_GROUP_DESC_THA + "'>" +
            "<input type='hidden' id='PACKAGE_GROUP_DESC_ENG" + i + "' value='" + e.PACKAGE_GROUP_DESC_ENG + "'>" +
            "<input type='hidden' id='PACKAGE_REMARK_THA" + i + "' value='" + e.PACKAGE_REMARK_THA + "'>" +
            "<input type='hidden' id='PACKAGE_REMARK_ENG" + i + "' value='" + e.PACKAGE_REMARK_ENG + "'>" +
            "<input type='hidden' id='PRICE_CHARGE" + i + "' value='" + parseFloat(e.PRICE_CHARGE) + "'>" +
            "<input type='hidden' id='PRE_PRICE_CHARGE" + i + "' value='" + parseFloat(e.PRE_PRICE_CHARGE) + "'>" +
            "<input type='hidden' id='SFF_WORD_IN_STATEMENT_THA" + i + "' value='" + e.SFF_WORD_IN_STATEMENT_THA + "'>" +
            "<input type='hidden' id='SFF_WORD_IN_STATEMENT_ENG" + i + "' value='" + e.SFF_WORD_IN_STATEMENT_ENG + "'>" +
            "<input type='hidden' id='PACKAGE_DISPLAY_THA" + i + "' value='" + e.PACKAGE_DISPLAY_THA + "'>" +
            "<input type='hidden' id='PACKAGE_DISPLAY_ENG" + i + "' value='" + e.PACKAGE_DISPLAY_ENG + "'>" +
            "<input type='hidden' id='DOWNLOAD_SPEED" + i + "' value='" + e.DOWNLOAD_SPEED + "'>" +
            "<input type='hidden' id='UPLOAD_SPEED" + i + "' value='" + e.UPLOAD_SPEED + "'>" +
            "<input type='hidden' id='PACKAGE_TYPE" + i + "' value='" + e.PACKAGE_TYPE + "'>" +
            "<input type='hidden' id='PACKAGE_TYPE_DESC" + i + "' value='" + e.PACKAGE_TYPE_DESC + "'>" +
            "<input type='hidden' id='PRODUCT_SUBTYPE_" + i + "' value='" + e.PRODUCT_SUBTYPE + "'>" +
            "<input type='hidden' id='OWNER_PRODUCT" + i + "' value='" + e.OWNER_PRODUCT + "'>" +
            "<input type='hidden' id='ACCESS_MODE" + i + "' value='" + e.ACCESS_MODE + "'>" +
            "<input type='hidden' id='SERVICE_CODE" + i + "' value='" + e.SERVICE_CODE + "'>" +
            "<input type='hidden' id='PRODUCT_SUBTYPE3_" + i + "' value='" + e.PRODUCT_SUBTYPE3 + "'>" +
            "<input type='hidden' id='DISCOUNT_TYPE" + i + "' value='" + e.DISCOUNT_TYPE + "'>" +
            "<input type='hidden' id='DISCOUNT_VALUE" + i + "' value='" + e.DISCOUNT_VALUE + "'>" +
            "<input type='hidden' id='DISCOUNT_DAY" + i + "' value='" + e.DISCOUNT_DAY + "'>" +
            "<input type='hidden' id='AUTO_MAPPING_PROMOTION_CODE" + i + "' value='" + e.AUTO_MAPPING_PROMOTION_CODE + "'>" +
            "<input type='hidden' id='DISPLAY_FLAG" + i + "' value='" + e.DISPLAY_FLAG + "'>" +
            "<input type='hidden' id='CUSTOMER_TYPE" + i + "' value='" + e.CUSTOMER_TYPE + "'>" +
            "<input type='hidden' id='INSTALL_SHOW" + i + "' value='" + e.INSTALL_SHOW + "'>" +
            "<input type='hidden' id='ENTRYFEE_SHOW" + i + "' value='" + e.ENTRYFEE_SHOW + "'>" +
            "<input type='hidden' id='EXISTING_MOBILE" + i + "' value='" + e.EXISTING_MOBILE + "'>" +
            "</th>";

        var proName = "";
        if ('@language' == "1") {
            proName = e.PACKAGE_DISPLAY_THA.replace(/\|/g, '<br>');
        }
        else {
            proName = e.PACKAGE_DISPLAY_ENG.replace(/\|/g, '<br>');
        }

        var resultsAutoMapping = data;
        if (resultsAutoMapping != undefined) {
            resultsAutoMapping = resultsAutoMapping.filter(function (elem) {
                return elem.MAPPING_CODE.indexOf(e.MAPPING_CODE) !== -1
                    && elem.DISPLAY_FLAG.indexOf('Y') !== -1;
            });
            resultsAutoMapping = sortJSON(resultsAutoMapping, "DISPLAY_SEQ", "123");
            $.each(resultsAutoMapping, function (g, t) {
                    var proNameAuto = "";
                    if ('@language' == "1") {
                        proNameAuto = t.PACKAGE_DISPLAY_THA.replace(/\|/g, '<br>');
                    }
                    else {
                        proNameAuto = t.PACKAGE_DISPLAY_ENG.replace(/\|/g, '<br>');
                    }
                    proName = proName + "<br>" + proNameAuto;
            });
        }

        strResult += "<td class='text-left'>" + proName + "</td>" +
            "<td>" + e.DOWNLOAD_SPEED + "</td>" +
            "<td>" + e.UPLOAD_SPEED + "</td>" +
            "<td>" + accounting.formatNumber(e.PRICE_CHARGE, 2) + "</td>";


        return strResult + "</tr>";
    }


    function funcCountIpCameraArr(sffPromotionCode) { //23.06 IP Camera
        objCountMaxIpCameraArry = [];
        quantity7Day = $("#contentIpCamera7Days_" + sffPromotionCode).is(":checked") ? parseFloat($("#ddlIpCamera7Days" + sffPromotionCode).val()) : 0;
        //quantity14Day = $("#contentIpCamera14Days_" + sffPromotionCode).is(":checked") ? parseFloat($("#ddlIpCamera14Days" + sffPromotionCode).val()) : 0;
        //quantity30Day = $("#contentIpCamera30Days_" + sffPromotionCode).is(":checked") ? parseFloat($("#ddlIpCamera30Days" + sffPromotionCode).val()) : 0;
        quantityIpCameraAll = quantity7Day; //quantityIpCameraAll = quantity7Day + quantity14Day + quantity30Day;

        //23.06 IP Camera
        //var latestData = { countIpCameraGroup: quantityIpCameraAll, countIpCamera7Days: quantity7Day, countIpCamera14Days: quantity14Day, countIpCamera30Days: quantity30Day };
        var latestData = { countIpCameraGroup: quantityIpCameraAll, countIpCamera7Days: quantity7Day};
        objCountMaxIpCameraArry.push(latestData);
    }

    function funcObjMonthlyIpCameraAllDays(contentType, sffPromotionCode, priceCharge, packageMsg, packageMsgR, cur) {
        var tempSffPromotionCodeInstall = "";
        var tempPrePriceCharge = 0;
        var tempPriceCharge = 0;
        var tempstrIpCameraInstall = "";
        var tempstrIpCameraDisInstall = "";
        var tempdurationByMonth = "";
        funcCountIpCameraArr(sffPromotionCode)
        objMonthlyIpCamera7DaysArry = [];
        //objMonthlyIpCamera14DaysArry = [];
        //objMonthlyIpCamera30DaysArry = [];

        if (tmpPackageDataDeviceContract.ContractDeviceList != undefined && tmpPackageDataDeviceContract.ContractDeviceList.length > 0) {
            var tmpContractDeviceIpCameraList = tmpPackageDataDeviceContract.ContractDeviceList.filter(function (elem) {
                return elem.PRODUCT_SUBTYPE.indexOf("IP_CAMERA") !== -1;
            });
            if (tmpContractDeviceIpCameraList != undefined && tmpContractDeviceIpCameraList.length > 0) {
                $.each(tmpContractDeviceIpCameraList, function (i, e) {
                    tempSffPromotionCodeInstall = e.SFF_PROMOTION_CODE;
                    tempPrePriceCharge = parseFloat(e.PENALTY_CHARGE);
                    tempPriceCharge = parseFloat(e.PENALTY_CHARGE);
                    tempdurationByMonth = e.DURATION_BY_MONTH;
                    if ('@language' == "1") {
                        tempstrIpCameraInstall = e.CONTRACT_DISPLAY_TH_1;
                        tempstrIpCameraDisInstall = e.CONTRACT_DISPLAY_TH_2;
                    }
                    else {
                        tempstrIpCameraInstall = e.CONTRACT_DISPLAY_EN_1;
                        tempstrIpCameraDisInstall = e.CONTRACT_DISPLAY_EN_2;
                    }
                });
            }
        }

        if (objCountMaxIpCameraArry[0].countIpCameraGroup == 1) {
            if (objCountMaxIpCameraArry[0].countIpCamera7Days == 1) {
                objMonthlyIpCamera7DaysArry.push({
                    SffPromotionCode: sffPromotionCode,
                    IPCamera_SetupFee: tempstrIpCameraInstall,
                    SetupFee_Price: tempPrePriceCharge,
                    IPCamera_SetupFee_Discount: tempstrIpCameraDisInstall,
                    SetupFee_Price_Discount: tempPriceCharge,
                    Duration_ByMonth: tempdurationByMonth,
                    IPCamera_MonthlyFee_Word: packageMsg,
                    IPCamera_MonthlyFee: packageMsgR,
                    IPCamera_MonthlyFee_Price: priceCharge,
                    L_BAHT: cur,
                    IPCamera_Type_Promotion: "7"
                })
            }
            //else if (objCountMaxIpCameraArry[0].countIpCamera14Days == 1) {
            //    objMonthlyIpCamera14DaysArry.push({
            //        SffPromotionCode: sffPromotionCode,
            //        IPCamera_SetupFee: "ค่าติดตั้งและบริหารจัดการอุปกรณ์ Cloud IP Camera",
            //        SetupFee_Price: 1000,
            //        IPCamera_SetupFee_Discount: "ส่วนลดค่าติดตั้งและบริหารจัดการอุปกรณ์ Cloud IP Camera",
            //        SetupFee_Price_Discount: 0,
            //        IPCamera_MonthlyFee: "ค่าบริการรายเดือน Cloud IP Camera",
            //        IPCamera_MonthlyFee_Price: 99,
            //        L_BAHT: "บาท",
            //        IPCamera_Type_Promotion: "14"
            //    })
            //}
            //else if (objCountMaxIpCameraArry[0].countIpCamera30Days == 1) {
            //    objMonthlyIpCamera30DaysArry.push({
            //        SffPromotionCode: sffPromotionCode,
            //        IPCamera_SetupFee: "ค่าติดตั้งและบริหารจัดการอุปกรณ์ Cloud IP Camera",
            //        SetupFee_Price: 1000,
            //        IPCamera_SetupFee_Discount: "ส่วนลดค่าติดตั้งและบริหารจัดการอุปกรณ์ Cloud IP Camera",
            //        SetupFee_Price_Discount: 0,
            //        IPCamera_MonthlyFee: "ค่าบริการรายเดือน Cloud IP Camera",
            //        IPCamera_MonthlyFee_Price: 99,
            //        L_BAHT: "บาท",
            //        IPCamera_Type_Promotion: "30"
            //    })
            //}
        }
        else {
            tmpCountMaxIpCameraArry = objCountMaxIpCameraArry[0].countIpCameraGroup
            tmpCountIpCamera7Days = objCountMaxIpCameraArry[0].countIpCamera7Days;
            //tmpCountIpCamera14Days = objCountMaxIpCameraArry[0].countIpCamera14Days;
            //tmpCountIpCamera30Days = objCountMaxIpCameraArry[0].countIpCamera30Days;
            var strWORDIND_IPCAMERA = "";
            for (var i = 0; i < tmpCountMaxIpCameraArry; i++) {
                if (tmpCountIpCamera7Days > 0) {
                    strWORDIND_IPCAMERA = "@WORDIND_MESH";
                    strWORDIND_IPCAMERA = strWORDIND_IPCAMERA.replace("{x}", (i + 1).toString());
                    var str_SETUPFEE_IPCAMERA = tempstrIpCameraInstall + " " + strWORDIND_IPCAMERA;
                    var str_SETUPFEE_DISCOUNT_IPCAMERA = tempstrIpCameraDisInstall + " " + strWORDIND_IPCAMERA;
                    objMonthlyIpCamera7DaysArry.push({
                        SffPromotionCode: sffPromotionCode,
                        IPCamera_SetupFee: str_SETUPFEE_IPCAMERA,
                        SetupFee_Price: tempPrePriceCharge,
                        IPCamera_SetupFee_Discount: str_SETUPFEE_DISCOUNT_IPCAMERA,
                        SetupFee_Price_Discount: tempPriceCharge,
                        Duration_ByMonth: tempdurationByMonth,
                        IPCamera_MonthlyFee_Word: packageMsg,
                        IPCamera_MonthlyFee: packageMsgR,
                        IPCamera_MonthlyFee_Price: priceCharge,
                        L_BAHT: cur,
                        IPCamera_Type_Promotion: "7"
                    });
                    tmpCountIpCamera7Days--;
                    continue;
                }
                //else if (tmpCountIpCamera14Days > 0) {
                //    var str_SETUPFEE_IPCAMERA = "ค่าติดตั้งและบริหารจัดการอุปกรณ์ Cloud IP Camera (จุดที่ {x})";
                //    var str_SETUPFEE_DISCOUNT_IPCAMERA = "ส่วนลดค่าติดตั้งและบริหารจัดการอุปกรณ์ Cloud IP Camera (จุดที่ {x})";
                //    str_SETUPFEE_IPCAMERA = str_SETUPFEE_IPCAMERA.replace("{x}", (i + 1).toString());
                //    str_SETUPFEE_DISCOUNT_IPCAMERA = str_SETUPFEE_DISCOUNT_IPCAMERA.replace("{x}", (i + 1).toString());
                //    objMonthlyIpCamera14DaysArry.push({
                //        SffPromotionCode: sffPromotionCode,
                //        IPCamera_SetupFee: str_SETUPFEE_IPCAMERA,
                //        SetupFee_Price: 1000,
                //        IPCamera_SetupFee_Discount: str_SETUPFEE_DISCOUNT_IPCAMERA,
                //        SetupFee_Price_Discount: 0,
                //        IPCamera_MonthlyFee: "ค่าบริการรายเดือน Cloud IP Camera 14 วัน",
                //        IPCamera_MonthlyFee_Price: 99,
                //        L_BAHT: "บาท",
                //        IPCamera_Type_Promotion: "14"
                //    });
                //    tmpCountIpCamera14Days--;
                //    continue;
                //}
                //else if (tmpCountIpCamera30Days > 0) {
                //    var str_SETUPFEE_IPCAMERA = "ค่าติดตั้งและบริหารจัดการอุปกรณ์ Cloud IP Camera (จุดที่ {x})";
                //    var str_SETUPFEE_DISCOUNT_IPCAMERA = "ส่วนลดค่าติดตั้งและบริหารจัดการอุปกรณ์ Cloud IP Camera (จุดที่ {x})";
                //    str_SETUPFEE_IPCAMERA = str_SETUPFEE_IPCAMERA.replace("{x}", (i + 1).toString());
                //    str_SETUPFEE_DISCOUNT_IPCAMERA = str_SETUPFEE_DISCOUNT_IPCAMERA.replace("{x}", (i + 1).toString());
                //    objMonthlyIpCamera30DaysArry.push({
                //        SffPromotionCode: sffPromotionCode,
                //        IPCamera_SetupFee: str_SETUPFEE_IPCAMERA,
                //        SetupFee_Price: 1000,
                //        IPCamera_SetupFee_Discount: str_SETUPFEE_DISCOUNT_IPCAMERA,
                //        SetupFee_Price_Discount: 0,
                //        IPCamera_MonthlyFee: "ค่าบริการรายเดือน Cloud IP Camera 30 วัน",
                //        IPCamera_MonthlyFee_Price: 99,
                //        L_BAHT: "บาท",
                //        IPCamera_Type_Promotion: "30"
                //    });
                //    tmpCountIpCamera30Days--;
                //    continue;
                //}
            }
        }
    }

 </text>);
</script>
