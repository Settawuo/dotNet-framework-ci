@model QuickWinPanelModel
@using WBBEntity.PanelModels
@using WBBWeb.Extension;
@{
    string language = Session[WebConstants.SessionKeys.CurrentUICulture] != null ? Session[WebConstants.SessionKeys.CurrentUICulture].ToString() : "";

    decimal SffProfileLogID = 0;
    string ContactMobileNo = "";
    string VAS = "";
    string OWNER_PRODUCT = "";
    string ADDRESS_ID = "";
    string PACKAGE_CODE = "";
    string sffProductName = "";
    string sffServiceYear = "";
    string viewBagShowIconPB = "";
    string viewBagShowIconFL = "";
    string viewBagAddPB = "";

    if (null != ViewBag.SffProfileLogID)
    {
        SffProfileLogID = ViewBag.SffProfileLogID;
    }

    if (ViewBag.ContactMobileNo != null)
    {
        ContactMobileNo = ViewBag.ContactMobileNo;
    }

    if (ViewBag.Vas != null)
    {
        VAS = ViewBag.Vas;
    }

    if (ViewBag.OwnerProduct != null)
    {
        OWNER_PRODUCT = ViewBag.OwnerProduct;
    }

    if (ViewBag.AddressID != null)
    {
        ADDRESS_ID = ViewBag.AddressID;
    }

    if (ViewBag.PackageCode != null)
    {
        PACKAGE_CODE = ViewBag.PackageCode;
    }

    if (ViewBag.SFFProductName != null)
    {
        sffProductName = ViewBag.SFFProductName;
    }

    if (ViewBag.SFFServiceYear != null)
    {
        sffServiceYear = ViewBag.SFFServiceYear;
    }

    if (ViewBag.v_icon_pb != null)
    {
        viewBagShowIconPB = ViewBag.v_icon_pb;
    }

    if (ViewBag.v_check_pb != null)
    {
        viewBagShowIconFL = ViewBag.v_check_pb;
    }

    if (ViewBag.v_add_playbox != null)
    {
        viewBagAddPB = ViewBag.v_add_playbox;
    }

    //ใช้ของเดิม เป็น Flag Y/N
    string SHOW_ICON_FIXEDLINE_CUST_REGISTER = "";
    string SHOW_ICON_FIXEDLINE_SSO_REGISTER = "";
    string SHOW_ICON_FIXEDLINE_CUST_VAS = "";
    string SHOW_ICON_FIXEDLINE_SSO_VAS = "";
    string SHOW_ICON_PLAYBOX_CUST_REGISTER = "";
    string SHOW_ICON_PLAYBOX_SSO_REGISTER = "";
    string SHOW_ICON_PLAYBOX_CUST_VAS = "";
    string SHOW_ICON_PLAYBOX_SSO_VAS = "";
    string DEFAULT_ICON_PLAYBOX_CUST_REGISTER = "";
    string DEFAULT_ICON_PLAYBOX_SSO_REGISTER = "";
    string DEFAULT_ICON_PLAYBOX_CUST_VAS = "";
    string DEFAULT_ICON_PLAYBOX_SSO_VAS = "";

    //R17.12 Lov ใหม่สำหรับหน้าจอ TopUpFixedline
    string L_SUM_INSTALL_RATE_FIXEDLINE = "";
    string L_SUM_MAINTEN_RATE_FIXEDLINE = "";
    string L_SELECT_VAS_FIXEDLINE = "";
    string L_LIST_FIXEDLINE = "";
    string L_CHARGE_FIXEDLINE = "";
    string L_INSTALL_RATE_FIXEDLINE = "";
    string L_INSTALL_RATE_VALUE_FIXEDLINE = "";
    string L_MAINTEN_FEE_FIXEDLINE = "";
    string L_BAHT_MONTH_FIXEDLINE = "";
    string L_CALL_IN_RATE_FIXEDLINE = "";
    string L_CALL_IN_RATE_VALUE_FIXEDLINE = "";
    string L_BAHT_TIME_FIXEDLINE = "";
    string L_CALL_OUT_RATE_FIXEDLINE = "";
    string L_CALL_OUT_RATE_VALUE_FIXEDLINE = "";
    string L_CALL_FREE_FIXEDLINE = "";
    string L_MINUTE_FIXEDLINE = "";
    string B_VAS_CONFIRM_SKIP_FIXEDLINE = "";
    string L_PLEASE_CHOOSE_VAS_SERVICE_FIXEDLINE = "";
    string B_NEXT_FIXEDLINE = "";
    string B_BACK_FIXEDLINE = "";
    string L_CLOSE_FIXEDLINE = "";
    string L_CHOOSE_TOPUP_FIXEDLINE = "";
    string M_MOBILE_FORWARD_FIXEDLINE = "";
    string L_CALLING_RATE_FIXEDLINE = "";
    string L_PER_MIN_FIXEDLINE = "";
    string L_PER_TIME_FIXEDLINE = "";
    string L_UNLIMITED_FIXEDLINE = "";
    string L_CALL_IN_AIS_FIXEDLINE = "";
    string L_CALL_IN_AIS_VALUE_FIXEDLINE = "";
    string L_CALL_OUT_AIS_FIXEDLINE = "";
    string L_CALL_OUT_AIS_VALUE_FIXEDLINE = "";
    string L_REMARK_VOICE_RATE_FIXEDLINE = "";
    string L_BAHT_FIXEDLINE = "";

    string L_FIXEDLINE_CLICK_PAGE = "";
    string L_FIXEDLINE_INITIATIONS_PAGE = "";
    string L_FREE_FIXEDLINE_PAGE = "";
    string L_FIXEDLINE_VOIP_PAGE = "";
    string L_FIXEDLINE_DES_PAGE = "";
    string L_FIXEDLINE_SUM_DISCOUNT_INSTALL_RATE_PAGE = "";
    string L_FIXEDLINE_BUNDLING_DISCOUNT_DTL = "";
    string L_FIXEDLINE_DISCOUNT_DTL = "";
    string L_FIXEDLINE_SUMMARY = "";
    string L_FIXEDLINE_SUMM_DETAIL1 = "";
    string L_FIXEDLINE_SUMM_DETAIL8 = "";
    string L_FIXEDLINE_SUMM_DETAIL9 = "";
    string L_FIXEDLINE_SUMM_DETAIL11 = "";
    string L_FIXEDLINE_SUMM_DETAIL12 = "";
    string L_FIXEDLINE_SUMM_DETAIL13 = "";
    string L_FIXEDLINE_SUMM_DETAIL14 = "";
    string L_FIXEDLINE_SUMM_DETAIL15 = "";
    string B_OK = "";

    if (ViewBag.LabelFBBTR010 != null)
    {
        var LabelFBBTR010 = (List<LovScreenValueModel>)ViewBag.LabelFBBTR010;

        //ใช้ของเดิม เป็น Flag Y/N
        SHOW_ICON_FIXEDLINE_CUST_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_FIXEDLINE_CUST_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_FIXEDLINE_CUST_REGISTER").DisplayValue : "";
        SHOW_ICON_FIXEDLINE_SSO_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_FIXEDLINE_SSO_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_FIXEDLINE_SSO_REGISTER").DisplayValue : "";
        SHOW_ICON_FIXEDLINE_CUST_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_FIXEDLINE_CUST_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_FIXEDLINE_CUST_VAS").DisplayValue : "";
        SHOW_ICON_FIXEDLINE_SSO_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_FIXEDLINE_SSO_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_FIXEDLINE_SSO_VAS").DisplayValue : "";
        SHOW_ICON_PLAYBOX_CUST_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_REGISTER").DisplayValue : "";
        SHOW_ICON_PLAYBOX_SSO_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_REGISTER").DisplayValue : "";
        SHOW_ICON_PLAYBOX_CUST_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_VAS").DisplayValue : "";
        SHOW_ICON_PLAYBOX_SSO_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_VAS").DisplayValue : "";
        DEFAULT_ICON_PLAYBOX_CUST_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_REGISTER").DefaultValue : "";
        DEFAULT_ICON_PLAYBOX_SSO_REGISTER = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_REGISTER") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_REGISTER").DefaultValue : "";
        DEFAULT_ICON_PLAYBOX_CUST_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_CUST_VAS").DefaultValue : "";
        DEFAULT_ICON_PLAYBOX_SSO_VAS = LabelFBBTR010.Any(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_VAS") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "SHOW_ICON_PLAYBOX_SSO_VAS").DefaultValue : "";
        B_OK = LabelFBBTR010.Any(c => c.Name == "B_OK") ? LabelFBBTR010.FirstOrDefault(c => c.Name == "B_OK").DisplayValue : "";
    }

    //R17.12 Lov ใหม่สำหรับหน้าจอ TopUpFixedline
    if (ViewBag.LabelFBBTR023 != null)
    {
        var labelFbbtr023 = (List<LovScreenValueModel>)ViewBag.LabelFBBTR023;

        L_SUM_INSTALL_RATE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_SUM_INSTALL_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_SUM_INSTALL_RATE_FIXEDLINE").DisplayValue : "";
        L_SUM_MAINTEN_RATE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_SUM_MAINTEN_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_SUM_MAINTEN_RATE_FIXEDLINE").DisplayValue : "";
        L_SELECT_VAS_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_SELECT_VAS_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_SELECT_VAS_FIXEDLINE").DisplayValue : "";
        L_LIST_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_LIST_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_LIST_FIXEDLINE").DisplayValue : "";
        L_CHARGE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CHARGE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CHARGE_FIXEDLINE").DisplayValue : "";

        L_INSTALL_RATE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_INSTALL_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_INSTALL_RATE_FIXEDLINE").DisplayValue : "";
        L_INSTALL_RATE_VALUE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_INSTALL_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_INSTALL_RATE_FIXEDLINE").LovValue3 : "";
        L_MAINTEN_FEE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_MAINTEN_FEE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_MAINTEN_FEE_FIXEDLINE").DisplayValue : "";
        L_BAHT_MONTH_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_BAHT_MONTH_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_BAHT_MONTH_FIXEDLINE").DisplayValue : "";
        L_CALL_IN_RATE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_IN_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_IN_RATE_FIXEDLINE").DisplayValue : "";

        L_CALL_IN_RATE_VALUE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_IN_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_IN_RATE_FIXEDLINE").LovValue3 : "";
        L_BAHT_TIME_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_BAHT_TIME_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_BAHT_TIME_FIXEDLINE").DisplayValue : "";
        L_CALL_OUT_RATE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_OUT_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_OUT_RATE_FIXEDLINE").DisplayValue : "";
        L_CALL_OUT_RATE_VALUE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_OUT_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_OUT_RATE_FIXEDLINE").LovValue3 : "";
        L_CALL_IN_AIS_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_IN_AIS_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_IN_AIS_FIXEDLINE").DisplayValue : "";

        L_CALL_IN_AIS_VALUE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_IN_AIS_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_IN_AIS_FIXEDLINE").LovValue3 : "";
        L_CALL_OUT_AIS_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_OUT_AIS_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_OUT_AIS_FIXEDLINE").DisplayValue : "";
        L_CALL_OUT_AIS_VALUE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_OUT_AIS_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_OUT_AIS_FIXEDLINE").LovValue3 : "";
        L_UNLIMITED_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_UNLIMITED_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_UNLIMITED_FIXEDLINE").DisplayValue : "";
        L_PER_MIN_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_PER_MIN_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_PER_MIN_FIXEDLINE").DisplayValue : "";

        L_PER_TIME_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_PER_TIME_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_PER_TIME_FIXEDLINE").DisplayValue : "";
        L_CALLING_RATE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALLING_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALLING_RATE_FIXEDLINE").DisplayValue : "";
        L_REMARK_VOICE_RATE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_REMARK_VOICE_RATE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_REMARK_VOICE_RATE_FIXEDLINE").DisplayValue : "";
        L_CALL_FREE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CALL_FREE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CALL_FREE_FIXEDLINE").DisplayValue : "";
        L_MINUTE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_MINUTE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_MINUTE_FIXEDLINE").DisplayValue : "";

        M_MOBILE_FORWARD_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "M_MOBILE_FORWARD_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "M_MOBILE_FORWARD_FIXEDLINE").DisplayValue : "";
        B_VAS_CONFIRM_SKIP_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "B_VAS_CONFIRM_SKIP_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "B_VAS_CONFIRM_SKIP_FIXEDLINE").DisplayValue : "";
        L_PLEASE_CHOOSE_VAS_SERVICE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_PLEASE_CHOOSE_VAS_SERVICE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_PLEASE_CHOOSE_VAS_SERVICE_FIXEDLINE").DisplayValue : "";
        B_NEXT_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "B_NEXT_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "B_NEXT_FIXEDLINE").DisplayValue : "";
        B_BACK_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "B_BACK_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "B_BACK_FIXEDLINE").DisplayValue : "";

        L_CLOSE_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "B_CLOSE_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "B_CLOSE_FIXEDLINE").DisplayValue : "";
        L_CHOOSE_TOPUP_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_CHOOSE_TOPUP_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_CHOOSE_TOPUP_FIXEDLINE").DisplayValue : "";
        L_BAHT_FIXEDLINE = labelFbbtr023.Any(c => c.Name == "L_BAHT_FIXEDLINE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_BAHT_FIXEDLINE").DisplayValue : "";

        L_FIXEDLINE_CLICK_PAGE = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_CLICK_PAGE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_CLICK_PAGE").DisplayValue : "";
        L_FIXEDLINE_INITIATIONS_PAGE = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_INITIATIONS_PAGE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_INITIATIONS_PAGE").DisplayValue : ""; //L_MULTI_PLAYBOX_INITIATIONS //L_SUMM_DETAIL5
        L_FREE_FIXEDLINE_PAGE = labelFbbtr023.Any(c => c.Name == "L_FREE_FIXEDLINE_PAGE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FREE_FIXEDLINE_PAGE").DisplayValue : "";
        L_FIXEDLINE_VOIP_PAGE = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_VOIP_PAGE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_VOIP_PAGE").DisplayValue : "";
        L_FIXEDLINE_DES_PAGE = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_DES_PAGE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_DES_PAGE").DisplayValue : "";
        L_FIXEDLINE_SUM_DISCOUNT_INSTALL_RATE_PAGE = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUM_DISCOUNT_INSTALL_RATE_PAGE") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUM_DISCOUNT_INSTALL_RATE_PAGE").DisplayValue : ""; //L_SUM_DISCOUNT_INSTALL_RATE
        L_FIXEDLINE_BUNDLING_DISCOUNT_DTL = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_BUNDLING_DISCOUNT_DTL") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_BUNDLING_DISCOUNT_DTL").DisplayValue : ""; //L_BUNDLING_DISCOUNT_DTL
        L_FIXEDLINE_DISCOUNT_DTL = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_DISCOUNT_DTL") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_DISCOUNT_DTL").DisplayValue : ""; //L_DISCOUNT_DTL
        L_FIXEDLINE_SUMMARY = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMMARY") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMMARY").DisplayValue : ""; //L_SUMMARY
        L_FIXEDLINE_SUMM_DETAIL1 = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL1") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL1").DisplayValue : ""; //L_SUMM_DETAIL1
        L_FIXEDLINE_SUMM_DETAIL8 = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL8") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL8").DisplayValue : ""; //L_SUMM_DETAIL8
        L_FIXEDLINE_SUMM_DETAIL9 = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL9") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL9").DisplayValue : ""; //L_SUMM_DETAIL9
        L_FIXEDLINE_SUMM_DETAIL11 = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL11") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL11").DisplayValue : ""; //L_SUMM_DETAIL11
        L_FIXEDLINE_SUMM_DETAIL12 = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL12") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL12").DisplayValue : ""; //L_SUMM_DETAIL12
        L_FIXEDLINE_SUMM_DETAIL13 = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL13") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL13").DisplayValue : ""; //L_SUMM_DETAIL13
        L_FIXEDLINE_SUMM_DETAIL14 = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL14") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL14").DisplayValue : ""; //L_SUMM_DETAIL14
        L_FIXEDLINE_SUMM_DETAIL15 = labelFbbtr023.Any(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL15") ? labelFbbtr023.FirstOrDefault(c => c.Name == "L_FIXEDLINE_SUMM_DETAIL15").DisplayValue : ""; //L_SUMM_DETAIL15
    }

    string MyAISBypass = "";
    if (ViewBag.MyAISBypass != null)
    {
        MyAISBypass = ViewBag.MyAISBypass;
    }

    string tempV2ByPass = "";
    if (ViewBag.tempV2ByPass != null)
    {
        tempV2ByPass = ViewBag.tempV2ByPass;
    }

}

<div id="divVasPopupDetail" data-div-obj="obsolete" style="display: none;">
    <div id="divPromotionDetail">
        <div class="panel panel-info">
            <div class="panel-heading " style="border-bottom: none !important;">
            </div>
            <table class="table-non-border">
                <thead class="text-center" style="background: #e9ecf0;">
                    <tr>
                        <th class="text-left">@L_LIST_FIXEDLINE</th>
                        <th class="text-left">@L_CHARGE_FIXEDLINE</th>
                    </tr>
                </thead>
                <tbody class="text-left">
                    <tr>
                        <td>@L_INSTALL_RATE_FIXEDLINE</td>
                        <td>@L_INSTALL_RATE_VALUE_FIXEDLINE @L_BAHT_TIME_FIXEDLINE</td>
                    </tr>
                    <tr id="maintainance" style="display: none;">
                        <td>@L_MAINTEN_FEE_FIXEDLINE</td>
                        <td id="maintainBath"></td>

                    </tr>
                    <tr id="callfree" style="display: none;">
                        <td>@L_CALL_FREE_FIXEDLINE</td>
                        <td id="callfreeMin"></td>
                    </tr>
                </tbody>
                <thead class="text-center" style="background: #e9ecf0;">
                    <tr>
                        <th class="text-left">@L_CALLING_RATE_FIXEDLINE</th>
                        <th class="text-left"></th>
                    </tr>
                </thead>
                <tbody class="text-left">
                    <tr>
                        <td>@L_FREE_FIXEDLINE_PAGE</td>
                        <td>@L_UNLIMITED_FIXEDLINE</td>
                    </tr>
                    <tr>
                        <td>@L_CALL_IN_AIS_FIXEDLINE</td>
                        @if (language == "1")
                        {
                            <td>@L_PER_MIN_FIXEDLINE  @L_CALL_IN_AIS_VALUE_FIXEDLINE   @L_BAHT_FIXEDLINE</td>
                        }
                        else
                        {
                            <td>@L_CALL_IN_AIS_VALUE_FIXEDLINE   @L_PER_MIN_FIXEDLINE</td>
                        }
                    </tr>
                    <tr>
                        <td>@L_CALL_OUT_AIS_FIXEDLINE</td>
                        @if (language == "1")
                        {
                            <td>@L_PER_MIN_FIXEDLINE @L_CALL_OUT_AIS_VALUE_FIXEDLINE @L_BAHT_FIXEDLINE</td>
                        }
                        else
                        {
                            <td>@L_CALL_OUT_AIS_VALUE_FIXEDLINE @L_PER_MIN_FIXEDLINE</td>  
                        }
                    </tr>
                    <tr>
                        <td>@L_CALL_IN_RATE_FIXEDLINE</td>
                        @if (language == "1")
                        {
                            <td>@L_PER_TIME_FIXEDLINE @L_CALL_IN_RATE_VALUE_FIXEDLINE  @L_BAHT_FIXEDLINE</td>
                        }
                        else
                        {
                            <td>@L_CALL_IN_RATE_VALUE_FIXEDLINE  @L_PER_TIME_FIXEDLINE</td> 
                        }

                    </tr>
                    <tr>
                        <td>@L_CALL_OUT_RATE_FIXEDLINE</td>
                        @if (language == "1")
                        {
                            <td>@L_PER_MIN_FIXEDLINE @L_CALL_OUT_RATE_VALUE_FIXEDLINE  @L_BAHT_FIXEDLINE</td>
                        }
                        else
                        {
                            <td>@L_CALL_OUT_RATE_VALUE_FIXEDLINE  @L_PER_MIN_FIXEDLINE</td>  
                        }

                    </tr>
                </tbody>
            </table>
        </div>
        <div>
            @L_REMARK_VOICE_RATE_FIXEDLINE
        </div>
        <p class="clearfix"></p>
        <p class="clearfix"></p>
    </div>
</div>

<div id="page2_1" style="display: none;">
    <div class="container col-lg-12 col-md-12 col-xs-12">
        <div class="col-md-8 col-sm-8 col-xs-12 addrounded">
            <p class="clearfix"></p>
            <h4 class="page-header tgreen" id="lblSelectVas">@L_SELECT_VAS_FIXEDLINE</h4>
            @L_FIXEDLINE_CLICK_PAGE
            <p class="clearfix"></p>
            <div id="divVasBoxDynamic" class="row-border"></div>
            <div class="col-sm-4 col-xs-6 text-center"></div>
            <p class="clearfix"></p>
            <p class="clearfix page-header"></p>
            <div class="col-md-12 text-center">
                @if (VAS == "2" || ViewBag.TopUp == "1")
                {
                    <button type="button" 
                        @if (ViewBag.ExistingFlag == "FIXLINE:MENU" || MyAISBypass == "Y")
                        {
                            <text>class="btn btn-default btn-for-xs hide"</text>
                        }
                        else
                        {
                            <text>class="btn btn-default btn-for-xs"</text>
                        }    
                            id="btnVasBackPage" onclick=" onBtnVasBackPage_Click() ">
                        &nbsp; @B_BACK_FIXEDLINE &nbsp;
                    </button>
                    @*<button type="button" class="btn btn-success btn-for-xs" id="btnVasNextPage" onclick="onBtnVasNextPage_Click()">*@
                    <button type="button" class="btn btn-success btn-for-xs" id="btnVasNextPage" onclick="onBtnVasNextPageV2_Click()">
                        &nbsp; @B_NEXT_FIXEDLINE &nbsp;<i class="fa fa-arrow-circle-o-right "></i>
                    </button>
    }
    else
    {
    <button type="button" class="btn btn-default btn-for-xs" id="btnVasBackPage" onclick="onBtnVasBackPage_Click()">
        &nbsp; @B_BACK_FIXEDLINE &nbsp;
    </button>
    <button type="button" class="btn btn-default btn-for-xs" id="btnCrossVas" onclick="onBtnCrossVas_Click()">
        &nbsp; @B_VAS_CONFIRM_SKIP_FIXEDLINE &nbsp;
    </button>
    <button type="button" class="btn btn-success btn-for-xs" id="btnVasNextPage" onclick="onBtnVasNextPage_Click()">
        &nbsp; @B_NEXT_FIXEDLINE &nbsp;<i class="fa fa-arrow-circle-o-right "></i>
    </button>
    }
</div>
            <p class="clearfix"></p>
        </div>
        <div id="divSelectValFormSummaryDetail">
            <div class="col-md-4 col-sm-4 col-xs-12 addrounded pull-right hidden-xs">
                <br />
                <br />
                <h4 class="greenheader page-header twhite" id="lblSumHeaderVas"></h4>
                <div class="page-dot">
                    <i class="fa fa-chevron-right tgreen"></i>
                    <span class="tgreen" id="o2Vas"></span>
                    <div>
                        <p class="clearfix"></p>
                        <span class="col-xs-8"><span id="summLb1Vas"></span><span id="summLb1RouterVas"></span></span>
                        <span class="col-xs-4 text-right"><span id="summVal1Vas"></span>@L_BAHT_FIXEDLINE</span>
                    </div>
                    <div>
                        <p class="clearfix"></p>
                        <span class="col-xs-8"><span id="o3Vas"></span></span>
                        <span class="col-xs-4 text-right"><span id="summVal2Vas"></span>@L_BAHT_FIXEDLINE</span>
                    </div>
                    <p class="clearfix"></p>
                    <div id="trInstallVas">
                        <span class="col-xs-8" id="lblInstallVas">@L_SUM_INSTALL_RATE_FIXEDLINE</span>
                        <span class="col-xs-4 text-right"><span id="lblInstallPriceVas"></span>@L_BAHT_FIXEDLINE</span>
                        <p class="clearfix"></p>
                    </div>
                    <div id="trInstallFixedLine">
                        <span class="col-xs-8" id="lblInstallFixedLine">@L_SUM_INSTALL_RATE_FIXEDLINE</span>
                        <span class="col-xs-4 text-right"><span id="lblInstallPriceFixedLine"></span>@L_BAHT_FIXEDLINE</span>
                        <p class="clearfix"></p>
                    </div>
                    <div id="trDiscountFixedLine">
                        <span class="col-xs-8" id="lblDiscountFixedLine">@L_FIXEDLINE_SUM_DISCOUNT_INSTALL_RATE_PAGE</span>
                        <span class="col-xs-4 text-right"><span id="lblDiscountPriceFixedLine"></span>@L_BAHT_FIXEDLINE</span>
                        <p class="clearfix"></p>
                    </div>
                    <strong>
                        <span class="col-xs-8" id="o4Vas"></span>
                        <span class="col-xs-4 text-right"><span id="summTotal1Vas"></span>@L_BAHT_FIXEDLINE</span>
                    </strong>
                    <p class="clearfix"></p>
                </div>
                <div class="page-dot">
                    <i class="fa fa-chevron-right tgreen"></i>
                    <span class="tgreen" id="oProrateVas"></span>
                    <div>
                        <p class="clearfix"></p>
                        <span class="col-xs-8"><span id="o6Vas"></span>
                            <div id="summLb3Vas"></div>
                        </span>
                        <span class="col-xs-4 text-right"><span id="summVal3Vas"></span>@L_BAHT_FIXEDLINE</span>
                    </div>
                    <div id="trBundling">
                        <p class="clearfix"></p>
                        <span class="col-xs-8"><span id="Bunding_Discount"></span><span id="BundingVas">@L_FIXEDLINE_BUNDLING_DISCOUNT_DTL</span></span>
                        <span class="col-xs-4 text-right"><span id="summBundingVas"></span>@L_BAHT_FIXEDLINE</span>
                    </div>
                    <div id="trDiscount">
                        <p class="clearfix"></p>
                        <span class="col-xs-8"><span id="Discount_dtl"></span><span id="DiscountVas">@L_FIXEDLINE_DISCOUNT_DTL</span></span>
                        <span class="col-xs-4 text-right"><span id="summDiscountVas"></span>@L_BAHT_FIXEDLINE</span>
                    </div>

                    <p class="clearfix"></p>
                    <div id="trInstallMonthVasPlus">
                    </div>
                    <div id="trInstallMonthVas">
                        <span class="col-xs-8" id="lblInstallMonthVas">@L_SUM_MAINTEN_RATE_FIXEDLINE</span>
                        <span class="col-xs-4 text-right"><span id="lblInstallMonthPriceVas"></span>@L_BAHT_FIXEDLINE</span>
                        <p class="clearfix"></p>
                    </div>
                    <strong>
                        <span class="col-xs-8" id="o7Vas">@L_FIXEDLINE_SUMM_DETAIL11</span>
                        <span class="col-xs-4 text-right"><span id="summTotal2Vas"></span>@L_BAHT_FIXEDLINE</span>
                    </strong>
                    <p class="clearfix"></p>
                </div>
                <div class="page-dot">
                    <i class="fa fa-chevron-right tgreen"></i>
                    <span class="tgreen" id="o5Vas"></span>
                    <p class="clearfix"></p>
                    <span class="col-xs-8"><span id="o62Vas"></span></span>
                    <span class="col-xs-4 text-right"><span id="sumProrateVas"></span>@L_BAHT_FIXEDLINE</span>
                    <p class="clearfix"></p>
                    <strong>
                        <span class="col-xs-8"><span id="o42Vas"></span></span>
                        <span class="col-xs-4 text-right"><span id="sumTotalProrateVas"></span>@L_BAHT_FIXEDLINE</span>
                    </strong>
                    <p class="clearfix"></p>
                    <strong>
                        <span class="col-xs-8"><span id="vatVas"></span></span>
                    </strong>
                    <p class="clearfix"></p>
                </div>
            </div>
        </div>
    </div>
    <div style="display: none;">
        <input type="hidden" id="ZTEVasAddressID" value="@ADDRESS_ID" />
        <input type="hidden" id="ContactMobileNo" value="@ContactMobileNo" />
    </div>
    <div id="listMulitPlaybox"></div>
</div>
<table style="display: none; border-color: red;" id="tempV2" border="1"></table>
<div class="modal fade" id="myModalSpeedWarning" tabindex="-1" role="dialog" aria-labelledby="modal001_label">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
            </div>
            <div class="modal-body">
                <div class="">
                    <p class="clearfix"></p>
                    <h4 id="modal001txt" class="text-center">
                        <span id="LastPopupMessage"></span>
                    </h4>
                    <p class="clearfix"></p>
                    <div class="col-md-12 text-right" style="padding-top: 10px">
                        <p class="clearfix"></p>
                        <button type="button" id="btn02" class="btn btn-success" data-dismiss="modal" onclick="">&nbsp; @L_CLOSE_FIXEDLINE &nbsp; </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="modalMyAisBypassMsg" data-backdrop="static" tabindex="-1" role="dialog" aria-labelledby="modalMyAisBypassMsg_label">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header" style="border-bottom: none;">
            </div>
            <div class="modal-body">
                <div class="add-border-rounded-green">
                    <p class="clearfix"></p>
                    <h3 id="modalMyAisBypassMsgtxt" class="text-center"></h3>
                    <p class="clearfix"></p>
                    <div class="col-md-12 text-center">
                        <p class="clearfix"></p>
                        <button type="button" id="modalMyAisBypassMsgbtn" class="btn btn-default" data-dismiss="modal" onclick="">&nbsp; @B_OK &nbsp; </button>
                    </div>
                </div>
            </div>
            <div class="modal-footer" style="border-top: none;">
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">

    var flagSelectDetail = false;

    function onLoadPage2_1() {

        if ($('#tempV tr').length != 0) {
            setFormSummaryLine1();
            setVasForSelect();
        }
        else {
            alert('Does not have VAS.');
        }
    }

    var MultiPlayboxModel = function () {
        packageServiceCode: "";
        packageServiceName: "";
        packageType: "";
        packageTypeDesc: "";

        packageDisplayTha: "";
        packageDisplayEng: "";

        prePriceCharge: "";
        priceCharge: "";

        productSubtype: "";
        productSubtype3: "";
        sffProductName: "";
        sffPromotionCode: "";
        sffWordInStatementTha: "";
        sffWordInStatementEng: "";
        serviceCode: "";

        mappingCode: "";
        ownerProduct: "";
        downloadSpeed: "";
        uploadSpeed: "";
    }

    function setVasFixlineForSelect() { //R20.1

        var flagShowVoip = false;
        var chkShowFixline = false;

        var strBuilder = "";
        $('#divVasBoxDynamic').empty();

        var idFixline = "";
        var fixline_Monthly_Fee = "";
        var package_display_Monthly = "";

        flagShowVoip = "@SHOW_ICON_FIXEDLINE_CUST_VAS" == "Y" ? true : false;
        if ("@viewBagShowIconFL" != "") {
            flagShowVoip = "@viewBagShowIconFL" == "Y" ? true : false;
        }
        
        //Voip
        var findV = $("[name=SelectVasfixline]");

        if (flagShowVoip) {
            $.each(findV, function (i, e) {

                var packType = $("#PACKAGE_TYPE" + e.value).val();
                var proSub1 = $("#PRODUCT_SUBTYPE" + e.value).val();
                var packSerName = $("#PACKAGE_SERVICE_NAME" + e.value).val();
                var serviceCode = $("#SERVICE_CODE" + e.value).val();
                var lblName = "@Html.Raw(L_FIXEDLINE_VOIP_PAGE)";
                var lblDetail = "@Html.Raw(L_FIXEDLINE_DES_PAGE)";

                if (packType == "1" && proSub1 == "VOIP") { //main VOIP
                    chkShowFixline = true;
                    fixline_Monthly_Fee = $("#PRICE_CHARGE" + e.value).val();
                    package_display_Monthly = $("#LanguagePage").val() == 1 ? $("#PACKAGE_DISPLAY_THA" + e.value).val() : $("#PACKAGE_DISPLAY_ENG" + e.value).val();

                }

                if (packType == "2" && proSub1 == "VOIP") { 

                    var priceCharge = $("#PRICE_CHARGE" + e.value).val();
                    var prePriceCharge = $("#PRE_PRICE_CHARGE" + e.value).val();
                    var sffWordInStatement = $("#LanguagePage").val() == 1 ? $("#SFF_WORD_IN_STATEMENT_THA" + e.value).val() : $("#SFF_WORD_IN_STATEMENT_ENG" + e.value).val();
                    var picfixedline = $("#LanguagePage").val() == 1 ? "fixedlineOldTH.jpg" : "fixedlineOldEN.jpg";

                    idFixline = "vasBox" + e.value;

                    strBuilder += "<div id='vasBox" + e.value + "' class='col-sm-4 col-xs-12 text-center'>";
                    strBuilder += "<img src='../img/" + picfixedline + "' class='img-responsive center-block'>";
                    strBuilder += "<p class='clearfix'></p>";
                    strBuilder += lblName;
                    strBuilder += lblDetail;
                    strBuilder += "<div class='checkbox' style='height: 27px;'>";
                    strBuilder += "<label><input type='checkbox' vasid='vasBox" + e.value + "' id='vasBox" + e.value + "_chkbox' onclick='onVasBoxV2_Click(vasBox" + e.value + ")'> @L_CHOOSE_TOPUP_FIXEDLINE </label>";
                    strBuilder += "</div>";

                    strBuilder += "<input type='hidden' name='selectpack' value='" + e.value + "' />";
                    strBuilder += "<input type='hidden' name='productSubType' value='" + proSub1 + "' />";
                    strBuilder += "<input type='hidden' name='packageServiceName' value='" + packSerName + "' />";
                    strBuilder += "<input type='hidden' name='priceCharge' value='" + priceCharge + "' />";
                    strBuilder += "<input type='hidden' name='prePriceCharge' value='" + prePriceCharge + "' />";
                    strBuilder += "<input type='hidden' name='fixlineMonthlyFee' value='' />";
                    strBuilder += "<input type='hidden' name='packageDisplayMonthly' value='' />";
                    strBuilder += "<input type='hidden' name='sffWordInStatement' value='" + sffWordInStatement + "' />";
                    strBuilder += "<input type='hidden' id='PRODUCT_SUBTYPE_SFFPROMO' value='" + proSub1 + "' />";
                    strBuilder += "<input type='hidden' name='serviceCode' value='" + serviceCode + "' />";

                    strBuilder += "</div>";
                    strBuilder += "<p class='clearfix visible-xs'></p>";
                }
            });
        }

        // Check Show Main Fixedline
        if (chkShowFixline) {
            $('#divVasBoxDynamic').append(strBuilder);

            $("#" + idFixline + " input[name = 'fixlineMonthlyFee']").val(fixline_Monthly_Fee);
            $("#" + idFixline + " input[name = 'packageDisplayMonthly']").val(package_display_Monthly);

            var flagDefaultFL = false;
            if (flagDefaultFL)
                $("#" + idFixline + "_chkbox").trigger("click");
            
        }
        else {
            alert('Does not have a VAS.');
        }
    }

    function setVasForSelect() {

        var flagShowVoip = false;
        var flagShowPlayBox = false;

        var strBuilder = "";
        $('#divVasBoxDynamic').empty();

        var i = "";
        var mc = "";
        var ow = "";

        if ("@VAS" == "2" || "@ViewBag.TopUp" == "1") {
            //Line2
            if ("@VAS" == "2") {
                //SSO
                flagShowPlayBox = "@SHOW_ICON_PLAYBOX_SSO_VAS" == "Y" ? true : false;
                flagShowVoip = "@SHOW_ICON_FIXEDLINE_SSO_VAS" == "Y" ? true : false;
            }
            else {
                //Cus
                flagShowPlayBox = "@SHOW_ICON_PLAYBOX_CUST_VAS" == "Y" ? true : false;
                flagShowVoip = "@SHOW_ICON_FIXEDLINE_CUST_VAS" == "Y" ? true : false;
            }
        }
        else {
            //Line1
            if ("@VAS" == "1") {
                //SSO
                flagShowPlayBox = "@SHOW_ICON_PLAYBOX_SSO_REGISTER" == "Y" ? true : false;
                flagShowVoip = "@SHOW_ICON_FIXEDLINE_SSO_REGISTER" == "Y" ? true : false;
            }
            else {
                //Cus
                flagShowPlayBox = "@SHOW_ICON_PLAYBOX_CUST_REGISTER" == "Y" ? true : false;
                flagShowVoip = "@SHOW_ICON_FIXEDLINE_CUST_REGISTER" == "Y" ? true : false;
            }

            i = $("input[name=SelectPackage]:checked").val() != undefined ? $("input[name=SelectPackage]:checked").val() : "";
            mc = $("#MAPPING_CODE" + i).val() != undefined ? $("#MAPPING_CODE" + i).val() : "";
            ow = $("#OWNER_PRODUCT" + i).val() != undefined ? $("#OWNER_PRODUCT" + i).val() : "";
        }

        if ("@viewBagShowIconPB" != "") {
            flagShowPlayBox = "@viewBagShowIconPB" == "Y" ? true : false;
        }

        if ("@viewBagShowIconFL" != "") {
            flagShowVoip = "@viewBagShowIconFL" == "Y" ? true : false;
        }

        if ("@viewBagAddPB" != "") {
            flagShowPlayBox = "@viewBagAddPB" == "N" ? true : false;
        }

        var myMultiPlayboxArray = [];
                @if (Model.MulitPlaybox != null)
                {
                    foreach (var mulitPlayboxRow in Model.MulitPlaybox)
                    {
                        @:myMultiPlayboxArray.push("@mulitPlayboxRow.ServiceCode");
                    }
                }
        if (myMultiPlayboxArray.length <= 0) {
            flagShowPlayBox = false;
        }

        //Voip
        var findV = $("[name=SelectV" + mc + ow + "]");

        if (flagShowVoip) {
            $.each(findV, function (i, e) {

                var mainPrice = "";
                var ontopPrice = 0;
                var name = $('#TECHNOLOGY' + mc + e.value).val();
                var ow = $('#OWNER_PRODUCT' + mc + e.value).val();

                var lblName = "@Html.Raw(L_FIXEDLINE_VOIP_PAGE)";
                var lblDetail = "@Html.Raw(L_FIXEDLINE_DES_PAGE)";

                var findOntop = $("[name=SelectOntopV" + $('#MAPPING_PRODUCT' + mc + e.value).val() + "]");
                var productSubtype = $('#PRODUCT_SUBTYPE_' + mc + e.value).val();

                var preInitiation = 0;
                var initiation = 0;

                if (productSubtype == "VOIP") {
                    //VOIP
                    mainPrice = $('#RECURRING_CHARGE' + mc + e.value).val();

                    $.each(findOntop, function (j, k) {
                        ontopPrice += parseFloat($("#INITIATION_CHARGE" + mc + k.value).val());

                        preInitiation = $("#PRE_INITIATION_CHARGE" + mc + k.value).val();
                        initiation = $("#INITIATION_CHARGE" + mc + k.value).val();
                    });

                    $("#maintainance").hide();
                    $("#callfree").hide();

                    var productSubType3 = $("#PRODUCT_SUBTYPE3_" + mc + e.value).val().split('|');
                    if (productSubType3[1] == 'B') {
                        $("#maintainance").show();
                        $("#maintainBath").text(productSubType3[0] + " " + '@L_BAHT_MONTH_FIXEDLINE');
                    }
                    else if (productSubType3[1] == 'M') {
                        $("#callfree").show();
                        $("#callfreeMin").text(productSubType3[0] + " " + '@L_MINUTE_FIXEDLINE');
                    }
            }
            else {
                    //Vas
                ontopPrice += parseFloat($("#INITIATION_CHARGE" + mc + e.value).val());
                preInitiation = $("#PRE_INITIATION_CHARGE" + mc + e.value).val();
                initiation = $("#INITIATION_CHARGE" + mc + e.value).val();
            }

                //Detail popup
                var detail = "";
                var picfixedline = "";

                if ("@language" == "1") {
                    detail = $('#SFF_PROMOTION_BILL_THA' + mc + e.value).val();
                    picfixedline = "fixedlineOldTH.jpg";
                }
                else {
                    detail = $('#SFF_PROMOTION_BILL_ENG' + mc + e.value).val();
                    picfixedline = "fixedlineOldEN.jpg";
                }

                strBuilder += "<div id='vasBox" + e.value + "' class='col-sm-4 col-md-4 col-xs-12 text-center'>";

                strBuilder += "<img src='../img/" + picfixedline + "' class='img-responsive center-block'>";
                strBuilder += "<p class='clearfix'></p>";
                strBuilder += lblName;
                strBuilder += lblDetail;
                strBuilder += "<div class='checkbox' style='height: 27px;'>";
                strBuilder += "<label><input type='checkbox' vasid='vasBox" + e.value + "' id='vasBox" + e.value + "_chkbox' onclick='onVasBox_Click(vasBox" + e.value + ")'> @L_CHOOSE_TOPUP_FIXEDLINE </label>";
                strBuilder += "</div>";

                strBuilder += "<input type='hidden' name='selectpack' value='" + e.value + "' />";
                strBuilder += "<input type='hidden' name='price' value='" + ontopPrice + "' />";
                strBuilder += "<input type='hidden' name='monthprice' value='" + mainPrice + "' />";
                strBuilder += "<input type='hidden' name='initationCharge' value='" + initiation + "' />";
                strBuilder += "<input type='hidden' name='preInitiationCharge' value='" + preInitiation + "' />";
                strBuilder += "<input type='hidden' name='productSubType' value='" + productSubtype + "' />";

                strBuilder += "</div>";
                strBuilder += "<p class='clearfix visible-xs'></p>";
            });
        }

        $('#divVasBoxDynamic').append(strBuilder);

        var flagDefaultPB = false;

        if ("@VAS" == "2" || "@ViewBag.TopUp" == "1") {
            // Line2
            if ("@VAS" == "2") {
                // SSO
                if ("@DEFAULT_ICON_PLAYBOX_SSO_VAS" == "Y")
                    flagDefaultPB = true;
            }
            else {
                // CUST
                if ("@DEFAULT_ICON_PLAYBOX_CUST_VAS" == "Y")
                    flagDefaultPB = true;
            }
        }
        else {
            // Line1
            if ("@VAS" == "1") {
                // SSO
                if ("@DEFAULT_ICON_PLAYBOX_SSO_REGISTER" == "Y")
                    flagDefaultPB = true;
            }
            else {
                // CUST
                if ("@DEFAULT_ICON_PLAYBOX_CUST_REGISTER" == "Y")
                    flagDefaultPB = true;
            }
        }

    }

    function setFormSummaryLine1() {

        $('#hdGetVoip').val("0");
        $('#hdGetPlayBox').val("0");
        $('#hdGetMultiPlayBox').val("0");

        $('#trInstallPlayBox').hide();
        $('#trDiscountPlayBox').hide();
        $('#trInstallFixedLine').hide();
        $('#trDiscountFixedLine').hide();
        $('#trInstallVas').hide();
        $('#trInstallMonthVas').hide();

        $('#summDetailVas').text($('#summDetail').text());
        $('#summLb1Vas').text($('#summLb1').text());
        $('#summLb1RouterVas').text($('#summLb1Router').text());
        $('#summVal1Vas').text($('#summVal1').text());
        $('#summVal2Vas').text($('#summVal2').text());

        if ($('#hdSelectSPONTOP').val() == "0") {

            $('#summVal3Vas').text($('#summVal3').text());
            $('#summtext3Vas').text($('#summtext3').text());
            $('#summTotal2Vas').text($('#summTotal2').text());
            $('#trBundling').hide();
            $('#trDiscount').hide();
            $('#sumProrateVas').text($('#sumProrate').text());
            $('#sumTotalProrateVas').text($('#sumTotalProrate').text());
        }
        $('#summtext1Vas').text($('#summtext1').text());
        $('#summtext2Vas').text($('#summtext2').text());
        $('#summTotal1Vas').text($('#summTotal1').text());
        $('#summLb3Vas').html($('#summLb3').val().replace(/\|/g, '<br>'));
        $('#sumProrateVas').text($('#sumProrate').text());
        $('#sumTotalProrateVas').text($('#sumTotalProrate').text());
        $('#lblInstallPriceVas').text(0);
        $('#lblInstallMonthPriceVas').text(0);

        $('#lblSumHeaderVas').text($('#lbsummary').text());
        $('#o1Vas').text($('#o1').text());
        $('#o42Vas').text($('#o42').text());
        $('#o2Vas').text($('#o2').text());
        $('#o3Vas').text($('#o3').text());
        $('#o4Vas').text($('#o4').text());
        $('#oProrateVas').text($('#oProrate').text());
        $('#o6Vas').text($('#o6').text());
        $('#o7Vas').text($('#o7').text());
        $('#vatVas').text($('#vat').text());
        $('#o5Vas').text($('#o5').text());
        $('#o62Vas').text($('#o62').text());
        $('.bathvas').text($('#obaht').text());
    }

    function setFormSummaryLine2() {

        $('#summLb1Vas').parent().closest("div").hide();
        $('#o3Vas').parent().closest("div").hide();
        $('#o6Vas').parent().closest("div").hide();

        $('#hdGetVoip').val("0");
        $('#hdGetPlayBox').val("0");
        $('#hdGetMultiPlayBox').val("0");

        $('#trInstallFixedLine').hide();
        $('#trDiscountFixedLine').hide();
        $('#trInstallVas').hide();
        $('#trInstallMonthVas').hide();

        $('#summTotal1Vas').text('0');
        $('#summTotal2Vas').text('0');
        $('#sumTotalProrateVas').text('0');
        $('#lblInstallPriceVas').text('0');
        $('#lblInstallMonthPriceVas').text('0');
        $('#sumProrateVas').text('0');
        $('#lblSumHeaderVas').text("@L_FIXEDLINE_SUMMARY");
        $('#o1Vas').text("@L_FIXEDLINE_SUMM_DETAIL1");
        $('#o2Vas').text("@L_FIXEDLINE_INITIATIONS_PAGE");
        $('#o42Vas').text("@L_FIXEDLINE_SUMM_DETAIL15");
        $('#o4Vas').text("@L_FIXEDLINE_SUMM_DETAIL8");
        $('#oProrateVas').text("@L_FIXEDLINE_SUMM_DETAIL9");
        $('#o5Vas').text("@L_FIXEDLINE_SUMM_DETAIL13");
        $('#o62Vas').text("@L_FIXEDLINE_SUMM_DETAIL14");
        $('#vatVas').text("@L_FIXEDLINE_SUMM_DETAIL12");
        $('.bathvasline2').text("@L_BAHT_FIXEDLINE");
    }

    function bindSummary(value, type) {

        var registerPlayboxNumber = "";

        var strMonthPlus = 0;

        if ($('#lblInstallPriceFixedLine').text() == "0" || $('#lblInstallPriceFixedLine').text() == "" || $('#lblInstallPriceFixedLine').text() == undefined) {
            $('#trInstallFixedLine').hide();
        }
        else {
            $('#trInstallFixedLine').show();
        }

        var spanSummTotal2Vas = document.getElementById('summTotal2Vas');
        spanSummTotal2Vas.innerHTML = toNumber(strMonthPlus);

        //if (productSubtype != "PBOX") {
        var priceInstall = 0;//$('#summTotal1Vas').text() != "" && $('#summTotal1Vas').text() != undefined ? parseFloat($('#summTotal1Vas').text().replace(',', '')) : 0;
        var priceMonthPackage = $('#summTotal2Vas').text() != "" && $('#summTotal2Vas').text() != undefined ? parseFloat($('#summTotal2Vas').text().replace(',', '')) : 0;
        var priceInstallMonthVoip = $('#lblInstallMonthPriceVas').text() != "" && $('#lblInstallMonthPriceVas').text() != undefined ? parseFloat($('#lblInstallMonthPriceVas').text().replace(',', '')) : 0;

        var sumTotal2 = priceInstallMonthVoip + priceMonthPackage;

        $('#summTotal2Vas').text(toNumber(sumTotal2));

        // Prorate
        var sumProrate = 0;
        //if (priceInstallMonthVoip > 0) {
        var daysInMonth = new Date().getDaysInMonth();
        sumProrate = (sumTotal2 / daysInMonth) * 1;
        //  }
        var sumTotalProrate = sumTotal2 + sumProrate + priceInstall;

        $('#sumProrateVas').text(accounting.formatNumber(sumProrate, 2));
        $('#sumTotalProrateVas').text(accounting.formatNumber(sumTotalProrate, 2));
        // }

        $("#RegisterPlayboxNumber").val(registerPlayboxNumber);

    }

    function onVasBoxChange(value, divId, type) {
        if (value == "") {
            $("#" + divId.id).removeClass("add-rounded-green");
            $("#" + divId.id + "_chkbox").prop('checked', false);

        } else {
            $("#" + divId.id).addClass("add-rounded-green");
            $("#" + divId.id + "_chkbox").prop('checked', true);
        }
        bindSummary(value, type);

    }

    function onVasBox_Click(divId) {
        if (!flagSelectDetail) {

            var thisVasHasChecked = $("#" + divId.id + "_chkbox").is(":checked");
            if (thisVasHasChecked) {
                $("#" + divId.id).addClass("add-rounded-green");
            } else {
                $("#" + divId.id).removeClass("add-rounded-green");
            }

            var productSubType = $("#" + divId.id + " input[name='productSubType']").val();

            var price = 0;
            var monthPrice = 0;
            var installPrice = 0;
            var installMonthPrice = 0;

            var initation = 0;
            var preInitiation = 0;
            var installPricePB = 0;
            var installDiscountPB = 0;

            if ($("#" + divId.id + " input[name='initationCharge']").val() != "" && $("#" + divId.id + " input[name='initationCharge']").val() != undefined) {
                $("#" + divId.id + " input[name='initationCharge']").val($("#" + divId.id + " input[name='initationCharge']").val().replace(',', ''));
                initation = parseFloat($("#" + divId.id + " input[name='initationCharge']").val());
            }

            if ($("#" + divId.id + " input[name='preInitiationCharge']").val() != "" && $("#" + divId.id + " input[name='preInitiationCharge']").val() != undefined) {
                $("#" + divId.id + " input[name='preInitiationCharge']").val($("#" + divId.id + " input[name='preInitiationCharge']").val().replace(',', ''));
                preInitiation = parseFloat($("#" + divId.id + " input[name='preInitiationCharge']").val());
            }

            if ($("#" + divId.id + " input[name='price']").val() != "" && $("#" + divId.id + " input[name='price']").val() != undefined) {
                $("#" + divId.id + " input[name='price']").val($("#" + divId.id + " input[name='price']").val().replace(',', ''));
                price = parseFloat($("#" + divId.id + " input[name='price']").val());
            }

            if ($("#" + divId.id + " input[name='monthprice']").val() != "" && $("#" + divId.id + " input[name='monthprice']").val() != undefined) {
                $("#" + divId.id + " input[name='monthprice']").val($("#" + divId.id + " input[name='monthprice']").val().replace(',', ''));
                monthPrice = parseFloat($("#" + divId.id + " input[name='monthprice']").val());
            }

            if (thisVasHasChecked) {
                installPrice = price;
                installMonthPrice = monthPrice;

                installPricePB = preInitiation;
                installDiscountPB = preInitiation - initation;
            } else {
                installPrice = 0;
                installMonthPrice = 0;

                installPricePB = 0;
                installDiscountPB = 0;
            }

            if (productSubType == "VOIP") {
                // First Bill
                $('#lblInstallPriceFixedLine').text(toNumber(installPricePB));
                $('#lblDiscountPriceFixedLine').text(toNumber(installDiscountPB));

                if ($('#lblInstallPriceFixedLine').text() == "0" || $('#lblInstallPriceFixedLine').text() == "" || $('#lblInstallPriceFixedLine').text() == undefined) {
                    $('#trInstallFixedLine').hide();
                } else {
                    $('#trInstallFixedLine').show();
                }

                if ($('#lblDiscountPriceFixedLine').text() == "0" || $('#lblDiscountPriceFixedLine').text() == "" || $('#lblDiscountPriceFixedLine').text() == undefined) {
                    $('#trDiscountFixedLine').hide();

                } else {
                    $('#trDiscountFixedLine').show();
                }

                //    // Month Bill

                $('#lblInstallPriceVas').text(toNumber(installPrice));
                $('#lblInstallMonthPriceVas').text(toNumber(installMonthPrice));

                if ($('#lblInstallPriceVas').text() == "0" || $('#lblInstallPriceVas').text() == "" || $('#lblInstallPriceVas').text() == undefined) {
                    $('#trInstallVas').hide();
                } else {
                    $('#trInstallVas').show();
                }

                if ($('#lblInstallMonthPriceVas').text() == "0" || $('#lblInstallMonthPriceVas').text() == "" || $('#lblInstallMonthPriceVas').text() == undefined) {
                    $('#trInstallMonthVas').hide();
                } else {
                    $('#trInstallMonthVas').show();
                }
            }

            var value = $('select[name=ddlNewPlaybox]').val();
            bindSummary(value, "");
        }
        flagSelectDetail = false;
    }

    function onVasBoxV2_Click(divId) {

        if (!flagSelectDetail) {

            var thisVasHasChecked = $("#" + divId.id + "_chkbox").is(":checked");
            if (thisVasHasChecked) {
                $("#" + divId.id).addClass("add-rounded-green");

                var serviceCode = $("#" + divId.id + " input[name='serviceCode']").val();
                sessionStorage.setItem('SERVICE_CODE', serviceCode);
            } else {
                $("#" + divId.id).removeClass("add-rounded-green");
                sessionStorage.removeItem('SERVICE_CODE');
            }
            
            var priceCharge = 0;
            var prePriceCharge = 0;
            var fixlineMonthlyFee = 0;

            var installPriceFL = 0;
            var installDiscountFL = 0;
            var monthPrice = 0;

            if ($("#" + divId.id + " input[name='priceCharge']").val() != "" && $("#" + divId.id + " input[name='priceCharge']").val() != undefined) {
                $("#" + divId.id + " input[name='priceCharge']").val($("#" + divId.id + " input[name='priceCharge']").val().replace(',', ''));
                priceCharge = parseFloat($("#" + divId.id + " input[name='priceCharge']").val());
            }

            if ($("#" + divId.id + " input[name='prePriceCharge']").val() != "" && $("#" + divId.id + " input[name='prePriceCharge']").val() != undefined) {
                $("#" + divId.id + " input[name='prePriceCharge']").val($("#" + divId.id + " input[name='prePriceCharge']").val().replace(',', ''));
                prePriceCharge = parseFloat($("#" + divId.id + " input[name='prePriceCharge']").val());
            }

            if ($("#" + divId.id + " input[name='fixlineMonthlyFee']").val() != "" && $("#" + divId.id + " input[name='fixlineMonthlyFee']").val() != undefined) {
                $("#" + divId.id + " input[name='fixlineMonthlyFee']").val($("#" + divId.id + " input[name='fixlineMonthlyFee']").val().replace(',', ''));
                fixlineMonthlyFee = parseFloat($("#" + divId.id + " input[name='fixlineMonthlyFee']").val());
            }
            
            if (thisVasHasChecked) {
                installPriceFL = prePriceCharge;
                installDiscountFL = prePriceCharge - priceCharge;
                monthPrice = fixlineMonthlyFee;
            }
            else {
                priceCharge = 0;
                prePriceCharge = 0;
                fixlineMonthlyFee = 0;

                installPriceFL = 0;
                installDiscountFL = 0;
                monthPrice = 0;
            }
            
            // First bill

            $('#lblInstallPriceFixedLine').text(toNumber(installPriceFL));
            $('#lblDiscountPriceFixedLine').text(toNumber(installDiscountFL));

            if ($('#lblInstallPriceFixedLine').text() == "0" || $('#lblInstallPriceFixedLine').text() == "" || $('#lblInstallPriceFixedLine').text() == undefined) {
                $('#trInstallFixedLine').hide();
            }
            else {
                $('#trInstallFixedLine').show();
            }
            
            if ($('#lblDiscountPriceFixedLine').text() == "0" || $('#lblDiscountPriceFixedLine').text() == "" || $('#lblDiscountPriceFixedLine').text() == undefined) {
                $('#trDiscountFixedLine').hide();
            }
            else {
                $('#trDiscountFixedLine').show();
            }

            // 
            
            var pricePlayBox = $('#lblInstallPriceFixedLine').text() != "" && $('#lblInstallPriceFixedLine').text() != undefined ? parseFloat($('#lblInstallPriceFixedLine').text().replace(',', '')) : 0;
            var pricePlayBoxDiscount = $('#lblDiscountPriceFixedLine').text() != "" && $('#lblDiscountPriceFixedLine').text() != undefined ? parseFloat($('#lblDiscountPriceFixedLine').text().replace(',', '')) : 0;
            
            var sumTotal1 = pricePlayBox - pricePlayBoxDiscount;
            $('#summTotal1Vas').text(toNumber(sumTotal1));

            // Month bill
            
            $('#lblInstallMonthPriceVas').text(toNumber(monthPrice));

            if ($('#lblInstallMonthPriceVas').text() == "0" || $('#lblInstallMonthPriceVas').text() == "" || $('#lblInstallMonthPriceVas').text() == undefined) {
                $('#trInstallMonthVas').hide();
            } else {
                $('#trInstallMonthVas').show();
            }

            var sumTotal2 = monthPrice;
            $('#summTotal2Vas').text(toNumber(sumTotal2));

            // Prorate

            var daysInMonth = new Date().getDaysInMonth();
            var sumProrate = (sumTotal2 / daysInMonth) * 1;
            var sumTotalProrate = sumTotal1 + sumTotal2 + sumProrate;
            $('#sumProrateVas').text(accounting.formatNumber(sumProrate, 2));
            $('#sumTotalProrateVas').text(accounting.formatNumber(sumTotalProrate, 2));

            //set in session save submit;
            if (thisVasHasChecked) {
                var listPBsffpromotmp = [];
                var clistPBsffpromotmp = 0;
                var listtmp = SetTempListPBsffpromo();
                for (var h = 0; h < listtmp.length; h++) {
                    listPBsffpromotmp[clistPBsffpromotmp] = listtmp[h];
                    clistPBsffpromotmp++;
                }
                sessionStorage.setItem('MultiPBArray', JSON.stringify(listPBsffpromotmp)); //set in session save submit;
            }
            else {
                sessionStorage.setItem('MultiPBArray', "");
            }
            //var value = $('select[name=ddlNewPlaybox]').val();
            //bindSummary(value, "");
        }
        flagSelectDetail = false;
    }
    
    function SetTempListPBsffpromo() {
        var findOntop = $("[name=SelectVasfixline]");
        var listtmp = []; var clisttmp = 0;
        $.each(findOntop, function (i, e) {
            var packType = $("#PACKAGE_TYPE" + e.value).val();
            var proSub1 = $("#PRODUCT_SUBTYPE" + e.value).val();
            var packSerName = $("#PACKAGE_SERVICE_NAME" + e.value).val();
            if ((packType == "1" || packType == "2") && proSub1 == "VOIP" && packSerName == "VOIP") {
                var model = new MultiPlayboxModel();
                model.mappingCode = $("#MAPPING_CODE" + e.value).val();
                model.ownerProduct = $("#OWNER_PRODUCT" + e.value).val();
                model.packageDisplayEng = $("#PACKAGE_DISPLAY_ENG" + e.value).val();
                model.packageDisplayTha = $("#PACKAGE_DISPLAY_THA" + e.value).val();
                model.packageServiceCode = $("#PACKAGE_SERVICE_CODE" + e.value).val();
                model.packageServiceName = $("#PACKAGE_SERVICE_NAME" + e.value).val();
                model.packageType = $("#PACKAGE_TYPE" + e.value).val();
                model.packageTypeDesc = $("#PACKAGE_TYPE_DESC" + e.value).val();
                model.prePriceCharge = $("#PRE_PRICE_CHARGE" + e.value).val();
                model.priceCharge = $("#PRICE_CHARGE" + e.value).val();
                model.productSubtype = $("#PRODUCT_SUBTYPE" + e.value).val();
                model.productSubtype3 = $("#PRODUCT_SUBTYPE3" + e.value).val();
                model.sffProductName = $("#SFF_PRODUCT_NAME" + e.value).val();
                model.sffPromotionCode = $("#SFF_PROMOTION_CODE" + e.value).val();
                model.sffWordInStatementEng = $("#SFF_WORD_IN_STATEMENT_ENG" + e.value).val();
                model.sffWordInStatementTha = $("#SFF_WORD_IN_STATEMENT_THA" + e.value).val();
                model.serviceCode = $("#SERVICE_CODE" + e.value).val();
                model.downloadSpeed = $("#DOWNLOAD_SPEED" + e.value).val();
                model.uploadSpeed = $("#UPLOAD_SPEED" + e.value).val();
                listtmp[clisttmp] = model;
                clisttmp++;
            }

        });

        return listtmp;
    }

    function onVasDetail_Click(e) {

        flagSelectDetail = true;
        $('#divVasPopupDetail').modal('show');
        $('#divVasPopupDetail').css('display', 'block');

        var div1 = $('#simplemodal-container');
        div1.css('width', '520px');
        div1.css('height', 'auto');
        div1.css('margin-left', '10%');

        //$('#lblVasPopupDetail').text($(e).attr('value'));

        //e.stopPropagation();
        return false;
    }

    function onBtnVasNextPage_Click() {
        $('#hdGetVoip').val("0");
        $('#hdGetPlayBox').val("0");
        $('#hdGetMultiPlayBox').val("0");

        if ("@VAS" == "2" || "@ViewBag.TopUp" == "1") {
            //line 2

            var temp = "";
            if ($("#divVasBoxDynamic input[type=checkbox]:checked").length == 0) {
                temp = "@L_PLEASE_CHOOSE_VAS_SERVICE_FIXEDLINE";
            } else {
                var isPlaybox = false;
                $("#divVasBoxDynamic input[type=checkbox]:checked").each(function (i, e) {
                    var selectedVasId = $(this).attr("vasid");
                    if ($("#" + selectedVasId + " input[name='productSubType']").val() == "PBOX") {
                        isPlaybox = true;
                    }
                });

                if ("@Model.IsMulitPlayboxSpeedPass" != "Y" && isPlaybox == true) {

                    $("#myModalSpeedWarning").modal();
                    // alert("ไม่เกิน 50 Mb.");
                    return;
                } else {
                    $("#divVasBoxDynamic input[type=checkbox]:checked").each(function (i, e) {
                        var selectedVasId = $(this).attr("vasid");
                        if ($("#" + selectedVasId + " input[name='productSubType']").val() == "VOIP") {
                            $('#hdGetVoip').val("1");
                        } else if ($("#" + selectedVasId + " input[name='productSubType']").val() == "PBOX") {
                            $('#hdGetPlayBox').val("1");
                            $('#hdGetMultiPlayBox').val("1");
                        }
                    });

                    $('#page2_1').hide();
                    onLoadPage2_2();
                    //if ($('#hdGetVoip').val() == "1") {
                    //    $('#page2_2').show();
                    //}

                    //script Adobe Analytic
                    var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
                    digitalData.page = {
                        pageInfo: {
                            pageName: "newfibre:" + lang + ":vasSummary",
                            site: "newfibre",
                            language: lang
                        }
                    }
                    console.log("page load vasSummary : ", lang);
                    

                    // Update 17.4 Script Adobe Analytic
                    digitalData.customLinkName = "add-on:next-button";
                    console.log("custom-link-click : button btnVasNextPage");
                    
                }
            }
            if (temp) {
                toastrErrorMessage(temp);
                return;
            }
        }
        else {
            //Line 1
            if ($("#divVasBoxDynamic input[type=checkbox]:checked").length == 0 && $('select[name=ddlNewPlaybox]').val() == "") {
                // Not Select VAS
                $('#hdSelectVas').val("1");
                $('#page2_1').hide();
                onLoad003();
                //onLoadPage2_3();
                $('#page3').show();

                //script Adobe Analytic
                var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
                digitalData.page = {
                    pageInfo: {
                        pageName: "newfibre:" + lang + ":customer",
                        site: "newfibre",
                        language: lang
                    }
                }
                console.log("page load customer : ", lang);
                

                // Update 17.4 Script Adobe Analytic
                digitalData.customLinkName = "add-on:next-button";
                console.log("custom-link-click : button btnVasNextPage");
                
            } else {
                // Select VAS

                $("#divVasBoxDynamic input[type=checkbox]:checked").each(function (i, e) {
                    var selectedVasId = $(this).attr("vasid");
                    if ($("#" + selectedVasId + " input[name='productSubType']").val() == "VOIP") {
                        $('#hdGetVoip').val("1");
                    } else if ($("#" + selectedVasId + " input[name='productSubType']").val() == "PBOX") {
                        $('#hdGetPlayBox').val("1");
                        $('#hdGetMultiPlayBox').val("1");
                    }
                });
                $('#hdSelectVas').val("0");
                $('#page2_1').hide();
                onLoadPage2_2();
                $('#page2_2').show();
                //script Adobe Analytic
                var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
                digitalData.page = {
                    pageInfo: {
                        pageName: "newfibre:" + lang + ":vasSummary",
                        site: "newfibre",
                        language: lang
                    }
                }
                console.log("page load vasSummary : ", lang);
                

                // Update 17.4 Script Adobe Analytic
                digitalData.customLinkName = "add-on:next-button";
                console.log("custom-link-click : button btnVasNextPage");
                
            }
        }

        if ($('#hdGetVoip').val() == "1") {//&& $('#hdGetPlayBox').val() == "0"
            $('#divVoipPage').show();
            $('#divPlayBoxPage').hide();
            $('#divInstallDateVas').show();
            $('#divContactPhone').show();
            $('#page2_2').show();
        }
        else {// if ($('#hdGetPlayBox').val() == "1" && $('#hdGetVoip').val() == "0")
            $('#divVoipPage').hide();
            $('#divPlayBoxPage').show();
            $('#divInstallDateVas').hide();
            $('#divContactPhone').show();
            SumNextPage();
        }
    }

    function onBtnVasNextPageV2_Click() {
        $('#hdGetVoip').val("0");
        $('#hdGetPlayBox').val("0");
        $('#hdGetMultiPlayBox').val("0");
        
        //line 2
        var temp = "";

        if ($("#divVasBoxDynamic input[type=checkbox]:checked").length == 0) {
            temp = "@L_PLEASE_CHOOSE_VAS_SERVICE_FIXEDLINE";
        }
        else {
            $("#divVasBoxDynamic input[type=checkbox]:checked").each(function (i, e) {
                var selectedVasId = $(this).attr("vasid");
                if ($("#" + selectedVasId + " input[name='productSubType']").val() == "VOIP") {
                    $('#hdGetVoip').val("1");
                }
            });

            $('#page2_1').hide();
            onLoadPage2_2();
            $('#page2_2').show();
            //if ($('#hdGetVoip').val() == "1") {
            //    $('#page2_2').show();
            //}

            //script Adobe Analytic
            var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
            digitalData.page = {
                pageInfo: {
                    pageName: "newfibre:" + lang + ":vasSummary",
                    site: "newfibre",
                    language: lang
                }
            }
            console.log("page load vasSummary : ", lang);
            

            // Update 17.4 Script Adobe Analytic
            digitalData.customLinkName = "add-on:next-button";
            console.log("custom-link-click : button btnVasNextPage");
            
        }

        if (temp) {
            toastrErrorMessage(temp);
            return;
        }
        
        $('#divVoipPage').show();
        $('#divPlayBoxPage').hide();
        $('#divInstallDateVas').show();
        $('#divContactPhone').show();
    }

    function SumNextPage() {
        var chkInstallDate = true;
        var chkOneLove = false;

        //start check one love
        if ($("#chkLPhone").prop('checked') == true && $("#hdGetVoip").val() == "1") {
            if ($("#txtMobileForward").val() != "" && $("#txtMobileForward").val() != undefined) {
                if ($("#txtMobileForward").val().substr(0, 1) != "0") {
                    toastrErrorMessage("@M_MOBILE_FORWARD_FIXEDLINE");
                    $("#txtMobileForward").removeClass("form-control").addClass("form-control errorinput");
                    chkOneLove = false;
                }
                else {
                    //Call Ajax
                    var OrderRef = "";
                    if ("@VAS" == "2" || "@ViewBag.TopUp" == "1") {
                        OrderRef = "@SffProfileLogID";
                    }
                    else {
                        OrderRef = $("#HdResultId").val();
                    }

                    $.ajax({
                        url: '/VasSummary/GetAisMobile',
                        data: { msisdn: $("#txtMobileForward").val(), orderRef: OrderRef },
                        dataType: "json",
                        type: 'GET',
                        async: false,
                        success: function (response) {
                            if (response) {
                                $("#DisplayVasPackagePanelModel_L_MOBILE_FORWARD_L").val($("#txtMobileForward").val());
                                $("#txtMobileForward").removeClass("form-control errorinput").addClass("form-control");
                                chkOneLove = true;
                            }
                            else {
                                toastrErrorMessage("@M_MOBILE_FORWARD_FIXEDLINE");
                                $("#txtMobileForward").removeClass("form-control").addClass("form-control errorinput");
                                chkOneLove = false;
                            }
                        }
                    });
                }
            }
            else {
                $("#txtMobileForward").removeClass("form-control").addClass("form-control errorinput");
                chkOneLove = false;
            }
        }
        else {
            $("#txtMobileForward").removeClass("form-control errorinput").addClass("form-control");
            chkOneLove = true;
        }

        if ("@VAS" == "2" || "@ViewBag.TopUp" == "1") {
            //Line 2
            if ($("#hdGetVoip").val() == "1" && $("#hdGetMultiPlayBox").val() == "1" && !$('#divVoipPage').is(':visible')) {
                $('#divPlayBoxPage').hide();
                $('#divVoipPage').show();
                $('#divContactPhone').show();
                $('#divInstallDateVas').show();
            }
            else {
                var hourAdd = getTimeSlotConfigSelectDate();

                var d = new Date();

                if (hourAdd != 0)
                    d = new Date(new Date().getTime() + hourAdd * 60 * 60 * 1000);

                var month = d.getMonth() + 1;
                var day = d.getDate();

                var output = (day < 10 ? '0' : '') + day + '/' +
                    (month < 10 ? '0' : '') + month + '/' +
                    d.getFullYear();

                var outputAppointment = d.getFullYear() + '/' +
                (month < 10 ? '0' : '') + month + '/' +
                (day < 10 ? '0' : '') + day;

                if ("@ViewBag.TopUp" == "1") {
                    //Line 2 Cust
                    $('#CustomerRegisterPanelModel_FBSSTimeSlot_AppointmentDate').val(outputAppointment);
                    $('#CustomerRegisterPanelModel_FBSSTimeSlot_InstallationCapacity').val("0/10");
                    $('#CustomerRegisterPanelModel_FBSSTimeSlot_TimeSlot').val("08:00-10:00");
                    $('#CustomerRegisterPanelModel_FBSSTimeSlot_TimeSlotId').val("");
                    $("#L_INSTALL_DATE").val(output);
                }
                else {
                    if ($("#hdGetVoip").val() == "1") {
                        if ($("#L_INSTALL_DATE").val() == "" || $("#L_INSTALL_DATE").val() == undefined) {
                            chkInstallDate = false;
                            $("#dtpInstallDateTHVas").removeClass("textFieldDatePicker").addClass("textFieldDatePickerFalse");
                            $("#dtpInstallDateENVas").removeClass("textFieldDatePicker").addClass("textFieldDatePickerFalse");
                        }
                        else {
                            chkInstallDate = true;
                            $("#dtpInstallDateTHVas").removeClass("textFieldDatePickerFalse").addClass("textFieldDatePicker");
                            $("#dtpInstallDateENVas").removeClass("textFieldDatePickerFalse").addClass("textFieldDatePicker");
                        }
                    }
                    else {
                        $('#CustomerRegisterPanelModel_FBSSTimeSlot_AppointmentDate').val(outputAppointment);
                        $('#CustomerRegisterPanelModel_FBSSTimeSlot_InstallationCapacity').val("0/10");
                        $('#CustomerRegisterPanelModel_FBSSTimeSlot_TimeSlot').val("08:00-10:00");
                        $('#CustomerRegisterPanelModel_FBSSTimeSlot_TimeSlotId').val("");
                        $("#L_INSTALL_DATE").val(output);
                    }
                }
            }
        }
        else {
            //Line 1
            if ($("#hdGetVoip").val() == "1" && $("#hdGetMultiPlayBox").val() == "1" && !$('#divVoipPage').is(':visible')) {
                //Change to VOIP
                $('#divPlayBoxPage').hide();
                $('#divVoipPage').show();

                //script Adobe Analytic
                var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
                digitalData.page = {
                    pageInfo: {
                        pageName: "newfibre:" + lang + ":detailFixline",
                        site: "newfibre",
                        language: lang
                    }
                }
                console.log("page load detailFixline : ", lang);
                
            }
            else {
                if (chkOneLove) {
                    onLoad003();
                    $('#page2_2').hide();
                    $('#page3').show();

                    //script Adobe Analytic
                    var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
                    digitalData.page = {
                        pageInfo: {
                            pageName: "newfibre:" + lang + ":customer",
                            site: "newfibre",
                            language: lang
                        }
                    }
                    console.log("page load customer : ", lang);
                    

                }
            }
        }
        DataBindPage();
        $('#page2_2').hide();
        $('#page4').show();
    }

    function onBtnCrossVas_Click() {
        // Not Select VAS
        $('#hdGetVoip').val("0");
        $('#hdGetPlayBox').val("0");
        $('#hdGetMultiPlayBox').val("0");
        $('#hdSelectVas').val("1");
        $('#page2_1').hide();
        onLoad003();

        //onLoadPage2_3();
        $('#page3').show();

        //script Adobe Analytic
        var lang = $("#LanguagePage").val() == 1 ? "th" : "en";
        digitalData.page = {
            pageInfo: {
                pageName: "newfibre:" + lang + ":customer",
                site: "newfibre",
                language: lang
            }
        }
        console.log("page load customer : ", lang);
        

        // Update 17.4 Script Adobe Analytic
        digitalData.customLinkName = "add-on:skip-button";
        console.log("custom-link-click : button btnCrossVas");
        
    }

    function onBtnVasBackPage_Click() {

        if ("@VAS" == "2" || "@ViewBag.TopUp" == "1") {
            //line 2
            if ("@ViewBag.TopUp" == "1")
                    window.location.href = "@Url.Action("TopUpFixedline", "Process")";
                else
                    window.location.href = "@Url.Action("SearchProfile", "Process")";

                // Update 17.4 Script Adobe Analytic
                digitalData.customLinkName = "add-on:cancel-button";
                console.log("custom-link-click : button btnVasBackPage");
                
            }
            else {
                //Line 1
                $('#hdSelectVas').val("1");
                $('#page2_1').hide();
                $('#page2').show();

                // Update 17.4 Script Adobe Analytic
                digitalData.customLinkName = "add-on:cancel-button";
                console.log("custom-link-click : button btnVasBackPage");
                
            }
        }

        // Line 2
        function onLoadLine2Page2() {
            $('#page2_1').show();
            $('#divStepLogoLine1').hide();
            $('#divStepLogoLine2').show();
            $('#divPromotionDetailSum').hide();

            $('.wrapSwitchLanguage').hide();
            setFormSummaryLine2();
       
            //Start----------
            $("#tempV2").empty();
            if ('@MyAISBypass' == 'Y') {
                $('#tempV2').html("@Html.Raw(tempV2ByPass)");
            }
            else {
                var tempV2 = sessionStorage.getItem("tempV2");
                $('#tempV2').append(tempV2);
            }
            //End------------

            if ($('#tempV2 tr').length != 0) {
                setVasFixlineForSelect();
            }
            else {
                $('#modalMyAisBypassMsgtxt').text('Does not have a VAS.');
                $('#modalMyAisBypassMsg').modal();
            }

        }           
</script>

<script type="text/javascript">
    $(function () {
        if ("@ViewBag.Vas" == "2" || "@ViewBag.TopUp" == "1") {
            onLoadLine2Page2();
            changePageHeader_Vas(2);
        }
    });

    $(function () {
        if ("@ViewBag.TopUp" == "1") {
            $('#trBundling').hide();
            $('#trDiscount').hide();
        }

        if ("@ViewBag.Vas" == "2") {
            $('#trBundling').hide();
            $('#trDiscount').hide();
        }
    });
</script>
