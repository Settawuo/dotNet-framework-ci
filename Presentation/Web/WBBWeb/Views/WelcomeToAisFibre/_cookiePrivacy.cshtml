@using WBBEntity.PanelModels;
@model WBBWeb.Models.WelcomeAisModel

@{

    string W_PDPA_1 = string.Empty;
    string W_PDPA_2 = string.Empty;
    string W_PDPA_TEXT_LINK = string.Empty;

    if (ViewBag.LabelFBBOR051 != null)
    {
        var LabelFBBOR051 = (List<LovScreenValueModel>)ViewBag.LabelFBBOR051;

        W_PDPA_1 = LabelFBBOR051.Where(d => d.Name == "W_PDPA_1").Select(d => d.DisplayValue).FirstOrDefault();
        W_PDPA_2 = LabelFBBOR051.Where(d => d.Name == "W_PDPA_2").Select(d => d.DisplayValue).FirstOrDefault();

        if (W_PDPA_2.Contains("{"))
        {
            string[] subs = W_PDPA_2.Split('{');
            W_PDPA_2 = subs[0];
            W_PDPA_TEXT_LINK = subs[1].Replace("}", "");
        }

    }

    string URL_PDPA_COOKIE = string.Empty;

    if (ViewBag.FbbConstant != null)
    {
        var FbbConstant = (List<FbbConstantModel>)ViewBag.FbbConstant;
        URL_PDPA_COOKIE = FbbConstant.Where(d => d.Field == "URL_PDPA_COOKIE").Select(d => d.Validation).FirstOrDefault();
    }
}
<div id="divCookiePivacy" style="display: block;">
    <div id="onetrust-banner-sdk" class="otFlat bottom vertical-align-content" >
        <div class="row_ais">
            <div class="col-sm-11 col-md-11 col-lg-11">
                <div class="col-sm-1 col-md-1 col-lg-1 col-1 " id="form-layout-top-btn" style="display: none;">
                    <button class="onetrust-close-btn-handler onetrust-close-btn-ui banner-close-button onetrust-lg ot-close-icon"
                            tabindex="0" onclick="hideCookieConsent()">
                        X
                    </button>
                </div>
                <div id="onetrust-group-container" class="col-sm-12 col-md-10 col-lg-10 col-11">
                    <div class="msg-wrap">
                        <p id="onetrust-policy-text">@W_PDPA_2 <a style="color:#115cfa;" href="@URL_PDPA_COOKIE">@W_PDPA_TEXT_LINK</a></p>

                    </div>
                </div>

                <div id="onetrust-button-group-parent" class="col-sm-12 col-md-2 col-lg-2 col-11">
                    <div id="onetrust-button-group">
                        <button id="onetrust-accept-btn-handler" tabindex="0" onclick="acceptCookieConsent()">@W_PDPA_1</button>
                    </div>
                </div>
            </div>
            <div class="col-sm-1 col-md-1 col-lg-1" id="form-layout-right-btn" style="display: block;">
              
                    <button class="onetrust-close-btn-handler onetrust-close-btn-ui banner-close-button onetrust-lg ot-close-icon"
                            tabindex="0" onclick="hideCookieConsent()">
                        X
                    </button>
                
            </div>

            </div>
        </div>
</div>
<script type="text/javascript">
    $(document).ready(function () {
        resizeListener();
        let cookie_consent = getCookie("user_cookie_consent");
        if (cookie_consent !== null && cookie_consent !== "") {
            document.getElementById("onetrust-banner-sdk").style.display = "none";
        } else {
            document.getElementById("onetrust-banner-sdk").style.display = "block";
        }
        window.addEventListener("resize", resizeListener);
    });


    // Create cookie
    function setCookie(cname, cvalue, exdays) {
        const d = new Date();
        d.setTime(d.getTime() + (exdays * 24 * 60 * 60 * 1000));
        let expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=" + cvalue + ";" + expires + ";path=/";
    }

    // Delete cookie
    function deleteCookie(cname) {
        const d = new Date();
        d.setTime(d.getTime() + (24 * 60 * 60 * 1000));
        let expires = "expires=" + d.toUTCString();
        document.cookie = cname + "=;" + expires + ";path=/";
    }

    // Read cookie
    function getCookie(cname) {
        let name = cname + "=";
        let decodedCookie = decodeURIComponent(document.cookie);
        let ca = decodedCookie.split(';');
        for (let i = 0; i < ca.length; i++) {
            let c = ca[i];
            while (c.charAt(0) == ' ') {
                c = c.substring(1);
            }
            if (c.indexOf(name) == 0) {
                return c.substring(name.length, c.length);
            }
        }
        return "";
    }

    // Set cookie consent
    function acceptCookieConsent() {
        deleteCookie('user_cookie_consent');
        setCookie('user_cookie_consent', 1, 30);
        document.getElementById("onetrust-banner-sdk").style.display = "none";
    }

    function hideCookieConsent() {
       document.getElementById("onetrust-banner-sdk").style.display = "none";
    }
    function resizeListener() {
        
        if (window.innerWidth < 750) {
            document.getElementById("form-layout-right-btn").style.display = "none";
            document.getElementById("form-layout-top-btn").style.display = "block";
        }
        if (window.innerWidth > 750) {
            document.getElementById("form-layout-top-btn").style.display = "none";
            document.getElementById("form-layout-right-btn").style.display = "block";
        }
    }
</script>

<style>
    #onetrust-banner-sdk {
        background-color: #c5d445 !important;
    }


    #onetrust-banner-sdk.otFlat {
        position: fixed;
        z-index: 2147483645;
        bottom: 0;
        right: 0;
        left: 0;
        background-color: #fff;
        max-height: 90%;
        overflow-x: hidden;
        overflow-y: auto;
    }

    #onetrust-policy-text {
        padding-top: 20px;
        padding-bottom: 20px;
        padding-left: 5px;
        padding-right: 25px;
        margin-right: 25px;
        line-height: 1.5;
        color: #333000;
    }
    #onetrust-accept-btn-handler {
        background-color: #333000;
        border-color: #333000;
        color: #FFFFFF;
        margin-right: 1em;
        min-width: 125px;
        height: auto;
        white-space: normal;
        word-break: break-word;
        word-wrap: break-word;
        padding: 12px 10px;
        line-height: 1.2;
        font-size: .813em;
        font-weight: 600;
        width: -webkit-fill-available;
        width: -moz-available;
    }
        
      
    #onetrust-banner-sdk .ot-close-icon, #onetrust-pc-sdk .ot-close-icon {
        width: 12px;
    }

    .onetrust-close-btn-handler {
        background-color: transparent;
      
    }

    #onetrust-consent-sdk #onetrust-banner-sdk a[href] {
        color: #1276CE;
    }

    #onetrust-banner-sdk a, #onetrust-pc-sdk a, #ot-sdk-cookie-policy a {
        color: #565656;
        text-decoration: underline;
    }

    #onetrust-banner-sdk #onetrust-policy-text a {
        font-weight: bold;
        margin-left: 5px;
    }

    #onetrust-button-group-parent #onetrust-button-group {
        margin-top: 10px;
        margin-left: 20px;
        position: relative;
        vertical-align: central;
        
    }
    #onetrust-banner-sdk .onetrust-close-btn-ui {
        margin: 5px 0 0 0;
        float: right !important;
        padding: 0;
        width: 0.9em;
        border: none;
    }

     
</style>
