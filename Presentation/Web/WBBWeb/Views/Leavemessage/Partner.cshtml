@model WBBEntity.PanelModels.LeavemessagePanelModel
@using System.Collections.Generic;
@using WBBEntity.PanelModels
@using WBBWeb.Controllers;
@{
    Layout = "~/Views/Shared/_NewLayoutReferencesLeaveMessageI.cshtml";

    string FullUrl = "";
    string UrlRef = "";
    string SaveStatus = "";
    string RefNo = "";
    string LeaveMessagePic = "";
    string Ref = "";
    var Show = "";

    if (ViewBag.FullUrl != null)
    {
        FullUrl = ViewBag.FullUrl;
    }

    if (ViewBag.UrlRef != null)
    {
        UrlRef = ViewBag.UrlRef;
    }

    if (ViewBag.Ref != null)
    {
        Ref = ViewBag.Ref;

    }
    if (ViewBag.Show != null)
    {
        Show = ViewBag.Show;
    }
    if (null != ViewBag.SaveStatus)
    {
        SaveStatus = ViewBag.SaveStatus;
        ViewBag.SaveStatus = null;
    }
    else
    {
        SaveStatus = "";
    }

    if (null != ViewBag.RefNo)
    {
        RefNo = ViewBag.RefNo;
        ViewBag.RefNo = null;
    }
    else
    {
        RefNo = "";
    }

    if (ViewBag.LeaveMessagePic != null)
    {
        LeaveMessagePic = "data:image/png;base64," + ViewBag.LeaveMessagePic;
    }

    string L_LEAVE_MESSAGE_XX = "";
    string L_SELECT_SERVICE_XX = "";
    string L_NAME_XX = "";
    string L_SURNAME_XX = "";
    string L_CONTACT_MOBILE_XX = "";
    string L_EMAIL_XX = "";
    string L_INSTALL_ADDRESS_XX = "";
    string L_PROVINCE_XX = "";
    string L_DISTRICT_XX = "";
    string L_SUB_DISTRICT_XX = "";
    string L_POSTAL_CODE_XX = "";
    string L_SELECT_ADDRESS_TYPE_XX = "";
    string L_BUILDING_XX = "";
    string L_VILLAGE_XX = "";
    string L_BUILDING_NAME_XX = "";
    string L_VILLAGE_NAME_XX = "";
    string L_HOUSE_NO_XX = "";
    string L_SOI_XX = "";
    string L_ROAD_XX = "";
    string L_CONTACT_TIME_XX = "";
    string L_ENTER_WORD_XX = "";
    string B_CLEAR_XX = "";
    string B_REGISTER_XX = "";
    string L_PLEASE_SELECT_XX = "";
    string L_POPUP_SUCCESS_XX = "";
    string L_POPUP_ERROR_XX = "";
    string B_CLOSE_XX = "";
    string H_TYPE_BUILDING_XX = "";
    string L_TYPE_MY_HOME_XX = "";
    string L_TYPE_RENTAL_XX = "";
    string L_MESSAGE_ERROR_RENTAL_XX = "";
    string L_SERVICE_LEAVEMESSAGE_XX = "";
    string L_MESSAGE_ERROR_EMAIL_XX = "";
    string L_REF_NUMBER_XX = "";
    string LEAVEMESSAGEXX_EXPIRED = "";

    string L_FOR_EMPLOYEE_XX = "";
    string L_EMPLOYEE_ID_XX = "";
    string L_LOCATION_CODE_XXX = "";
    string L_COMPANY_NAME_XX = "";
    string L_POPUP_LOCATION_CODE_XX = "";
    string L_POPUP_EMPLOYEE_ID_XX = "";
    string L_POPUP_LOCATION_CODE_AND_EMPLOYEE_ID_XX = "";


    if (ViewBag.LabelFBBOR044 != null)
    {
        var LabelFBBOR044 = (List<LovScreenValueModel>)ViewBag.LabelFBBOR044;

        L_LEAVE_MESSAGE_XX = LabelFBBOR044.Any(c => c.Name == "L_LEAVE_MESSAGE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_LEAVE_MESSAGE_XX").DisplayValue : "";
        L_SELECT_SERVICE_XX = LabelFBBOR044.Any(c => c.Name == "L_SELECT_SERVICE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_SELECT_SERVICE_XX").DisplayValue : "";
        L_NAME_XX = LabelFBBOR044.Any(c => c.Name == "L_NAME_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_NAME_XX").DisplayValue : "";
        L_SURNAME_XX = LabelFBBOR044.Any(c => c.Name == "L_SURNAME_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_SURNAME_XX").DisplayValue : "";
        L_CONTACT_MOBILE_XX = LabelFBBOR044.Any(c => c.Name == "L_CONTACT_MOBILE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_CONTACT_MOBILE_XX").DisplayValue : "";
        L_EMAIL_XX = LabelFBBOR044.Any(c => c.Name == "L_EMAIL_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_EMAIL_XX").DisplayValue : "";

        L_INSTALL_ADDRESS_XX = LabelFBBOR044.Any(c => c.Name == "L_INSTALL_ADDRESS_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_INSTALL_ADDRESS_XX").DisplayValue : "";

        L_PROVINCE_XX = LabelFBBOR044.Any(c => c.Name == "L_PROVINCE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_PROVINCE_XX").DisplayValue : "";
        L_DISTRICT_XX = LabelFBBOR044.Any(c => c.Name == "L_DISTRICT_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_DISTRICT_XX").DisplayValue : "";
        L_SUB_DISTRICT_XX = LabelFBBOR044.Any(c => c.Name == "L_SUB_DISTRICT_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_SUB_DISTRICT_XX").DisplayValue : "";
        L_POSTAL_CODE_XX = LabelFBBOR044.Any(c => c.Name == "L_POSTAL_CODE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_POSTAL_CODE_XX").DisplayValue : "";
        L_SELECT_ADDRESS_TYPE_XX = LabelFBBOR044.Any(c => c.Name == "L_SELECT_ADDRESS_TYPE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_SELECT_ADDRESS_TYPE_XX").DisplayValue : "";
        L_BUILDING_XX = LabelFBBOR044.Any(c => c.Name == "L_BUILDING_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_BUILDING_XX").DisplayValue : "";
        L_VILLAGE_XX = LabelFBBOR044.Any(c => c.Name == "L_VILLAGE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_VILLAGE_XX").DisplayValue : "";
        L_BUILDING_NAME_XX = LabelFBBOR044.Any(c => c.Name == "L_BUILDING_NAME_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_BUILDING_NAME_XX").DisplayValue : "";
        L_VILLAGE_NAME_XX = LabelFBBOR044.Any(c => c.Name == "L_VILLAGE_NAME_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_VILLAGE_NAME_XX").DisplayValue : "";
        L_HOUSE_NO_XX = LabelFBBOR044.Any(c => c.Name == "L_HOUSE_NO_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_HOUSE_NO_XX").DisplayValue : "";
        L_SOI_XX = LabelFBBOR044.Any(c => c.Name == "L_SOI_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_SOI_XX").DisplayValue : "";
        L_ROAD_XX = LabelFBBOR044.Any(c => c.Name == "L_ROAD_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_ROAD_XX").DisplayValue : "";
        L_CONTACT_TIME_XX = LabelFBBOR044.Any(c => c.Name == "L_CONTACT_TIME_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_CONTACT_TIME_XX").DisplayValue : "";
        L_ENTER_WORD_XX = LabelFBBOR044.Any(c => c.Name == "L_ENTER_WORD_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_ENTER_WORD_XX").DisplayValue : "";
        B_CLEAR_XX = LabelFBBOR044.Any(c => c.Name == "B_CLEAR_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "B_CLEAR_XX").DisplayValue : "";
        B_REGISTER_XX = LabelFBBOR044.Any(c => c.Name == "B_REGISTER_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "B_REGISTER_XX").DisplayValue : "";
        L_PLEASE_SELECT_XX = LabelFBBOR044.Any(c => c.Name == "L_PLEASE_SELECT_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_PLEASE_SELECT_XX").DisplayValue : "";
        L_POPUP_SUCCESS_XX = LabelFBBOR044.Any(c => c.Name == "L_POPUP_SUCCESS_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_POPUP_SUCCESS_XX").DisplayValue : "";
        L_POPUP_ERROR_XX = LabelFBBOR044.Any(c => c.Name == "L_POPUP_ERROR_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_POPUP_ERROR_XX").DisplayValue : "";
        B_CLOSE_XX = LabelFBBOR044.Any(c => c.Name == "B_CLOSE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "B_CLOSE_XX").DisplayValue : "";

        H_TYPE_BUILDING_XX = LabelFBBOR044.Any(c => c.Name == "H_TYPE_BUILDING_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "H_TYPE_BUILDING_XX").DisplayValue : "";
        L_TYPE_MY_HOME_XX = LabelFBBOR044.Any(c => c.Name == "L_TYPE_MY_HOME_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_TYPE_MY_HOME_XX").DisplayValue : "";
        L_TYPE_RENTAL_XX = LabelFBBOR044.Any(c => c.Name == "L_TYPE_RENTAL_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_TYPE_RENTAL_XX").DisplayValue : "";
        L_MESSAGE_ERROR_RENTAL_XX = LabelFBBOR044.Any(c => c.Name == "L_MESSAGE_ERROR_RENTAL_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_MESSAGE_ERROR_RENTAL_XX").DisplayValue : "";
        L_SERVICE_LEAVEMESSAGE_XX = LabelFBBOR044.Any(c => c.Name == "L_SERVICE_LEAVEMESSAGE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_SERVICE_LEAVEMESSAGE_XX").DisplayValue : "";
        L_MESSAGE_ERROR_EMAIL_XX = LabelFBBOR044.Any(c => c.Name == "L_MESSAGE_ERROR_EMAIL_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_MESSAGE_ERROR_EMAIL_XX").DisplayValue : "";
        L_REF_NUMBER_XX = LabelFBBOR044.Any(c => c.Name == "L_REF_NUMBER_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_REF_NUMBER_XX").DisplayValue : "";
        LEAVEMESSAGEXX_EXPIRED = LabelFBBOR044.Any(c => c.Name == "LEAVEMESSAGEXX_EXPIRED") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "LEAVEMESSAGEXX_EXPIRED").DisplayValue : "";

        L_FOR_EMPLOYEE_XX = LabelFBBOR044.Any(c => c.Name == "L_FOR_EMPLOYEE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_FOR_EMPLOYEE_XX").DisplayValue : "";
        L_EMPLOYEE_ID_XX = LabelFBBOR044.Any(c => c.Name == "L_EMPLOYEE_ID_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_EMPLOYEE_ID_XX").DisplayValue : "";
        L_LOCATION_CODE_XXX = LabelFBBOR044.Any(c => c.Name == "L_LOCATION_CODE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_LOCATION_CODE_XX").DisplayValue : "";
        L_COMPANY_NAME_XX = LabelFBBOR044.Any(c => c.Name == "L_COMPANY_NAME_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_COMPANY_NAME_XX").DisplayValue : "";
        L_POPUP_LOCATION_CODE_XX = LabelFBBOR044.Any(c => c.Name == "L_POPUP_LOCATION_CODE_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_POPUP_LOCATION_CODE_XX").DisplayValue : "";
        L_POPUP_EMPLOYEE_ID_XX = LabelFBBOR044.Any(c => c.Name == "L_POPUP_EMPLOYEE_ID_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_POPUP_EMPLOYEE_ID_XX").DisplayValue : "";
        L_POPUP_LOCATION_CODE_AND_EMPLOYEE_ID_XX = LabelFBBOR044.Any(c => c.Name == "L_POPUP_LOCATION_CODE_AND_EMPLOYEE_ID_XX") ? LabelFBBOR044.FirstOrDefault(c => c.Name == "L_POPUP_LOCATION_CODE_AND_EMPLOYEE_ID_XX").DisplayValue : "";
    }

    string FBB_Con_CharNotonName = "";
    string FBB_Input_MobileNo = "";
    string FBB_Con_Input_Mooban = "";
    string FBB_Con_Input_Building = "";
    string FBB_Con_Input_Home_Number = "";
    string FBB_Con_Input_Soi = "";
    string FBB_Con_Input_Road = "";

    string SHOW_PAYMENT_PAGE = "";

    if (ViewBag.FbbConstant != null)
    {
        var FbbConstant = (List<FbbConstantModel>)ViewBag.FbbConstant;

        FBB_Con_CharNotonName = FbbConstant.Any(f => f.Field == "Char Not on Name") ? FbbConstant.First(f => f.Field == "Char Not on Name").Validation : "";
        FBB_Input_MobileNo = FbbConstant.Any(f => f.Field == "Input_MobileNo") ? FbbConstant.First(f => f.Field == "Input_MobileNo").Validation : "";
        FBB_Con_Input_Mooban = FbbConstant.Any(f => f.Field == "Input_Mooban") ? FbbConstant.First(f => f.Field == "Input_Mooban").Validation : "";
        FBB_Con_Input_Building = FbbConstant.Any(f => f.Field == "Input_Building") ? FbbConstant.First(f => f.Field == "Input_Building").Validation : "";
        FBB_Con_Input_Home_Number = FbbConstant.Any(f => f.Field == "Input_Home_Number") ? FbbConstant.First(f => f.Field == "Input_Home_Number").Validation : "";
        FBB_Con_Input_Soi = FbbConstant.Any(f => f.Field == "Input_Soi") ? FbbConstant.First(f => f.Field == "Input_Soi").Validation : "";
        FBB_Con_Input_Road = FbbConstant.Any(f => f.Field == "Input_Road") ? FbbConstant.First(f => f.Field == "Input_Road").Validation : "";

        SHOW_PAYMENT_PAGE = FbbConstant.Any(f => f.Field == "SHOW_PAYMENT_PAGE") ? FbbConstant.First(f => f.Field == "SHOW_PAYMENT_PAGE").Validation : "";
    }

    string L_FOR_OFFICER_XX = "";
    string L_LOCATION_CODE_XX = "";
    string L_ASC_CODE_XX = "";
    string L_EMPLOYEE_CODE_XX = "";
    string L_SALES_REP_XX = "";

    string L_POPUP_INVALID_LOC_ASC = "";
    string L_POPUP_INVALID_EMP_CODE = "";

    if (ViewBag.LabelFBBOR028 != null)
    {
        var LabelFBBOR028 = (List<LovScreenValueModel>)ViewBag.LabelFBBOR028;

        L_FOR_OFFICER_XX = LabelFBBOR028.Any(c => c.Name == "L_FOR_OFFICER") ? LabelFBBOR028.FirstOrDefault(c => c.Name == "L_FOR_OFFICER").DisplayValue : "";
        L_LOCATION_CODE_XX = LabelFBBOR028.Any(c => c.Name == "L_LOCATION_CODE") ? LabelFBBOR028.FirstOrDefault(c => c.Name == "L_LOCATION_CODE").DisplayValue : "";
        L_ASC_CODE_XX = LabelFBBOR028.Any(c => c.Name == "L_ASC_CODE") ? LabelFBBOR028.FirstOrDefault(c => c.Name == "L_ASC_CODE").DisplayValue : "";
        L_EMPLOYEE_CODE_XX = LabelFBBOR028.Any(c => c.Name == "L_EMPLOYEE_CODE") ? LabelFBBOR028.FirstOrDefault(c => c.Name == "L_EMPLOYEE_CODE").DisplayValue : "";
        L_SALES_REP_XX = LabelFBBOR028.Any(c => c.Name == "L_SALES_REP") ? LabelFBBOR028.FirstOrDefault(c => c.Name == "L_SALES_REP").DisplayValue : "";


        L_POPUP_INVALID_EMP_CODE = LabelFBBOR028.Any(c => c.Name == "L_POPUP_INVALID_EMP_CODE") ? LabelFBBOR028.FirstOrDefault(c => c.Name == "L_POPUP_INVALID_EMP_CODE").DisplayValue : "";
        L_POPUP_INVALID_LOC_ASC = LabelFBBOR028.Any(c => c.Name == "L_POPUP_INVALID_LOC_ASC") ? LabelFBBOR028.FirstOrDefault(c => c.Name == "L_POPUP_INVALID_LOC_ASC").DisplayValue : "";
    }

    string language = "";

    if (Session[WBBWeb.Extension.WebConstants.SessionKeys.CurrentUICulture].ToString() == "1")
    {
        language = "th";
    }
    else
    {
        language = "en";
    }
}

@using (Html.BeginForm("SaveRegisterPartner", "Leavemessage", FormMethod.Post, new { id = "RegisterForm", enctype = "multipart/form-data", autocomplete = "off" }))
{
    <h4 class="page-header tgreen">@L_LEAVE_MESSAGE_XX</h4>
    <div>
        <div class="col-xs-12 col-sm-12">
            @*@Html.Label("L_SELECT_SERVICE_XX", L_SELECT_SERVICE_XX)*@
            <div class="clear-fix"></div>
            @*<h4 class="page-header tgreen"><b>@L_SERVICE_LEAVEMESSAGE_XX</b></h4>*@
            @Html.Hidden("SELECT_SERVICE", L_SERVICE_LEAVEMESSAGE_XX)
            @Html.Hidden("FULL_URL", @FullUrl)
            @*@Html.Hidden("MOBILE_IS_AIS_SPECIAL", "|SpecialOffer2")*@
        </div>
        <p class="clearfix"></p>


        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_NAME", L_NAME_XX)
            @Html.TextBoxFor(m => m.NAME, "",
                        new
                        {
                            @class = "form-control",
                            @title = L_NAME_XX,
                            @maxlength = 50
                        })
        </div>
        <div class="col-xs-2 col-sm-2">
        </div>
        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_SURNAME", L_SURNAME_XX)
            @Html.TextBoxFor(m => m.SURNAME, "",
                        new
                        {
                            @class = "form-control",
                            @title = L_SURNAME_XX,
                            @maxlength = 50
                        })
        </div>
        <p class="clearfix"></p>

        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_CONTACT_MOBILE", L_CONTACT_MOBILE_XX)
            @Html.TextBoxFor(m => m.CONTACT_MOBILE, "",
                        new
                        {
                            @class = "form-control",
                            @title = L_CONTACT_MOBILE_XX,
                            @maxlength = 10
                        })
            @Html.HiddenFor(m => m.MOBILE_IS_AIS)
        </div>
        <div class="col-xs-2 col-sm-2">
            <p class="clearfix"></p>
            <p class="clearfix"></p>
            <p class="clearfix"></p>
            <div id="IsAIS" style="display: none;">
                <img src="~/Images/is_ais.png" alt="" style="max-width: none !important; width: 30px; height: 30px; color: white;">
            </div>
        </div>
        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_EMAIL", L_EMAIL_XX)
            @Html.TextBoxFor(m => m.EMAIL, "",
                        new
                        {
                            @class = "form-control",
                            @title = L_EMAIL_XX,
                            @maxlength = 50
                        })
        </div>
        <p class="clearfix"></p>

        <div class="col-xs-10 col-sm-5"></div>
        <div class="col-xs-2 col-sm-2"></div>
        @*<div class="col-xs-10 col-sm-5">
            @Html.Label("L_REF_NUMBER_XX", L_REF_NUMBER_XX)
            @Html.TextBoxFor(m => m.SALES_REP, "",
                        new
                        {
                            @id = "L_SALE_REP",
                            @class = "form-control",
                            @maxlength = 50

                        })
        </div>*@
        <p class="clearfix"></p>

        <p class="clearfix"></p>
        <div class="col-xs-10 col-sm-5">
            <div class="short-div">@Html.Label("L_INSTALL_ADDRESS", L_INSTALL_ADDRESS_XX)</div>
            <p class="clearfix"></p>
            <div class="short-div">@Html.Label("L_SELECT_ADDRESS_TYPE", L_SELECT_ADDRESS_TYPE_XX)</div>
            <div class="short-div">
                <label for="R_BUILD">
                    @L_BUILDING_XX
                    <input type="radio" name="R_BUILD" id="R_BUILD" value="B" onclick="onBuildChange()">
                </label>
                &nbsp;&nbsp;
                <label for="R_MOOBAN">
                    @L_VILLAGE_XX
                    <input type="radio" name="R_BUILD" id="R_MOOBAN" value="V" onclick="onBuildChange()">
                </label>
                @Html.HiddenFor(m => m.SELECT_ADDRESS_TYPE)
            </div>
            <p class="clearfix"></p>
            <div class="short-div">@Html.Label("H_TYPE_BUILDING", H_TYPE_BUILDING_XX)</div>
            <div class="short-div">
                <label for="R_TYPE_MY_HOME">
                    @L_TYPE_MY_HOME_XX
                    <input type="radio" name="R_TYPE_BUILD" id="R_TYPE_MY_HOME" value="N" onclick="onTypeBuildChange()">
                </label>
                &nbsp;&nbsp;
                <label for="R_TYPE_RENTAL">
                    @L_TYPE_RENTAL_XX
                    <input type="radio" name="R_TYPE_BUILD" id="R_TYPE_RENTAL" value="Y" onclick="onTypeBuildChange()">
                </label>
                @Html.HiddenFor(m => m.SELECT_TYPE_BUILD)
            </div>
            <p class="clearfix"></p>
            <div class="short-div">
                <div id="divCondo">
                    @Html.Label("L_BUILDING_NAME", L_BUILDING_NAME_XX)
                </div>
                <div id="divMoban" style="display: none;">
                    @Html.Label("L_VILLAGE_NAME", L_VILLAGE_NAME_XX)
                </div>
                @Html.TextBoxFor(m => m.BUILDING, "",
                        new
                        {
                            @class = "form-control",
                            @maxlength = 50
                        })
            </div>
        </div>

        <div class="col-xs-10 col-sm-7">
        </div>

        <p class="clearfix"></p>

        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_PROVINCE", L_PROVINCE_XX)
            <select class="select" style="width: 100%" id="PROVINCE" name="PROVINCE" onchange="onProvinceChange()">
                <option disabled selected value="">@L_PROVINCE_XX</option>
            </select>
        </div>
        <div class="col-xs-2 col-sm-2"></div>
        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_DISTRICT", L_DISTRICT_XX)
            <select class="select" style="width: 100%" id="DISTRICT" name="DISTRICT" onchange="onAmphurChange()">
                <option disabled selected value="">@L_DISTRICT_XX</option>
            </select>
        </div>
        <p class="clearfix"></p>

        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_SUB_DISTRICT", L_SUB_DISTRICT_XX)
            <select class="select" style="width: 100%" id="SUB_DISTRICT" name="SUB_DISTRICT" onchange="onTumbolChange()">
                <option disabled selected value="">@L_SUB_DISTRICT_XX</option>
            </select>
        </div>
        <div class="col-xs-2 col-sm-2">
        </div>
        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_POSTAL_CODE", L_POSTAL_CODE_XX)
            <select class="select" style="width: 100%" id="POSTAL_CODE" name="POSTAL_CODE" onchange="onZipCodeChange()">
                <option disabled selected value="">@L_POSTAL_CODE_XX</option>
            </select>
        </div>
        <p class="clearfix"></p>

        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_HOUSE_NO", L_HOUSE_NO_XX)
            @Html.TextBoxFor(m => m.HOUSE_NO, "",
                        new
                        {
                            @class = "form-control",
                            @title = L_HOUSE_NO_XX,
                            @maxlength = 50
                        })
        </div>
        <div class="col-xs-2 col-sm-2"></div>
        <div class="col-xs-10 col-sm-5">
            @Html.Label("L_SOI", L_SOI_XX)
            @Html.TextBoxFor(m => m.SOI, "",
                        new
                        {
                            @class = "form-control",
                            @title = L_SOI_XX,
                            @maxlength = 50
                        })
        </div>
        <p class="clearfix"></p>

        <div class="col-xs-10  col-sm-5">
            @Html.Label("L_ROAD", L_ROAD_XX)
            @Html.TextBoxFor(m => m.ROAD, "",
                        new
                        {
                            @class = "form-control",
                            @title = L_ROAD_XX,
                            @maxlength = 50
                        })

            <p class="clearfix"></p>

            @Html.Label("L_CONTACT_TIME", L_CONTACT_TIME_XX)
            <select class="select" style="width: 100%" id="CONTACT_TIME" name="CONTACT_TIME"></select>

            <p class="clearfix"></p>
            @Html.Label("L_ENTER_WORD", L_ENTER_WORD_XX)
            <input type="text" id="defaultReal" name="defaultReal" class="form-control">
        </div>
        <div class="col-xs-10 col-sm-7">
            @*<img src='@LeaveMessagePic' class="pull-right img-responsive" style="padding-top: 25px;" />*@

        </div>
        <p class="clearfix"></p>
        <div id="dvforstaff" class="col-md-10 col-md-offset-1 col-xs-12">
            <div id="divShowStaffSection">
                <i class="fa fa-chevron-right tgreen"></i>
                @Html.Raw(L_FOR_EMPLOYEE_XX)
                <i class="fa fa-plus tgreen"></i>
            </div>
            <p class="clearfix"></p>
            <div id="divStaffSection" style="display: none;">
                <div class="col-sm-6 col-xs-12" >
                    @Html.TextBoxFor(m => m.EMP_ID, "",
                        new
                        {
                            @title = L_EMPLOYEE_ID_XX, /*L_EMPLOYEE_CODE_XX*/
                            @id = "L_STAFF_ID",
                            @class = "form-control",
                            @maxlength = 50,
                            @placeholder = L_EMPLOYEE_ID_XX                            
                        })
                </div>
                <div class="col-sm-6 col-xs-12">
                    @Html.TextBoxFor(m => m.COMPANY_NAME, "",
                        new
                        {
                            @title = L_COMPANY_NAME_XX,
                            @id = "L_COM_NAME",
                            @class = "dis k-textbox form-control",
                            @maxlength = 50,
                            @placeholder = L_COMPANY_NAME_XX,
                            @Value = Ref,
                            @readonly = "readonly"
                        })
                </div>
                <p class="clearfix"></p>
                <div class="col-sm-6 col-xs-12">
                    @Html.TextBoxFor(m => m.LOCATION_CODE, "",
                        new
                        {
                            @title = L_LOCATION_CODE_XXX,/*L_LOCATION_CODE_XX*/
                            @id = "L_LOC_CODE",
                            @class = "form-control",
                            @maxlength = 50,
                            @placeholder = L_LOCATION_CODE_XXX
                        })

                </div>
                <p class="clearfix"></p>
            </div>
            <div id="divStaffSectionComName" style="display: none;">
                <div class="col-sm-6 col-xs-12" >
                    @Html.TextBoxFor(m => m.COMPANY_NAME, "",
                        new
                        {
                            @title = L_COMPANY_NAME_XX,
                            @id = "L_COM_NAME",
                            @class = "dis k-textbox form-control",
                            @maxlength = 50,
                            @placeholder = L_COMPANY_NAME_XX,
                            @Value = Ref,
                            @readonly = "readonly"
                        })
                </div>
            </div>
        </div>
        <p class="clearfix"></p>

    </div>
    <p class="clearfix"></p>


    <p class="clearfix"></p>
    <p class="clearfix page-header"></p>

    <div class="col-md-12 text-center">
        <a class="btn btn-default btn-for-xs" role="button" style="color: #8DC63F;" onclick="Clear()">@B_CLEAR_XX</a>
        <a class="btn btn-success rippler rippler-default btn-for-xs" role="button" onclick="Register();">@B_REGISTER_XX</a>
    </div>
    <p class="clearfix"></p>
    <p class="clearfix"></p>

    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="modal001_label">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style="border-bottom: none;">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="Clear()"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div class="add-border-rounded-green">
                        <p class="clearfix"></p>
                        <h5 id="modal001txt" class="text-center">
                            <span id="LastPopupMessage"></span>
                        </h5>
                        <p class="clearfix"></p>
                        <div class="col-md-12 text-center">
                            <p class="clearfix"></p>
                            <button type="button" id="modal001btn" class="btn btn-default" data-dismiss="modal" onclick="Clear()">&nbsp; @B_CLOSE_XX &nbsp; </button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="border-top: none;">
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="myModalerror" tabindex="-1" role="dialog" aria-labelledby="modal001_label">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header" style="border-bottom: none;">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close" onclick="Clear()"><span aria-hidden="true">&times;</span></button>
                </div>
                <div class="modal-body">
                    <div class="add-border-rounded-green">
                        <p class="clearfix"></p>
                        <h3 id="modal001txt1" class="text-center">
                            <span id="LastPopupMessageError"></span>
                        </h3>
                        <p class="clearfix"></p>
                        <div class="col-md-12 text-center">
                            <p class="clearfix"></p>
                            <button type="button" id="modal001btn1" class="btn btn-default" data-dismiss="modal" onclick="">&nbsp; @B_CLOSE_XX &nbsp; </button>
                        </div>
                    </div>
                </div>
                <div class="modal-footer" style="border-top: none;">
                </div>
            </div>
        </div>
    </div>
}

    <script type="text/javascript">
    var language = "";
    language = "@language";

    var digitalData = {};
    digitalData.page = {};
    digitalData.page.pageInfo = {};

    var validateModel = new Array();

    $(document).ready(function () {
        //document.getElementById("L_SALE_REP").disabled = true;
        var saveStatus = '@SaveStatus';
        var ref = '@Ref';
        var expried = '@LEAVEMESSAGEXX_EXPIRED';
        if (expried != '') {
            window.history.replaceState({}, document.title, "/Leavemessage/Partner");
        }

        if (ref != '') {
            var stateObj = { salerep : ref };
            window.history.replaceState(stateObj, document.title, "/Leavemessage/Partner");
            var obj = stateObj;
            $('#L_SALE_REP').val(obj.salerep);
            //document.getElementById("L_SALE_REP").disabled = true;
        }

        if (saveStatus != '') {

            digitalData = {
                page: {
                    pageInfo: {
                        pageName: "newfibre:th:Leavemessage:Partner",
                        site: "newfibre",
                        language: "th"
                    },
                    category: {
                        pageType: "content page",
                        primaryCategory: "newfibre:th:Leavemessage"
                    }
                }
            }


            if (saveStatus == "Y") {
                PopupMessage('@Html.Raw(L_POPUP_SUCCESS_XX.Replace("{0}", RefNo))');
            }
            else {
                PopupMessage('@Html.Raw(L_POPUP_ERROR_XX)');
            }
            $('#myModal').modal('show');
        }
        else {
            digitalData = {
                page: {
                    pageInfo: {
                        pageName: "newfibre:th:Leavemessage:Partner",
                        site: "newfibre",
                        language: "th"
                    },
                    category: {
                        pageType: "content page",
                        primaryCategory: "newfibre:th:Leavemessage"
                    }
                }
            }
            //.pageBottom().track("page load");
        }
       // 





        $("#R_MOOBAN").prop("checked", true);
        //$("#R_BUILD").prop("checked", true);
        $("#SELECT_ADDRESS_TYPE").val("V");
        //getServiceSpeed();
        getProvince();
        getContactTime();

        $('#NAME').keyup(function () {
            CheckKeyUps("NAME", "@FBB_Con_CharNotonName");
        });
        $('#SURNAME').keyup(function () {
            CheckKeyUps("SURNAME", "@FBB_Con_CharNotonName");
        });
        $("#CONTACT_MOBILE").keyup(function () {
            CheckKeyUps("CONTACT_MOBILE", '@FBB_Input_MobileNo','M');
        });
        $('#BUILDING').keyup(function () {
            CheckKeyUps("BUILDING", "@FBB_Con_Input_Building");
        });
        $('#HOUSE_NO').keyup(function () {
            CheckKeyUps("HOUSE_NO", "@FBB_Con_Input_Home_Number");
        });
        $('#SOI').keyup(function () {
            CheckKeyUps("SOI", "@FBB_Con_Input_Soi");
        });
        $('#ROAD').keyup(function () {
            CheckKeyUps("ROAD", "@FBB_Con_Input_Road");
        });

        if (@FullUrl.IndexOf("?") != -1) {
            $('#divShowStaffSection').css("cursor", "pointer");
            //const params = new URLSearchParams(window.location.search);
            //const flagParam = params.get('Show');
            $('#divShowStaffSection').click(function () {
                if ('@Show' == "Y") {
                    $("#divStaffSection").slideToggle("fast");
                    $('i.fa.fa-plus').toggleClass('fa-minus');
                }
                else if ('@Show' == "N") {
                    $("#divStaffSectionComName").slideToggle("fast");
                    $('i.fa.fa-plus').toggleClass('fa-minus');
                }
            });
        }
        else {
            var forstaff = document.getElementById("dvforstaff");
            forstaff.style.display = "none";
        }
        

        //$('#divShowStaffSection').click(function () {
        //    $("#divStaffSection").slideToggle("fast");
        //    $('i.fa.fa-plus').toggleClass('fa-minus');
        //});


        $('#defaultReal').realperson({
            length: 5,
            regenerate: 'Change',
            dot: '*',
            dots: $.realperson.defaultDots,
            chars: $.realperson.alphanumeric
        });

        $("#CONTACT_MOBILE").focusout(function () {
            var a = [];

            $("#IsAIS").hide();
            $("#MOBILE_IS_AIS").val("N");

            a.pop({ id: "CONTACT_MOBILE" });
            a.push({ id: "CONTACT_MOBILE" });

            var chk = ValidationProcessing(a, "err001");
            if (chk) {
                if ($("#CONTACT_MOBILE").val().length == 10) {
                    if (GetCheckMobileOnlineQuery()) {
                        $("#IsAIS").show();
                        $("#MOBILE_IS_AIS").val("Y");
                    }
                    $("#CONTACT_MOBILE")[0].className = "form-control";
                }
                else {
                    $("#CONTACT_MOBILE")[0].className = "form-control errorinput";
                }
            }

        });
    });

    function ValidateCaptcha() {
        var cap = false;
        $.ajax({
            url: '/Process/ValidateCaptcha',
            data: { inputUser: $('#defaultReal').val(), inputHash: $('#defaultReal').realperson('getHash') },
            dataType: "json",
            async: false,
            type: 'POST',
            success: function (response) {
                if (!response) {
                    $("#defaultReal")[0].className = "form-control errorinput";
                    $('#defaultReal').realperson({
                        length: 5,
                        regenerate: 'Change',
                        dot: '*',
                        dots: $.realperson.defaultDots,
                        chars: $.realperson.alphanumeric
                    });
                }
                else {
                    cap = true;
                }
            }
        });
        return cap;
    }

    //function GetValueRef() {
    //    const queryString = window.location.search;
    //    const urlParams = new URLSearchParams(queryString);
    //    const product = urlParams.get('Ref');


    //}

    function Register() {

        // Update 17.4 Script Adobe Analytic
        digitalData.customLinkName = "newfibre:th:Leavemessage:Partner:register-click";


        // Update 17.11 Script
        fbq('track', 'Click_Submit_Fibre_Leavemessage');

        var a = [];

        a.pop({ id: "NAME" });
        a.pop({ id: "SURNAME" });
        a.pop({ id: "CONTACT_MOBILE" });
        a.pop({ id: "PROVINCE" });
        a.pop({ id: "DISTRICT" });
        a.pop({ id: "SUB_DISTRICT" });
        a.pop({ id: "POSTAL_CODE" });
        a.pop({ id: "BUILDING" });
        a.pop({ id: "HOUSE_NO" });
        a.pop({ id: "CONTACT_TIME" });
        if ('@Show' == "Y") {
            a.pop({ id: "L_STAFF_ID" });
            a.pop({ id: "L_LOC_CODE" });
        }
        

        a.push({ id: "NAME" });
        a.push({ id: "SURNAME" });
        a.push({ id: "CONTACT_MOBILE", condition: "MobileNumber" });
        a.push({ id: "PROVINCE" });
        a.push({ id: "DISTRICT" });
        a.push({ id: "SUB_DISTRICT" });
        a.push({ id: "POSTAL_CODE" });
        a.push({ id: "BUILDING" });
        a.push({ id: "HOUSE_NO" });
        a.push({ id: "CONTACT_TIME" });
        if ('@Show' == "Y") {
            a.push({ id: "L_STAFF_ID" });
            a.push({ id: "L_LOC_CODE" });
        }
        


        var chkEmail = true;
        if ($("#EMAIL").val() != "") {
            // a.push({ id: "EMAIL", condition: "Email" });
            chkEmail = validateEmailleavemessageIX($("#EMAIL").val());

            if (chkEmail) {
                $("#EMAIL").removeClass("textFieldFalse").removeClass("form-control errorinput ").addClass("form-control");
            } else {
                $("#EMAIL").addClass("form-control errorinput textFieldFalse");
            }
        }
        else {
            $("#EMAIL").removeClass("form-control errorinput ").addClass("form-control");
        }

        $('#LastPopupMessageError').text('');

        var chk = ValidationProcessing(a, "err001");

        if (chk && chkEmail && ValidateCaptcha()) {
            // Validate Check RadioButton Type Build ( true = pop up alert validate , false = click submit )
            if ($("input[name=R_TYPE_BUILD]:checked").val() == undefined) {
                toastrErrorMessage("@L_MESSAGE_ERROR_RENTAL_XX");                                 
            }
            else {
                //document.getElementById("L_SALE_REP").disabled = false;
                //$("#RegisterForm").submit();
                if ('@Show' == "Y") {
                    if (document.getElementById("L_STAFF_ID").value.trim() == "" && document.getElementById("L_LOC_CODE").value.trim() == "") {
                        toastrErrorMessage("@L_POPUP_LOCATION_CODE_AND_EMPLOYEE_ID_XX");
                    }
                    else if (document.getElementById("L_LOC_CODE").value.trim() == "") {
                        toastrErrorMessage("@L_POPUP_LOCATION_CODE_XX");
                    }
                    else if (document.getElementById("L_STAFF_ID").value.trim() == "") {
                        toastrErrorMessage("@L_POPUP_EMPLOYEE_ID_XX");
                    }
                    else {
                        $("#RegisterForm").submit();
                    }
                }
                else {
                    $("#RegisterForm").submit();
                }                
            }
        }
        else if (chk && !chkEmail && ValidateCaptcha()) {
            toastrErrorMessage("@L_MESSAGE_ERROR_EMAIL_XX");
        }
        
    }

    function validateEmailleavemessageIX(email) {
        var filter = /^(((([a-zA-Z0-9\_\-]{1,50})+(([\.]{1,50}[a-zA-Z0-9\_\-]{1,50}){0,50})){1,95})+@@([\w-]+\.)+[\w-]{2,4})?$/;
        if (email.substr(0, 2) == "-@@" || email.substr(0, 2) == "_@@") {
            return false;
        }
        if (!(email.indexOf('@@') > -1)) {
            return false;
        }
        if (filter.test(email)) {
            return true;
        }
        else {
            return false;
        }
    }

    function Clear() {
        // Update 17.4 Script Adobe Analytic
        digitalData.customLinkName = "Leavemessage:cancel-button";

        // Clear RadioButton Type Build
        $("#R_TYPE_MY_HOME").prop("checked", false);
        $("#R_TYPE_RENTAL").prop("checked", false);
        $("#SELECT_TYPE_BUILD").val("");

        $('#L_LOC_CODE').val("");
        $('#L_ASC_CODE').val("");
        $('#L_STAFF_ID').val("");
        $('#L_SALE_REP').val("");
        $('#L_SALE_REP').disabled = false;

        @*window.location.href = '@UrlRef';*@
        window.location.href = "/LeaveMessage/Partner?Show=" + '@Show' + "&Ref=" + '@Ref';
    }

    function onBuildChange() {

        if ($("#R_BUILD").is(":checked")) {
            $("#SELECT_ADDRESS_TYPE").val("B");
            $("#divCondo").show();
            $("#divMoban").hide();
        }
        else if ($("#R_MOOBAN").is(":checked")) {
            $("#SELECT_ADDRESS_TYPE").val("V");
            $("#divCondo").hide();
            $("#divMoban").show();
        }
    }

    function onTypeBuildChange() {
        if ($("#R_TYPE_MY_HOME").is(":checked")) {
            $("#SELECT_TYPE_BUILD").val("N");
        }
        else if ($("#R_TYPE_RENTAL").is(":checked")) {
            $("#SELECT_TYPE_BUILD").val("Y");
        }
    }

    function getContactTime() {
        $('#CONTACT_TIME').empty();
        var str = '<option disabled selected value="">' + "@L_PLEASE_SELECT_XX" + '</option>';

        var pageCode = "FBBOR043";
        var name = "L_CONTACT_TIME_XX";

        $('#CONTACT_TIME').append(str);
        $.ajax({
            type: "GET",
            url: "/Leavemessage/GetContactTime",
            dataType: "json",
            data: {
                'pageCode': pageCode,
                'name': name
            },
            async: false,
            success: function (data) {
                var strBuilder = '';
                $.each(data, function (i, e) {
                    var s = "";

                    var str = '<option value="' + e.Value + '"' + s + '>' + e.Text + '</option>';
                    strBuilder += str;
                });

                $('#CONTACT_TIME').append(strBuilder);
                $('#CONTACT_TIME').select2();
            }
        });
    }

    function getProvince(province) {
        $('#PROVINCE').empty();
        var str = '<option disabled selected value="">' + "@L_PLEASE_SELECT_XX" + '</option>';

        $('#PROVINCE').append(str);
        $.ajax({
            type: "GET",
            url: "/Leavemessage/GetProvince",
            dataType: "json",
            async: false,
            success: function (data) {
                var strBuilder = '';
                $.each(data, function (i, e) {
                    var s = "";

                    if (province == e.Text) s = "selected";

                    var str = '<option value="' + e.Value + '"' + s + '>' + e.Text + '</option>';
                    strBuilder += str;
                });

                $('#PROVINCE').append(strBuilder);
                $('#PROVINCE').select2();
            }
        });
    }

    function onProvinceChange(amphur, province) {

        var pv = $('#PROVINCE').val();

        if (province != undefined) {
            pv = province;
        }

        $('#DISTRICT').empty();
        $('#SUB_DISTRICT').empty();
        $('#POSTAL_CODE').empty();
        $.ajax({
            type: "GET",
            url: "/Leavemessage/GetAmphur",
            dataType: "json",
            data: { 'provinceFilter': pv },
            async: false,
            success: function (data) {

                var strBuilder = "<option value='' disabled selected >" + "@L_PLEASE_SELECT_XX" + "</option>";
                $.each(data, function (i, e) {
                    var s = "";
                    if (amphur == e.Value) s = "selected";

                    var str = '<option value="' + e.Value + '"' + s + '>' + e.Text + '</option>';
                    strBuilder += str;
                });
                $('#DISTRICT').append(strBuilder);
            }
        });
            $('#DISTRICT').select2();
            $('#SUB_DISTRICT').append("<option value='' disabled selected >" + "@L_SUB_DISTRICT_XX" + "</option>");
        $('#SUB_DISTRICT').select2();
        $('#POSTAL_CODE').append("<option value='' disabled selected >" + "@L_POSTAL_CODE_XX" + "</option>");
        $('#POSTAL_CODE').select2();
    }

    function onAmphurChange(tumbol, amphur, province) {

        $('#SUB_DISTRICT').empty();
        $('#POSTAL_CODE').empty();

        var pv = $('#PROVINCE').val();

        if (province != undefined) {
            pv = province;
        }

        var aphur = ""
        if ($('#DISTRICT').val() != "" && $('#DISTRICT').val() != null) {
            aphur = $('#DISTRICT').val();
        }
        else {
            aphur = amphur;
        }

        $.ajax({
            type: "GET",
            url: "/Leavemessage/GetTumbon",
            async: false,
            data: { 'provinceFilter': pv, 'amphurFilter': aphur },
            dataType: "json",
            success: function (data) {

                var strBuilder = "<option value='' disabled selected >" + "@L_PLEASE_SELECT_XX" + "</option>";
                $.each(data, function (i, e) {

                    var s = "";
                    if (tumbol == e.Value) s = "selected";

                    var str = '<option value="' + e.Value + '"' + s + '>' + e.Text + '</option>';
                    strBuilder += str;
                });

                $('#SUB_DISTRICT').append(strBuilder);
            },
            error: function (data) {
                var dd = data.error;

            }
        });

            $('#SUB_DISTRICT').select2();
            $('#POSTAL_CODE').append("<option value='' disabled selected >" + "@L_POSTAL_CODE_XX" + "</option>");
        $('#POSTAL_CODE').select2();

    }

    function onTumbolChange() {
        $('#POSTAL_CODE').empty();

        var pro = $("#PROVINCE").val();
        var amp = $("#DISTRICT").val();
        var tum = $("#SUB_DISTRICT").val();

        $.ajax({
            type: "GET",
            url: "/Leavemessage/GetCoverageZipCode",
            dataType: "json",
            data: {
                'provinceFilter': pro,
                'amphurFilter': amp,
                'tumbonFilter': tum,
                "sso": ""
            },
            async: false,
            success: function (data) {
                var tempZipCode = "";
                if (data.zipCodeList.length == 1)
                    $("#POSTAL_CODE option[value='']").remove();

                $.each(data.zipCodeList, function (i, e) {
                    var str = '<option value="' + e.Text + '">' + e.Text + '</option>';
                    tempZipCode += str;
                });
                $('#POSTAL_CODE').append(tempZipCode);
                onZipCodeChange();

            }
        });
        $('#POSTAL_CODE').select2();

    }

    function onZipCodeChange() {
        $("#POSTAL_CODE").val($('#POSTAL_CODE').val());
    }

    //R22.07 Issue Check Mobile OnlineQuery
    function GetCheckMobileOnlineQuery() {
        var IsAIS = false;
        $.ajax({
            url: '/CheckCoverage/GetCheckMobileOnlineQuery',
            data: {
                mobileNo: $.trim($("#CONTACT_MOBILE").val()),
                fibreID: '',
                locationCode: ''
            },
            dataType: "json",
            type: 'POST',
            async: false,
            success: function (response) {
                if (response.SubNetworkType == "Pre-paid" || response.SubNetworkType == "Post-paid") {
                    // IsAIS // Pre-paid // Post-paid
                    IsAIS = true;
                }
            }
        });
        return IsAIS;
    }

    function base64_decode(str) {
        if (window.atob) // Internet Explorer 10 and above
            return decodeURIComponent(escape(window.atob(str)));
        else {
            // Cross-Browser Method (compressed)

            // Create Base64 Object
            var Base64 = { _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", encode: function (e) { var t = ""; var n, r, i, s, o, u, a; var f = 0; e = Base64._utf8_encode(e); while (f < e.length) { n = e.charCodeAt(f++); r = e.charCodeAt(f++); i = e.charCodeAt(f++); s = n >> 2; o = (n & 3) << 4 | r >> 4; u = (r & 15) << 2 | i >> 6; a = i & 63; if (isNaN(r)) { u = a = 64 } else if (isNaN(i)) { a = 64 } t = t + this._keyStr.charAt(s) + this._keyStr.charAt(o) + this._keyStr.charAt(u) + this._keyStr.charAt(a) } return t }, decode: function (e) { var t = ""; var n, r, i; var s, o, u, a; var f = 0; e = e.replace(/[^A-Za-z0-9\+\/\=]/g, ""); while (f < e.length) { s = this._keyStr.indexOf(e.charAt(f++)); o = this._keyStr.indexOf(e.charAt(f++)); u = this._keyStr.indexOf(e.charAt(f++)); a = this._keyStr.indexOf(e.charAt(f++)); n = s << 2 | o >> 4; r = (o & 15) << 4 | u >> 2; i = (u & 3) << 6 | a; t = t + String.fromCharCode(n); if (u != 64) { t = t + String.fromCharCode(r) } if (a != 64) { t = t + String.fromCharCode(i) } } t = Base64._utf8_decode(t); return t }, _utf8_encode: function (e) { e = e.replace(/\r\n/g, "\n"); var t = ""; for (var n = 0; n < e.length; n++) { var r = e.charCodeAt(n); if (r < 128) { t += String.fromCharCode(r) } else if (r > 127 && r < 2048) { t += String.fromCharCode(r >> 6 | 192); t += String.fromCharCode(r & 63 | 128) } else { t += String.fromCharCode(r >> 12 | 224); t += String.fromCharCode(r >> 6 & 63 | 128); t += String.fromCharCode(r & 63 | 128) } } return t }, _utf8_decode: function (e) { var t = ""; var n = 0; var r = c1 = c2 = 0; while (n < e.length) { r = e.charCodeAt(n); if (r < 128) { t += String.fromCharCode(r); n++ } else if (r > 191 && r < 224) { c2 = e.charCodeAt(n + 1); t += String.fromCharCode((r & 31) << 6 | c2 & 63); n += 2 } else { c2 = e.charCodeAt(n + 1); c3 = e.charCodeAt(n + 2); t += String.fromCharCode((r & 15) << 12 | (c2 & 63) << 6 | c3 & 63); n += 3 } } return t } }
            // Encode the String
            return decodeURIComponent(escape(Base64.decode(str)));
        }
    }

    function CheckKeyUps(id, RexStr, checkMobile) {
        var strKey = $("#" + id).val();
        var strBuilder = "";
        if (checkMobile == undefined || checkMobile != "M") {
            var filter = new RegExp(RexStr);
            for (var i = 0; i < strKey.length; i++) {
                if (filter.test(strKey.substr(i, 1))) {
                    strBuilder += strKey.substr(i, 1);
                }
            }
        }
        else {
            var filterM = new RegExp(RexStr, "g");
            strBuilder = strKey.match(filterM);
        }
        $("#" + id).val(strBuilder);
    }

    function PopupMessage(msg) {
        $('#LastPopupMessage').append(msg);
        $('#LastPopupMessageError').append(msg);
    }

    </script>
